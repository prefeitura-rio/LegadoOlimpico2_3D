function n5(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Xu(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var uB={exports:{}},a1={},cB={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0=Symbol.for("react.element"),r5=Symbol.for("react.portal"),i5=Symbol.for("react.fragment"),s5=Symbol.for("react.strict_mode"),o5=Symbol.for("react.profiler"),a5=Symbol.for("react.provider"),l5=Symbol.for("react.context"),u5=Symbol.for("react.forward_ref"),c5=Symbol.for("react.suspense"),f5=Symbol.for("react.memo"),d5=Symbol.for("react.lazy"),Hb=Symbol.iterator;function h5(n){return n===null||typeof n!="object"?null:(n=Hb&&n[Hb]||n["@@iterator"],typeof n=="function"?n:null)}var fB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dB=Object.assign,hB={};function ip(n,e,t){this.props=n,this.context=e,this.refs=hB,this.updater=t||fB}ip.prototype.isReactComponent={};ip.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ip.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function pB(){}pB.prototype=ip.prototype;function ow(n,e,t){this.props=n,this.context=e,this.refs=hB,this.updater=t||fB}var aw=ow.prototype=new pB;aw.constructor=ow;dB(aw,ip.prototype);aw.isPureReactComponent=!0;var Gb=Array.isArray,mB=Object.prototype.hasOwnProperty,lw={current:null},gB={key:!0,ref:!0,__self:!0,__source:!0};function vB(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mB.call(e,r)&&!gB.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:n0,type:n,key:s,ref:o,props:i,_owner:lw.current}}function p5(n,e){return{$$typeof:n0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function uw(n){return typeof n=="object"&&n!==null&&n.$$typeof===n0}function m5(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Vb=/\/+/g;function DS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?m5(""+n.key):e.toString(36)}function Qy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case n0:case r5:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+DS(o,0):r,Gb(i)?(t="",n!=null&&(t=n.replace(Vb,"$&/")+"/"),Qy(i,e,t,"",function(f){return f})):i!=null&&(uw(i)&&(i=p5(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vb,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Gb(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+DS(s,a);o+=Qy(s,e,t,l,i)}else if(l=h5(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+DS(s,a++),o+=Qy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uv(n,e,t){if(n==null)return n;var r=[],i=0;return Qy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function g5(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $i={current:null},Zy={transition:null},v5={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Zy,ReactCurrentOwner:lw};pn.Children={map:Uv,forEach:function(n,e,t){Uv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Uv(n,function(){e++}),e},toArray:function(n){return Uv(n,function(e){return e})||[]},only:function(n){if(!uw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};pn.Component=ip;pn.Fragment=i5;pn.Profiler=o5;pn.PureComponent=ow;pn.StrictMode=s5;pn.Suspense=c5;pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v5;pn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=dB({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lw.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)mB.call(e,l)&&!gB.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:n0,type:n.type,key:i,ref:s,props:r,_owner:o}};pn.createContext=function(n){return n={$$typeof:l5,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:a5,_context:n},n.Consumer=n};pn.createElement=vB;pn.createFactory=function(n){var e=vB.bind(null,n);return e.type=n,e};pn.createRef=function(){return{current:null}};pn.forwardRef=function(n){return{$$typeof:u5,render:n}};pn.isValidElement=uw;pn.lazy=function(n){return{$$typeof:d5,_payload:{_status:-1,_result:n},_init:g5}};pn.memo=function(n,e){return{$$typeof:f5,type:n,compare:e===void 0?null:e}};pn.startTransition=function(n){var e=Zy.transition;Zy.transition={};try{n()}finally{Zy.transition=e}};pn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pn.useCallback=function(n,e){return $i.current.useCallback(n,e)};pn.useContext=function(n){return $i.current.useContext(n)};pn.useDebugValue=function(){};pn.useDeferredValue=function(n){return $i.current.useDeferredValue(n)};pn.useEffect=function(n,e){return $i.current.useEffect(n,e)};pn.useId=function(){return $i.current.useId()};pn.useImperativeHandle=function(n,e,t){return $i.current.useImperativeHandle(n,e,t)};pn.useInsertionEffect=function(n,e){return $i.current.useInsertionEffect(n,e)};pn.useLayoutEffect=function(n,e){return $i.current.useLayoutEffect(n,e)};pn.useMemo=function(n,e){return $i.current.useMemo(n,e)};pn.useReducer=function(n,e,t){return $i.current.useReducer(n,e,t)};pn.useRef=function(n){return $i.current.useRef(n)};pn.useState=function(n){return $i.current.useState(n)};pn.useSyncExternalStore=function(n,e,t){return $i.current.useSyncExternalStore(n,e,t)};pn.useTransition=function(){return $i.current.useTransition()};pn.version="18.2.0";cB.exports=pn;var ee=cB.exports;const Mu=o1(ee),lM=n5({__proto__:null,default:Mu},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5=ee,_5=Symbol.for("react.element"),x5=Symbol.for("react.fragment"),S5=Object.prototype.hasOwnProperty,A5=y5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M5={key:!0,ref:!0,__self:!0,__source:!0};function yB(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)S5.call(e,r)&&!M5.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_5,type:n,key:s,ref:o,props:i,_owner:A5.current}}a1.Fragment=x5;a1.jsx=yB;a1.jsxs=yB;uB.exports=a1;var We=uB.exports,uM={},_B={exports:{}},js={},xB={exports:{}},SB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,fe){var re=K.length;K.push(fe);e:for(;0<re;){var se=re-1>>>1,oe=K[se];if(0<i(oe,fe))K[se]=fe,K[re]=oe,re=se;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var fe=K[0],re=K.pop();if(re!==fe){K[0]=re;e:for(var se=0,oe=K.length,Le=oe>>>1;se<Le;){var Oe=2*(se+1)-1,De=K[Oe],Ue=Oe+1,Xe=K[Ue];if(0>i(De,re))Ue<oe&&0>i(Xe,De)?(K[se]=Xe,K[Ue]=re,se=Ue):(K[se]=De,K[Oe]=re,se=Oe);else if(Ue<oe&&0>i(Xe,re))K[se]=Xe,K[Ue]=re,se=Ue;else break e}}return fe}function i(K,fe){var re=K.sortIndex-fe.sortIndex;return re!==0?re:K.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,p=null,m=3,v=!1,x=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var fe=t(f);fe!==null;){if(fe.callback===null)r(f);else if(fe.startTime<=K)r(f),fe.sortIndex=fe.expirationTime,e(l,fe);else break;fe=t(f)}}function C(K){if(E=!1,S(K),!x)if(t(l)!==null)x=!0,ce(I);else{var fe=t(f);fe!==null&&he(C,fe.startTime-K)}}function I(K,fe){x=!1,E&&(E=!1,y(z),z=-1),v=!0;var re=m;try{for(S(fe),p=t(l);p!==null&&(!(p.expirationTime>fe)||K&&!W());){var se=p.callback;if(typeof se=="function"){p.callback=null,m=p.priorityLevel;var oe=se(p.expirationTime<=fe);fe=n.unstable_now(),typeof oe=="function"?p.callback=oe:p===t(l)&&r(l),S(fe)}else r(l);p=t(l)}if(p!==null)var Le=!0;else{var Oe=t(f);Oe!==null&&he(C,Oe.startTime-fe),Le=!1}return Le}finally{p=null,m=re,v=!1}}var B=!1,O=null,z=-1,L=5,N=-1;function W(){return!(n.unstable_now()-N<L)}function ae(){if(O!==null){var K=n.unstable_now();N=K;var fe=!0;try{fe=O(!0,K)}finally{fe?te():(B=!1,O=null)}}else B=!1}var te;if(typeof M=="function")te=function(){M(ae)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,le=ie.port2;ie.port1.onmessage=ae,te=function(){le.postMessage(null)}}else te=function(){A(ae,0)};function ce(K){O=K,B||(B=!0,te())}function he(K,fe){z=A(function(){K(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){x||v||(x=!0,ce(I))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(K){switch(m){case 1:case 2:case 3:var fe=3;break;default:fe=m}var re=m;m=fe;try{return K()}finally{m=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,fe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=m;m=K;try{return fe()}finally{m=re}},n.unstable_scheduleCallback=function(K,fe,re){var se=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?se+re:se):re=se,K){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=re+oe,K={id:h++,callback:fe,priorityLevel:K,startTime:re,expirationTime:oe,sortIndex:-1},re>se?(K.sortIndex=re,e(f,K),t(l)===null&&K===t(f)&&(E?(y(z),z=-1):E=!0,he(C,re-se))):(K.sortIndex=oe,e(l,K),x||v||(x=!0,ce(I))),K},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(K){var fe=m;return function(){var re=m;m=fe;try{return K.apply(this,arguments)}finally{m=re}}}})(SB);xB.exports=SB;var E5=xB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AB=ee,Vs=E5;function qe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MB=new Set,Sg={};function Cf(n,e){kh(n,e),kh(n+"Capture",e)}function kh(n,e){for(Sg[n]=e,n=0;n<e.length;n++)MB.add(e[n])}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cM=Object.prototype.hasOwnProperty,w5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wb={},jb={};function T5(n){return cM.call(jb,n)?!0:cM.call(Wb,n)?!1:w5.test(n)?jb[n]=!0:(Wb[n]=!0,!1)}function C5(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b5(n,e,t,r){if(e===null||typeof e>"u"||C5(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function es(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xi[n]=new es(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xi[e]=new es(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xi[n]=new es(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xi[n]=new es(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xi[n]=new es(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xi[n]=new es(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xi[n]=new es(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xi[n]=new es(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xi[n]=new es(n,5,!1,n.toLowerCase(),null,!1,!1)});var cw=/[\-:]([a-z])/g;function fw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(cw,fw);xi[e]=new es(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(cw,fw);xi[e]=new es(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(cw,fw);xi[e]=new es(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xi[n]=new es(n,1,!1,n.toLowerCase(),null,!1,!1)});xi.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xi[n]=new es(n,1,!1,n.toLowerCase(),null,!0,!0)});function dw(n,e,t,r){var i=xi.hasOwnProperty(e)?xi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b5(e,t,i,r)&&(t=null),r||i===null?T5(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Pl=AB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kv=Symbol.for("react.element"),uh=Symbol.for("react.portal"),ch=Symbol.for("react.fragment"),hw=Symbol.for("react.strict_mode"),fM=Symbol.for("react.profiler"),EB=Symbol.for("react.provider"),wB=Symbol.for("react.context"),pw=Symbol.for("react.forward_ref"),dM=Symbol.for("react.suspense"),hM=Symbol.for("react.suspense_list"),mw=Symbol.for("react.memo"),gu=Symbol.for("react.lazy"),TB=Symbol.for("react.offscreen"),Xb=Symbol.iterator;function ym(n){return n===null||typeof n!="object"?null:(n=Xb&&n[Xb]||n["@@iterator"],typeof n=="function"?n:null)}var hr=Object.assign,OS;function Ym(n){if(OS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);OS=e&&e[1]||""}return`
`+OS+n}var FS=!1;function NS(n,e){if(!n||FS)return"";FS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){r=f}n.call(e.prototype)}else{try{throw Error()}catch(f){r=f}n()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{FS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ym(n):""}function R5(n){switch(n.tag){case 5:return Ym(n.type);case 16:return Ym("Lazy");case 13:return Ym("Suspense");case 19:return Ym("SuspenseList");case 0:case 2:case 15:return n=NS(n.type,!1),n;case 11:return n=NS(n.type.render,!1),n;case 1:return n=NS(n.type,!0),n;default:return""}}function pM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ch:return"Fragment";case uh:return"Portal";case fM:return"Profiler";case hw:return"StrictMode";case dM:return"Suspense";case hM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case wB:return(n.displayName||"Context")+".Consumer";case EB:return(n._context.displayName||"Context")+".Provider";case pw:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case mw:return e=n.displayName||null,e!==null?e:pM(n.type)||"Memo";case gu:e=n._payload,n=n._init;try{return pM(n(e))}catch{}}return null}function P5(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pM(e);case 8:return e===hw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function CB(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function I5(n){var e=CB(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zv(n){n._valueTracker||(n._valueTracker=I5(n))}function bB(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=CB(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function M_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mM(n,e){var t=e.checked;return hr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Jb(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=zu(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RB(n,e){e=e.checked,e!=null&&dw(n,"checked",e,!1)}function gM(n,e){RB(n,e);var t=zu(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?vM(n,e.type,t):e.hasOwnProperty("defaultValue")&&vM(n,e.type,zu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Kb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function vM(n,e,t){(e!=="number"||M_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var qm=Array.isArray;function Th(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+zu(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function yM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qe(91));return hr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(qe(92));if(qm(t)){if(1<t.length)throw Error(qe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:zu(t)}}function PB(n,e){var t=zu(e.value),r=zu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function qb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function IB(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _M(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?IB(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hv,BB=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Hv=Hv||document.createElement("div"),Hv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ag(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ng={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B5=["Webkit","ms","Moz","O"];Object.keys(ng).forEach(function(n){B5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ng[e]=ng[n]})});function LB(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ng.hasOwnProperty(n)&&ng[n]?(""+e).trim():e+"px"}function DB(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=LB(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var L5=hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xM(n,e){if(e){if(L5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qe(62))}}function SM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var AM=null;function gw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var MM=null,Ch=null,bh=null;function Qb(n){if(n=s0(n)){if(typeof MM!="function")throw Error(qe(280));var e=n.stateNode;e&&(e=d1(e),MM(n.stateNode,n.type,e))}}function OB(n){Ch?bh?bh.push(n):bh=[n]:Ch=n}function FB(){if(Ch){var n=Ch,e=bh;if(bh=Ch=null,Qb(n),e)for(n=0;n<e.length;n++)Qb(e[n])}}function NB(n,e){return n(e)}function UB(){}var US=!1;function kB(n,e,t){if(US)return n(e,t);US=!0;try{return NB(n,e,t)}finally{US=!1,(Ch!==null||bh!==null)&&(UB(),FB())}}function Mg(n,e){var t=n.stateNode;if(t===null)return null;var r=d1(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(qe(231,e,typeof t));return t}var EM=!1;if(El)try{var _m={};Object.defineProperty(_m,"passive",{get:function(){EM=!0}}),window.addEventListener("test",_m,_m),window.removeEventListener("test",_m,_m)}catch{EM=!1}function D5(n,e,t,r,i,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var rg=!1,E_=null,w_=!1,wM=null,O5={onError:function(n){rg=!0,E_=n}};function F5(n,e,t,r,i,s,o,a,l){rg=!1,E_=null,D5.apply(O5,arguments)}function N5(n,e,t,r,i,s,o,a,l){if(F5.apply(this,arguments),rg){if(rg){var f=E_;rg=!1,E_=null}else throw Error(qe(198));w_||(w_=!0,wM=f)}}function bf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function zB(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Zb(n){if(bf(n)!==n)throw Error(qe(188))}function U5(n){var e=n.alternate;if(!e){if(e=bf(n),e===null)throw Error(qe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Zb(i),n;if(s===r)return Zb(i),e;s=s.sibling}throw Error(qe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(t.alternate!==r)throw Error(qe(190))}if(t.tag!==3)throw Error(qe(188));return t.stateNode.current===t?n:e}function HB(n){return n=U5(n),n!==null?GB(n):null}function GB(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=GB(n);if(e!==null)return e;n=n.sibling}return null}var VB=Vs.unstable_scheduleCallback,$b=Vs.unstable_cancelCallback,k5=Vs.unstable_shouldYield,z5=Vs.unstable_requestPaint,Tr=Vs.unstable_now,H5=Vs.unstable_getCurrentPriorityLevel,vw=Vs.unstable_ImmediatePriority,WB=Vs.unstable_UserBlockingPriority,T_=Vs.unstable_NormalPriority,G5=Vs.unstable_LowPriority,jB=Vs.unstable_IdlePriority,l1=null,Ea=null;function V5(n){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(l1,n,void 0,(n.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:X5,W5=Math.log,j5=Math.LN2;function X5(n){return n>>>=0,n===0?32:31-(W5(n)/j5|0)|0}var Gv=64,Vv=4194304;function Qm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function C_(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Qm(a):(s&=o,s!==0&&(r=Qm(s)))}else o=t&~i,o!==0?r=Qm(o):s!==0&&(r=Qm(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Go(e),i=1<<t,r|=n[t],e&=~i;return r}function J5(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K5(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Go(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=J5(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function TM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function XB(){var n=Gv;return Gv<<=1,!(Gv&4194240)&&(Gv=64),n}function kS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function r0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Go(e),n[e]=t}function Y5(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Go(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function yw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Go(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Dn=0;function JB(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var KB,_w,YB,qB,QB,CM=!1,Wv=[],Cu=null,bu=null,Ru=null,Eg=new Map,wg=new Map,xu=[],q5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eR(n,e){switch(n){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":bu=null;break;case"mouseover":case"mouseout":Ru=null;break;case"pointerover":case"pointerout":Eg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wg.delete(e.pointerId)}}function xm(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=s0(e),e!==null&&_w(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Q5(n,e,t,r,i){switch(e){case"focusin":return Cu=xm(Cu,n,e,t,r,i),!0;case"dragenter":return bu=xm(bu,n,e,t,r,i),!0;case"mouseover":return Ru=xm(Ru,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Eg.set(s,xm(Eg.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wg.set(s,xm(wg.get(s)||null,n,e,t,r,i)),!0}return!1}function ZB(n){var e=nf(n.target);if(e!==null){var t=bf(e);if(t!==null){if(e=t.tag,e===13){if(e=zB(t),e!==null){n.blockedOn=e,QB(n.priority,function(){YB(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $y(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=bM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);AM=r,t.target.dispatchEvent(r),AM=null}else return e=s0(t),e!==null&&_w(e),n.blockedOn=t,!1;e.shift()}return!0}function tR(n,e,t){$y(n)&&t.delete(e)}function Z5(){CM=!1,Cu!==null&&$y(Cu)&&(Cu=null),bu!==null&&$y(bu)&&(bu=null),Ru!==null&&$y(Ru)&&(Ru=null),Eg.forEach(tR),wg.forEach(tR)}function Sm(n,e){n.blockedOn===e&&(n.blockedOn=null,CM||(CM=!0,Vs.unstable_scheduleCallback(Vs.unstable_NormalPriority,Z5)))}function Tg(n){function e(i){return Sm(i,n)}if(0<Wv.length){Sm(Wv[0],n);for(var t=1;t<Wv.length;t++){var r=Wv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Cu!==null&&Sm(Cu,n),bu!==null&&Sm(bu,n),Ru!==null&&Sm(Ru,n),Eg.forEach(e),wg.forEach(e),t=0;t<xu.length;t++)r=xu[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<xu.length&&(t=xu[0],t.blockedOn===null);)ZB(t),t.blockedOn===null&&xu.shift()}var Rh=Pl.ReactCurrentBatchConfig,b_=!0;function $5(n,e,t,r){var i=Dn,s=Rh.transition;Rh.transition=null;try{Dn=1,xw(n,e,t,r)}finally{Dn=i,Rh.transition=s}}function eH(n,e,t,r){var i=Dn,s=Rh.transition;Rh.transition=null;try{Dn=4,xw(n,e,t,r)}finally{Dn=i,Rh.transition=s}}function xw(n,e,t,r){if(b_){var i=bM(n,e,t,r);if(i===null)YS(n,e,r,R_,t),eR(n,r);else if(Q5(i,n,e,t,r))r.stopPropagation();else if(eR(n,r),e&4&&-1<q5.indexOf(n)){for(;i!==null;){var s=s0(i);if(s!==null&&KB(s),s=bM(n,e,t,r),s===null&&YS(n,e,r,R_,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else YS(n,e,r,null,t)}}var R_=null;function bM(n,e,t,r){if(R_=null,n=gw(r),n=nf(n),n!==null)if(e=bf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=zB(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return R_=n,null}function $B(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H5()){case vw:return 1;case WB:return 4;case T_:case G5:return 16;case jB:return 536870912;default:return 16}default:return 16}}var Eu=null,Sw=null,e_=null;function eL(){if(e_)return e_;var n,e=Sw,t=e.length,r,i="value"in Eu?Eu.value:Eu.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return e_=i.slice(n,1<r?1-r:void 0)}function t_(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jv(){return!0}function nR(){return!1}function Xs(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jv:nR,this.isPropagationStopped=nR,this}return hr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jv)},persist:function(){},isPersistent:jv}),e}var sp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aw=Xs(sp),i0=hr({},sp,{view:0,detail:0}),tH=Xs(i0),zS,HS,Am,u1=hr({},i0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Am&&(Am&&n.type==="mousemove"?(zS=n.screenX-Am.screenX,HS=n.screenY-Am.screenY):HS=zS=0,Am=n),zS)},movementY:function(n){return"movementY"in n?n.movementY:HS}}),rR=Xs(u1),nH=hr({},u1,{dataTransfer:0}),rH=Xs(nH),iH=hr({},i0,{relatedTarget:0}),GS=Xs(iH),sH=hr({},sp,{animationName:0,elapsedTime:0,pseudoElement:0}),oH=Xs(sH),aH=hr({},sp,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lH=Xs(aH),uH=hr({},sp,{data:0}),iR=Xs(uH),cH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dH[n])?!!e[n]:!1}function Mw(){return hH}var pH=hr({},i0,{key:function(n){if(n.key){var e=cH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=t_(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mw,charCode:function(n){return n.type==="keypress"?t_(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?t_(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mH=Xs(pH),gH=hr({},u1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sR=Xs(gH),vH=hr({},i0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mw}),yH=Xs(vH),_H=hr({},sp,{propertyName:0,elapsedTime:0,pseudoElement:0}),xH=Xs(_H),SH=hr({},u1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),AH=Xs(SH),MH=[9,13,27,32],Ew=El&&"CompositionEvent"in window,ig=null;El&&"documentMode"in document&&(ig=document.documentMode);var EH=El&&"TextEvent"in window&&!ig,tL=El&&(!Ew||ig&&8<ig&&11>=ig),oR=String.fromCharCode(32),aR=!1;function nL(n,e){switch(n){case"keyup":return MH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rL(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fh=!1;function wH(n,e){switch(n){case"compositionend":return rL(e);case"keypress":return e.which!==32?null:(aR=!0,oR);case"textInput":return n=e.data,n===oR&&aR?null:n;default:return null}}function TH(n,e){if(fh)return n==="compositionend"||!Ew&&nL(n,e)?(n=eL(),e_=Sw=Eu=null,fh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tL&&e.locale!=="ko"?null:e.data;default:return null}}var CH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CH[n.type]:e==="textarea"}function iL(n,e,t,r){OB(r),e=P_(e,"onChange"),0<e.length&&(t=new Aw("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var sg=null,Cg=null;function bH(n){mL(n,0)}function c1(n){var e=ph(n);if(bB(e))return n}function RH(n,e){if(n==="change")return e}var sL=!1;if(El){var VS;if(El){var WS="oninput"in document;if(!WS){var uR=document.createElement("div");uR.setAttribute("oninput","return;"),WS=typeof uR.oninput=="function"}VS=WS}else VS=!1;sL=VS&&(!document.documentMode||9<document.documentMode)}function cR(){sg&&(sg.detachEvent("onpropertychange",oL),Cg=sg=null)}function oL(n){if(n.propertyName==="value"&&c1(Cg)){var e=[];iL(e,Cg,n,gw(n)),kB(bH,e)}}function PH(n,e,t){n==="focusin"?(cR(),sg=e,Cg=t,sg.attachEvent("onpropertychange",oL)):n==="focusout"&&cR()}function IH(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return c1(Cg)}function BH(n,e){if(n==="click")return c1(e)}function LH(n,e){if(n==="input"||n==="change")return c1(e)}function DH(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Wo=typeof Object.is=="function"?Object.is:DH;function bg(n,e){if(Wo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!cM.call(e,i)||!Wo(n[i],e[i]))return!1}return!0}function fR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dR(n,e){var t=fR(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=fR(t)}}function aL(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?aL(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function lL(){for(var n=window,e=M_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=M_(n.document)}return e}function ww(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function OH(n){var e=lL(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&aL(t.ownerDocument.documentElement,t)){if(r!==null&&ww(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=dR(t,s);var o=dR(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var FH=El&&"documentMode"in document&&11>=document.documentMode,dh=null,RM=null,og=null,PM=!1;function hR(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;PM||dh==null||dh!==M_(r)||(r=dh,"selectionStart"in r&&ww(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),og&&bg(og,r)||(og=r,r=P_(RM,"onSelect"),0<r.length&&(e=new Aw("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=dh)))}function Xv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var hh={animationend:Xv("Animation","AnimationEnd"),animationiteration:Xv("Animation","AnimationIteration"),animationstart:Xv("Animation","AnimationStart"),transitionend:Xv("Transition","TransitionEnd")},jS={},uL={};El&&(uL=document.createElement("div").style,"AnimationEvent"in window||(delete hh.animationend.animation,delete hh.animationiteration.animation,delete hh.animationstart.animation),"TransitionEvent"in window||delete hh.transitionend.transition);function f1(n){if(jS[n])return jS[n];if(!hh[n])return n;var e=hh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in uL)return jS[n]=e[t];return n}var cL=f1("animationend"),fL=f1("animationiteration"),dL=f1("animationstart"),hL=f1("transitionend"),pL=new Map,pR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ju(n,e){pL.set(n,e),Cf(e,[n])}for(var XS=0;XS<pR.length;XS++){var JS=pR[XS],NH=JS.toLowerCase(),UH=JS[0].toUpperCase()+JS.slice(1);Ju(NH,"on"+UH)}Ju(cL,"onAnimationEnd");Ju(fL,"onAnimationIteration");Ju(dL,"onAnimationStart");Ju("dblclick","onDoubleClick");Ju("focusin","onFocus");Ju("focusout","onBlur");Ju(hL,"onTransitionEnd");kh("onMouseEnter",["mouseout","mouseover"]);kh("onMouseLeave",["mouseout","mouseover"]);kh("onPointerEnter",["pointerout","pointerover"]);kh("onPointerLeave",["pointerout","pointerover"]);Cf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zm));function mR(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,N5(r,e,void 0,n),n.currentTarget=null}function mL(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;mR(i,a,f),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;mR(i,a,f),s=l}}}if(w_)throw n=wM,w_=!1,wM=null,n}function Qn(n,e){var t=e[OM];t===void 0&&(t=e[OM]=new Set);var r=n+"__bubble";t.has(r)||(gL(e,n,2,!1),t.add(r))}function KS(n,e,t){var r=0;e&&(r|=4),gL(t,n,r,e)}var Jv="_reactListening"+Math.random().toString(36).slice(2);function Rg(n){if(!n[Jv]){n[Jv]=!0,MB.forEach(function(t){t!=="selectionchange"&&(kH.has(t)||KS(t,!1,n),KS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Jv]||(e[Jv]=!0,KS("selectionchange",!1,e))}}function gL(n,e,t,r){switch($B(e)){case 1:var i=$5;break;case 4:i=eH;break;default:i=xw}t=i.bind(null,e,t,n),i=void 0,!EM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function YS(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nf(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}kB(function(){var f=s,h=gw(t),p=[];e:{var m=pL.get(n);if(m!==void 0){var v=Aw,x=n;switch(n){case"keypress":if(t_(t)===0)break e;case"keydown":case"keyup":v=mH;break;case"focusin":x="focus",v=GS;break;case"focusout":x="blur",v=GS;break;case"beforeblur":case"afterblur":v=GS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=rR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=rH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=yH;break;case cL:case fL:case dL:v=oH;break;case hL:v=xH;break;case"scroll":v=tH;break;case"wheel":v=AH;break;case"copy":case"cut":case"paste":v=lH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=sR}var E=(e&4)!==0,A=!E&&n==="scroll",y=E?m!==null?m+"Capture":null:m;E=[];for(var M=f,S;M!==null;){S=M;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,y!==null&&(C=Mg(M,y),C!=null&&E.push(Pg(M,C,S)))),A)break;M=M.return}0<E.length&&(m=new v(m,x,null,t,h),p.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&t!==AM&&(x=t.relatedTarget||t.fromElement)&&(nf(x)||x[wl]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=t.relatedTarget||t.toElement,v=f,x=x?nf(x):null,x!==null&&(A=bf(x),x!==A||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=f),v!==x)){if(E=rR,C="onMouseLeave",y="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(E=sR,C="onPointerLeave",y="onPointerEnter",M="pointer"),A=v==null?m:ph(v),S=x==null?m:ph(x),m=new E(C,M+"leave",v,t,h),m.target=A,m.relatedTarget=S,C=null,nf(h)===f&&(E=new E(y,M+"enter",x,t,h),E.target=S,E.relatedTarget=A,C=E),A=C,v&&x)t:{for(E=v,y=x,M=0,S=E;S;S=Ed(S))M++;for(S=0,C=y;C;C=Ed(C))S++;for(;0<M-S;)E=Ed(E),M--;for(;0<S-M;)y=Ed(y),S--;for(;M--;){if(E===y||y!==null&&E===y.alternate)break t;E=Ed(E),y=Ed(y)}E=null}else E=null;v!==null&&gR(p,m,v,E,!1),x!==null&&A!==null&&gR(p,A,x,E,!0)}}e:{if(m=f?ph(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var I=RH;else if(lR(m))if(sL)I=LH;else{I=IH;var B=PH}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=BH);if(I&&(I=I(n,f))){iL(p,I,t,h);break e}B&&B(n,m,f),n==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&vM(m,"number",m.value)}switch(B=f?ph(f):window,n){case"focusin":(lR(B)||B.contentEditable==="true")&&(dh=B,RM=f,og=null);break;case"focusout":og=RM=dh=null;break;case"mousedown":PM=!0;break;case"contextmenu":case"mouseup":case"dragend":PM=!1,hR(p,t,h);break;case"selectionchange":if(FH)break;case"keydown":case"keyup":hR(p,t,h)}var O;if(Ew)e:{switch(n){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else fh?nL(n,t)&&(z="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(z="onCompositionStart");z&&(tL&&t.locale!=="ko"&&(fh||z!=="onCompositionStart"?z==="onCompositionEnd"&&fh&&(O=eL()):(Eu=h,Sw="value"in Eu?Eu.value:Eu.textContent,fh=!0)),B=P_(f,z),0<B.length&&(z=new iR(z,n,null,t,h),p.push({event:z,listeners:B}),O?z.data=O:(O=rL(t),O!==null&&(z.data=O)))),(O=EH?wH(n,t):TH(n,t))&&(f=P_(f,"onBeforeInput"),0<f.length&&(h=new iR("onBeforeInput","beforeinput",null,t,h),p.push({event:h,listeners:f}),h.data=O))}mL(p,e)})}function Pg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function P_(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Mg(n,t),s!=null&&r.unshift(Pg(n,s,i)),s=Mg(n,e),s!=null&&r.push(Pg(n,s,i))),n=n.return}return r}function Ed(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function gR(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,f=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&f!==null&&(a=f,i?(l=Mg(t,s),l!=null&&o.unshift(Pg(t,l,a))):i||(l=Mg(t,s),l!=null&&o.push(Pg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var zH=/\r\n?/g,HH=/\u0000|\uFFFD/g;function vR(n){return(typeof n=="string"?n:""+n).replace(zH,`
`).replace(HH,"")}function Kv(n,e,t){if(e=vR(e),vR(n)!==e&&t)throw Error(qe(425))}function I_(){}var IM=null,BM=null;function LM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DM=typeof setTimeout=="function"?setTimeout:void 0,GH=typeof clearTimeout=="function"?clearTimeout:void 0,yR=typeof Promise=="function"?Promise:void 0,VH=typeof queueMicrotask=="function"?queueMicrotask:typeof yR<"u"?function(n){return yR.resolve(null).then(n).catch(WH)}:DM;function WH(n){setTimeout(function(){throw n})}function qS(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Tg(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Tg(e)}function Pu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _R(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var op=Math.random().toString(36).slice(2),Sa="__reactFiber$"+op,Ig="__reactProps$"+op,wl="__reactContainer$"+op,OM="__reactEvents$"+op,jH="__reactListeners$"+op,XH="__reactHandles$"+op;function nf(n){var e=n[Sa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wl]||t[Sa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_R(n);n!==null;){if(t=n[Sa])return t;n=_R(n)}return e}n=t,t=n.parentNode}return null}function s0(n){return n=n[Sa]||n[wl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ph(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(qe(33))}function d1(n){return n[Ig]||null}var FM=[],mh=-1;function Ku(n){return{current:n}}function er(n){0>mh||(n.current=FM[mh],FM[mh]=null,mh--)}function Yn(n,e){mh++,FM[mh]=n.current,n.current=e}var Hu={},Ni=Ku(Hu),xs=Ku(!1),yf=Hu;function zh(n,e){var t=n.type.contextTypes;if(!t)return Hu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ss(n){return n=n.childContextTypes,n!=null}function B_(){er(xs),er(Ni)}function xR(n,e,t){if(Ni.current!==Hu)throw Error(qe(168));Yn(Ni,e),Yn(xs,t)}function vL(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(qe(108,P5(n)||"Unknown",i));return hr({},t,r)}function L_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Hu,yf=Ni.current,Yn(Ni,n),Yn(xs,xs.current),!0}function SR(n,e,t){var r=n.stateNode;if(!r)throw Error(qe(169));t?(n=vL(n,e,yf),r.__reactInternalMemoizedMergedChildContext=n,er(xs),er(Ni),Yn(Ni,n)):er(xs),Yn(xs,t)}var gl=null,h1=!1,QS=!1;function yL(n){gl===null?gl=[n]:gl.push(n)}function JH(n){h1=!0,yL(n)}function Yu(){if(!QS&&gl!==null){QS=!0;var n=0,e=Dn;try{var t=gl;for(Dn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}gl=null,h1=!1}catch(i){throw gl!==null&&(gl=gl.slice(n+1)),VB(vw,Yu),i}finally{Dn=e,QS=!1}}return null}var gh=[],vh=0,D_=null,O_=0,co=[],fo=0,_f=null,yl=1,_l="";function Yc(n,e){gh[vh++]=O_,gh[vh++]=D_,D_=n,O_=e}function _L(n,e,t){co[fo++]=yl,co[fo++]=_l,co[fo++]=_f,_f=n;var r=yl;n=_l;var i=32-Go(r)-1;r&=~(1<<i),t+=1;var s=32-Go(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yl=1<<32-Go(e)+i|t<<i|r,_l=s+n}else yl=1<<s|t<<i|r,_l=n}function Tw(n){n.return!==null&&(Yc(n,1),_L(n,1,0))}function Cw(n){for(;n===D_;)D_=gh[--vh],gh[vh]=null,O_=gh[--vh],gh[vh]=null;for(;n===_f;)_f=co[--fo],co[fo]=null,_l=co[--fo],co[fo]=null,yl=co[--fo],co[fo]=null}var zs=null,Us=null,sr=!1,zo=null;function xL(n,e){var t=mo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function AR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,zs=n,Us=Pu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,zs=n,Us=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=_f!==null?{id:yl,overflow:_l}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=mo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,zs=n,Us=null,!0):!1;default:return!1}}function NM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function UM(n){if(sr){var e=Us;if(e){var t=e;if(!AR(n,e)){if(NM(n))throw Error(qe(418));e=Pu(t.nextSibling);var r=zs;e&&AR(n,e)?xL(r,t):(n.flags=n.flags&-4097|2,sr=!1,zs=n)}}else{if(NM(n))throw Error(qe(418));n.flags=n.flags&-4097|2,sr=!1,zs=n}}}function MR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zs=n}function Yv(n){if(n!==zs)return!1;if(!sr)return MR(n),sr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!LM(n.type,n.memoizedProps)),e&&(e=Us)){if(NM(n))throw SL(),Error(qe(418));for(;e;)xL(n,e),e=Pu(e.nextSibling)}if(MR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(qe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Us=Pu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Us=null}}else Us=zs?Pu(n.stateNode.nextSibling):null;return!0}function SL(){for(var n=Us;n;)n=Pu(n.nextSibling)}function Hh(){Us=zs=null,sr=!1}function bw(n){zo===null?zo=[n]:zo.push(n)}var KH=Pl.ReactCurrentBatchConfig;function No(n,e){if(n&&n.defaultProps){e=hr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var F_=Ku(null),N_=null,yh=null,Rw=null;function Pw(){Rw=yh=N_=null}function Iw(n){var e=F_.current;er(F_),n._currentValue=e}function kM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ph(n,e){N_=n,Rw=yh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_s=!0),n.firstContext=null)}function vo(n){var e=n._currentValue;if(Rw!==n)if(n={context:n,memoizedValue:e,next:null},yh===null){if(N_===null)throw Error(qe(308));yh=n,N_.dependencies={lanes:0,firstContext:n}}else yh=yh.next=n;return e}var rf=null;function Bw(n){rf===null?rf=[n]:rf.push(n)}function AL(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Bw(e)):(t.next=i.next,i.next=t),e.interleaved=t,Tl(n,r)}function Tl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var vu=!1;function Lw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ML(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Al(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Iu(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,En&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tl(n,t)}return i=r.interleaved,i===null?(e.next=e,Bw(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tl(n,t)}function n_(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yw(n,t)}}function ER(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function U_(n,e,t,r){var i=n.updateQueue;vu=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=f:a.next=f,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=f=l=null,a=s;do{var m=a.lane,v=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,E=a;switch(m=e,v=t,E.tag){case 1:if(x=E.payload,typeof x=="function"){p=x.call(v,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,m=typeof x=="function"?x.call(v,p,m):x,m==null)break e;p=hr({},p,m);break e;case 2:vu=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(f=h=v,l=p):h=h.next=v,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Sf|=o,n.lanes=o,n.memoizedState=p}}function wR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var EL=new AB.Component().refs;function zM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:hr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var p1={isMounted:function(n){return(n=n._reactInternals)?bf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=qi(),i=Lu(n),s=Al(r,i);s.payload=e,t!=null&&(s.callback=t),e=Iu(n,s,i),e!==null&&(Vo(e,n,i,r),n_(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=qi(),i=Lu(n),s=Al(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Iu(n,s,i),e!==null&&(Vo(e,n,i,r),n_(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=qi(),r=Lu(n),i=Al(t,r);i.tag=2,e!=null&&(i.callback=e),e=Iu(n,i,r),e!==null&&(Vo(e,n,r,t),n_(e,n,r))}};function TR(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!bg(t,r)||!bg(i,s):!0}function wL(n,e,t){var r=!1,i=Hu,s=e.contextType;return typeof s=="object"&&s!==null?s=vo(s):(i=Ss(e)?yf:Ni.current,r=e.contextTypes,s=(r=r!=null)?zh(n,i):Hu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=p1,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function CR(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&p1.enqueueReplaceState(e,e.state,null)}function HM(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=EL,Lw(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vo(s):(s=Ss(e)?yf:Ni.current,i.context=zh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zM(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&p1.enqueueReplaceState(i,i.state,null),U_(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Mm(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(qe(309));var r=t.stateNode}if(!r)throw Error(qe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===EL&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(qe(284));if(!t._owner)throw Error(qe(290,n))}return n}function qv(n,e){throw n=Object.prototype.toString.call(e),Error(qe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function bR(n){var e=n._init;return e(n._payload)}function TL(n){function e(y,M){if(n){var S=y.deletions;S===null?(y.deletions=[M],y.flags|=16):S.push(M)}}function t(y,M){if(!n)return null;for(;M!==null;)e(y,M),M=M.sibling;return null}function r(y,M){for(y=new Map;M!==null;)M.key!==null?y.set(M.key,M):y.set(M.index,M),M=M.sibling;return y}function i(y,M){return y=Du(y,M),y.index=0,y.sibling=null,y}function s(y,M,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<M?(y.flags|=2,M):S):(y.flags|=2,M)):(y.flags|=1048576,M)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,M,S,C){return M===null||M.tag!==6?(M=iA(S,y.mode,C),M.return=y,M):(M=i(M,S),M.return=y,M)}function l(y,M,S,C){var I=S.type;return I===ch?h(y,M,S.props.children,C,S.key):M!==null&&(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===gu&&bR(I)===M.type)?(C=i(M,S.props),C.ref=Mm(y,M,S),C.return=y,C):(C=l_(S.type,S.key,S.props,null,y.mode,C),C.ref=Mm(y,M,S),C.return=y,C)}function f(y,M,S,C){return M===null||M.tag!==4||M.stateNode.containerInfo!==S.containerInfo||M.stateNode.implementation!==S.implementation?(M=sA(S,y.mode,C),M.return=y,M):(M=i(M,S.children||[]),M.return=y,M)}function h(y,M,S,C,I){return M===null||M.tag!==7?(M=hf(S,y.mode,C,I),M.return=y,M):(M=i(M,S),M.return=y,M)}function p(y,M,S){if(typeof M=="string"&&M!==""||typeof M=="number")return M=iA(""+M,y.mode,S),M.return=y,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case kv:return S=l_(M.type,M.key,M.props,null,y.mode,S),S.ref=Mm(y,null,M),S.return=y,S;case uh:return M=sA(M,y.mode,S),M.return=y,M;case gu:var C=M._init;return p(y,C(M._payload),S)}if(qm(M)||ym(M))return M=hf(M,y.mode,S,null),M.return=y,M;qv(y,M)}return null}function m(y,M,S,C){var I=M!==null?M.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return I!==null?null:a(y,M,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case kv:return S.key===I?l(y,M,S,C):null;case uh:return S.key===I?f(y,M,S,C):null;case gu:return I=S._init,m(y,M,I(S._payload),C)}if(qm(S)||ym(S))return I!==null?null:h(y,M,S,C,null);qv(y,S)}return null}function v(y,M,S,C,I){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(S)||null,a(M,y,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case kv:return y=y.get(C.key===null?S:C.key)||null,l(M,y,C,I);case uh:return y=y.get(C.key===null?S:C.key)||null,f(M,y,C,I);case gu:var B=C._init;return v(y,M,S,B(C._payload),I)}if(qm(C)||ym(C))return y=y.get(S)||null,h(M,y,C,I,null);qv(M,C)}return null}function x(y,M,S,C){for(var I=null,B=null,O=M,z=M=0,L=null;O!==null&&z<S.length;z++){O.index>z?(L=O,O=null):L=O.sibling;var N=m(y,O,S[z],C);if(N===null){O===null&&(O=L);break}n&&O&&N.alternate===null&&e(y,O),M=s(N,M,z),B===null?I=N:B.sibling=N,B=N,O=L}if(z===S.length)return t(y,O),sr&&Yc(y,z),I;if(O===null){for(;z<S.length;z++)O=p(y,S[z],C),O!==null&&(M=s(O,M,z),B===null?I=O:B.sibling=O,B=O);return sr&&Yc(y,z),I}for(O=r(y,O);z<S.length;z++)L=v(O,y,z,S[z],C),L!==null&&(n&&L.alternate!==null&&O.delete(L.key===null?z:L.key),M=s(L,M,z),B===null?I=L:B.sibling=L,B=L);return n&&O.forEach(function(W){return e(y,W)}),sr&&Yc(y,z),I}function E(y,M,S,C){var I=ym(S);if(typeof I!="function")throw Error(qe(150));if(S=I.call(S),S==null)throw Error(qe(151));for(var B=I=null,O=M,z=M=0,L=null,N=S.next();O!==null&&!N.done;z++,N=S.next()){O.index>z?(L=O,O=null):L=O.sibling;var W=m(y,O,N.value,C);if(W===null){O===null&&(O=L);break}n&&O&&W.alternate===null&&e(y,O),M=s(W,M,z),B===null?I=W:B.sibling=W,B=W,O=L}if(N.done)return t(y,O),sr&&Yc(y,z),I;if(O===null){for(;!N.done;z++,N=S.next())N=p(y,N.value,C),N!==null&&(M=s(N,M,z),B===null?I=N:B.sibling=N,B=N);return sr&&Yc(y,z),I}for(O=r(y,O);!N.done;z++,N=S.next())N=v(O,y,z,N.value,C),N!==null&&(n&&N.alternate!==null&&O.delete(N.key===null?z:N.key),M=s(N,M,z),B===null?I=N:B.sibling=N,B=N);return n&&O.forEach(function(ae){return e(y,ae)}),sr&&Yc(y,z),I}function A(y,M,S,C){if(typeof S=="object"&&S!==null&&S.type===ch&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case kv:e:{for(var I=S.key,B=M;B!==null;){if(B.key===I){if(I=S.type,I===ch){if(B.tag===7){t(y,B.sibling),M=i(B,S.props.children),M.return=y,y=M;break e}}else if(B.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===gu&&bR(I)===B.type){t(y,B.sibling),M=i(B,S.props),M.ref=Mm(y,B,S),M.return=y,y=M;break e}t(y,B);break}else e(y,B);B=B.sibling}S.type===ch?(M=hf(S.props.children,y.mode,C,S.key),M.return=y,y=M):(C=l_(S.type,S.key,S.props,null,y.mode,C),C.ref=Mm(y,M,S),C.return=y,y=C)}return o(y);case uh:e:{for(B=S.key;M!==null;){if(M.key===B)if(M.tag===4&&M.stateNode.containerInfo===S.containerInfo&&M.stateNode.implementation===S.implementation){t(y,M.sibling),M=i(M,S.children||[]),M.return=y,y=M;break e}else{t(y,M);break}else e(y,M);M=M.sibling}M=sA(S,y.mode,C),M.return=y,y=M}return o(y);case gu:return B=S._init,A(y,M,B(S._payload),C)}if(qm(S))return x(y,M,S,C);if(ym(S))return E(y,M,S,C);qv(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,M!==null&&M.tag===6?(t(y,M.sibling),M=i(M,S),M.return=y,y=M):(t(y,M),M=iA(S,y.mode,C),M.return=y,y=M),o(y)):t(y,M)}return A}var Gh=TL(!0),CL=TL(!1),o0={},wa=Ku(o0),Bg=Ku(o0),Lg=Ku(o0);function sf(n){if(n===o0)throw Error(qe(174));return n}function Dw(n,e){switch(Yn(Lg,e),Yn(Bg,n),Yn(wa,o0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_M(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=_M(e,n)}er(wa),Yn(wa,e)}function Vh(){er(wa),er(Bg),er(Lg)}function bL(n){sf(Lg.current);var e=sf(wa.current),t=_M(e,n.type);e!==t&&(Yn(Bg,n),Yn(wa,t))}function Ow(n){Bg.current===n&&(er(wa),er(Bg))}var ur=Ku(0);function k_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ZS=[];function Fw(){for(var n=0;n<ZS.length;n++)ZS[n]._workInProgressVersionPrimary=null;ZS.length=0}var r_=Pl.ReactCurrentDispatcher,$S=Pl.ReactCurrentBatchConfig,xf=0,dr=null,Xr=null,ai=null,z_=!1,ag=!1,Dg=0,YH=0;function Ri(){throw Error(qe(321))}function Nw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Wo(n[t],e[t]))return!1;return!0}function Uw(n,e,t,r,i,s){if(xf=s,dr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,r_.current=n===null||n.memoizedState===null?$H:eG,n=t(r,i),ag){s=0;do{if(ag=!1,Dg=0,25<=s)throw Error(qe(301));s+=1,ai=Xr=null,e.updateQueue=null,r_.current=tG,n=t(r,i)}while(ag)}if(r_.current=H_,e=Xr!==null&&Xr.next!==null,xf=0,ai=Xr=dr=null,z_=!1,e)throw Error(qe(300));return n}function kw(){var n=Dg!==0;return Dg=0,n}function va(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?dr.memoizedState=ai=n:ai=ai.next=n,ai}function yo(){if(Xr===null){var n=dr.alternate;n=n!==null?n.memoizedState:null}else n=Xr.next;var e=ai===null?dr.memoizedState:ai.next;if(e!==null)ai=e,Xr=n;else{if(n===null)throw Error(qe(310));Xr=n,n={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ai===null?dr.memoizedState=ai=n:ai=ai.next=n}return ai}function Og(n,e){return typeof e=="function"?e(n):e}function eA(n){var e=yo(),t=e.queue;if(t===null)throw Error(qe(311));t.lastRenderedReducer=n;var r=Xr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,f=s;do{var h=f.lane;if((xf&h)===h)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:n(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,dr.lanes|=h,Sf|=h}f=f.next}while(f!==null&&f!==s);l===null?o=r:l.next=a,Wo(r,e.memoizedState)||(_s=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,dr.lanes|=s,Sf|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function tA(n){var e=yo(),t=e.queue;if(t===null)throw Error(qe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Wo(s,e.memoizedState)||(_s=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function RL(){}function PL(n,e){var t=dr,r=yo(),i=e(),s=!Wo(r.memoizedState,i);if(s&&(r.memoizedState=i,_s=!0),r=r.queue,zw(LL.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ai!==null&&ai.memoizedState.tag&1){if(t.flags|=2048,Fg(9,BL.bind(null,t,r,i,e),void 0,null),li===null)throw Error(qe(349));xf&30||IL(t,e,i)}return i}function IL(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=dr.updateQueue,e===null?(e={lastEffect:null,stores:null},dr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function BL(n,e,t,r){e.value=t,e.getSnapshot=r,DL(e)&&OL(n)}function LL(n,e,t){return t(function(){DL(e)&&OL(n)})}function DL(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Wo(n,t)}catch{return!0}}function OL(n){var e=Tl(n,1);e!==null&&Vo(e,n,1,-1)}function RR(n){var e=va();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:n},e.queue=n,n=n.dispatch=ZH.bind(null,dr,n),[e.memoizedState,n]}function Fg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=dr.updateQueue,e===null?(e={lastEffect:null,stores:null},dr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function FL(){return yo().memoizedState}function i_(n,e,t,r){var i=va();dr.flags|=n,i.memoizedState=Fg(1|e,t,void 0,r===void 0?null:r)}function m1(n,e,t,r){var i=yo();r=r===void 0?null:r;var s=void 0;if(Xr!==null){var o=Xr.memoizedState;if(s=o.destroy,r!==null&&Nw(r,o.deps)){i.memoizedState=Fg(e,t,s,r);return}}dr.flags|=n,i.memoizedState=Fg(1|e,t,s,r)}function PR(n,e){return i_(8390656,8,n,e)}function zw(n,e){return m1(2048,8,n,e)}function NL(n,e){return m1(4,2,n,e)}function UL(n,e){return m1(4,4,n,e)}function kL(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function zL(n,e,t){return t=t!=null?t.concat([n]):null,m1(4,4,kL.bind(null,e,n),t)}function Hw(){}function HL(n,e){var t=yo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Nw(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function GL(n,e){var t=yo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Nw(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function VL(n,e,t){return xf&21?(Wo(t,e)||(t=XB(),dr.lanes|=t,Sf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_s=!0),n.memoizedState=t)}function qH(n,e){var t=Dn;Dn=t!==0&&4>t?t:4,n(!0);var r=$S.transition;$S.transition={};try{n(!1),e()}finally{Dn=t,$S.transition=r}}function WL(){return yo().memoizedState}function QH(n,e,t){var r=Lu(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},jL(n))XL(e,t);else if(t=AL(n,e,t,r),t!==null){var i=qi();Vo(t,n,r,i),JL(t,e,r)}}function ZH(n,e,t){var r=Lu(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(jL(n))XL(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Wo(a,o)){var l=e.interleaved;l===null?(i.next=i,Bw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=AL(n,e,i,r),t!==null&&(i=qi(),Vo(t,n,r,i),JL(t,e,r))}}function jL(n){var e=n.alternate;return n===dr||e!==null&&e===dr}function XL(n,e){ag=z_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function JL(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yw(n,t)}}var H_={readContext:vo,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},$H={readContext:vo,useCallback:function(n,e){return va().memoizedState=[n,e===void 0?null:e],n},useContext:vo,useEffect:PR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,i_(4194308,4,kL.bind(null,e,n),t)},useLayoutEffect:function(n,e){return i_(4194308,4,n,e)},useInsertionEffect:function(n,e){return i_(4,2,n,e)},useMemo:function(n,e){var t=va();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=va();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=QH.bind(null,dr,n),[r.memoizedState,n]},useRef:function(n){var e=va();return n={current:n},e.memoizedState=n},useState:RR,useDebugValue:Hw,useDeferredValue:function(n){return va().memoizedState=n},useTransition:function(){var n=RR(!1),e=n[0];return n=qH.bind(null,n[1]),va().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=dr,i=va();if(sr){if(t===void 0)throw Error(qe(407));t=t()}else{if(t=e(),li===null)throw Error(qe(349));xf&30||IL(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,PR(LL.bind(null,r,s,n),[n]),r.flags|=2048,Fg(9,BL.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=va(),e=li.identifierPrefix;if(sr){var t=_l,r=yl;t=(r&~(1<<32-Go(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=YH++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},eG={readContext:vo,useCallback:HL,useContext:vo,useEffect:zw,useImperativeHandle:zL,useInsertionEffect:NL,useLayoutEffect:UL,useMemo:GL,useReducer:eA,useRef:FL,useState:function(){return eA(Og)},useDebugValue:Hw,useDeferredValue:function(n){var e=yo();return VL(e,Xr.memoizedState,n)},useTransition:function(){var n=eA(Og)[0],e=yo().memoizedState;return[n,e]},useMutableSource:RL,useSyncExternalStore:PL,useId:WL,unstable_isNewReconciler:!1},tG={readContext:vo,useCallback:HL,useContext:vo,useEffect:zw,useImperativeHandle:zL,useInsertionEffect:NL,useLayoutEffect:UL,useMemo:GL,useReducer:tA,useRef:FL,useState:function(){return tA(Og)},useDebugValue:Hw,useDeferredValue:function(n){var e=yo();return Xr===null?e.memoizedState=n:VL(e,Xr.memoizedState,n)},useTransition:function(){var n=tA(Og)[0],e=yo().memoizedState;return[n,e]},useMutableSource:RL,useSyncExternalStore:PL,useId:WL,unstable_isNewReconciler:!1};function Wh(n,e){try{var t="",r=e;do t+=R5(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function nA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function GM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var nG=typeof WeakMap=="function"?WeakMap:Map;function KL(n,e,t){t=Al(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){V_||(V_=!0,ZM=r),GM(n,e)},t}function YL(n,e,t){t=Al(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){GM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){GM(n,e),typeof r!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function IR(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new nG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=gG.bind(null,n,e,t),e.then(n,n))}function BR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function LR(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Al(-1,1),e.tag=2,Iu(t,e,1))),t.lanes|=1),n)}var rG=Pl.ReactCurrentOwner,_s=!1;function Ji(n,e,t,r){e.child=n===null?CL(e,null,t,r):Gh(e,n.child,t,r)}function DR(n,e,t,r,i){t=t.render;var s=e.ref;return Ph(e,i),r=Uw(n,e,t,r,s,i),t=kw(),n!==null&&!_s?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Cl(n,e,i)):(sr&&t&&Tw(e),e.flags|=1,Ji(n,e,r,i),e.child)}function OR(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Yw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,qL(n,e,s,r,i)):(n=l_(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:bg,t(o,r)&&n.ref===e.ref)return Cl(n,e,i)}return e.flags|=1,n=Du(s,r),n.ref=e.ref,n.return=e,e.child=n}function qL(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(bg(s,r)&&n.ref===e.ref)if(_s=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_s=!0);else return e.lanes=n.lanes,Cl(n,e,i)}return VM(n,e,t,r,i)}function QL(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(xh,Os),Os|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Yn(xh,Os),Os|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Yn(xh,Os),Os|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Yn(xh,Os),Os|=r;return Ji(n,e,i,t),e.child}function ZL(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function VM(n,e,t,r,i){var s=Ss(t)?yf:Ni.current;return s=zh(e,s),Ph(e,i),t=Uw(n,e,t,r,s,i),r=kw(),n!==null&&!_s?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Cl(n,e,i)):(sr&&r&&Tw(e),e.flags|=1,Ji(n,e,t,i),e.child)}function FR(n,e,t,r,i){if(Ss(t)){var s=!0;L_(e)}else s=!1;if(Ph(e,i),e.stateNode===null)s_(n,e),wL(e,t,r),HM(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=vo(f):(f=Ss(t)?yf:Ni.current,f=zh(e,f));var h=t.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==f)&&CR(e,o,r,f),vu=!1;var m=e.memoizedState;o.state=m,U_(e,r,o,i),l=e.memoizedState,a!==r||m!==l||xs.current||vu?(typeof h=="function"&&(zM(e,t,h,r),l=e.memoizedState),(a=vu||TR(e,t,a,r,m,l,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ML(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:No(e.type,a),o.props=f,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=vo(l):(l=Ss(t)?yf:Ni.current,l=zh(e,l));var v=t.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&CR(e,o,r,l),vu=!1,m=e.memoizedState,o.state=m,U_(e,r,o,i);var x=e.memoizedState;a!==p||m!==x||xs.current||vu?(typeof v=="function"&&(zM(e,t,v,r),x=e.memoizedState),(f=vu||TR(e,t,f,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return WM(n,e,t,r,s,i)}function WM(n,e,t,r,i,s){ZL(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&SR(e,t,!1),Cl(n,e,s);r=e.stateNode,rG.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Gh(e,n.child,null,s),e.child=Gh(e,null,a,s)):Ji(n,e,a,s),e.memoizedState=r.state,i&&SR(e,t,!0),e.child}function $L(n){var e=n.stateNode;e.pendingContext?xR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&xR(n,e.context,!1),Dw(n,e.containerInfo)}function NR(n,e,t,r,i){return Hh(),bw(i),e.flags|=256,Ji(n,e,t,r),e.child}var jM={dehydrated:null,treeContext:null,retryLane:0};function XM(n){return{baseLanes:n,cachePool:null,transitions:null}}function e3(n,e,t){var r=e.pendingProps,i=ur.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Yn(ur,i&1),n===null)return UM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=y1(o,r,0,null),n=hf(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=XM(t),e.memoizedState=jM,n):Gw(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iG(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Du(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Du(a,s):(s=hf(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?XM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=jM,r}return s=n.child,n=s.sibling,r=Du(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Gw(n,e){return e=y1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qv(n,e,t,r){return r!==null&&bw(r),Gh(e,n.child,null,t),n=Gw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function iG(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=nA(Error(qe(422))),Qv(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=y1({mode:"visible",children:r.children},i,0,null),s=hf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Gh(e,n.child,null,o),e.child.memoizedState=XM(o),e.memoizedState=jM,s);if(!(e.mode&1))return Qv(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=nA(s,r,void 0),Qv(n,e,o,r)}if(a=(o&n.childLanes)!==0,_s||a){if(r=li,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tl(n,i),Vo(r,n,i,-1))}return Kw(),r=nA(Error(qe(421))),Qv(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=vG.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Us=Pu(i.nextSibling),zs=e,sr=!0,zo=null,n!==null&&(co[fo++]=yl,co[fo++]=_l,co[fo++]=_f,yl=n.id,_l=n.overflow,_f=e),e=Gw(e,r.children),e.flags|=4096,e)}function UR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),kM(n.return,e,t)}function rA(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function t3(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ji(n,e,r.children,t),r=ur.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&UR(n,t,e);else if(n.tag===19)UR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Yn(ur,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&k_(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),rA(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&k_(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}rA(e,!0,t,null,s);break;case"together":rA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function s_(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Cl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Sf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(qe(153));if(e.child!==null){for(n=e.child,t=Du(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Du(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function sG(n,e,t){switch(e.tag){case 3:$L(e),Hh();break;case 5:bL(e);break;case 1:Ss(e.type)&&L_(e);break;case 4:Dw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yn(F_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yn(ur,ur.current&1),e.flags|=128,null):t&e.child.childLanes?e3(n,e,t):(Yn(ur,ur.current&1),n=Cl(n,e,t),n!==null?n.sibling:null);Yn(ur,ur.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return t3(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yn(ur,ur.current),r)break;return null;case 22:case 23:return e.lanes=0,QL(n,e,t)}return Cl(n,e,t)}var n3,JM,r3,i3;n3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};JM=function(){};r3=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,sf(wa.current);var s=null;switch(t){case"input":i=mM(n,i),r=mM(n,r),s=[];break;case"select":i=hr({},i,{value:void 0}),r=hr({},r,{value:void 0}),s=[];break;case"textarea":i=yM(n,i),r=yM(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=I_)}xM(t,r);var o;t=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Sg.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(f,t)),t=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Sg.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Qn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(f,l))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};i3=function(n,e,t,r){t!==r&&(e.flags|=4)};function Em(n,e){if(!sr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function oG(n,e,t){var r=e.pendingProps;switch(Cw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(e),null;case 1:return Ss(e.type)&&B_(),Pi(e),null;case 3:return r=e.stateNode,Vh(),er(xs),er(Ni),Fw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Yv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zo!==null&&(tE(zo),zo=null))),JM(n,e),Pi(e),null;case 5:Ow(e);var i=sf(Lg.current);if(t=e.type,n!==null&&e.stateNode!=null)r3(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(qe(166));return Pi(e),null}if(n=sf(wa.current),Yv(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Sa]=e,r[Ig]=s,n=(e.mode&1)!==0,t){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(i=0;i<Zm.length;i++)Qn(Zm[i],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":Jb(r,s),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qn("invalid",r);break;case"textarea":Yb(r,s),Qn("invalid",r)}xM(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Kv(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Kv(r.textContent,a,n),i=["children",""+a]):Sg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qn("scroll",r)}switch(t){case"input":zv(r),Kb(r,s,!0);break;case"textarea":zv(r),qb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=I_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=IB(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Sa]=e,n[Ig]=r,n3(n,e,!1,!1),e.stateNode=n;e:{switch(o=SM(t,r),t){case"dialog":Qn("cancel",n),Qn("close",n),i=r;break;case"iframe":case"object":case"embed":Qn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Zm.length;i++)Qn(Zm[i],n);i=r;break;case"source":Qn("error",n),i=r;break;case"img":case"image":case"link":Qn("error",n),Qn("load",n),i=r;break;case"details":Qn("toggle",n),i=r;break;case"input":Jb(n,r),i=mM(n,r),Qn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=hr({},r,{value:void 0}),Qn("invalid",n);break;case"textarea":Yb(n,r),i=yM(n,r),Qn("invalid",n);break;default:i=r}xM(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DB(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BB(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ag(n,l):typeof l=="number"&&Ag(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qn("scroll",n):l!=null&&dw(n,s,l,o))}switch(t){case"input":zv(n),Kb(n,r,!1);break;case"textarea":zv(n),qb(n);break;case"option":r.value!=null&&n.setAttribute("value",""+zu(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Th(n,!!r.multiple,s,!1):r.defaultValue!=null&&Th(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=I_)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pi(e),null;case 6:if(n&&e.stateNode!=null)i3(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(qe(166));if(t=sf(Lg.current),sf(wa.current),Yv(e)){if(r=e.stateNode,t=e.memoizedProps,r[Sa]=e,(s=r.nodeValue!==t)&&(n=zs,n!==null))switch(n.tag){case 3:Kv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kv(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Sa]=e,e.stateNode=r}return Pi(e),null;case 13:if(er(ur),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(sr&&Us!==null&&e.mode&1&&!(e.flags&128))SL(),Hh(),e.flags|=98560,s=!1;else if(s=Yv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Sa]=e}else Hh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pi(e),s=!1}else zo!==null&&(tE(zo),zo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ur.current&1?Jr===0&&(Jr=3):Kw())),e.updateQueue!==null&&(e.flags|=4),Pi(e),null);case 4:return Vh(),JM(n,e),n===null&&Rg(e.stateNode.containerInfo),Pi(e),null;case 10:return Iw(e.type._context),Pi(e),null;case 17:return Ss(e.type)&&B_(),Pi(e),null;case 19:if(er(ur),s=e.memoizedState,s===null)return Pi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Em(s,!1);else{if(Jr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=k_(n),o!==null){for(e.flags|=128,Em(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Yn(ur,ur.current&1|2),e.child}n=n.sibling}s.tail!==null&&Tr()>jh&&(e.flags|=128,r=!0,Em(s,!1),e.lanes=4194304)}else{if(!r)if(n=k_(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Em(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!sr)return Pi(e),null}else 2*Tr()-s.renderingStartTime>jh&&t!==1073741824&&(e.flags|=128,r=!0,Em(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tr(),e.sibling=null,t=ur.current,Yn(ur,r?t&1|2:t&1),e):(Pi(e),null);case 22:case 23:return Jw(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Os&1073741824&&(Pi(e),e.subtreeFlags&6&&(e.flags|=8192)):Pi(e),null;case 24:return null;case 25:return null}throw Error(qe(156,e.tag))}function aG(n,e){switch(Cw(e),e.tag){case 1:return Ss(e.type)&&B_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Vh(),er(xs),er(Ni),Fw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Ow(e),null;case 13:if(er(ur),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(qe(340));Hh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return er(ur),null;case 4:return Vh(),null;case 10:return Iw(e.type._context),null;case 22:case 23:return Jw(),null;case 24:return null;default:return null}}var Zv=!1,Di=!1,lG=typeof WeakSet=="function"?WeakSet:Set,At=null;function _h(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Sr(n,e,r)}else t.current=null}function KM(n,e,t){try{t()}catch(r){Sr(n,e,r)}}var kR=!1;function uG(n,e){if(IM=b_,n=lL(),ww(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,f=0,h=0,p=n,m=null;t:for(;;){for(var v;p!==t||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===n)break t;if(m===t&&++f===i&&(a=o),m===s&&++h===r&&(l=o),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(BM={focusedElem:n,selectionRange:t},b_=!1,At=e;At!==null;)if(e=At,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,At=n;else for(;At!==null;){e=At;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,A=x.memoizedState,y=e.stateNode,M=y.getSnapshotBeforeUpdate(e.elementType===e.type?E:No(e.type,E),A);y.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(C){Sr(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,At=n;break}At=e.return}return x=kR,kR=!1,x}function lg(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&KM(e,t,s)}i=i.next}while(i!==r)}}function g1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function YM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function s3(n){var e=n.alternate;e!==null&&(n.alternate=null,s3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Sa],delete e[Ig],delete e[OM],delete e[jH],delete e[XH])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function o3(n){return n.tag===5||n.tag===3||n.tag===4}function zR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||o3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=I_));else if(r!==4&&(n=n.child,n!==null))for(qM(n,e,t),n=n.sibling;n!==null;)qM(n,e,t),n=n.sibling}function QM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(QM(n,e,t),n=n.sibling;n!==null;)QM(n,e,t),n=n.sibling}var gi=null,ko=!1;function lu(n,e,t){for(t=t.child;t!==null;)a3(n,e,t),t=t.sibling}function a3(n,e,t){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(l1,t)}catch{}switch(t.tag){case 5:Di||_h(t,e);case 6:var r=gi,i=ko;gi=null,lu(n,e,t),gi=r,ko=i,gi!==null&&(ko?(n=gi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):gi.removeChild(t.stateNode));break;case 18:gi!==null&&(ko?(n=gi,t=t.stateNode,n.nodeType===8?qS(n.parentNode,t):n.nodeType===1&&qS(n,t),Tg(n)):qS(gi,t.stateNode));break;case 4:r=gi,i=ko,gi=t.stateNode.containerInfo,ko=!0,lu(n,e,t),gi=r,ko=i;break;case 0:case 11:case 14:case 15:if(!Di&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&KM(t,e,o),i=i.next}while(i!==r)}lu(n,e,t);break;case 1:if(!Di&&(_h(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Sr(t,e,a)}lu(n,e,t);break;case 21:lu(n,e,t);break;case 22:t.mode&1?(Di=(r=Di)||t.memoizedState!==null,lu(n,e,t),Di=r):lu(n,e,t);break;default:lu(n,e,t)}}function HR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new lG),e.forEach(function(r){var i=yG.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Io(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gi=a.stateNode,ko=!1;break e;case 3:gi=a.stateNode.containerInfo,ko=!0;break e;case 4:gi=a.stateNode.containerInfo,ko=!0;break e}a=a.return}if(gi===null)throw Error(qe(160));a3(s,o,i),gi=null,ko=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){Sr(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l3(e,n),e=e.sibling}function l3(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Io(e,n),ga(n),r&4){try{lg(3,n,n.return),g1(3,n)}catch(E){Sr(n,n.return,E)}try{lg(5,n,n.return)}catch(E){Sr(n,n.return,E)}}break;case 1:Io(e,n),ga(n),r&512&&t!==null&&_h(t,t.return);break;case 5:if(Io(e,n),ga(n),r&512&&t!==null&&_h(t,t.return),n.flags&32){var i=n.stateNode;try{Ag(i,"")}catch(E){Sr(n,n.return,E)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&RB(i,s),SM(a,o);var f=SM(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?DB(i,p):h==="dangerouslySetInnerHTML"?BB(i,p):h==="children"?Ag(i,p):dw(i,h,p,f)}switch(a){case"input":gM(i,s);break;case"textarea":PB(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Th(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Th(i,!!s.multiple,s.defaultValue,!0):Th(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ig]=s}catch(E){Sr(n,n.return,E)}}break;case 6:if(Io(e,n),ga(n),r&4){if(n.stateNode===null)throw Error(qe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(E){Sr(n,n.return,E)}}break;case 3:if(Io(e,n),ga(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Tg(e.containerInfo)}catch(E){Sr(n,n.return,E)}break;case 4:Io(e,n),ga(n);break;case 13:Io(e,n),ga(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jw=Tr())),r&4&&HR(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Di=(f=Di)||h,Io(e,n),Di=f):Io(e,n),ga(n),r&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!h&&n.mode&1)for(At=n,h=n.child;h!==null;){for(p=At=h;At!==null;){switch(m=At,v=m.child,m.tag){case 0:case 11:case 14:case 15:lg(4,m,m.return);break;case 1:_h(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Sr(r,t,E)}}break;case 5:_h(m,m.return);break;case 22:if(m.memoizedState!==null){VR(p);continue}}v!==null?(v.return=m,At=v):VR(p)}h=h.sibling}e:for(h=null,p=n;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LB("display",o))}catch(E){Sr(n,n.return,E)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(E){Sr(n,n.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Io(e,n),ga(n),r&4&&HR(n);break;case 21:break;default:Io(e,n),ga(n)}}function ga(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(o3(t)){var r=t;break e}t=t.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ag(i,""),r.flags&=-33);var s=zR(n);QM(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=zR(n);qM(n,a,o);break;default:throw Error(qe(161))}}catch(l){Sr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function cG(n,e,t){At=n,u3(n)}function u3(n,e,t){for(var r=(n.mode&1)!==0;At!==null;){var i=At,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Di;a=Zv;var f=Di;if(Zv=o,(Di=l)&&!f)for(At=i;At!==null;)o=At,l=o.child,o.tag===22&&o.memoizedState!==null?WR(i):l!==null?(l.return=o,At=l):WR(i);for(;s!==null;)At=s,u3(s),s=s.sibling;At=i,Zv=a,Di=f}GR(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,At=s):GR(n)}}function GR(n){for(;At!==null;){var e=At;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Di||g1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Di)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:No(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Tg(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Di||e.flags&512&&YM(e)}catch(m){Sr(e,e.return,m)}}if(e===n){At=null;break}if(t=e.sibling,t!==null){t.return=e.return,At=t;break}At=e.return}}function VR(n){for(;At!==null;){var e=At;if(e===n){At=null;break}var t=e.sibling;if(t!==null){t.return=e.return,At=t;break}At=e.return}}function WR(n){for(;At!==null;){var e=At;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{g1(4,e)}catch(l){Sr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Sr(e,i,l)}}var s=e.return;try{YM(e)}catch(l){Sr(e,s,l)}break;case 5:var o=e.return;try{YM(e)}catch(l){Sr(e,o,l)}}}catch(l){Sr(e,e.return,l)}if(e===n){At=null;break}var a=e.sibling;if(a!==null){a.return=e.return,At=a;break}At=e.return}}var fG=Math.ceil,G_=Pl.ReactCurrentDispatcher,Vw=Pl.ReactCurrentOwner,go=Pl.ReactCurrentBatchConfig,En=0,li=null,zr=null,_i=0,Os=0,xh=Ku(0),Jr=0,Ng=null,Sf=0,v1=0,Ww=0,ug=null,gs=null,jw=0,jh=1/0,pl=null,V_=!1,ZM=null,Bu=null,$v=!1,wu=null,W_=0,cg=0,$M=null,o_=-1,a_=0;function qi(){return En&6?Tr():o_!==-1?o_:o_=Tr()}function Lu(n){return n.mode&1?En&2&&_i!==0?_i&-_i:KH.transition!==null?(a_===0&&(a_=XB()),a_):(n=Dn,n!==0||(n=window.event,n=n===void 0?16:$B(n.type)),n):1}function Vo(n,e,t,r){if(50<cg)throw cg=0,$M=null,Error(qe(185));r0(n,t,r),(!(En&2)||n!==li)&&(n===li&&(!(En&2)&&(v1|=t),Jr===4&&Su(n,_i)),As(n,r),t===1&&En===0&&!(e.mode&1)&&(jh=Tr()+500,h1&&Yu()))}function As(n,e){var t=n.callbackNode;K5(n,e);var r=C_(n,n===li?_i:0);if(r===0)t!==null&&$b(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&$b(t),e===1)n.tag===0?JH(jR.bind(null,n)):yL(jR.bind(null,n)),VH(function(){!(En&6)&&Yu()}),t=null;else{switch(JB(r)){case 1:t=vw;break;case 4:t=WB;break;case 16:t=T_;break;case 536870912:t=jB;break;default:t=T_}t=v3(t,c3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function c3(n,e){if(o_=-1,a_=0,En&6)throw Error(qe(327));var t=n.callbackNode;if(Ih()&&n.callbackNode!==t)return null;var r=C_(n,n===li?_i:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=j_(n,r);else{e=r;var i=En;En|=2;var s=d3();(li!==n||_i!==e)&&(pl=null,jh=Tr()+500,df(n,e));do try{pG();break}catch(a){f3(n,a)}while(1);Pw(),G_.current=s,En=i,zr!==null?e=0:(li=null,_i=0,e=Jr)}if(e!==0){if(e===2&&(i=TM(n),i!==0&&(r=i,e=eE(n,i))),e===1)throw t=Ng,df(n,0),Su(n,r),As(n,Tr()),t;if(e===6)Su(n,r);else{if(i=n.current.alternate,!(r&30)&&!dG(i)&&(e=j_(n,r),e===2&&(s=TM(n),s!==0&&(r=s,e=eE(n,s))),e===1))throw t=Ng,df(n,0),Su(n,r),As(n,Tr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(qe(345));case 2:qc(n,gs,pl);break;case 3:if(Su(n,r),(r&130023424)===r&&(e=jw+500-Tr(),10<e)){if(C_(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){qi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=DM(qc.bind(null,n,gs,pl),e);break}qc(n,gs,pl);break;case 4:if(Su(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Go(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fG(r/1960))-r,10<r){n.timeoutHandle=DM(qc.bind(null,n,gs,pl),r);break}qc(n,gs,pl);break;case 5:qc(n,gs,pl);break;default:throw Error(qe(329))}}}return As(n,Tr()),n.callbackNode===t?c3.bind(null,n):null}function eE(n,e){var t=ug;return n.current.memoizedState.isDehydrated&&(df(n,e).flags|=256),n=j_(n,e),n!==2&&(e=gs,gs=t,e!==null&&tE(e)),n}function tE(n){gs===null?gs=n:gs.push.apply(gs,n)}function dG(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Wo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Su(n,e){for(e&=~Ww,e&=~v1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Go(e),r=1<<t;n[t]=-1,e&=~r}}function jR(n){if(En&6)throw Error(qe(327));Ih();var e=C_(n,0);if(!(e&1))return As(n,Tr()),null;var t=j_(n,e);if(n.tag!==0&&t===2){var r=TM(n);r!==0&&(e=r,t=eE(n,r))}if(t===1)throw t=Ng,df(n,0),Su(n,e),As(n,Tr()),t;if(t===6)throw Error(qe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,qc(n,gs,pl),As(n,Tr()),null}function Xw(n,e){var t=En;En|=1;try{return n(e)}finally{En=t,En===0&&(jh=Tr()+500,h1&&Yu())}}function Af(n){wu!==null&&wu.tag===0&&!(En&6)&&Ih();var e=En;En|=1;var t=go.transition,r=Dn;try{if(go.transition=null,Dn=1,n)return n()}finally{Dn=r,go.transition=t,En=e,!(En&6)&&Yu()}}function Jw(){Os=xh.current,er(xh)}function df(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,GH(t)),zr!==null)for(t=zr.return;t!==null;){var r=t;switch(Cw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&B_();break;case 3:Vh(),er(xs),er(Ni),Fw();break;case 5:Ow(r);break;case 4:Vh();break;case 13:er(ur);break;case 19:er(ur);break;case 10:Iw(r.type._context);break;case 22:case 23:Jw()}t=t.return}if(li=n,zr=n=Du(n.current,null),_i=Os=e,Jr=0,Ng=null,Ww=v1=Sf=0,gs=ug=null,rf!==null){for(e=0;e<rf.length;e++)if(t=rf[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}rf=null}return n}function f3(n,e){do{var t=zr;try{if(Pw(),r_.current=H_,z_){for(var r=dr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}z_=!1}if(xf=0,ai=Xr=dr=null,ag=!1,Dg=0,Vw.current=null,t===null||t.return===null){Jr=1,Ng=e,zr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=_i,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=BR(o);if(v!==null){v.flags&=-257,LR(v,o,a,s,e),v.mode&1&&IR(s,f,e),e=v,l=f;var x=e.updateQueue;if(x===null){var E=new Set;E.add(l),e.updateQueue=E}else x.add(l);break e}else{if(!(e&1)){IR(s,f,e),Kw();break e}l=Error(qe(426))}}else if(sr&&a.mode&1){var A=BR(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),LR(A,o,a,s,e),bw(Wh(l,a));break e}}s=l=Wh(l,a),Jr!==4&&(Jr=2),ug===null?ug=[s]:ug.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=KL(s,l,e);ER(s,y);break e;case 1:a=l;var M=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Bu===null||!Bu.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=YL(s,a,e);ER(s,C);break e}}s=s.return}while(s!==null)}p3(t)}catch(I){e=I,zr===t&&t!==null&&(zr=t=t.return);continue}break}while(1)}function d3(){var n=G_.current;return G_.current=H_,n===null?H_:n}function Kw(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),li===null||!(Sf&268435455)&&!(v1&268435455)||Su(li,_i)}function j_(n,e){var t=En;En|=2;var r=d3();(li!==n||_i!==e)&&(pl=null,df(n,e));do try{hG();break}catch(i){f3(n,i)}while(1);if(Pw(),En=t,G_.current=r,zr!==null)throw Error(qe(261));return li=null,_i=0,Jr}function hG(){for(;zr!==null;)h3(zr)}function pG(){for(;zr!==null&&!k5();)h3(zr)}function h3(n){var e=g3(n.alternate,n,Os);n.memoizedProps=n.pendingProps,e===null?p3(n):zr=e,Vw.current=null}function p3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=aG(t,e),t!==null){t.flags&=32767,zr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jr=6,zr=null;return}}else if(t=oG(t,e,Os),t!==null){zr=t;return}if(e=e.sibling,e!==null){zr=e;return}zr=e=n}while(e!==null);Jr===0&&(Jr=5)}function qc(n,e,t){var r=Dn,i=go.transition;try{go.transition=null,Dn=1,mG(n,e,t,r)}finally{go.transition=i,Dn=r}return null}function mG(n,e,t,r){do Ih();while(wu!==null);if(En&6)throw Error(qe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(qe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Y5(n,s),n===li&&(zr=li=null,_i=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||$v||($v=!0,v3(T_,function(){return Ih(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=go.transition,go.transition=null;var o=Dn;Dn=1;var a=En;En|=4,Vw.current=null,uG(n,t),l3(t,n),OH(BM),b_=!!IM,BM=IM=null,n.current=t,cG(t),z5(),En=a,Dn=o,go.transition=s}else n.current=t;if($v&&($v=!1,wu=n,W_=i),s=n.pendingLanes,s===0&&(Bu=null),V5(t.stateNode),As(n,Tr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(V_)throw V_=!1,n=ZM,ZM=null,n;return W_&1&&n.tag!==0&&Ih(),s=n.pendingLanes,s&1?n===$M?cg++:(cg=0,$M=n):cg=0,Yu(),null}function Ih(){if(wu!==null){var n=JB(W_),e=go.transition,t=Dn;try{if(go.transition=null,Dn=16>n?16:n,wu===null)var r=!1;else{if(n=wu,wu=null,W_=0,En&6)throw Error(qe(331));var i=En;for(En|=4,At=n.current;At!==null;){var s=At,o=s.child;if(At.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(At=f;At!==null;){var h=At;switch(h.tag){case 0:case 11:case 15:lg(8,h,s)}var p=h.child;if(p!==null)p.return=h,At=p;else for(;At!==null;){h=At;var m=h.sibling,v=h.return;if(s3(h),h===f){At=null;break}if(m!==null){m.return=v,At=m;break}At=v}}}var x=s.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}At=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,At=o;else e:for(;At!==null;){if(s=At,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lg(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,At=y;break e}At=s.return}}var M=n.current;for(At=M;At!==null;){o=At;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,At=S;else e:for(o=M;At!==null;){if(a=At,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:g1(9,a)}}catch(I){Sr(a,a.return,I)}if(a===o){At=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,At=C;break e}At=a.return}}if(En=i,Yu(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(l1,n)}catch{}r=!0}return r}finally{Dn=t,go.transition=e}}return!1}function XR(n,e,t){e=Wh(t,e),e=KL(n,e,1),n=Iu(n,e,1),e=qi(),n!==null&&(r0(n,1,e),As(n,e))}function Sr(n,e,t){if(n.tag===3)XR(n,n,t);else for(;e!==null;){if(e.tag===3){XR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bu===null||!Bu.has(r))){n=Wh(t,n),n=YL(e,n,1),e=Iu(e,n,1),n=qi(),e!==null&&(r0(e,1,n),As(e,n));break}}e=e.return}}function gG(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=qi(),n.pingedLanes|=n.suspendedLanes&t,li===n&&(_i&t)===t&&(Jr===4||Jr===3&&(_i&130023424)===_i&&500>Tr()-jw?df(n,0):Ww|=t),As(n,e)}function m3(n,e){e===0&&(n.mode&1?(e=Vv,Vv<<=1,!(Vv&130023424)&&(Vv=4194304)):e=1);var t=qi();n=Tl(n,e),n!==null&&(r0(n,e,t),As(n,t))}function vG(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),m3(n,t)}function yG(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(e),m3(n,t)}var g3;g3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||xs.current)_s=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _s=!1,sG(n,e,t);_s=!!(n.flags&131072)}else _s=!1,sr&&e.flags&1048576&&_L(e,O_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;s_(n,e),n=e.pendingProps;var i=zh(e,Ni.current);Ph(e,t),i=Uw(null,e,r,n,i,t);var s=kw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ss(r)?(s=!0,L_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Lw(e),i.updater=p1,e.stateNode=i,i._reactInternals=e,HM(e,r,n,t),e=WM(null,e,r,!0,s,t)):(e.tag=0,sr&&s&&Tw(e),Ji(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(s_(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xG(r),n=No(r,n),i){case 0:e=VM(null,e,r,n,t);break e;case 1:e=FR(null,e,r,n,t);break e;case 11:e=DR(null,e,r,n,t);break e;case 14:e=OR(null,e,r,No(r.type,n),t);break e}throw Error(qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:No(r,i),VM(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:No(r,i),FR(n,e,r,i,t);case 3:e:{if($L(e),n===null)throw Error(qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ML(n,e),U_(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wh(Error(qe(423)),e),e=NR(n,e,r,t,i);break e}else if(r!==i){i=Wh(Error(qe(424)),e),e=NR(n,e,r,t,i);break e}else for(Us=Pu(e.stateNode.containerInfo.firstChild),zs=e,sr=!0,zo=null,t=CL(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Hh(),r===i){e=Cl(n,e,t);break e}Ji(n,e,r,t)}e=e.child}return e;case 5:return bL(e),n===null&&UM(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,LM(r,i)?o=null:s!==null&&LM(r,s)&&(e.flags|=32),ZL(n,e),Ji(n,e,o,t),e.child;case 6:return n===null&&UM(e),null;case 13:return e3(n,e,t);case 4:return Dw(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Gh(e,null,r,t):Ji(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:No(r,i),DR(n,e,r,i,t);case 7:return Ji(n,e,e.pendingProps,t),e.child;case 8:return Ji(n,e,e.pendingProps.children,t),e.child;case 12:return Ji(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Yn(F_,r._currentValue),r._currentValue=o,s!==null)if(Wo(s.value,o)){if(s.children===i.children&&!xs.current){e=Cl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Al(-1,t&-t),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?l.next=l:(l.next=h.next,h.next=l),f.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),kM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),kM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ji(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ph(e,t),i=vo(i),r=r(i),e.flags|=1,Ji(n,e,r,t),e.child;case 14:return r=e.type,i=No(r,e.pendingProps),i=No(r.type,i),OR(n,e,r,i,t);case 15:return qL(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:No(r,i),s_(n,e),e.tag=1,Ss(r)?(n=!0,L_(e)):n=!1,Ph(e,t),wL(e,r,i),HM(e,r,i,t),WM(null,e,r,!0,n,t);case 19:return t3(n,e,t);case 22:return QL(n,e,t)}throw Error(qe(156,e.tag))};function v3(n,e){return VB(n,e)}function _G(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(n,e,t,r){return new _G(n,e,t,r)}function Yw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xG(n){if(typeof n=="function")return Yw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===pw)return 11;if(n===mw)return 14}return 2}function Du(n,e){var t=n.alternate;return t===null?(t=mo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function l_(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Yw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ch:return hf(t.children,i,s,e);case hw:o=8,i|=8;break;case fM:return n=mo(12,t,e,i|2),n.elementType=fM,n.lanes=s,n;case dM:return n=mo(13,t,e,i),n.elementType=dM,n.lanes=s,n;case hM:return n=mo(19,t,e,i),n.elementType=hM,n.lanes=s,n;case TB:return y1(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case EB:o=10;break e;case wB:o=9;break e;case pw:o=11;break e;case mw:o=14;break e;case gu:o=16,r=null;break e}throw Error(qe(130,n==null?n:typeof n,""))}return e=mo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function hf(n,e,t,r){return n=mo(7,n,r,e),n.lanes=t,n}function y1(n,e,t,r){return n=mo(22,n,r,e),n.elementType=TB,n.lanes=t,n.stateNode={isHidden:!1},n}function iA(n,e,t){return n=mo(6,n,null,e),n.lanes=t,n}function sA(n,e,t){return e=mo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function SG(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kS(0),this.expirationTimes=kS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qw(n,e,t,r,i,s,o,a,l){return n=new SG(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lw(s),n}function AG(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uh,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function y3(n){if(!n)return Hu;n=n._reactInternals;e:{if(bf(n)!==n||n.tag!==1)throw Error(qe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qe(171))}if(n.tag===1){var t=n.type;if(Ss(t))return vL(n,t,e)}return e}function _3(n,e,t,r,i,s,o,a,l){return n=qw(t,r,!0,n,i,s,o,a,l),n.context=y3(null),t=n.current,r=qi(),i=Lu(t),s=Al(r,i),s.callback=e??null,Iu(t,s,i),n.current.lanes=i,r0(n,i,r),As(n,r),n}function _1(n,e,t,r){var i=e.current,s=qi(),o=Lu(i);return t=y3(t),e.context===null?e.context=t:e.pendingContext=t,e=Al(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Iu(i,e,o),n!==null&&(Vo(n,i,o,s),n_(n,i,o)),o}function X_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function JR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Qw(n,e){JR(n,e),(n=n.alternate)&&JR(n,e)}function MG(){return null}var x3=typeof reportError=="function"?reportError:function(n){console.error(n)};function Zw(n){this._internalRoot=n}x1.prototype.render=Zw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(qe(409));_1(n,e,null,null)};x1.prototype.unmount=Zw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Af(function(){_1(null,n,null,null)}),e[wl]=null}};function x1(n){this._internalRoot=n}x1.prototype.unstable_scheduleHydration=function(n){if(n){var e=qB();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xu.length&&e!==0&&e<xu[t].priority;t++);xu.splice(t,0,n),t===0&&ZB(n)}};function $w(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function S1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function KR(){}function EG(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=X_(o);s.call(f)}}var o=_3(e,r,n,0,null,!1,!1,"",KR);return n._reactRootContainer=o,n[wl]=o.current,Rg(n.nodeType===8?n.parentNode:n),Af(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=X_(l);a.call(f)}}var l=qw(n,0,!1,null,null,!1,!1,"",KR);return n._reactRootContainer=l,n[wl]=l.current,Rg(n.nodeType===8?n.parentNode:n),Af(function(){_1(e,l,t,r)}),l}function A1(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=X_(o);a.call(l)}}_1(e,o,n,i)}else o=EG(t,e,n,i,r);return X_(o)}KB=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Qm(e.pendingLanes);t!==0&&(yw(e,t|1),As(e,Tr()),!(En&6)&&(jh=Tr()+500,Yu()))}break;case 13:Af(function(){var r=Tl(n,1);if(r!==null){var i=qi();Vo(r,n,1,i)}}),Qw(n,1)}};_w=function(n){if(n.tag===13){var e=Tl(n,134217728);if(e!==null){var t=qi();Vo(e,n,134217728,t)}Qw(n,134217728)}};YB=function(n){if(n.tag===13){var e=Lu(n),t=Tl(n,e);if(t!==null){var r=qi();Vo(t,n,e,r)}Qw(n,e)}};qB=function(){return Dn};QB=function(n,e){var t=Dn;try{return Dn=n,e()}finally{Dn=t}};MM=function(n,e,t){switch(e){case"input":if(gM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=d1(r);if(!i)throw Error(qe(90));bB(r),gM(r,i)}}}break;case"textarea":PB(n,t);break;case"select":e=t.value,e!=null&&Th(n,!!t.multiple,e,!1)}};NB=Xw;UB=Af;var wG={usingClientEntryPoint:!1,Events:[s0,ph,d1,OB,FB,Xw]},wm={findFiberByHostInstance:nf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TG={bundleType:wm.bundleType,version:wm.version,rendererPackageName:wm.rendererPackageName,rendererConfig:wm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=HB(n),n===null?null:n.stateNode},findFiberByHostInstance:wm.findFiberByHostInstance||MG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ey=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ey.isDisabled&&ey.supportsFiber)try{l1=ey.inject(TG),Ea=ey}catch{}}js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wG;js.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$w(e))throw Error(qe(200));return AG(n,e,null,t)};js.createRoot=function(n,e){if(!$w(n))throw Error(qe(299));var t=!1,r="",i=x3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qw(n,1,!1,null,null,t,!1,r,i),n[wl]=e.current,Rg(n.nodeType===8?n.parentNode:n),new Zw(e)};js.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(qe(188)):(n=Object.keys(n).join(","),Error(qe(268,n)));return n=HB(e),n=n===null?null:n.stateNode,n};js.flushSync=function(n){return Af(n)};js.hydrate=function(n,e,t){if(!S1(e))throw Error(qe(200));return A1(null,n,e,!0,t)};js.hydrateRoot=function(n,e,t){if(!$w(n))throw Error(qe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=x3;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=_3(e,null,n,1,t??null,i,!1,s,o),n[wl]=e.current,Rg(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new x1(e)};js.render=function(n,e,t){if(!S1(e))throw Error(qe(200));return A1(null,n,e,!1,t)};js.unmountComponentAtNode=function(n){if(!S1(n))throw Error(qe(40));return n._reactRootContainer?(Af(function(){A1(null,null,n,!1,function(){n._reactRootContainer=null,n[wl]=null})}),!0):!1};js.unstable_batchedUpdates=Xw;js.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!S1(t))throw Error(qe(200));if(n==null||n._reactInternals===void 0)throw Error(qe(38));return A1(n,e,t,!1,r)};js.version="18.2.0-next-9e3b772b8-20220608";function S3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S3)}catch(n){console.error(n)}}S3(),_B.exports=js;var eT=_B.exports;const ty=o1(eT);var A3,YR=eT;A3=uM.createRoot=YR.createRoot,uM.hydrateRoot=YR.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ap="155",CG={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bG={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},M3=0,nE=1,E3=2,RG=3,w3=0,M1=1,fg=2,Uo=3,Ba=0,Qi=1,Fs=2,PG=2,Ml=0,pf=1,rE=2,iE=3,sE=4,T3=5,ef=100,C3=101,b3=102,oE=103,aE=104,R3=200,P3=201,I3=202,B3=203,tT=204,nT=205,L3=206,D3=207,O3=208,F3=209,N3=210,U3=0,k3=1,z3=2,J_=3,H3=4,G3=5,V3=6,W3=7,a0=0,j3=1,X3=2,Ta=0,J3=1,K3=2,Y3=3,rT=4,q3=5,E1=300,La=301,Gu=302,Xh=303,Ug=304,lp=306,Vu=1e3,yi=1001,Jh=1002,Ar=1003,kg=1004,IG=1004,Bh=1005,BG=1005,Wn=1006,w1=1007,LG=1007,Da=1008,DG=1008,Ca=1009,Q3=1010,Z3=1011,T1=1012,iT=1013,xl=1014,Fi=1015,Yi=1016,sT=1017,oT=1018,Ou=1020,$3=1021,Ki=1023,eD=1024,tD=1025,Fu=1026,Mf=1027,aT=1028,lT=1029,nD=1030,uT=1031,cT=1033,u_=33776,c_=33777,f_=33778,d_=33779,lE=35840,uE=35841,cE=35842,fE=35843,rD=36196,dE=37492,hE=37496,pE=37808,mE=37809,gE=37810,vE=37811,yE=37812,_E=37813,xE=37814,SE=37815,AE=37816,ME=37817,EE=37818,wE=37819,TE=37820,CE=37821,h_=36492,iD=36283,bE=36284,RE=36285,PE=36286,sD=2200,oD=2201,aD=2202,Kh=2300,Ef=2301,p_=2302,of=2400,af=2401,zg=2402,C1=2500,fT=2501,lD=0,dT=1,K_=2,hT=3e3,Nu=3001,uD=3200,cD=3201,qu=0,fD=1,Uu="",Qt="srgb",jo="srgb-linear",pT="display-p3",OG=0,m_=7680,FG=7681,NG=7682,UG=7683,kG=34055,zG=34056,HG=5386,GG=512,VG=513,WG=514,jG=515,XG=516,JG=517,KG=518,dD=519,hD=512,pD=513,mD=514,gD=515,vD=516,yD=517,_D=518,xD=519,Hg=35044,YG=35048,qG=35040,QG=35045,ZG=35049,$G=35041,e8=35046,t8=35050,n8=35042,r8="100",IE="300 es",Y_=1035,Aa=2e3,Gg=2001;class Il{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qR=1234567;const mf=Math.PI/180,Yh=180/Math.PI;function Hs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ii[n&255]+Ii[n>>8&255]+Ii[n>>16&255]+Ii[n>>24&255]+"-"+Ii[e&255]+Ii[e>>8&255]+"-"+Ii[e>>16&15|64]+Ii[e>>24&255]+"-"+Ii[t&63|128]+Ii[t>>8&255]+"-"+Ii[t>>16&255]+Ii[t>>24&255]+Ii[r&255]+Ii[r>>8&255]+Ii[r>>16&255]+Ii[r>>24&255]).toLowerCase()}function Mr(n,e,t){return Math.max(e,Math.min(t,n))}function mT(n,e){return(n%e+e)%e}function i8(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function s8(n,e,t){return n!==e?(t-n)/(e-n):0}function dg(n,e,t){return(1-t)*n+t*e}function o8(n,e,t,r){return dg(n,e,1-Math.exp(-t*r))}function a8(n,e=1){return e-Math.abs(mT(n,e*2)-e)}function l8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function u8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function c8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function f8(n,e){return n+Math.random()*(e-n)}function d8(n){return n*(.5-Math.random())}function h8(n){n!==void 0&&(qR=n);let e=qR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function p8(n){return n*mf}function m8(n){return n*Yh}function BE(n){return(n&n-1)===0&&n!==0}function SD(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function q_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function g8(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),f=s((e+r)/2),h=o((e+r)/2),p=s((e-r)/2),m=o((e-r)/2),v=s((r-e)/2),x=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*p,l*m,a*f);break;case"YZY":n.set(l*m,a*h,l*p,a*f);break;case"ZXZ":n.set(l*p,l*m,a*h,a*f);break;case"XZX":n.set(a*h,l*x,l*v,a*f);break;case"YXY":n.set(l*v,a*h,l*x,a*f);break;case"ZYZ":n.set(l*x,l*v,a*h,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ys(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function rn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const AD={DEG2RAD:mf,RAD2DEG:Yh,generateUUID:Hs,clamp:Mr,euclideanModulo:mT,mapLinear:i8,inverseLerp:s8,lerp:dg,damp:o8,pingpong:a8,smoothstep:l8,smootherstep:u8,randInt:c8,randFloat:f8,randFloatSpread:d8,seededRandom:h8,degToRad:p8,radToDeg:m8,isPowerOfTwo:BE,ceilPowerOfTwo:SD,floorPowerOfTwo:q_,setQuaternionFromProperEuler:g8,normalize:rn,denormalize:ys};class ze{constructor(e=0,t=0){ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Mr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class on{constructor(e,t,r,i,s,o,a,l,f){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,f)}set(e,t,r,i,s,o,a,l,f){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],f=r[1],h=r[4],p=r[7],m=r[2],v=r[5],x=r[8],E=i[0],A=i[3],y=i[6],M=i[1],S=i[4],C=i[7],I=i[2],B=i[5],O=i[8];return s[0]=o*E+a*M+l*I,s[3]=o*A+a*S+l*B,s[6]=o*y+a*C+l*O,s[1]=f*E+h*M+p*I,s[4]=f*A+h*S+p*B,s[7]=f*y+h*C+p*O,s[2]=m*E+v*M+x*I,s[5]=m*A+v*S+x*B,s[8]=m*y+v*C+x*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-r*s*h+r*a*l+i*s*f-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],p=h*o-a*f,m=a*l-h*s,v=f*s-o*l,x=t*p+r*m+i*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/x;return e[0]=p*E,e[1]=(i*f-h*r)*E,e[2]=(a*r-i*o)*E,e[3]=m*E,e[4]=(h*t-i*l)*E,e[5]=(i*s-a*t)*E,e[6]=v*E,e[7]=(r*l-f*t)*E,e[8]=(o*t-r*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(r*l,r*f,-r*(l*o+f*a)+o+e,-i*f,i*l,-i*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(oA.makeScale(e,t)),this}rotate(e){return this.premultiply(oA.makeRotation(-e)),this}translate(e,t){return this.premultiply(oA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const oA=new on;function MD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const v8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Sh(n,e){return new v8[n](e)}function Vg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const QR={};function hg(n){n in QR||(QR[n]=!0,console.warn(n))}function Lh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function aA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const y8=new on().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),_8=new on().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function x8(n){return n.convertSRGBToLinear().applyMatrix3(_8)}function S8(n){return n.applyMatrix3(y8).convertLinearToSRGB()}const A8={[jo]:n=>n,[Qt]:n=>n.convertSRGBToLinear(),[pT]:x8},M8={[jo]:n=>n,[Qt]:n=>n.convertLinearToSRGB(),[pT]:S8},oo={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return jo},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=A8[e],i=M8[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let wd;class gT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{wd===void 0&&(wd=Vg("canvas")),wd.width=e.width,wd.height=e.height;const r=wd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=wd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Vg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Lh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Lh(t[r]/255)*255):t[r]=Lh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let E8=0;class lf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:E8++}),this.uuid=Hs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(lA(i[o].image)):s.push(lA(i[o]))}else s=lA(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function lA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?gT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let w8=0;class tr extends Il{constructor(e=tr.DEFAULT_IMAGE,t=tr.DEFAULT_MAPPING,r=yi,i=yi,s=Wn,o=Da,a=Ki,l=Ca,f=tr.DEFAULT_ANISOTROPY,h=Uu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:w8++}),this.uuid=Hs(),this.name="",this.source=new lf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(hg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Nu?Qt:Uu),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==E1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vu:e.x=e.x-Math.floor(e.x);break;case yi:e.x=e.x<0?0:1;break;case Jh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Vu:e.y=e.y-Math.floor(e.y);break;case yi:e.y=e.y<0?0:1;break;case Jh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return hg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Qt?Nu:hT}set encoding(e){hg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Nu?Qt:Uu}}tr.DEFAULT_IMAGE=null;tr.DEFAULT_MAPPING=E1;tr.DEFAULT_ANISOTROPY=1;class Mn{constructor(e=0,t=0,r=0,i=1){Mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,f=l[0],h=l[4],p=l[8],m=l[1],v=l[5],x=l[9],E=l[2],A=l[6],y=l[10];if(Math.abs(h-m)<.01&&Math.abs(p-E)<.01&&Math.abs(x-A)<.01){if(Math.abs(h+m)<.1&&Math.abs(p+E)<.1&&Math.abs(x+A)<.1&&Math.abs(f+v+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(f+1)/2,C=(v+1)/2,I=(y+1)/2,B=(h+m)/4,O=(p+E)/4,z=(x+A)/4;return S>C&&S>I?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=B/r,s=O/r):C>I?C<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),r=B/i,s=z/i):I<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),r=O/s,i=z/s),this.set(r,i,s,t),this}let M=Math.sqrt((A-x)*(A-x)+(p-E)*(p-E)+(m-h)*(m-h));return Math.abs(M)<.001&&(M=1),this.x=(A-x)/M,this.y=(p-E)/M,this.z=(m-h)/M,this.w=Math.acos((f+v+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ED extends Il{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Mn(0,0,e,t),this.scissorTest=!1,this.viewport=new Mn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(hg("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Nu?Qt:Uu),this.texture=new tr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Wn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new lf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xo extends ED{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class b1 extends tr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ar,this.minFilter=Ar,this.wrapR=yi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class T8 extends Xo{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new b1(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class vT extends tr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ar,this.minFilter=Ar,this.wrapR=yi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class C8 extends Xo{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new vT(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class b8 extends Xo{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class br{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],f=r[i+1],h=r[i+2],p=r[i+3];const m=s[o+0],v=s[o+1],x=s[o+2],E=s[o+3];if(a===0){e[t+0]=l,e[t+1]=f,e[t+2]=h,e[t+3]=p;return}if(a===1){e[t+0]=m,e[t+1]=v,e[t+2]=x,e[t+3]=E;return}if(p!==E||l!==m||f!==v||h!==x){let A=1-a;const y=l*m+f*v+h*x+p*E,M=y>=0?1:-1,S=1-y*y;if(S>Number.EPSILON){const I=Math.sqrt(S),B=Math.atan2(I,y*M);A=Math.sin(A*B)/I,a=Math.sin(a*B)/I}const C=a*M;if(l=l*A+m*C,f=f*A+v*C,h=h*A+x*C,p=p*A+E*C,A===1-a){const I=1/Math.sqrt(l*l+f*f+h*h+p*p);l*=I,f*=I,h*=I,p*=I}}e[t]=l,e[t+1]=f,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],f=r[i+2],h=r[i+3],p=s[o],m=s[o+1],v=s[o+2],x=s[o+3];return e[t]=a*x+h*p+l*v-f*m,e[t+1]=l*x+h*m+f*p-a*v,e[t+2]=f*x+h*v+a*m-l*p,e[t+3]=h*x-a*p-l*m-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,f=a(r/2),h=a(i/2),p=a(s/2),m=l(r/2),v=l(i/2),x=l(s/2);switch(o){case"XYZ":this._x=m*h*p+f*v*x,this._y=f*v*p-m*h*x,this._z=f*h*x+m*v*p,this._w=f*h*p-m*v*x;break;case"YXZ":this._x=m*h*p+f*v*x,this._y=f*v*p-m*h*x,this._z=f*h*x-m*v*p,this._w=f*h*p+m*v*x;break;case"ZXY":this._x=m*h*p-f*v*x,this._y=f*v*p+m*h*x,this._z=f*h*x+m*v*p,this._w=f*h*p-m*v*x;break;case"ZYX":this._x=m*h*p-f*v*x,this._y=f*v*p+m*h*x,this._z=f*h*x-m*v*p,this._w=f*h*p+m*v*x;break;case"YZX":this._x=m*h*p+f*v*x,this._y=f*v*p+m*h*x,this._z=f*h*x-m*v*p,this._w=f*h*p-m*v*x;break;case"XZY":this._x=m*h*p-f*v*x,this._y=f*v*p-m*h*x,this._z=f*h*x+m*v*p,this._w=f*h*p+m*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],f=t[2],h=t[6],p=t[10],m=r+a+p;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(h-l)*v,this._y=(s-f)*v,this._z=(o-i)*v}else if(r>a&&r>p){const v=2*Math.sqrt(1+r-a-p);this._w=(h-l)/v,this._x=.25*v,this._y=(i+o)/v,this._z=(s+f)/v}else if(a>p){const v=2*Math.sqrt(1+a-r-p);this._w=(s-f)/v,this._x=(i+o)/v,this._y=.25*v,this._z=(l+h)/v}else{const v=2*Math.sqrt(1+p-r-a);this._w=(o-i)/v,this._x=(s+f)/v,this._y=(l+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,f=t._z,h=t._w;return this._x=r*h+o*a+i*f-s*l,this._y=i*h+o*l+s*a-r*f,this._z=s*h+o*f+r*l-i*a,this._w=o*h-r*a-i*l-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*r+t*this._x,this._y=v*i+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(l),h=Math.atan2(f,a),p=Math.sin((1-t)*h)/f,m=Math.sin(t*h)/f;return this._w=o*p+this._w*m,this._x=r*p+this._x*m,this._y=i*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,r=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ZR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ZR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,f=l*t+o*i-a*r,h=l*r+a*t-s*i,p=l*i+s*r-o*t,m=-s*t-o*r-a*i;return this.x=f*l+m*-s+h*-a-p*-o,this.y=h*l+m*-o+p*-s-f*-a,this.z=p*l+m*-a+f*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return uA.copy(this).projectOnVector(e),this.sub(uA)}reflect(e){return this.sub(uA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Mr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const uA=new J,ZR=new br;class Ko{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Td.copy(e.boundingBox),Td.applyMatrix4(e.matrixWorld),this.union(Td);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)ol.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(ol)}else i.boundingBox===null&&i.computeBoundingBox(),Td.copy(i.boundingBox),Td.applyMatrix4(e.matrixWorld),this.union(Td)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ol),ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Tm),ny.subVectors(this.max,Tm),Cd.subVectors(e.a,Tm),bd.subVectors(e.b,Tm),Rd.subVectors(e.c,Tm),uu.subVectors(bd,Cd),cu.subVectors(Rd,bd),Uc.subVectors(Cd,Rd);let t=[0,-uu.z,uu.y,0,-cu.z,cu.y,0,-Uc.z,Uc.y,uu.z,0,-uu.x,cu.z,0,-cu.x,Uc.z,0,-Uc.x,-uu.y,uu.x,0,-cu.y,cu.x,0,-Uc.y,Uc.x,0];return!cA(t,Cd,bd,Rd,ny)||(t=[1,0,0,0,1,0,0,0,1],!cA(t,Cd,bd,Rd,ny))?!1:(ry.crossVectors(uu,cu),t=[ry.x,ry.y,ry.z],cA(t,Cd,bd,Rd,ny))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ol).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sl=[new J,new J,new J,new J,new J,new J,new J,new J],ol=new J,Td=new Ko,Cd=new J,bd=new J,Rd=new J,uu=new J,cu=new J,Uc=new J,Tm=new J,ny=new J,ry=new J,kc=new J;function cA(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){kc.fromArray(n,s);const a=i.x*Math.abs(kc.x)+i.y*Math.abs(kc.y)+i.z*Math.abs(kc.z),l=e.dot(kc),f=t.dot(kc),h=r.dot(kc);if(Math.max(-Math.max(l,f,h),Math.min(l,f,h))>a)return!1}return!0}const R8=new Ko,Cm=new J,fA=new J;class xo{constructor(e=new J,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):R8.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cm.subVectors(e,this.center);const t=Cm.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Cm,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(fA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cm.copy(e.center).add(fA)),this.expandByPoint(Cm.copy(e.center).sub(fA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const al=new J,dA=new J,iy=new J,fu=new J,hA=new J,sy=new J,pA=new J;class up{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,al)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=al.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(al.copy(this.origin).addScaledVector(this.direction,t),al.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){dA.copy(e).add(t).multiplyScalar(.5),iy.copy(t).sub(e).normalize(),fu.copy(this.origin).sub(dA);const s=e.distanceTo(t)*.5,o=-this.direction.dot(iy),a=fu.dot(this.direction),l=-fu.dot(iy),f=fu.lengthSq(),h=Math.abs(1-o*o);let p,m,v,x;if(h>0)if(p=o*l-a,m=o*a-l,x=s*h,p>=0)if(m>=-x)if(m<=x){const E=1/h;p*=E,m*=E,v=p*(p+o*m+2*a)+m*(o*p+m+2*l)+f}else m=s,p=Math.max(0,-(o*m+a)),v=-p*p+m*(m+2*l)+f;else m=-s,p=Math.max(0,-(o*m+a)),v=-p*p+m*(m+2*l)+f;else m<=-x?(p=Math.max(0,-(-o*s+a)),m=p>0?-s:Math.min(Math.max(-s,-l),s),v=-p*p+m*(m+2*l)+f):m<=x?(p=0,m=Math.min(Math.max(-s,-l),s),v=m*(m+2*l)+f):(p=Math.max(0,-(o*s+a)),m=p>0?s:Math.min(Math.max(-s,-l),s),v=-p*p+m*(m+2*l)+f);else m=o>0?-s:s,p=Math.max(0,-(o*m+a)),v=-p*p+m*(m+2*l)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(dA).addScaledVector(iy,m),v}intersectSphere(e,t){al.subVectors(e.center,this.origin);const r=al.dot(this.direction),i=al.dot(al)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const f=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,m=this.origin;return f>=0?(r=(e.min.x-m.x)*f,i=(e.max.x-m.x)*f):(r=(e.max.x-m.x)*f,i=(e.min.x-m.x)*f),h>=0?(s=(e.min.y-m.y)*h,o=(e.max.y-m.y)*h):(s=(e.max.y-m.y)*h,o=(e.min.y-m.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),p>=0?(a=(e.min.z-m.z)*p,l=(e.max.z-m.z)*p):(a=(e.max.z-m.z)*p,l=(e.min.z-m.z)*p),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,al)!==null}intersectTriangle(e,t,r,i,s){hA.subVectors(t,e),sy.subVectors(r,e),pA.crossVectors(hA,sy);let o=this.direction.dot(pA),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;fu.subVectors(this.origin,e);const l=a*this.direction.dot(sy.crossVectors(fu,sy));if(l<0)return null;const f=a*this.direction.dot(hA.cross(fu));if(f<0||l+f>o)return null;const h=-a*fu.dot(pA);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ht{constructor(e,t,r,i,s,o,a,l,f,h,p,m,v,x,E,A){Ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,f,h,p,m,v,x,E,A)}set(e,t,r,i,s,o,a,l,f,h,p,m,v,x,E,A){const y=this.elements;return y[0]=e,y[4]=t,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=f,y[6]=h,y[10]=p,y[14]=m,y[3]=v,y[7]=x,y[11]=E,y[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ht().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Pd.setFromMatrixColumn(e,0).length(),s=1/Pd.setFromMatrixColumn(e,1).length(),o=1/Pd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),f=Math.sin(i),h=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*h,v=o*p,x=a*h,E=a*p;t[0]=l*h,t[4]=-l*p,t[8]=f,t[1]=v+x*f,t[5]=m-E*f,t[9]=-a*l,t[2]=E-m*f,t[6]=x+v*f,t[10]=o*l}else if(e.order==="YXZ"){const m=l*h,v=l*p,x=f*h,E=f*p;t[0]=m+E*a,t[4]=x*a-v,t[8]=o*f,t[1]=o*p,t[5]=o*h,t[9]=-a,t[2]=v*a-x,t[6]=E+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*h,v=l*p,x=f*h,E=f*p;t[0]=m-E*a,t[4]=-o*p,t[8]=x+v*a,t[1]=v+x*a,t[5]=o*h,t[9]=E-m*a,t[2]=-o*f,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*h,v=o*p,x=a*h,E=a*p;t[0]=l*h,t[4]=x*f-v,t[8]=m*f+E,t[1]=l*p,t[5]=E*f+m,t[9]=v*f-x,t[2]=-f,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,v=o*f,x=a*l,E=a*f;t[0]=l*h,t[4]=E-m*p,t[8]=x*p+v,t[1]=p,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=v*p+x,t[10]=m-E*p}else if(e.order==="XZY"){const m=o*l,v=o*f,x=a*l,E=a*f;t[0]=l*h,t[4]=-p,t[8]=f*h,t[1]=m*p+E,t[5]=o*h,t[9]=v*p-x,t[2]=x*p-v,t[6]=a*h,t[10]=E*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(P8,e,I8)}lookAt(e,t,r){const i=this.elements;return Ls.subVectors(e,t),Ls.lengthSq()===0&&(Ls.z=1),Ls.normalize(),du.crossVectors(r,Ls),du.lengthSq()===0&&(Math.abs(r.z)===1?Ls.x+=1e-4:Ls.z+=1e-4,Ls.normalize(),du.crossVectors(r,Ls)),du.normalize(),oy.crossVectors(Ls,du),i[0]=du.x,i[4]=oy.x,i[8]=Ls.x,i[1]=du.y,i[5]=oy.y,i[9]=Ls.y,i[2]=du.z,i[6]=oy.z,i[10]=Ls.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],f=r[12],h=r[1],p=r[5],m=r[9],v=r[13],x=r[2],E=r[6],A=r[10],y=r[14],M=r[3],S=r[7],C=r[11],I=r[15],B=i[0],O=i[4],z=i[8],L=i[12],N=i[1],W=i[5],ae=i[9],te=i[13],ie=i[2],le=i[6],ce=i[10],he=i[14],K=i[3],fe=i[7],re=i[11],se=i[15];return s[0]=o*B+a*N+l*ie+f*K,s[4]=o*O+a*W+l*le+f*fe,s[8]=o*z+a*ae+l*ce+f*re,s[12]=o*L+a*te+l*he+f*se,s[1]=h*B+p*N+m*ie+v*K,s[5]=h*O+p*W+m*le+v*fe,s[9]=h*z+p*ae+m*ce+v*re,s[13]=h*L+p*te+m*he+v*se,s[2]=x*B+E*N+A*ie+y*K,s[6]=x*O+E*W+A*le+y*fe,s[10]=x*z+E*ae+A*ce+y*re,s[14]=x*L+E*te+A*he+y*se,s[3]=M*B+S*N+C*ie+I*K,s[7]=M*O+S*W+C*le+I*fe,s[11]=M*z+S*ae+C*ce+I*re,s[15]=M*L+S*te+C*he+I*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],f=e[13],h=e[2],p=e[6],m=e[10],v=e[14],x=e[3],E=e[7],A=e[11],y=e[15];return x*(+s*l*p-i*f*p-s*a*m+r*f*m+i*a*v-r*l*v)+E*(+t*l*v-t*f*m+s*o*m-i*o*v+i*f*h-s*l*h)+A*(+t*f*p-t*a*v-s*o*p+r*o*v+s*a*h-r*f*h)+y*(-i*a*h-t*l*p+t*a*m+i*o*p-r*o*m+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],p=e[9],m=e[10],v=e[11],x=e[12],E=e[13],A=e[14],y=e[15],M=p*A*f-E*m*f+E*l*v-a*A*v-p*l*y+a*m*y,S=x*m*f-h*A*f-x*l*v+o*A*v+h*l*y-o*m*y,C=h*E*f-x*p*f+x*a*v-o*E*v-h*a*y+o*p*y,I=x*p*l-h*E*l-x*a*m+o*E*m+h*a*A-o*p*A,B=t*M+r*S+i*C+s*I;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/B;return e[0]=M*O,e[1]=(E*m*s-p*A*s-E*i*v+r*A*v+p*i*y-r*m*y)*O,e[2]=(a*A*s-E*l*s+E*i*f-r*A*f-a*i*y+r*l*y)*O,e[3]=(p*l*s-a*m*s-p*i*f+r*m*f+a*i*v-r*l*v)*O,e[4]=S*O,e[5]=(h*A*s-x*m*s+x*i*v-t*A*v-h*i*y+t*m*y)*O,e[6]=(x*l*s-o*A*s-x*i*f+t*A*f+o*i*y-t*l*y)*O,e[7]=(o*m*s-h*l*s+h*i*f-t*m*f-o*i*v+t*l*v)*O,e[8]=C*O,e[9]=(x*p*s-h*E*s-x*r*v+t*E*v+h*r*y-t*p*y)*O,e[10]=(o*E*s-x*a*s+x*r*f-t*E*f-o*r*y+t*a*y)*O,e[11]=(h*a*s-o*p*s-h*r*f+t*p*f+o*r*v-t*a*v)*O,e[12]=I*O,e[13]=(h*E*i-x*p*i+x*r*m-t*E*m-h*r*A+t*p*A)*O,e[14]=(x*a*i-o*E*i-x*r*l+t*E*l+o*r*A-t*a*A)*O,e[15]=(o*p*i-h*a*i+h*r*l-t*p*l-o*r*m+t*a*m)*O,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,f=s*o,h=s*a;return this.set(f*o+r,f*a-i*l,f*l+i*a,0,f*a+i*l,h*a+r,h*l-i*o,0,f*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,f=s+s,h=o+o,p=a+a,m=s*f,v=s*h,x=s*p,E=o*h,A=o*p,y=a*p,M=l*f,S=l*h,C=l*p,I=r.x,B=r.y,O=r.z;return i[0]=(1-(E+y))*I,i[1]=(v+C)*I,i[2]=(x-S)*I,i[3]=0,i[4]=(v-C)*B,i[5]=(1-(m+y))*B,i[6]=(A+M)*B,i[7]=0,i[8]=(x+S)*O,i[9]=(A-M)*O,i[10]=(1-(m+E))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Pd.set(i[0],i[1],i[2]).length();const o=Pd.set(i[4],i[5],i[6]).length(),a=Pd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Bo.copy(this);const f=1/s,h=1/o,p=1/a;return Bo.elements[0]*=f,Bo.elements[1]*=f,Bo.elements[2]*=f,Bo.elements[4]*=h,Bo.elements[5]*=h,Bo.elements[6]*=h,Bo.elements[8]*=p,Bo.elements[9]*=p,Bo.elements[10]*=p,t.setFromRotationMatrix(Bo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Aa){const l=this.elements,f=2*s/(t-e),h=2*s/(r-i),p=(t+e)/(t-e),m=(r+i)/(r-i);let v,x;if(a===Aa)v=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===Gg)v=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=f,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=h,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Aa){const l=this.elements,f=1/(t-e),h=1/(r-i),p=1/(o-s),m=(t+e)*f,v=(r+i)*h;let x,E;if(a===Aa)x=(o+s)*p,E=-2*p;else if(a===Gg)x=s*p,E=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*f,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=E,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Pd=new J,Bo=new Ht,P8=new J(0,0,0),I8=new J(1,1,1),du=new J,oy=new J,Ls=new J,$R=new Ht,eP=new br;class cp{constructor(e=0,t=0,r=0,i=cp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],f=i[5],h=i[9],p=i[2],m=i[6],v=i[10];switch(t){case"XYZ":this._y=Math.asin(Mr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Mr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Mr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Mr(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(Mr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Mr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return $R.makeRotationFromQuaternion(e),this.setFromRotationMatrix($R,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return eP.setFromEuler(this),this.setFromQuaternion(eP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}cp.DEFAULT_ORDER="XYZ";class gf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let B8=0;const tP=new J,Id=new br,ll=new Ht,ay=new J,bm=new J,L8=new J,D8=new br,nP=new J(1,0,0),rP=new J(0,1,0),iP=new J(0,0,1),O8={type:"added"},sP={type:"removed"};class Sn extends Il{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:B8++}),this.uuid=Hs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sn.DEFAULT_UP.clone();const e=new J,t=new cp,r=new br,i=new J(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ht},normalMatrix:{value:new on}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=Sn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new gf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Id.setFromAxisAngle(e,t),this.quaternion.multiply(Id),this}rotateOnWorldAxis(e,t){return Id.setFromAxisAngle(e,t),this.quaternion.premultiply(Id),this}rotateX(e){return this.rotateOnAxis(nP,e)}rotateY(e){return this.rotateOnAxis(rP,e)}rotateZ(e){return this.rotateOnAxis(iP,e)}translateOnAxis(e,t){return tP.copy(e).applyQuaternion(this.quaternion),this.position.add(tP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nP,e)}translateY(e){return this.translateOnAxis(rP,e)}translateZ(e){return this.translateOnAxis(iP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ll.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?ay.copy(e):ay.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),bm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ll.lookAt(bm,ay,this.up):ll.lookAt(ay,bm,this.up),this.quaternion.setFromRotationMatrix(ll),i&&(ll.extractRotation(i.matrixWorld),Id.setFromRotationMatrix(ll),this.quaternion.premultiply(Id.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(O8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(sP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(sP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ll.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ll.multiply(e.parent.matrixWorld)),e.applyMatrix4(ll),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bm,e,L8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bm,D8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let f=0,h=l.length;f<h;f++){const p=l[f];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,f=this.material.length;l<f;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),f=o(e.textures),h=o(e.images),p=o(e.shapes),m=o(e.skeletons),v=o(e.animations),x=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=i,r;function o(a){const l=[];for(const f in a){const h=a[f];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Sn.DEFAULT_UP=new J(0,1,0);Sn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Lo=new J,ul=new J,mA=new J,cl=new J,Bd=new J,Ld=new J,oP=new J,gA=new J,vA=new J,yA=new J;let ly=!1;class vs{constructor(e=new J,t=new J,r=new J){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Lo.subVectors(e,t),i.cross(Lo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Lo.subVectors(i,t),ul.subVectors(r,t),mA.subVectors(e,t);const o=Lo.dot(Lo),a=Lo.dot(ul),l=Lo.dot(mA),f=ul.dot(ul),h=ul.dot(mA),p=o*f-a*a;if(p===0)return s.set(-2,-1,-1);const m=1/p,v=(f*l-a*h)*m,x=(o*h-a*l)*m;return s.set(1-v-x,x,v)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,cl),cl.x>=0&&cl.y>=0&&cl.x+cl.y<=1}static getUV(e,t,r,i,s,o,a,l){return ly===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ly=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,cl),l.setScalar(0),l.addScaledVector(s,cl.x),l.addScaledVector(o,cl.y),l.addScaledVector(a,cl.z),l}static isFrontFacing(e,t,r,i){return Lo.subVectors(r,t),ul.subVectors(e,t),Lo.cross(ul).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Lo.subVectors(this.c,this.b),ul.subVectors(this.a,this.b),Lo.cross(ul).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return ly===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ly=!0),vs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return vs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return vs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Bd.subVectors(i,r),Ld.subVectors(s,r),gA.subVectors(e,r);const l=Bd.dot(gA),f=Ld.dot(gA);if(l<=0&&f<=0)return t.copy(r);vA.subVectors(e,i);const h=Bd.dot(vA),p=Ld.dot(vA);if(h>=0&&p<=h)return t.copy(i);const m=l*p-h*f;if(m<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(Bd,o);yA.subVectors(e,s);const v=Bd.dot(yA),x=Ld.dot(yA);if(x>=0&&v<=x)return t.copy(s);const E=v*f-l*x;if(E<=0&&f>=0&&x<=0)return a=f/(f-x),t.copy(r).addScaledVector(Ld,a);const A=h*x-v*p;if(A<=0&&p-h>=0&&v-x>=0)return oP.subVectors(s,i),a=(p-h)/(p-h+(v-x)),t.copy(i).addScaledVector(oP,a);const y=1/(A+E+m);return o=E*y,a=m*y,t.copy(r).addScaledVector(Bd,o).addScaledVector(Ld,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let F8=0;class Hr extends Il{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F8++}),this.uuid=Hs(),this.name="",this.type="Material",this.blending=pf,this.side=Ba,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=tT,this.blendDst=nT,this.blendEquation=ef,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=J_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=m_,this.stencilZFail=m_,this.stencilZPass=m_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==pf&&(r.blending=this.blending),this.side!==Ba&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const wD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Do={h:0,s:0,l:0},uy={h:0,s:0,l:0};function _A(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class tt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,oo.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=oo.workingColorSpace){return this.r=e,this.g=t,this.b=r,oo.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=oo.workingColorSpace){if(e=mT(e,1),t=Mr(t,0,1),r=Mr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=_A(o,s,e+1/3),this.g=_A(o,s,e),this.b=_A(o,s,e-1/3)}return oo.toWorkingColorSpace(this,i),this}setStyle(e,t=Qt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qt){const r=wD[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lh(e.r),this.g=Lh(e.g),this.b=Lh(e.b),this}copyLinearToSRGB(e){return this.r=aA(e.r),this.g=aA(e.g),this.b=aA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qt){return oo.fromWorkingColorSpace(Bi.copy(this),e),Math.round(Mr(Bi.r*255,0,255))*65536+Math.round(Mr(Bi.g*255,0,255))*256+Math.round(Mr(Bi.b*255,0,255))}getHexString(e=Qt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=oo.workingColorSpace){oo.fromWorkingColorSpace(Bi.copy(this),t);const r=Bi.r,i=Bi.g,s=Bi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,f;const h=(a+o)/2;if(a===o)l=0,f=0;else{const p=o-a;switch(f=h<=.5?p/(o+a):p/(2-o-a),o){case r:l=(i-s)/p+(i<s?6:0);break;case i:l=(s-r)/p+2;break;case s:l=(r-i)/p+4;break}l/=6}return e.h=l,e.s=f,e.l=h,e}getRGB(e,t=oo.workingColorSpace){return oo.fromWorkingColorSpace(Bi.copy(this),t),e.r=Bi.r,e.g=Bi.g,e.b=Bi.b,e}getStyle(e=Qt){oo.fromWorkingColorSpace(Bi.copy(this),e);const t=Bi.r,r=Bi.g,i=Bi.b;return e!==Qt?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Do),Do.h+=e,Do.s+=t,Do.l+=r,this.setHSL(Do.h,Do.s,Do.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Do),e.getHSL(uy);const r=dg(Do.h,uy.h,t),i=dg(Do.s,uy.s,t),s=dg(Do.l,uy.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Bi=new tt;tt.NAMES=wD;class ks extends Hr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vl=N8();function N8(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):f<-14?(r[l]=1024>>-f-14,r[l|256]=1024>>-f-14|32768,i[l]=-f-1,i[l|256]=-f-1):f<=15?(r[l]=f+15<<10,r[l|256]=f+15<<10|32768,i[l]=13,i[l|256]=13):f<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,h=0;for(;!(f&8388608);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,s[l]=f|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function ps(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Mr(n,-65504,65504),vl.floatView[0]=n;const e=vl.uint32View[0],t=e>>23&511;return vl.baseTable[t]+((e&8388607)>>vl.shiftTable[t])}function $m(n){const e=n>>10;return vl.uint32View[0]=vl.mantissaTable[vl.offsetTable[e]+(n&1023)]+vl.exponentTable[e],vl.floatView[0]}const uf={toHalfFloat:ps,fromHalfFloat:$m},Nr=new J,cy=new ze;class Cn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Hg,this.updateRange={offset:0,count:-1},this.gpuType=Fi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)cy.fromBufferAttribute(this,t),cy.applyMatrix3(e),this.setXY(t,cy.x,cy.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Nr.fromBufferAttribute(this,t),Nr.applyMatrix3(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Nr.fromBufferAttribute(this,t),Nr.applyMatrix4(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Nr.fromBufferAttribute(this,t),Nr.applyNormalMatrix(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Nr.fromBufferAttribute(this,t),Nr.transformDirection(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ys(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=rn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ys(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ys(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ys(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ys(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Hg&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class U8 extends Cn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class k8 extends Cn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class z8 extends Cn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class H8 extends Cn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class yT extends Cn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class G8 extends Cn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class _T extends Cn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class V8 extends Cn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=$m(this.array[e*this.itemSize]);return this.normalized&&(t=ys(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=ps(t),this}getY(e){let t=$m(this.array[e*this.itemSize+1]);return this.normalized&&(t=ys(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=ps(t),this}getZ(e){let t=$m(this.array[e*this.itemSize+2]);return this.normalized&&(t=ys(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=ps(t),this}getW(e){let t=$m(this.array[e*this.itemSize+3]);return this.normalized&&(t=ys(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=ps(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.array[e+0]=ps(t),this.array[e+1]=ps(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.array[e+0]=ps(t),this.array[e+1]=ps(r),this.array[e+2]=ps(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.array[e+0]=ps(t),this.array[e+1]=ps(r),this.array[e+2]=ps(i),this.array[e+3]=ps(s),this}}class wt extends Cn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class W8 extends Cn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let j8=0;const io=new Ht,xA=new Sn,Dd=new J,Ds=new Ko,Rm=new Ko,oi=new J;class Zt extends Il{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:j8++}),this.uuid=Hs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MD(e)?_T:yT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new on().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return io.makeRotationFromQuaternion(e),this.applyMatrix4(io),this}rotateX(e){return io.makeRotationX(e),this.applyMatrix4(io),this}rotateY(e){return io.makeRotationY(e),this.applyMatrix4(io),this}rotateZ(e){return io.makeRotationZ(e),this.applyMatrix4(io),this}translate(e,t,r){return io.makeTranslation(e,t,r),this.applyMatrix4(io),this}scale(e,t,r){return io.makeScale(e,t,r),this.applyMatrix4(io),this}lookAt(e){return xA.lookAt(e),xA.updateMatrix(),this.applyMatrix4(xA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dd).negate(),this.translate(Dd.x,Dd.y,Dd.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new wt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ko);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ds.setFromBufferAttribute(s),this.morphTargetsRelative?(oi.addVectors(this.boundingBox.min,Ds.min),this.boundingBox.expandByPoint(oi),oi.addVectors(this.boundingBox.max,Ds.max),this.boundingBox.expandByPoint(oi)):(this.boundingBox.expandByPoint(Ds.min),this.boundingBox.expandByPoint(Ds.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new J,1/0);return}if(e){const r=this.boundingSphere.center;if(Ds.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Rm.setFromBufferAttribute(a),this.morphTargetsRelative?(oi.addVectors(Ds.min,Rm.min),Ds.expandByPoint(oi),oi.addVectors(Ds.max,Rm.max),Ds.expandByPoint(oi)):(Ds.expandByPoint(Rm.min),Ds.expandByPoint(Rm.max))}Ds.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)oi.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(oi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)oi.fromBufferAttribute(a,f),l&&(Dd.fromBufferAttribute(e,f),oi.add(Dd)),i=Math.max(i,r.distanceToSquared(oi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,f=[],h=[];for(let N=0;N<a;N++)f[N]=new J,h[N]=new J;const p=new J,m=new J,v=new J,x=new ze,E=new ze,A=new ze,y=new J,M=new J;function S(N,W,ae){p.fromArray(i,N*3),m.fromArray(i,W*3),v.fromArray(i,ae*3),x.fromArray(o,N*2),E.fromArray(o,W*2),A.fromArray(o,ae*2),m.sub(p),v.sub(p),E.sub(x),A.sub(x);const te=1/(E.x*A.y-A.x*E.y);isFinite(te)&&(y.copy(m).multiplyScalar(A.y).addScaledVector(v,-E.y).multiplyScalar(te),M.copy(v).multiplyScalar(E.x).addScaledVector(m,-A.x).multiplyScalar(te),f[N].add(y),f[W].add(y),f[ae].add(y),h[N].add(M),h[W].add(M),h[ae].add(M))}let C=this.groups;C.length===0&&(C=[{start:0,count:r.length}]);for(let N=0,W=C.length;N<W;++N){const ae=C[N],te=ae.start,ie=ae.count;for(let le=te,ce=te+ie;le<ce;le+=3)S(r[le+0],r[le+1],r[le+2])}const I=new J,B=new J,O=new J,z=new J;function L(N){O.fromArray(s,N*3),z.copy(O);const W=f[N];I.copy(W),I.sub(O.multiplyScalar(O.dot(W))).normalize(),B.crossVectors(z,W);const te=B.dot(h[N])<0?-1:1;l[N*4]=I.x,l[N*4+1]=I.y,l[N*4+2]=I.z,l[N*4+3]=te}for(let N=0,W=C.length;N<W;++N){const ae=C[N],te=ae.start,ie=ae.count;for(let le=te,ce=te+ie;le<ce;le+=3)L(r[le+0]),L(r[le+1]),L(r[le+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Cn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let m=0,v=r.count;m<v;m++)r.setXYZ(m,0,0,0);const i=new J,s=new J,o=new J,a=new J,l=new J,f=new J,h=new J,p=new J;if(e)for(let m=0,v=e.count;m<v;m+=3){const x=e.getX(m+0),E=e.getX(m+1),A=e.getX(m+2);i.fromBufferAttribute(t,x),s.fromBufferAttribute(t,E),o.fromBufferAttribute(t,A),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),a.fromBufferAttribute(r,x),l.fromBufferAttribute(r,E),f.fromBufferAttribute(r,A),a.add(h),l.add(h),f.add(h),r.setXYZ(x,a.x,a.y,a.z),r.setXYZ(E,l.x,l.y,l.z),r.setXYZ(A,f.x,f.y,f.z)}else for(let m=0,v=t.count;m<v;m+=3)i.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),r.setXYZ(m+0,h.x,h.y,h.z),r.setXYZ(m+1,h.x,h.y,h.z),r.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)oi.fromBufferAttribute(e,t),oi.normalize(),e.setXYZ(t,oi.x,oi.y,oi.z)}toNonIndexed(){function e(a,l){const f=a.array,h=a.itemSize,p=a.normalized,m=new f.constructor(l.length*h);let v=0,x=0;for(let E=0,A=l.length;E<A;E++){a.isInterleavedBufferAttribute?v=l[E]*a.data.stride+a.offset:v=l[E]*h;for(let y=0;y<h;y++)m[x++]=f[v++]}return new Cn(m,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],f=e(l,r);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const l=[],f=s[a];for(let h=0,p=f.length;h<p;h++){const m=f[h],v=e(m,r);l.push(v)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const f=r[l];e.data.attributes[l]=f.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p];h.push(v.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const f in i){const h=i[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],p=s[f];for(let m=0,v=p.length;m<v;m++)h.push(p[m].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const p=o[f];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const aP=new Ht,zc=new up,fy=new xo,lP=new J,Od=new J,Fd=new J,Nd=new J,SA=new J,dy=new J,hy=new ze,py=new ze,my=new ze,uP=new J,cP=new J,fP=new J,gy=new J,vy=new J;class Kr extends Sn{constructor(e=new Zt,t=new ks){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){dy.set(0,0,0);for(let l=0,f=s.length;l<f;l++){const h=a[l],p=s[l];h!==0&&(SA.fromBufferAttribute(p,e),o?dy.addScaledVector(SA,h):dy.addScaledVector(SA.sub(t),h))}t.add(dy)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),fy.copy(r.boundingSphere),fy.applyMatrix4(s),zc.copy(e.ray).recast(e.near),!(fy.containsPoint(zc.origin)===!1&&(zc.intersectSphere(fy,lP)===null||zc.origin.distanceToSquared(lP)>(e.far-e.near)**2))&&(aP.copy(s).invert(),zc.copy(e.ray).applyMatrix4(aP),!(r.boundingBox!==null&&zc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,zc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,f=s.attributes.uv,h=s.attributes.uv1,p=s.attributes.normal,m=s.groups,v=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,E=m.length;x<E;x++){const A=m[x],y=o[A.materialIndex],M=Math.max(A.start,v.start),S=Math.min(a.count,Math.min(A.start+A.count,v.start+v.count));for(let C=M,I=S;C<I;C+=3){const B=a.getX(C),O=a.getX(C+1),z=a.getX(C+2);i=yy(this,y,e,r,f,h,p,B,O,z),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=A.materialIndex,t.push(i))}}else{const x=Math.max(0,v.start),E=Math.min(a.count,v.start+v.count);for(let A=x,y=E;A<y;A+=3){const M=a.getX(A),S=a.getX(A+1),C=a.getX(A+2);i=yy(this,o,e,r,f,h,p,M,S,C),i&&(i.faceIndex=Math.floor(A/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,E=m.length;x<E;x++){const A=m[x],y=o[A.materialIndex],M=Math.max(A.start,v.start),S=Math.min(l.count,Math.min(A.start+A.count,v.start+v.count));for(let C=M,I=S;C<I;C+=3){const B=C,O=C+1,z=C+2;i=yy(this,y,e,r,f,h,p,B,O,z),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=A.materialIndex,t.push(i))}}else{const x=Math.max(0,v.start),E=Math.min(l.count,v.start+v.count);for(let A=x,y=E;A<y;A+=3){const M=A,S=A+1,C=A+2;i=yy(this,o,e,r,f,h,p,M,S,C),i&&(i.faceIndex=Math.floor(A/3),t.push(i))}}}}function X8(n,e,t,r,i,s,o,a){let l;if(e.side===Qi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Ba,a),l===null)return null;vy.copy(a),vy.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(vy);return f<t.near||f>t.far?null:{distance:f,point:vy.clone(),object:n}}function yy(n,e,t,r,i,s,o,a,l,f){n.getVertexPosition(a,Od),n.getVertexPosition(l,Fd),n.getVertexPosition(f,Nd);const h=X8(n,e,t,r,Od,Fd,Nd,gy);if(h){i&&(hy.fromBufferAttribute(i,a),py.fromBufferAttribute(i,l),my.fromBufferAttribute(i,f),h.uv=vs.getInterpolation(gy,Od,Fd,Nd,hy,py,my,new ze)),s&&(hy.fromBufferAttribute(s,a),py.fromBufferAttribute(s,l),my.fromBufferAttribute(s,f),h.uv1=vs.getInterpolation(gy,Od,Fd,Nd,hy,py,my,new ze),h.uv2=h.uv1),o&&(uP.fromBufferAttribute(o,a),cP.fromBufferAttribute(o,l),fP.fromBufferAttribute(o,f),h.normal=vs.getInterpolation(gy,Od,Fd,Nd,uP,cP,fP,new J),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:f,normal:new J,materialIndex:0};vs.getNormal(Od,Fd,Nd,p.normal),h.face=p}return h}class Rf extends Zt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],h=[],p=[];let m=0,v=0;x("z","y","x",-1,-1,r,t,e,o,s,0),x("z","y","x",1,-1,r,t,-e,o,s,1),x("x","z","y",1,1,e,r,t,i,o,2),x("x","z","y",1,-1,e,r,-t,i,o,3),x("x","y","z",1,-1,e,t,r,i,s,4),x("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new wt(f,3)),this.setAttribute("normal",new wt(h,3)),this.setAttribute("uv",new wt(p,2));function x(E,A,y,M,S,C,I,B,O,z,L){const N=C/O,W=I/z,ae=C/2,te=I/2,ie=B/2,le=O+1,ce=z+1;let he=0,K=0;const fe=new J;for(let re=0;re<ce;re++){const se=re*W-te;for(let oe=0;oe<le;oe++){const Le=oe*N-ae;fe[E]=Le*M,fe[A]=se*S,fe[y]=ie,f.push(fe.x,fe.y,fe.z),fe[E]=0,fe[A]=0,fe[y]=B>0?1:-1,h.push(fe.x,fe.y,fe.z),p.push(oe/O),p.push(1-re/z),he+=1}}for(let re=0;re<z;re++)for(let se=0;se<O;se++){const oe=m+se+le*re,Le=m+se+le*(re+1),Oe=m+(se+1)+le*(re+1),De=m+(se+1)+le*re;l.push(oe,Le,De),l.push(Le,Oe,De),K+=6}a.addGroup(v,K,L),v+=K,m+=he}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Xi(n){const e={};for(let t=0;t<n.length;t++){const r=qh(n[t]);for(const i in r)e[i]=r[i]}return e}function J8(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function TD(n){return n.getRenderTarget()===null?n.outputColorSpace:jo}const CD={clone:qh,merge:Xi};var K8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Jo extends Hr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=K8,this.fragmentShader=Y8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qh(e.uniforms),this.uniformsGroups=J8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class l0 extends Sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht,this.coordinateSystem=Aa}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let Cr=class extends l0{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Yh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(mf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yh*2*Math.atan(Math.tan(mf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(mf*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/f,i*=o.width/l,r*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Ud=-90,kd=1;class bD extends Sn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new Cr(Ud,kd,e,t);i.layers=this.layers,this.add(i);const s=new Cr(Ud,kd,e,t);s.layers=this.layers,this.add(s);const o=new Cr(Ud,kd,e,t);o.layers=this.layers,this.add(o);const a=new Cr(Ud,kd,e,t);a.layers=this.layers,this.add(a);const l=new Cr(Ud,kd,e,t);l.layers=this.layers,this.add(l);const f=new Cr(Ud,kd,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const f of t)this.remove(f);if(e===Aa)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Gg)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,f]=this.children,h=e.getRenderTarget(),p=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,f),e.setRenderTarget(h),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class u0 extends tr{constructor(e,t,r,i,s,o,a,l,f,h){e=e!==void 0?e:[],t=t!==void 0?t:La,super(e,t,r,i,s,o,a,l,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xT extends Xo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(hg("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Nu?Qt:Uu),this.texture=new u0(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Wn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Rf(5,5,5),s=new Jo({name:"CubemapFromEquirect",uniforms:qh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Qi,blending:Ml});s.uniforms.tEquirect.value=t;const o=new Kr(i,s),a=t.minFilter;return t.minFilter===Da&&(t.minFilter=Wn),new bD(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const AA=new J,q8=new J,Q8=new on;class yu{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=AA.subVectors(r,t).cross(q8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(AA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Q8.getNormalMatrix(e),i=this.coplanarPoint(AA).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hc=new xo,_y=new J;class R1{constructor(e=new yu,t=new yu,r=new yu,i=new yu,s=new yu,o=new yu){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Aa){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],f=i[4],h=i[5],p=i[6],m=i[7],v=i[8],x=i[9],E=i[10],A=i[11],y=i[12],M=i[13],S=i[14],C=i[15];if(r[0].setComponents(l-s,m-f,A-v,C-y).normalize(),r[1].setComponents(l+s,m+f,A+v,C+y).normalize(),r[2].setComponents(l+o,m+h,A+x,C+M).normalize(),r[3].setComponents(l-o,m-h,A-x,C-M).normalize(),r[4].setComponents(l-a,m-p,A-E,C-S).normalize(),t===Aa)r[5].setComponents(l+a,m+p,A+E,C+S).normalize();else if(t===Gg)r[5].setComponents(a,p,E,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Hc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hc)}intersectsSprite(e){return Hc.center.set(0,0,0),Hc.radius=.7071067811865476,Hc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(_y.x=i.normal.x>0?e.max.x:e.min.x,_y.y=i.normal.y>0?e.max.y:e.min.y,_y.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(_y)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function RD(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Z8(n,e){const t=e.isWebGL2,r=new WeakMap;function i(f,h){const p=f.array,m=f.usage,v=n.createBuffer();n.bindBuffer(h,v),n.bufferData(h,p,m),f.onUploadCallback();let x;if(p instanceof Float32Array)x=n.FLOAT;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)x=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=n.SHORT;else if(p instanceof Uint32Array)x=n.UNSIGNED_INT;else if(p instanceof Int32Array)x=n.INT;else if(p instanceof Int8Array)x=n.BYTE;else if(p instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:v,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function s(f,h,p){const m=h.array,v=h.updateRange;n.bindBuffer(p,f),v.count===-1?n.bufferSubData(p,0,m):(t?n.bufferSubData(p,v.offset*m.BYTES_PER_ELEMENT,m,v.offset,v.count):n.bufferSubData(p,v.offset*m.BYTES_PER_ELEMENT,m.subarray(v.offset,v.offset+v.count)),v.count=-1),h.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),r.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const h=r.get(f);h&&(n.deleteBuffer(h.buffer),r.delete(f))}function l(f,h){if(f.isGLBufferAttribute){const m=r.get(f);(!m||m.version<f.version)&&r.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const p=r.get(f);p===void 0?r.set(f,i(f,h)):p.version<f.version&&(s(p.buffer,f,h),p.version=f.version)}return{get:o,remove:a,update:l}}class c0 extends Zt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),f=a+1,h=l+1,p=e/a,m=t/l,v=[],x=[],E=[],A=[];for(let y=0;y<h;y++){const M=y*m-o;for(let S=0;S<f;S++){const C=S*p-s;x.push(C,-M,0),E.push(0,0,1),A.push(S/a),A.push(1-y/l)}}for(let y=0;y<l;y++)for(let M=0;M<a;M++){const S=M+f*y,C=M+f*(y+1),I=M+1+f*(y+1),B=M+1+f*y;v.push(S,C,B),v.push(C,I,B)}this.setIndex(v),this.setAttribute("position",new wt(x,3)),this.setAttribute("normal",new wt(E,3)),this.setAttribute("uv",new wt(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c0(e.width,e.height,e.widthSegments,e.heightSegments)}}var $8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,e6=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,t6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,n6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,r6=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,i6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,s6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,o6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,a6=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,l6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,u6=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,c6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,f6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,d6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,h6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,p6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,m6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,g6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,v6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,y6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,_6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,x6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,S6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,A6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,M6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,E6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,w6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,T6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,C6="gl_FragColor = linearToOutputTexel( gl_FragColor );",b6=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,R6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,P6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,I6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,B6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,L6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,D6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,O6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,F6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,N6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,U6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,k6=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,z6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,H6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,G6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,V6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,W6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,j6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,X6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,J6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,K6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Y6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,q6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Q6=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Z6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,$6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,e9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,t9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,n9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,r9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,i9=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,s9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,o9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,a9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,l9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,u9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,c9=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,f9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,d9=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,h9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,p9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,m9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,g9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,v9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,y9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,x9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,S9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,A9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,M9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,E9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,w9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,T9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,C9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,b9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,R9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,P9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,I9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,B9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,L9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,D9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,O9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,F9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,N9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,U9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,k9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,z9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,H9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,G9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,V9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,W9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,j9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,X9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,J9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,K9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Y9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const q9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Q9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,iV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cV=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,SV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TV=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:$8,alphahash_pars_fragment:e6,alphamap_fragment:t6,alphamap_pars_fragment:n6,alphatest_fragment:r6,alphatest_pars_fragment:i6,aomap_fragment:s6,aomap_pars_fragment:o6,begin_vertex:a6,beginnormal_vertex:l6,bsdfs:u6,iridescence_fragment:c6,bumpmap_pars_fragment:f6,clipping_planes_fragment:d6,clipping_planes_pars_fragment:h6,clipping_planes_pars_vertex:p6,clipping_planes_vertex:m6,color_fragment:g6,color_pars_fragment:v6,color_pars_vertex:y6,color_vertex:_6,common:x6,cube_uv_reflection_fragment:S6,defaultnormal_vertex:A6,displacementmap_pars_vertex:M6,displacementmap_vertex:E6,emissivemap_fragment:w6,emissivemap_pars_fragment:T6,colorspace_fragment:C6,colorspace_pars_fragment:b6,envmap_fragment:R6,envmap_common_pars_fragment:P6,envmap_pars_fragment:I6,envmap_pars_vertex:B6,envmap_physical_pars_fragment:W6,envmap_vertex:L6,fog_vertex:D6,fog_pars_vertex:O6,fog_fragment:F6,fog_pars_fragment:N6,gradientmap_pars_fragment:U6,lightmap_fragment:k6,lightmap_pars_fragment:z6,lights_lambert_fragment:H6,lights_lambert_pars_fragment:G6,lights_pars_begin:V6,lights_toon_fragment:j6,lights_toon_pars_fragment:X6,lights_phong_fragment:J6,lights_phong_pars_fragment:K6,lights_physical_fragment:Y6,lights_physical_pars_fragment:q6,lights_fragment_begin:Q6,lights_fragment_maps:Z6,lights_fragment_end:$6,logdepthbuf_fragment:e9,logdepthbuf_pars_fragment:t9,logdepthbuf_pars_vertex:n9,logdepthbuf_vertex:r9,map_fragment:i9,map_pars_fragment:s9,map_particle_fragment:o9,map_particle_pars_fragment:a9,metalnessmap_fragment:l9,metalnessmap_pars_fragment:u9,morphcolor_vertex:c9,morphnormal_vertex:f9,morphtarget_pars_vertex:d9,morphtarget_vertex:h9,normal_fragment_begin:p9,normal_fragment_maps:m9,normal_pars_fragment:g9,normal_pars_vertex:v9,normal_vertex:y9,normalmap_pars_fragment:_9,clearcoat_normal_fragment_begin:x9,clearcoat_normal_fragment_maps:S9,clearcoat_pars_fragment:A9,iridescence_pars_fragment:M9,opaque_fragment:E9,packing:w9,premultiplied_alpha_fragment:T9,project_vertex:C9,dithering_fragment:b9,dithering_pars_fragment:R9,roughnessmap_fragment:P9,roughnessmap_pars_fragment:I9,shadowmap_pars_fragment:B9,shadowmap_pars_vertex:L9,shadowmap_vertex:D9,shadowmask_pars_fragment:O9,skinbase_vertex:F9,skinning_pars_vertex:N9,skinning_vertex:U9,skinnormal_vertex:k9,specularmap_fragment:z9,specularmap_pars_fragment:H9,tonemapping_fragment:G9,tonemapping_pars_fragment:V9,transmission_fragment:W9,transmission_pars_fragment:j9,uv_pars_fragment:X9,uv_pars_vertex:J9,uv_vertex:K9,worldpos_vertex:Y9,background_vert:q9,background_frag:Q9,backgroundCube_vert:Z9,backgroundCube_frag:$9,cube_vert:eV,cube_frag:tV,depth_vert:nV,depth_frag:rV,distanceRGBA_vert:iV,distanceRGBA_frag:sV,equirect_vert:oV,equirect_frag:aV,linedashed_vert:lV,linedashed_frag:uV,meshbasic_vert:cV,meshbasic_frag:fV,meshlambert_vert:dV,meshlambert_frag:hV,meshmatcap_vert:pV,meshmatcap_frag:mV,meshnormal_vert:gV,meshnormal_frag:vV,meshphong_vert:yV,meshphong_frag:_V,meshphysical_vert:xV,meshphysical_frag:SV,meshtoon_vert:AV,meshtoon_frag:MV,points_vert:EV,points_frag:wV,shadow_vert:TV,shadow_frag:CV,sprite_vert:bV,sprite_frag:RV},ot={common:{diffuse:{value:new tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new tt(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},Ho={basic:{uniforms:Xi([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:Xi([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new tt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:Xi([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new tt(0)},specular:{value:new tt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:Xi([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:Xi([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new tt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:Xi([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:Xi([ot.points,ot.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:Xi([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:Xi([ot.common,ot.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:Xi([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:Xi([ot.sprite,ot.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:Xi([ot.common,ot.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:Xi([ot.lights,ot.fog,{color:{value:new tt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};Ho.physical={uniforms:Xi([Ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new tt(0)},specularColor:{value:new tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const xy={r:0,b:0,g:0};function PV(n,e,t,r,i,s,o){const a=new tt(0);let l=s===!0?0:1,f,h,p=null,m=0,v=null;function x(A,y){let M=!1,S=y.isScene===!0?y.background:null;switch(S&&S.isTexture&&(S=(y.backgroundBlurriness>0?t:e).get(S)),S===null?E(a,l):S&&S.isColor&&(E(S,1),M=!0),n.xr.getEnvironmentBlendMode()){case"opaque":M=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),M=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),M=!0;break}(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===lp)?(h===void 0&&(h=new Kr(new Rf(1,1,1),new Jo({name:"BackgroundCubeMaterial",uniforms:qh(Ho.backgroundCube.uniforms),vertexShader:Ho.backgroundCube.vertexShader,fragmentShader:Ho.backgroundCube.fragmentShader,side:Qi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(B,O,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,h.material.toneMapped=S.colorSpace!==Qt,(p!==S||m!==S.version||v!==n.toneMapping)&&(h.material.needsUpdate=!0,p=S,m=S.version,v=n.toneMapping),h.layers.enableAll(),A.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(f===void 0&&(f=new Kr(new c0(2,2),new Jo({name:"BackgroundMaterial",uniforms:qh(Ho.background.uniforms),vertexShader:Ho.background.vertexShader,fragmentShader:Ho.background.fragmentShader,side:Ba,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=S,f.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,f.material.toneMapped=S.colorSpace!==Qt,S.matrixAutoUpdate===!0&&S.updateMatrix(),f.material.uniforms.uvTransform.value.copy(S.matrix),(p!==S||m!==S.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,p=S,m=S.version,v=n.toneMapping),f.layers.enableAll(),A.unshift(f,f.geometry,f.material,0,0,null))}function E(A,y){A.getRGB(xy,TD(n)),r.buffers.color.setClear(xy.r,xy.g,xy.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(A,y=1){a.set(A),l=y,E(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,E(a,l)},render:x}}function IV(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=A(null);let f=l,h=!1;function p(ie,le,ce,he,K){let fe=!1;if(o){const re=E(he,ce,le);f!==re&&(f=re,v(f.object)),fe=y(ie,he,ce,K),fe&&M(ie,he,ce,K)}else{const re=le.wireframe===!0;(f.geometry!==he.id||f.program!==ce.id||f.wireframe!==re)&&(f.geometry=he.id,f.program=ce.id,f.wireframe=re,fe=!0)}K!==null&&t.update(K,n.ELEMENT_ARRAY_BUFFER),(fe||h)&&(h=!1,z(ie,le,ce,he),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(K).buffer))}function m(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(ie){return r.isWebGL2?n.bindVertexArray(ie):s.bindVertexArrayOES(ie)}function x(ie){return r.isWebGL2?n.deleteVertexArray(ie):s.deleteVertexArrayOES(ie)}function E(ie,le,ce){const he=ce.wireframe===!0;let K=a[ie.id];K===void 0&&(K={},a[ie.id]=K);let fe=K[le.id];fe===void 0&&(fe={},K[le.id]=fe);let re=fe[he];return re===void 0&&(re=A(m()),fe[he]=re),re}function A(ie){const le=[],ce=[],he=[];for(let K=0;K<i;K++)le[K]=0,ce[K]=0,he[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:le,enabledAttributes:ce,attributeDivisors:he,object:ie,attributes:{},index:null}}function y(ie,le,ce,he){const K=f.attributes,fe=le.attributes;let re=0;const se=ce.getAttributes();for(const oe in se)if(se[oe].location>=0){const Oe=K[oe];let De=fe[oe];if(De===void 0&&(oe==="instanceMatrix"&&ie.instanceMatrix&&(De=ie.instanceMatrix),oe==="instanceColor"&&ie.instanceColor&&(De=ie.instanceColor)),Oe===void 0||Oe.attribute!==De||De&&Oe.data!==De.data)return!0;re++}return f.attributesNum!==re||f.index!==he}function M(ie,le,ce,he){const K={},fe=le.attributes;let re=0;const se=ce.getAttributes();for(const oe in se)if(se[oe].location>=0){let Oe=fe[oe];Oe===void 0&&(oe==="instanceMatrix"&&ie.instanceMatrix&&(Oe=ie.instanceMatrix),oe==="instanceColor"&&ie.instanceColor&&(Oe=ie.instanceColor));const De={};De.attribute=Oe,Oe&&Oe.data&&(De.data=Oe.data),K[oe]=De,re++}f.attributes=K,f.attributesNum=re,f.index=he}function S(){const ie=f.newAttributes;for(let le=0,ce=ie.length;le<ce;le++)ie[le]=0}function C(ie){I(ie,0)}function I(ie,le){const ce=f.newAttributes,he=f.enabledAttributes,K=f.attributeDivisors;ce[ie]=1,he[ie]===0&&(n.enableVertexAttribArray(ie),he[ie]=1),K[ie]!==le&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ie,le),K[ie]=le)}function B(){const ie=f.newAttributes,le=f.enabledAttributes;for(let ce=0,he=le.length;ce<he;ce++)le[ce]!==ie[ce]&&(n.disableVertexAttribArray(ce),le[ce]=0)}function O(ie,le,ce,he,K,fe,re){re===!0?n.vertexAttribIPointer(ie,le,ce,K,fe):n.vertexAttribPointer(ie,le,ce,he,K,fe)}function z(ie,le,ce,he){if(r.isWebGL2===!1&&(ie.isInstancedMesh||he.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const K=he.attributes,fe=ce.getAttributes(),re=le.defaultAttributeValues;for(const se in fe){const oe=fe[se];if(oe.location>=0){let Le=K[se];if(Le===void 0&&(se==="instanceMatrix"&&ie.instanceMatrix&&(Le=ie.instanceMatrix),se==="instanceColor"&&ie.instanceColor&&(Le=ie.instanceColor)),Le!==void 0){const Oe=Le.normalized,De=Le.itemSize,Ue=t.get(Le);if(Ue===void 0)continue;const Xe=Ue.buffer,rt=Ue.type,Gt=Ue.bytesPerElement,Dt=r.isWebGL2===!0&&(rt===n.INT||rt===n.UNSIGNED_INT||Le.gpuType===iT);if(Le.isInterleavedBufferAttribute){const Ge=Le.data,$=Ge.stride,Ne=Le.offset;if(Ge.isInstancedInterleavedBuffer){for(let Be=0;Be<oe.locationSize;Be++)I(oe.location+Be,Ge.meshPerAttribute);ie.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let Be=0;Be<oe.locationSize;Be++)C(oe.location+Be);n.bindBuffer(n.ARRAY_BUFFER,Xe);for(let Be=0;Be<oe.locationSize;Be++)O(oe.location+Be,De/oe.locationSize,rt,Oe,$*Gt,(Ne+De/oe.locationSize*Be)*Gt,Dt)}else{if(Le.isInstancedBufferAttribute){for(let Ge=0;Ge<oe.locationSize;Ge++)I(oe.location+Ge,Le.meshPerAttribute);ie.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let Ge=0;Ge<oe.locationSize;Ge++)C(oe.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,Xe);for(let Ge=0;Ge<oe.locationSize;Ge++)O(oe.location+Ge,De/oe.locationSize,rt,Oe,De*Gt,De/oe.locationSize*Ge*Gt,Dt)}}else if(re!==void 0){const Oe=re[se];if(Oe!==void 0)switch(Oe.length){case 2:n.vertexAttrib2fv(oe.location,Oe);break;case 3:n.vertexAttrib3fv(oe.location,Oe);break;case 4:n.vertexAttrib4fv(oe.location,Oe);break;default:n.vertexAttrib1fv(oe.location,Oe)}}}}B()}function L(){ae();for(const ie in a){const le=a[ie];for(const ce in le){const he=le[ce];for(const K in he)x(he[K].object),delete he[K];delete le[ce]}delete a[ie]}}function N(ie){if(a[ie.id]===void 0)return;const le=a[ie.id];for(const ce in le){const he=le[ce];for(const K in he)x(he[K].object),delete he[K];delete le[ce]}delete a[ie.id]}function W(ie){for(const le in a){const ce=a[le];if(ce[ie.id]===void 0)continue;const he=ce[ie.id];for(const K in he)x(he[K].object),delete he[K];delete ce[ie.id]}}function ae(){te(),h=!0,f!==l&&(f=l,v(f.object))}function te(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:ae,resetDefaultState:te,dispose:L,releaseStatesOfGeometry:N,releaseStatesOfProgram:W,initAttributes:S,enableAttribute:C,disableUnusedAttributes:B}}function BV(n,e,t,r){const i=r.isWebGL2;let s;function o(f){s=f}function a(f,h){n.drawArrays(s,f,h),t.update(h,s,1)}function l(f,h,p){if(p===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,f,h,p),t.update(h,s,p)}this.setMode=o,this.render=a,this.renderInstances=l}function LV(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(O){if(O==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const f=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),E=n.getParameter(n.MAX_VERTEX_ATTRIBS),A=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=m>0,C=o||e.has("OES_texture_float"),I=S&&C,B=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:x,maxAttributes:E,maxVertexUniforms:A,maxVaryings:y,maxFragmentUniforms:M,vertexTextures:S,floatFragmentTextures:C,floatVertexTextures:I,maxSamples:B}}function DV(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new yu,a=new on,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const v=p.length!==0||m||r!==0||i;return i=m,r=p.length,v},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=h(p,m,0)},this.setState=function(p,m,v){const x=p.clippingPlanes,E=p.clipIntersection,A=p.clipShadows,y=n.get(p);if(!i||x===null||x.length===0||s&&!A)s?h(null):f();else{const M=s?0:r,S=M*4;let C=y.clippingState||null;l.value=C,C=h(x,m,S,v);for(let I=0;I!==S;++I)C[I]=t[I];y.clippingState=C,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=M}};function f(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(p,m,v,x){const E=p!==null?p.length:0;let A=null;if(E!==0){if(A=l.value,x!==!0||A===null){const y=v+E*4,M=m.matrixWorldInverse;a.getNormalMatrix(M),(A===null||A.length<y)&&(A=new Float32Array(y));for(let S=0,C=v;S!==E;++S,C+=4)o.copy(p[S]).applyMatrix4(M,a),o.normal.toArray(A,C),A[C+3]=o.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,A}}function OV(n){let e=new WeakMap;function t(o,a){return a===Xh?o.mapping=La:a===Ug&&(o.mapping=Gu),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Xh||a===Ug)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=new xT(l.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",i),t(f.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Qu extends l0{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ah=4,dP=[.125,.215,.35,.446,.526,.582],tf=20,MA=new Qu,hP=new tt;let EA=null;const Qc=(1+Math.sqrt(5))/2,zd=1/Qc,pP=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,Qc,zd),new J(0,Qc,-zd),new J(zd,0,Qc),new J(-zd,0,Qc),new J(Qc,zd,0),new J(-Qc,zd,0)];class LE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){EA=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(EA),e.scissorTest=!1,Sy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===La||e.mapping===Gu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),EA=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:Yi,format:Ki,colorSpace:jo,depthBuffer:!1},i=mP(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mP(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=FV(s)),this._blurMaterial=NV(s,e,t)}return i}_compileMaterial(e){const t=new Kr(this._lodPlanes[0],e);this._renderer.compile(t,MA)}_sceneToCubeUV(e,t,r,i){const a=new Cr(90,1,t,r),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,m=h.toneMapping;h.getClearColor(hP),h.toneMapping=Ta,h.autoClear=!1;const v=new ks({name:"PMREM.Background",side:Qi,depthWrite:!1,depthTest:!1}),x=new Kr(new Rf,v);let E=!1;const A=e.background;A?A.isColor&&(v.color.copy(A),e.background=null,E=!0):(v.color.copy(hP),E=!0);for(let y=0;y<6;y++){const M=y%3;M===0?(a.up.set(0,l[y],0),a.lookAt(f[y],0,0)):M===1?(a.up.set(0,0,l[y]),a.lookAt(0,f[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,f[y]));const S=this._cubeSize;Sy(i,M*S,y>2?S:0,S,S),h.setRenderTarget(i),E&&h.render(x,a),h.render(e,a)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=m,h.autoClear=p,e.background=A}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===La||e.mapping===Gu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=vP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gP());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Kr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Sy(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,MA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=pP[(i-1)%pP.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new Kr(this._lodPlanes[i],f),m=f.uniforms,v=this._sizeLods[r]-1,x=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*tf-1),E=s/x,A=isFinite(s)?1+Math.floor(h*E):tf;A>tf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${tf}`);const y=[];let M=0;for(let O=0;O<tf;++O){const z=O/E,L=Math.exp(-z*z/2);y.push(L),O===0?M+=L:O<A&&(M+=2*L)}for(let O=0;O<y.length;O++)y[O]=y[O]/M;m.envMap.value=e.texture,m.samples.value=A,m.weights.value=y,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:S}=this;m.dTheta.value=x,m.mipInt.value=S-r;const C=this._sizeLods[i],I=3*C*(i>S-Ah?i-S+Ah:0),B=4*(this._cubeSize-C);Sy(t,I,B,3*C,2*C),l.setRenderTarget(t),l.render(p,MA)}}function FV(n){const e=[],t=[],r=[];let i=n;const s=n-Ah+1+dP.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Ah?l=dP[o-n+Ah-1]:o===0&&(l=0),r.push(l);const f=1/(a-2),h=-f,p=1+f,m=[h,h,p,h,p,p,h,h,p,p,h,p],v=6,x=6,E=3,A=2,y=1,M=new Float32Array(E*x*v),S=new Float32Array(A*x*v),C=new Float32Array(y*x*v);for(let B=0;B<v;B++){const O=B%3*2/3-1,z=B>2?0:-1,L=[O,z,0,O+2/3,z,0,O+2/3,z+1,0,O,z,0,O+2/3,z+1,0,O,z+1,0];M.set(L,E*x*B),S.set(m,A*x*B);const N=[B,B,B,B,B,B];C.set(N,y*x*B)}const I=new Zt;I.setAttribute("position",new Cn(M,E)),I.setAttribute("uv",new Cn(S,A)),I.setAttribute("faceIndex",new Cn(C,y)),e.push(I),i>Ah&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function mP(n,e,t){const r=new Xo(n,e,t);return r.texture.mapping=lp,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Sy(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function NV(n,e,t){const r=new Float32Array(tf),i=new J(0,1,0);return new Jo({name:"SphericalGaussianBlur",defines:{n:tf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function gP(){return new Jo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function vP(){return new Jo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function ST(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function UV(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,f=l===Xh||l===Ug,h=l===La||l===Gu;if(f||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new LE(n)),p=f?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(f&&p&&p.height>0||h&&p&&i(p)){t===null&&(t=new LE(n));const m=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,m),a.addEventListener("dispose",s),m.texture}else return null}}}return a}function i(a){let l=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&l++;return l===f}function s(a){const l=a.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function kV(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function zV(n,e,t,r){const i={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);for(const x in m.morphAttributes){const E=m.morphAttributes[x];for(let A=0,y=E.length;A<y;A++)e.remove(E[A])}m.removeEventListener("dispose",o),delete i[m.id];const v=s.get(m);v&&(e.remove(v),s.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(p,m){return i[m.id]===!0||(m.addEventListener("dispose",o),i[m.id]=!0,t.memory.geometries++),m}function l(p){const m=p.attributes;for(const x in m)e.update(m[x],n.ARRAY_BUFFER);const v=p.morphAttributes;for(const x in v){const E=v[x];for(let A=0,y=E.length;A<y;A++)e.update(E[A],n.ARRAY_BUFFER)}}function f(p){const m=[],v=p.index,x=p.attributes.position;let E=0;if(v!==null){const M=v.array;E=v.version;for(let S=0,C=M.length;S<C;S+=3){const I=M[S+0],B=M[S+1],O=M[S+2];m.push(I,B,B,O,O,I)}}else if(x!==void 0){const M=x.array;E=x.version;for(let S=0,C=M.length/3-1;S<C;S+=3){const I=S+0,B=S+1,O=S+2;m.push(I,B,B,O,O,I)}}else return;const A=new(MD(m)?_T:yT)(m,1);A.version=E;const y=s.get(p);y&&e.remove(y),s.set(p,A)}function h(p){const m=s.get(p);if(m){const v=p.index;v!==null&&m.version<v.version&&f(p)}else f(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:h}}function HV(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function f(m){a=m.type,l=m.bytesPerElement}function h(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function p(m,v,x){if(x===0)return;let E,A;if(i)E=n,A="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[A](s,v,a,m*l,x),t.update(v,s,x)}this.setMode=o,this.setIndex=f,this.render=h,this.renderInstances=p}function GV(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function VV(n,e){return n[0]-e[0]}function WV(n,e){return Math.abs(e[1])-Math.abs(n[1])}function jV(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Mn,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function l(f,h,p){const m=f.morphTargetInfluences;if(e.isWebGL2===!0){const x=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,E=x!==void 0?x.length:0;let A=s.get(h);if(A===void 0||A.count!==E){let le=function(){te.dispose(),s.delete(h),h.removeEventListener("dispose",le)};var v=le;A!==void 0&&A.texture.dispose();const S=h.morphAttributes.position!==void 0,C=h.morphAttributes.normal!==void 0,I=h.morphAttributes.color!==void 0,B=h.morphAttributes.position||[],O=h.morphAttributes.normal||[],z=h.morphAttributes.color||[];let L=0;S===!0&&(L=1),C===!0&&(L=2),I===!0&&(L=3);let N=h.attributes.position.count*L,W=1;N>e.maxTextureSize&&(W=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const ae=new Float32Array(N*W*4*E),te=new b1(ae,N,W,E);te.type=Fi,te.needsUpdate=!0;const ie=L*4;for(let ce=0;ce<E;ce++){const he=B[ce],K=O[ce],fe=z[ce],re=N*W*4*ce;for(let se=0;se<he.count;se++){const oe=se*ie;S===!0&&(o.fromBufferAttribute(he,se),ae[re+oe+0]=o.x,ae[re+oe+1]=o.y,ae[re+oe+2]=o.z,ae[re+oe+3]=0),C===!0&&(o.fromBufferAttribute(K,se),ae[re+oe+4]=o.x,ae[re+oe+5]=o.y,ae[re+oe+6]=o.z,ae[re+oe+7]=0),I===!0&&(o.fromBufferAttribute(fe,se),ae[re+oe+8]=o.x,ae[re+oe+9]=o.y,ae[re+oe+10]=o.z,ae[re+oe+11]=fe.itemSize===4?o.w:1)}}A={count:E,texture:te,size:new ze(N,W)},s.set(h,A),h.addEventListener("dispose",le)}let y=0;for(let S=0;S<m.length;S++)y+=m[S];const M=h.morphTargetsRelative?1:1-y;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",A.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",A.size)}else{const x=m===void 0?0:m.length;let E=r[h.id];if(E===void 0||E.length!==x){E=[];for(let C=0;C<x;C++)E[C]=[C,0];r[h.id]=E}for(let C=0;C<x;C++){const I=E[C];I[0]=C,I[1]=m[C]}E.sort(WV);for(let C=0;C<8;C++)C<x&&E[C][1]?(a[C][0]=E[C][0],a[C][1]=E[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(VV);const A=h.morphAttributes.position,y=h.morphAttributes.normal;let M=0;for(let C=0;C<8;C++){const I=a[C],B=I[0],O=I[1];B!==Number.MAX_SAFE_INTEGER&&O?(A&&h.getAttribute("morphTarget"+C)!==A[B]&&h.setAttribute("morphTarget"+C,A[B]),y&&h.getAttribute("morphNormal"+C)!==y[B]&&h.setAttribute("morphNormal"+C,y[B]),i[C]=O,M+=O):(A&&h.hasAttribute("morphTarget"+C)===!0&&h.deleteAttribute("morphTarget"+C),y&&h.hasAttribute("morphNormal"+C)===!0&&h.deleteAttribute("morphNormal"+C),i[C]=0)}const S=h.morphTargetsRelative?1:1-M;p.getUniforms().setValue(n,"morphTargetBaseInfluence",S),p.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function XV(n,e,t,r){let i=new WeakMap;function s(l){const f=r.render.frame,h=l.geometry,p=e.get(l,h);if(i.get(p)!==f&&(e.update(p),i.set(p,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==f&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,f))),l.isSkinnedMesh){const m=l.skeleton;i.get(m)!==f&&(m.update(),i.set(m,f))}return p}function o(){i=new WeakMap}function a(l){const f=l.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const PD=new tr,ID=new b1,BD=new vT,LD=new u0,yP=[],_P=[],xP=new Float32Array(16),SP=new Float32Array(9),AP=new Float32Array(4);function fp(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=yP[i];if(s===void 0&&(s=new Float32Array(i),yP[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function qr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Qr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function P1(n,e){let t=_P[e];t===void 0&&(t=new Int32Array(e),_P[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function JV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function KV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;n.uniform2fv(this.addr,e),Qr(t,e)}}function YV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qr(t,e))return;n.uniform3fv(this.addr,e),Qr(t,e)}}function qV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;n.uniform4fv(this.addr,e),Qr(t,e)}}function QV(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(qr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qr(t,e)}else{if(qr(t,r))return;AP.set(r),n.uniformMatrix2fv(this.addr,!1,AP),Qr(t,r)}}function ZV(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(qr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qr(t,e)}else{if(qr(t,r))return;SP.set(r),n.uniformMatrix3fv(this.addr,!1,SP),Qr(t,r)}}function $V(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(qr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qr(t,e)}else{if(qr(t,r))return;xP.set(r),n.uniformMatrix4fv(this.addr,!1,xP),Qr(t,r)}}function eW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function tW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;n.uniform2iv(this.addr,e),Qr(t,e)}}function nW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qr(t,e))return;n.uniform3iv(this.addr,e),Qr(t,e)}}function rW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;n.uniform4iv(this.addr,e),Qr(t,e)}}function iW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function sW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;n.uniform2uiv(this.addr,e),Qr(t,e)}}function oW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qr(t,e))return;n.uniform3uiv(this.addr,e),Qr(t,e)}}function aW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;n.uniform4uiv(this.addr,e),Qr(t,e)}}function lW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||PD,i)}function uW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||BD,i)}function cW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||LD,i)}function fW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||ID,i)}function dW(n){switch(n){case 5126:return JV;case 35664:return KV;case 35665:return YV;case 35666:return qV;case 35674:return QV;case 35675:return ZV;case 35676:return $V;case 5124:case 35670:return eW;case 35667:case 35671:return tW;case 35668:case 35672:return nW;case 35669:case 35673:return rW;case 5125:return iW;case 36294:return sW;case 36295:return oW;case 36296:return aW;case 35678:case 36198:case 36298:case 36306:case 35682:return lW;case 35679:case 36299:case 36307:return uW;case 35680:case 36300:case 36308:case 36293:return cW;case 36289:case 36303:case 36311:case 36292:return fW}}function hW(n,e){n.uniform1fv(this.addr,e)}function pW(n,e){const t=fp(e,this.size,2);n.uniform2fv(this.addr,t)}function mW(n,e){const t=fp(e,this.size,3);n.uniform3fv(this.addr,t)}function gW(n,e){const t=fp(e,this.size,4);n.uniform4fv(this.addr,t)}function vW(n,e){const t=fp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function yW(n,e){const t=fp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function _W(n,e){const t=fp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function xW(n,e){n.uniform1iv(this.addr,e)}function SW(n,e){n.uniform2iv(this.addr,e)}function AW(n,e){n.uniform3iv(this.addr,e)}function MW(n,e){n.uniform4iv(this.addr,e)}function EW(n,e){n.uniform1uiv(this.addr,e)}function wW(n,e){n.uniform2uiv(this.addr,e)}function TW(n,e){n.uniform3uiv(this.addr,e)}function CW(n,e){n.uniform4uiv(this.addr,e)}function bW(n,e,t){const r=this.cache,i=e.length,s=P1(t,i);qr(r,s)||(n.uniform1iv(this.addr,s),Qr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||PD,s[o])}function RW(n,e,t){const r=this.cache,i=e.length,s=P1(t,i);qr(r,s)||(n.uniform1iv(this.addr,s),Qr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||BD,s[o])}function PW(n,e,t){const r=this.cache,i=e.length,s=P1(t,i);qr(r,s)||(n.uniform1iv(this.addr,s),Qr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||LD,s[o])}function IW(n,e,t){const r=this.cache,i=e.length,s=P1(t,i);qr(r,s)||(n.uniform1iv(this.addr,s),Qr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||ID,s[o])}function BW(n){switch(n){case 5126:return hW;case 35664:return pW;case 35665:return mW;case 35666:return gW;case 35674:return vW;case 35675:return yW;case 35676:return _W;case 5124:case 35670:return xW;case 35667:case 35671:return SW;case 35668:case 35672:return AW;case 35669:case 35673:return MW;case 5125:return EW;case 36294:return wW;case 36295:return TW;case 36296:return CW;case 35678:case 36198:case 36298:case 36306:case 35682:return bW;case 35679:case 36299:case 36307:return RW;case 35680:case 36300:case 36308:case 36293:return PW;case 36289:case 36303:case 36311:case 36292:return IW}}class LW{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=dW(t.type)}}class DW{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=BW(t.type)}}class OW{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const wA=/(\w+)(\])?(\[|\.)?/g;function MP(n,e){n.seq.push(e),n.map[e.id]=e}function FW(n,e,t){const r=n.name,i=r.length;for(wA.lastIndex=0;;){const s=wA.exec(r),o=wA.lastIndex;let a=s[1];const l=s[2]==="]",f=s[3];if(l&&(a=a|0),f===void 0||f==="["&&o+2===i){MP(t,f===void 0?new LW(a,n,e):new DW(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new OW(a),MP(t,p)),t=p}}}class g_{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);FW(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function EP(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let NW=0;function UW(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function kW(n){switch(n){case jo:return["Linear","( value )"];case Qt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function wP(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+UW(n.getShaderSource(e),o)}else return i}function zW(n,e){const t=kW(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function HW(n,e){let t;switch(e){case J3:t="Linear";break;case K3:t="Reinhard";break;case Y3:t="OptimizedCineon";break;case rT:t="ACESFilmic";break;case q3:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function GW(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(eg).join(`
`)}function VW(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function WW(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function eg(n){return n!==""}function TP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function CP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jW=/^[ \t]*#include +<([\w\d./]+)>/gm;function DE(n){return n.replace(jW,JW)}const XW=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function JW(n,e){let t=nn[e];if(t===void 0){const r=XW.get(e);if(r!==void 0)t=nn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return DE(t)}const KW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bP(n){return n.replace(KW,YW)}function YW(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function RP(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function qW(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===M1?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===fg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Uo&&(e="SHADOWMAP_TYPE_VSM"),e}function QW(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case La:case Gu:e="ENVMAP_TYPE_CUBE";break;case lp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ZW(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Gu:e="ENVMAP_MODE_REFRACTION";break}return e}function $W(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case a0:e="ENVMAP_BLENDING_MULTIPLY";break;case j3:e="ENVMAP_BLENDING_MIX";break;case X3:e="ENVMAP_BLENDING_ADD";break}return e}function ej(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function tj(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=qW(t),f=QW(t),h=ZW(t),p=$W(t),m=ej(t),v=t.isWebGL2?"":GW(t),x=VW(s),E=i.createProgram();let A,y,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(eg).join(`
`),A.length>0&&(A+=`
`),y=[v,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(eg).join(`
`),y.length>0&&(y+=`
`)):(A=[RP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(eg).join(`
`),y=[v,RP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ta?"#define TONE_MAPPING":"",t.toneMapping!==Ta?nn.tonemapping_pars_fragment:"",t.toneMapping!==Ta?HW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,zW("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(eg).join(`
`)),o=DE(o),o=TP(o,t),o=CP(o,t),a=DE(a),a=TP(a,t),a=CP(a,t),o=bP(o),a=bP(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,y=["#define varying in",t.glslVersion===IE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===IE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const S=M+A+o,C=M+y+a,I=EP(i,i.VERTEX_SHADER,S),B=EP(i,i.FRAGMENT_SHADER,C);if(i.attachShader(E,I),i.attachShader(E,B),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E),n.debug.checkShaderErrors){const L=i.getProgramInfoLog(E).trim(),N=i.getShaderInfoLog(I).trim(),W=i.getShaderInfoLog(B).trim();let ae=!0,te=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if(ae=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,E,I,B);else{const ie=wP(i,I,"vertex"),le=wP(i,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Program Info Log: `+L+`
`+ie+`
`+le)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(N===""||W==="")&&(te=!1);te&&(this.diagnostics={runnable:ae,programLog:L,vertexShader:{log:N,prefix:A},fragmentShader:{log:W,prefix:y}})}i.deleteShader(I),i.deleteShader(B);let O;this.getUniforms=function(){return O===void 0&&(O=new g_(i,E)),O};let z;return this.getAttributes=function(){return z===void 0&&(z=WW(i,E)),z},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=NW++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=I,this.fragmentShader=B,this}let nj=0;class rj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new ij(e),t.set(e,r)),r}}class ij{constructor(e){this.id=nj++,this.code=e,this.usedTimes=0}}function sj(n,e,t,r,i,s,o){const a=new gf,l=new rj,f=[],h=i.isWebGL2,p=i.logarithmicDepthBuffer,m=i.vertexTextures;let v=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(L){return L===0?"uv":`uv${L}`}function A(L,N,W,ae,te){const ie=ae.fog,le=te.geometry,ce=L.isMeshStandardMaterial?ae.environment:null,he=(L.isMeshStandardMaterial?t:e).get(L.envMap||ce),K=he&&he.mapping===lp?he.image.height:null,fe=x[L.type];L.precision!==null&&(v=i.getMaxPrecision(L.precision),v!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",v,"instead."));const re=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,se=re!==void 0?re.length:0;let oe=0;le.morphAttributes.position!==void 0&&(oe=1),le.morphAttributes.normal!==void 0&&(oe=2),le.morphAttributes.color!==void 0&&(oe=3);let Le,Oe,De,Ue;if(fe){const sn=Ho[fe];Le=sn.vertexShader,Oe=sn.fragmentShader}else Le=L.vertexShader,Oe=L.fragmentShader,l.update(L),De=l.getVertexShaderID(L),Ue=l.getFragmentShaderID(L);const Xe=n.getRenderTarget(),rt=te.isInstancedMesh===!0,Gt=!!L.map,Dt=!!L.matcap,Ge=!!he,$=!!L.aoMap,Ne=!!L.lightMap,Be=!!L.bumpMap,Ve=!!L.normalMap,He=!!L.displacementMap,vt=!!L.emissiveMap,st=!!L.metalnessMap,ft=!!L.roughnessMap,Ct=L.anisotropy>0,jt=L.clearcoat>0,un=L.iridescence>0,Z=L.sheen>0,G=L.transmission>0,_e=Ct&&!!L.anisotropyMap,je=jt&&!!L.clearcoatMap,ke=jt&&!!L.clearcoatNormalMap,Ke=jt&&!!L.clearcoatRoughnessMap,xt=un&&!!L.iridescenceMap,Qe=un&&!!L.iridescenceThicknessMap,Ee=Z&&!!L.sheenColorMap,bt=Z&&!!L.sheenRoughnessMap,ct=!!L.specularMap,pt=!!L.specularColorMap,yt=!!L.specularIntensityMap,mt=G&&!!L.transmissionMap,It=G&&!!L.thicknessMap,Ut=!!L.gradientMap,de=!!L.alphaMap,Ae=L.alphaTest>0,Me=!!L.alphaHash,Ze=!!L.extensions,it=!!le.attributes.uv1,$t=!!le.attributes.uv2,wn=!!le.attributes.uv3;let Nn=Ta;return L.toneMapped&&(Xe===null||Xe.isXRRenderTarget===!0)&&(Nn=n.toneMapping),{isWebGL2:h,shaderID:fe,shaderType:L.type,shaderName:L.name,vertexShader:Le,fragmentShader:Oe,defines:L.defines,customVertexShaderID:De,customFragmentShaderID:Ue,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:v,instancing:rt,instancingColor:rt&&te.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:Xe===null?n.outputColorSpace:Xe.isXRRenderTarget===!0?Xe.texture.colorSpace:jo,map:Gt,matcap:Dt,envMap:Ge,envMapMode:Ge&&he.mapping,envMapCubeUVHeight:K,aoMap:$,lightMap:Ne,bumpMap:Be,normalMap:Ve,displacementMap:m&&He,emissiveMap:vt,normalMapObjectSpace:Ve&&L.normalMapType===fD,normalMapTangentSpace:Ve&&L.normalMapType===qu,metalnessMap:st,roughnessMap:ft,anisotropy:Ct,anisotropyMap:_e,clearcoat:jt,clearcoatMap:je,clearcoatNormalMap:ke,clearcoatRoughnessMap:Ke,iridescence:un,iridescenceMap:xt,iridescenceThicknessMap:Qe,sheen:Z,sheenColorMap:Ee,sheenRoughnessMap:bt,specularMap:ct,specularColorMap:pt,specularIntensityMap:yt,transmission:G,transmissionMap:mt,thicknessMap:It,gradientMap:Ut,opaque:L.transparent===!1&&L.blending===pf,alphaMap:de,alphaTest:Ae,alphaHash:Me,combine:L.combine,mapUv:Gt&&E(L.map.channel),aoMapUv:$&&E(L.aoMap.channel),lightMapUv:Ne&&E(L.lightMap.channel),bumpMapUv:Be&&E(L.bumpMap.channel),normalMapUv:Ve&&E(L.normalMap.channel),displacementMapUv:He&&E(L.displacementMap.channel),emissiveMapUv:vt&&E(L.emissiveMap.channel),metalnessMapUv:st&&E(L.metalnessMap.channel),roughnessMapUv:ft&&E(L.roughnessMap.channel),anisotropyMapUv:_e&&E(L.anisotropyMap.channel),clearcoatMapUv:je&&E(L.clearcoatMap.channel),clearcoatNormalMapUv:ke&&E(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&E(L.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&E(L.iridescenceMap.channel),iridescenceThicknessMapUv:Qe&&E(L.iridescenceThicknessMap.channel),sheenColorMapUv:Ee&&E(L.sheenColorMap.channel),sheenRoughnessMapUv:bt&&E(L.sheenRoughnessMap.channel),specularMapUv:ct&&E(L.specularMap.channel),specularColorMapUv:pt&&E(L.specularColorMap.channel),specularIntensityMapUv:yt&&E(L.specularIntensityMap.channel),transmissionMapUv:mt&&E(L.transmissionMap.channel),thicknessMapUv:It&&E(L.thicknessMap.channel),alphaMapUv:de&&E(L.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(Ve||Ct),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,vertexUv1s:it,vertexUv2s:$t,vertexUv3s:wn,pointsUvs:te.isPoints===!0&&!!le.attributes.uv&&(Gt||de),fog:!!ie,useFog:L.fog===!0,fogExp2:ie&&ie.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:te.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:oe,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:Nn,useLegacyLights:n._useLegacyLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Fs,flipSided:L.side===Qi,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionDerivatives:Ze&&L.extensions.derivatives===!0,extensionFragDepth:Ze&&L.extensions.fragDepth===!0,extensionDrawBuffers:Ze&&L.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ze&&L.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}}function y(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const W in L.defines)N.push(W),N.push(L.defines[W]);return L.isRawShaderMaterial===!1&&(M(N,L),S(N,L),N.push(n.outputColorSpace)),N.push(L.customProgramCacheKey),N.join()}function M(L,N){L.push(N.precision),L.push(N.outputColorSpace),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.mapUv),L.push(N.alphaMapUv),L.push(N.lightMapUv),L.push(N.aoMapUv),L.push(N.bumpMapUv),L.push(N.normalMapUv),L.push(N.displacementMapUv),L.push(N.emissiveMapUv),L.push(N.metalnessMapUv),L.push(N.roughnessMapUv),L.push(N.anisotropyMapUv),L.push(N.clearcoatMapUv),L.push(N.clearcoatNormalMapUv),L.push(N.clearcoatRoughnessMapUv),L.push(N.iridescenceMapUv),L.push(N.iridescenceThicknessMapUv),L.push(N.sheenColorMapUv),L.push(N.sheenRoughnessMapUv),L.push(N.specularMapUv),L.push(N.specularColorMapUv),L.push(N.specularIntensityMapUv),L.push(N.transmissionMapUv),L.push(N.thicknessMapUv),L.push(N.combine),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function S(L,N){a.disableAll(),N.isWebGL2&&a.enable(0),N.supportsVertexTextures&&a.enable(1),N.instancing&&a.enable(2),N.instancingColor&&a.enable(3),N.matcap&&a.enable(4),N.envMap&&a.enable(5),N.normalMapObjectSpace&&a.enable(6),N.normalMapTangentSpace&&a.enable(7),N.clearcoat&&a.enable(8),N.iridescence&&a.enable(9),N.alphaTest&&a.enable(10),N.vertexColors&&a.enable(11),N.vertexAlphas&&a.enable(12),N.vertexUv1s&&a.enable(13),N.vertexUv2s&&a.enable(14),N.vertexUv3s&&a.enable(15),N.vertexTangents&&a.enable(16),N.anisotropy&&a.enable(17),L.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.skinning&&a.enable(4),N.morphTargets&&a.enable(5),N.morphNormals&&a.enable(6),N.morphColors&&a.enable(7),N.premultipliedAlpha&&a.enable(8),N.shadowMapEnabled&&a.enable(9),N.useLegacyLights&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.transmission&&a.enable(15),N.sheen&&a.enable(16),N.opaque&&a.enable(17),N.pointsUvs&&a.enable(18),L.push(a.mask)}function C(L){const N=x[L.type];let W;if(N){const ae=Ho[N];W=CD.clone(ae.uniforms)}else W=L.uniforms;return W}function I(L,N){let W;for(let ae=0,te=f.length;ae<te;ae++){const ie=f[ae];if(ie.cacheKey===N){W=ie,++W.usedTimes;break}}return W===void 0&&(W=new tj(n,N,L,s),f.push(W)),W}function B(L){if(--L.usedTimes===0){const N=f.indexOf(L);f[N]=f[f.length-1],f.pop(),L.destroy()}}function O(L){l.remove(L)}function z(){l.dispose()}return{getParameters:A,getProgramCacheKey:y,getUniforms:C,acquireProgram:I,releaseProgram:B,releaseShaderCache:O,programs:f,dispose:z}}function oj(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function aj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function IP(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(p,m,v,x,E,A){let y=n[e];return y===void 0?(y={id:p.id,object:p,geometry:m,material:v,groupOrder:x,renderOrder:p.renderOrder,z:E,group:A},n[e]=y):(y.id=p.id,y.object=p,y.geometry=m,y.material=v,y.groupOrder=x,y.renderOrder=p.renderOrder,y.z=E,y.group=A),e++,y}function a(p,m,v,x,E,A){const y=o(p,m,v,x,E,A);v.transmission>0?r.push(y):v.transparent===!0?i.push(y):t.push(y)}function l(p,m,v,x,E,A){const y=o(p,m,v,x,E,A);v.transmission>0?r.unshift(y):v.transparent===!0?i.unshift(y):t.unshift(y)}function f(p,m){t.length>1&&t.sort(p||aj),r.length>1&&r.sort(m||PP),i.length>1&&i.sort(m||PP)}function h(){for(let p=e,m=n.length;p<m;p++){const v=n[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:f}}function lj(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new IP,n.set(r,[o])):i>=s.length?(o=new IP,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function uj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new tt};break;case"SpotLight":t={position:new J,direction:new J,color:new tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new tt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new tt,groundColor:new tt};break;case"RectAreaLight":t={color:new tt,position:new J,halfWidth:new J,halfHeight:new J};break}return n[e.id]=t,t}}}function cj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fj=0;function dj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function hj(n,e){const t=new uj,r=cj(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)i.probe.push(new J);const s=new J,o=new Ht,a=new Ht;function l(h,p){let m=0,v=0,x=0;for(let W=0;W<9;W++)i.probe[W].set(0,0,0);let E=0,A=0,y=0,M=0,S=0,C=0,I=0,B=0,O=0,z=0;h.sort(dj);const L=p===!0?Math.PI:1;for(let W=0,ae=h.length;W<ae;W++){const te=h[W],ie=te.color,le=te.intensity,ce=te.distance,he=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)m+=ie.r*le*L,v+=ie.g*le*L,x+=ie.b*le*L;else if(te.isLightProbe)for(let K=0;K<9;K++)i.probe[K].addScaledVector(te.sh.coefficients[K],le);else if(te.isDirectionalLight){const K=t.get(te);if(K.color.copy(te.color).multiplyScalar(te.intensity*L),te.castShadow){const fe=te.shadow,re=r.get(te);re.shadowBias=fe.bias,re.shadowNormalBias=fe.normalBias,re.shadowRadius=fe.radius,re.shadowMapSize=fe.mapSize,i.directionalShadow[E]=re,i.directionalShadowMap[E]=he,i.directionalShadowMatrix[E]=te.shadow.matrix,C++}i.directional[E]=K,E++}else if(te.isSpotLight){const K=t.get(te);K.position.setFromMatrixPosition(te.matrixWorld),K.color.copy(ie).multiplyScalar(le*L),K.distance=ce,K.coneCos=Math.cos(te.angle),K.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),K.decay=te.decay,i.spot[y]=K;const fe=te.shadow;if(te.map&&(i.spotLightMap[O]=te.map,O++,fe.updateMatrices(te),te.castShadow&&z++),i.spotLightMatrix[y]=fe.matrix,te.castShadow){const re=r.get(te);re.shadowBias=fe.bias,re.shadowNormalBias=fe.normalBias,re.shadowRadius=fe.radius,re.shadowMapSize=fe.mapSize,i.spotShadow[y]=re,i.spotShadowMap[y]=he,B++}y++}else if(te.isRectAreaLight){const K=t.get(te);K.color.copy(ie).multiplyScalar(le),K.halfWidth.set(te.width*.5,0,0),K.halfHeight.set(0,te.height*.5,0),i.rectArea[M]=K,M++}else if(te.isPointLight){const K=t.get(te);if(K.color.copy(te.color).multiplyScalar(te.intensity*L),K.distance=te.distance,K.decay=te.decay,te.castShadow){const fe=te.shadow,re=r.get(te);re.shadowBias=fe.bias,re.shadowNormalBias=fe.normalBias,re.shadowRadius=fe.radius,re.shadowMapSize=fe.mapSize,re.shadowCameraNear=fe.camera.near,re.shadowCameraFar=fe.camera.far,i.pointShadow[A]=re,i.pointShadowMap[A]=he,i.pointShadowMatrix[A]=te.shadow.matrix,I++}i.point[A]=K,A++}else if(te.isHemisphereLight){const K=t.get(te);K.skyColor.copy(te.color).multiplyScalar(le*L),K.groundColor.copy(te.groundColor).multiplyScalar(le*L),i.hemi[S]=K,S++}}M>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_FLOAT_1,i.rectAreaLTC2=ot.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_HALF_1,i.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=v,i.ambient[2]=x;const N=i.hash;(N.directionalLength!==E||N.pointLength!==A||N.spotLength!==y||N.rectAreaLength!==M||N.hemiLength!==S||N.numDirectionalShadows!==C||N.numPointShadows!==I||N.numSpotShadows!==B||N.numSpotMaps!==O)&&(i.directional.length=E,i.spot.length=y,i.rectArea.length=M,i.point.length=A,i.hemi.length=S,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=I,i.pointShadowMap.length=I,i.spotShadow.length=B,i.spotShadowMap.length=B,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=I,i.spotLightMatrix.length=B+O-z,i.spotLightMap.length=O,i.numSpotLightShadowsWithMaps=z,N.directionalLength=E,N.pointLength=A,N.spotLength=y,N.rectAreaLength=M,N.hemiLength=S,N.numDirectionalShadows=C,N.numPointShadows=I,N.numSpotShadows=B,N.numSpotMaps=O,i.version=fj++)}function f(h,p){let m=0,v=0,x=0,E=0,A=0;const y=p.matrixWorldInverse;for(let M=0,S=h.length;M<S;M++){const C=h[M];if(C.isDirectionalLight){const I=i.directional[m];I.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(y),m++}else if(C.isSpotLight){const I=i.spot[x];I.position.setFromMatrixPosition(C.matrixWorld),I.position.applyMatrix4(y),I.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(y),x++}else if(C.isRectAreaLight){const I=i.rectArea[E];I.position.setFromMatrixPosition(C.matrixWorld),I.position.applyMatrix4(y),a.identity(),o.copy(C.matrixWorld),o.premultiply(y),a.extractRotation(o),I.halfWidth.set(C.width*.5,0,0),I.halfHeight.set(0,C.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),E++}else if(C.isPointLight){const I=i.point[v];I.position.setFromMatrixPosition(C.matrixWorld),I.position.applyMatrix4(y),v++}else if(C.isHemisphereLight){const I=i.hemi[A];I.direction.setFromMatrixPosition(C.matrixWorld),I.direction.transformDirection(y),A++}}}return{setup:l,setupView:f,state:i}}function BP(n,e){const t=new hj(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(p){r.push(p)}function a(p){i.push(p)}function l(p){t.setup(r,p)}function f(p){t.setupView(r,p)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:f,pushLight:o,pushShadow:a}}function pj(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new BP(n,e),t.set(s,[l])):o>=a.length?(l=new BP(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class AT extends Hr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=uD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MT extends Hr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vj(n,e,t){let r=new R1;const i=new ze,s=new ze,o=new Mn,a=new AT({depthPacking:cD}),l=new MT,f={},h=t.maxTextureSize,p={[Ba]:Qi,[Qi]:Ba,[Fs]:Fs},m=new Jo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:mj,fragmentShader:gj}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const x=new Zt;x.setAttribute("position",new Cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Kr(x,m),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=M1;let y=this.type;this.render=function(I,B,O){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||I.length===0)return;const z=n.getRenderTarget(),L=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),W=n.state;W.setBlending(Ml),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const ae=y!==Uo&&this.type===Uo,te=y===Uo&&this.type!==Uo;for(let ie=0,le=I.length;ie<le;ie++){const ce=I[ie],he=ce.shadow;if(he===void 0){console.warn("THREE.WebGLShadowMap:",ce,"has no shadow.");continue}if(he.autoUpdate===!1&&he.needsUpdate===!1)continue;i.copy(he.mapSize);const K=he.getFrameExtents();if(i.multiply(K),s.copy(he.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/K.x),i.x=s.x*K.x,he.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/K.y),i.y=s.y*K.y,he.mapSize.y=s.y)),he.map===null||ae===!0||te===!0){const re=this.type!==Uo?{minFilter:Ar,magFilter:Ar}:{};he.map!==null&&he.map.dispose(),he.map=new Xo(i.x,i.y,re),he.map.texture.name=ce.name+".shadowMap",he.camera.updateProjectionMatrix()}n.setRenderTarget(he.map),n.clear();const fe=he.getViewportCount();for(let re=0;re<fe;re++){const se=he.getViewport(re);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),W.viewport(o),he.updateMatrices(ce,re),r=he.getFrustum(),C(B,O,he.camera,ce,this.type)}he.isPointLightShadow!==!0&&this.type===Uo&&M(he,O),he.needsUpdate=!1}y=this.type,A.needsUpdate=!1,n.setRenderTarget(z,L,N)};function M(I,B){const O=e.update(E);m.defines.VSM_SAMPLES!==I.blurSamples&&(m.defines.VSM_SAMPLES=I.blurSamples,v.defines.VSM_SAMPLES=I.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Xo(i.x,i.y)),m.uniforms.shadow_pass.value=I.map.texture,m.uniforms.resolution.value=I.mapSize,m.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(B,null,O,m,E,null),v.uniforms.shadow_pass.value=I.mapPass.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(B,null,O,v,E,null)}function S(I,B,O,z){let L=null;const N=O.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(N!==void 0)L=N;else if(L=O.isPointLight===!0?l:a,n.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const W=L.uuid,ae=B.uuid;let te=f[W];te===void 0&&(te={},f[W]=te);let ie=te[ae];ie===void 0&&(ie=L.clone(),te[ae]=ie),L=ie}if(L.visible=B.visible,L.wireframe=B.wireframe,z===Uo?L.side=B.shadowSide!==null?B.shadowSide:B.side:L.side=B.shadowSide!==null?B.shadowSide:p[B.side],L.alphaMap=B.alphaMap,L.alphaTest=B.alphaTest,L.map=B.map,L.clipShadows=B.clipShadows,L.clippingPlanes=B.clippingPlanes,L.clipIntersection=B.clipIntersection,L.displacementMap=B.displacementMap,L.displacementScale=B.displacementScale,L.displacementBias=B.displacementBias,L.wireframeLinewidth=B.wireframeLinewidth,L.linewidth=B.linewidth,O.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const W=n.properties.get(L);W.light=O}return L}function C(I,B,O,z,L){if(I.visible===!1)return;if(I.layers.test(B.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&L===Uo)&&(!I.frustumCulled||r.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,I.matrixWorld);const ae=e.update(I),te=I.material;if(Array.isArray(te)){const ie=ae.groups;for(let le=0,ce=ie.length;le<ce;le++){const he=ie[le],K=te[he.materialIndex];if(K&&K.visible){const fe=S(I,K,z,L);n.renderBufferDirect(O,null,ae,fe,I,he)}}}else if(te.visible){const ie=S(I,te,z,L);n.renderBufferDirect(O,null,ae,ie,I,null)}}const W=I.children;for(let ae=0,te=W.length;ae<te;ae++)C(W[ae],B,O,z,L)}}function yj(n,e,t){const r=t.isWebGL2;function i(){let de=!1;const Ae=new Mn;let Me=null;const Ze=new Mn(0,0,0,0);return{setMask:function(it){Me!==it&&!de&&(n.colorMask(it,it,it,it),Me=it)},setLocked:function(it){de=it},setClear:function(it,$t,wn,Nn,ci){ci===!0&&(it*=Nn,$t*=Nn,wn*=Nn),Ae.set(it,$t,wn,Nn),Ze.equals(Ae)===!1&&(n.clearColor(it,$t,wn,Nn),Ze.copy(Ae))},reset:function(){de=!1,Me=null,Ze.set(-1,0,0,0)}}}function s(){let de=!1,Ae=null,Me=null,Ze=null;return{setTest:function(it){it?Xe(n.DEPTH_TEST):rt(n.DEPTH_TEST)},setMask:function(it){Ae!==it&&!de&&(n.depthMask(it),Ae=it)},setFunc:function(it){if(Me!==it){switch(it){case U3:n.depthFunc(n.NEVER);break;case k3:n.depthFunc(n.ALWAYS);break;case z3:n.depthFunc(n.LESS);break;case J_:n.depthFunc(n.LEQUAL);break;case H3:n.depthFunc(n.EQUAL);break;case G3:n.depthFunc(n.GEQUAL);break;case V3:n.depthFunc(n.GREATER);break;case W3:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Me=it}},setLocked:function(it){de=it},setClear:function(it){Ze!==it&&(n.clearDepth(it),Ze=it)},reset:function(){de=!1,Ae=null,Me=null,Ze=null}}}function o(){let de=!1,Ae=null,Me=null,Ze=null,it=null,$t=null,wn=null,Nn=null,ci=null;return{setTest:function(sn){de||(sn?Xe(n.STENCIL_TEST):rt(n.STENCIL_TEST))},setMask:function(sn){Ae!==sn&&!de&&(n.stencilMask(sn),Ae=sn)},setFunc:function(sn,Gr,or){(Me!==sn||Ze!==Gr||it!==or)&&(n.stencilFunc(sn,Gr,or),Me=sn,Ze=Gr,it=or)},setOp:function(sn,Gr,or){($t!==sn||wn!==Gr||Nn!==or)&&(n.stencilOp(sn,Gr,or),$t=sn,wn=Gr,Nn=or)},setLocked:function(sn){de=sn},setClear:function(sn){ci!==sn&&(n.clearStencil(sn),ci=sn)},reset:function(){de=!1,Ae=null,Me=null,Ze=null,it=null,$t=null,wn=null,Nn=null,ci=null}}}const a=new i,l=new s,f=new o,h=new WeakMap,p=new WeakMap;let m={},v={},x=new WeakMap,E=[],A=null,y=!1,M=null,S=null,C=null,I=null,B=null,O=null,z=null,L=!1,N=null,W=null,ae=null,te=null,ie=null;const le=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ce=!1,he=0;const K=n.getParameter(n.VERSION);K.indexOf("WebGL")!==-1?(he=parseFloat(/^WebGL (\d)/.exec(K)[1]),ce=he>=1):K.indexOf("OpenGL ES")!==-1&&(he=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),ce=he>=2);let fe=null,re={};const se=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),Le=new Mn().fromArray(se),Oe=new Mn().fromArray(oe);function De(de,Ae,Me,Ze){const it=new Uint8Array(4),$t=n.createTexture();n.bindTexture(de,$t),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let wn=0;wn<Me;wn++)r&&(de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ae,0,n.RGBA,1,1,Ze,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(Ae+wn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return $t}const Ue={};Ue[n.TEXTURE_2D]=De(n.TEXTURE_2D,n.TEXTURE_2D,1),Ue[n.TEXTURE_CUBE_MAP]=De(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ue[n.TEXTURE_2D_ARRAY]=De(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ue[n.TEXTURE_3D]=De(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),f.setClear(0),Xe(n.DEPTH_TEST),l.setFunc(J_),He(!1),vt(nE),Xe(n.CULL_FACE),Be(Ml);function Xe(de){m[de]!==!0&&(n.enable(de),m[de]=!0)}function rt(de){m[de]!==!1&&(n.disable(de),m[de]=!1)}function Gt(de,Ae){return v[de]!==Ae?(n.bindFramebuffer(de,Ae),v[de]=Ae,r&&(de===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Ae),de===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Ae)),!0):!1}function Dt(de,Ae){let Me=E,Ze=!1;if(de)if(Me=x.get(Ae),Me===void 0&&(Me=[],x.set(Ae,Me)),de.isWebGLMultipleRenderTargets){const it=de.texture;if(Me.length!==it.length||Me[0]!==n.COLOR_ATTACHMENT0){for(let $t=0,wn=it.length;$t<wn;$t++)Me[$t]=n.COLOR_ATTACHMENT0+$t;Me.length=it.length,Ze=!0}}else Me[0]!==n.COLOR_ATTACHMENT0&&(Me[0]=n.COLOR_ATTACHMENT0,Ze=!0);else Me[0]!==n.BACK&&(Me[0]=n.BACK,Ze=!0);Ze&&(t.isWebGL2?n.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function Ge(de){return A!==de?(n.useProgram(de),A=de,!0):!1}const $={[ef]:n.FUNC_ADD,[C3]:n.FUNC_SUBTRACT,[b3]:n.FUNC_REVERSE_SUBTRACT};if(r)$[oE]=n.MIN,$[aE]=n.MAX;else{const de=e.get("EXT_blend_minmax");de!==null&&($[oE]=de.MIN_EXT,$[aE]=de.MAX_EXT)}const Ne={[R3]:n.ZERO,[P3]:n.ONE,[I3]:n.SRC_COLOR,[tT]:n.SRC_ALPHA,[N3]:n.SRC_ALPHA_SATURATE,[O3]:n.DST_COLOR,[L3]:n.DST_ALPHA,[B3]:n.ONE_MINUS_SRC_COLOR,[nT]:n.ONE_MINUS_SRC_ALPHA,[F3]:n.ONE_MINUS_DST_COLOR,[D3]:n.ONE_MINUS_DST_ALPHA};function Be(de,Ae,Me,Ze,it,$t,wn,Nn){if(de===Ml){y===!0&&(rt(n.BLEND),y=!1);return}if(y===!1&&(Xe(n.BLEND),y=!0),de!==T3){if(de!==M||Nn!==L){if((S!==ef||B!==ef)&&(n.blendEquation(n.FUNC_ADD),S=ef,B=ef),Nn)switch(de){case pf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case rE:n.blendFunc(n.ONE,n.ONE);break;case iE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case sE:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case pf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case rE:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case iE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case sE:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}C=null,I=null,O=null,z=null,M=de,L=Nn}return}it=it||Ae,$t=$t||Me,wn=wn||Ze,(Ae!==S||it!==B)&&(n.blendEquationSeparate($[Ae],$[it]),S=Ae,B=it),(Me!==C||Ze!==I||$t!==O||wn!==z)&&(n.blendFuncSeparate(Ne[Me],Ne[Ze],Ne[$t],Ne[wn]),C=Me,I=Ze,O=$t,z=wn),M=de,L=!1}function Ve(de,Ae){de.side===Fs?rt(n.CULL_FACE):Xe(n.CULL_FACE);let Me=de.side===Qi;Ae&&(Me=!Me),He(Me),de.blending===pf&&de.transparent===!1?Be(Ml):Be(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),a.setMask(de.colorWrite);const Ze=de.stencilWrite;f.setTest(Ze),Ze&&(f.setMask(de.stencilWriteMask),f.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),f.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),ft(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?Xe(n.SAMPLE_ALPHA_TO_COVERAGE):rt(n.SAMPLE_ALPHA_TO_COVERAGE)}function He(de){N!==de&&(de?n.frontFace(n.CW):n.frontFace(n.CCW),N=de)}function vt(de){de!==M3?(Xe(n.CULL_FACE),de!==W&&(de===nE?n.cullFace(n.BACK):de===E3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):rt(n.CULL_FACE),W=de}function st(de){de!==ae&&(ce&&n.lineWidth(de),ae=de)}function ft(de,Ae,Me){de?(Xe(n.POLYGON_OFFSET_FILL),(te!==Ae||ie!==Me)&&(n.polygonOffset(Ae,Me),te=Ae,ie=Me)):rt(n.POLYGON_OFFSET_FILL)}function Ct(de){de?Xe(n.SCISSOR_TEST):rt(n.SCISSOR_TEST)}function jt(de){de===void 0&&(de=n.TEXTURE0+le-1),fe!==de&&(n.activeTexture(de),fe=de)}function un(de,Ae,Me){Me===void 0&&(fe===null?Me=n.TEXTURE0+le-1:Me=fe);let Ze=re[Me];Ze===void 0&&(Ze={type:void 0,texture:void 0},re[Me]=Ze),(Ze.type!==de||Ze.texture!==Ae)&&(fe!==Me&&(n.activeTexture(Me),fe=Me),n.bindTexture(de,Ae||Ue[de]),Ze.type=de,Ze.texture=Ae)}function Z(){const de=re[fe];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function G(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function _e(){try{n.compressedTexImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function je(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ke(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ke(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function xt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Qe(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ee(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function bt(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ct(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function pt(de){Le.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),Le.copy(de))}function yt(de){Oe.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),Oe.copy(de))}function mt(de,Ae){let Me=p.get(Ae);Me===void 0&&(Me=new WeakMap,p.set(Ae,Me));let Ze=Me.get(de);Ze===void 0&&(Ze=n.getUniformBlockIndex(Ae,de.name),Me.set(de,Ze))}function It(de,Ae){const Ze=p.get(Ae).get(de);h.get(Ae)!==Ze&&(n.uniformBlockBinding(Ae,Ze,de.__bindingPointIndex),h.set(Ae,Ze))}function Ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},fe=null,re={},v={},x=new WeakMap,E=[],A=null,y=!1,M=null,S=null,C=null,I=null,B=null,O=null,z=null,L=!1,N=null,W=null,ae=null,te=null,ie=null,Le.set(0,0,n.canvas.width,n.canvas.height),Oe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),f.reset()}return{buffers:{color:a,depth:l,stencil:f},enable:Xe,disable:rt,bindFramebuffer:Gt,drawBuffers:Dt,useProgram:Ge,setBlending:Be,setMaterial:Ve,setFlipSided:He,setCullFace:vt,setLineWidth:st,setPolygonOffset:ft,setScissorTest:Ct,activeTexture:jt,bindTexture:un,unbindTexture:Z,compressedTexImage2D:G,compressedTexImage3D:_e,texImage2D:bt,texImage3D:ct,updateUBOMapping:mt,uniformBlockBinding:It,texStorage2D:Qe,texStorage3D:Ee,texSubImage2D:je,texSubImage3D:ke,compressedTexSubImage2D:Ke,compressedTexSubImage3D:xt,scissor:pt,viewport:yt,reset:Ut}}function _j(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,f=i.maxCubemapSize,h=i.maxTextureSize,p=i.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let E;const A=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(Z,G){return y?new OffscreenCanvas(Z,G):Vg("canvas")}function S(Z,G,_e,je){let ke=1;if((Z.width>je||Z.height>je)&&(ke=je/Math.max(Z.width,Z.height)),ke<1||G===!0)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap){const Ke=G?q_:Math.floor,xt=Ke(ke*Z.width),Qe=Ke(ke*Z.height);E===void 0&&(E=M(xt,Qe));const Ee=_e?M(xt,Qe):E;return Ee.width=xt,Ee.height=Qe,Ee.getContext("2d").drawImage(Z,0,0,xt,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Z.width+"x"+Z.height+") to ("+xt+"x"+Qe+")."),Ee}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Z.width+"x"+Z.height+")."),Z;return Z}function C(Z){return BE(Z.width)&&BE(Z.height)}function I(Z){return a?!1:Z.wrapS!==yi||Z.wrapT!==yi||Z.minFilter!==Ar&&Z.minFilter!==Wn}function B(Z,G){return Z.generateMipmaps&&G&&Z.minFilter!==Ar&&Z.minFilter!==Wn}function O(Z){n.generateMipmap(Z)}function z(Z,G,_e,je,ke=!1){if(a===!1)return G;if(Z!==null){if(n[Z]!==void 0)return n[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let Ke=G;return G===n.RED&&(_e===n.FLOAT&&(Ke=n.R32F),_e===n.HALF_FLOAT&&(Ke=n.R16F),_e===n.UNSIGNED_BYTE&&(Ke=n.R8)),G===n.RED_INTEGER&&(_e===n.UNSIGNED_BYTE&&(Ke=n.R8UI),_e===n.UNSIGNED_SHORT&&(Ke=n.R16UI),_e===n.UNSIGNED_INT&&(Ke=n.R32UI),_e===n.BYTE&&(Ke=n.R8I),_e===n.SHORT&&(Ke=n.R16I),_e===n.INT&&(Ke=n.R32I)),G===n.RG&&(_e===n.FLOAT&&(Ke=n.RG32F),_e===n.HALF_FLOAT&&(Ke=n.RG16F),_e===n.UNSIGNED_BYTE&&(Ke=n.RG8)),G===n.RGBA&&(_e===n.FLOAT&&(Ke=n.RGBA32F),_e===n.HALF_FLOAT&&(Ke=n.RGBA16F),_e===n.UNSIGNED_BYTE&&(Ke=je===Qt&&ke===!1?n.SRGB8_ALPHA8:n.RGBA8),_e===n.UNSIGNED_SHORT_4_4_4_4&&(Ke=n.RGBA4),_e===n.UNSIGNED_SHORT_5_5_5_1&&(Ke=n.RGB5_A1)),(Ke===n.R16F||Ke===n.R32F||Ke===n.RG16F||Ke===n.RG32F||Ke===n.RGBA16F||Ke===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ke}function L(Z,G,_e){return B(Z,_e)===!0||Z.isFramebufferTexture&&Z.minFilter!==Ar&&Z.minFilter!==Wn?Math.log2(Math.max(G.width,G.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?G.mipmaps.length:1}function N(Z){return Z===Ar||Z===kg||Z===Bh?n.NEAREST:n.LINEAR}function W(Z){const G=Z.target;G.removeEventListener("dispose",W),te(G),G.isVideoTexture&&x.delete(G)}function ae(Z){const G=Z.target;G.removeEventListener("dispose",ae),le(G)}function te(Z){const G=r.get(Z);if(G.__webglInit===void 0)return;const _e=Z.source,je=A.get(_e);if(je){const ke=je[G.__cacheKey];ke.usedTimes--,ke.usedTimes===0&&ie(Z),Object.keys(je).length===0&&A.delete(_e)}r.remove(Z)}function ie(Z){const G=r.get(Z);n.deleteTexture(G.__webglTexture);const _e=Z.source,je=A.get(_e);delete je[G.__cacheKey],o.memory.textures--}function le(Z){const G=Z.texture,_e=r.get(Z),je=r.get(G);if(je.__webglTexture!==void 0&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),Z.depthTexture&&Z.depthTexture.dispose(),Z.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++){if(Array.isArray(_e.__webglFramebuffer[ke]))for(let Ke=0;Ke<_e.__webglFramebuffer[ke].length;Ke++)n.deleteFramebuffer(_e.__webglFramebuffer[ke][Ke]);else n.deleteFramebuffer(_e.__webglFramebuffer[ke]);_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer[ke])}else{if(Array.isArray(_e.__webglFramebuffer))for(let ke=0;ke<_e.__webglFramebuffer.length;ke++)n.deleteFramebuffer(_e.__webglFramebuffer[ke]);else n.deleteFramebuffer(_e.__webglFramebuffer);if(_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&n.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer)for(let ke=0;ke<_e.__webglColorRenderbuffer.length;ke++)_e.__webglColorRenderbuffer[ke]&&n.deleteRenderbuffer(_e.__webglColorRenderbuffer[ke]);_e.__webglDepthRenderbuffer&&n.deleteRenderbuffer(_e.__webglDepthRenderbuffer)}if(Z.isWebGLMultipleRenderTargets)for(let ke=0,Ke=G.length;ke<Ke;ke++){const xt=r.get(G[ke]);xt.__webglTexture&&(n.deleteTexture(xt.__webglTexture),o.memory.textures--),r.remove(G[ke])}r.remove(G),r.remove(Z)}let ce=0;function he(){ce=0}function K(){const Z=ce;return Z>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+l),ce+=1,Z}function fe(Z){const G=[];return G.push(Z.wrapS),G.push(Z.wrapT),G.push(Z.wrapR||0),G.push(Z.magFilter),G.push(Z.minFilter),G.push(Z.anisotropy),G.push(Z.internalFormat),G.push(Z.format),G.push(Z.type),G.push(Z.generateMipmaps),G.push(Z.premultiplyAlpha),G.push(Z.flipY),G.push(Z.unpackAlignment),G.push(Z.colorSpace),G.join()}function re(Z,G){const _e=r.get(Z);if(Z.isVideoTexture&&jt(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&_e.__version!==Z.version){const je=Z.image;if(je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Gt(_e,Z,G);return}}t.bindTexture(n.TEXTURE_2D,_e.__webglTexture,n.TEXTURE0+G)}function se(Z,G){const _e=r.get(Z);if(Z.version>0&&_e.__version!==Z.version){Gt(_e,Z,G);return}t.bindTexture(n.TEXTURE_2D_ARRAY,_e.__webglTexture,n.TEXTURE0+G)}function oe(Z,G){const _e=r.get(Z);if(Z.version>0&&_e.__version!==Z.version){Gt(_e,Z,G);return}t.bindTexture(n.TEXTURE_3D,_e.__webglTexture,n.TEXTURE0+G)}function Le(Z,G){const _e=r.get(Z);if(Z.version>0&&_e.__version!==Z.version){Dt(_e,Z,G);return}t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture,n.TEXTURE0+G)}const Oe={[Vu]:n.REPEAT,[yi]:n.CLAMP_TO_EDGE,[Jh]:n.MIRRORED_REPEAT},De={[Ar]:n.NEAREST,[kg]:n.NEAREST_MIPMAP_NEAREST,[Bh]:n.NEAREST_MIPMAP_LINEAR,[Wn]:n.LINEAR,[w1]:n.LINEAR_MIPMAP_NEAREST,[Da]:n.LINEAR_MIPMAP_LINEAR},Ue={[hD]:n.NEVER,[xD]:n.ALWAYS,[pD]:n.LESS,[gD]:n.LEQUAL,[mD]:n.EQUAL,[_D]:n.GEQUAL,[vD]:n.GREATER,[yD]:n.NOTEQUAL};function Xe(Z,G,_e){if(_e?(n.texParameteri(Z,n.TEXTURE_WRAP_S,Oe[G.wrapS]),n.texParameteri(Z,n.TEXTURE_WRAP_T,Oe[G.wrapT]),(Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Z,n.TEXTURE_WRAP_R,Oe[G.wrapR]),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,De[G.magFilter]),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,De[G.minFilter])):(n.texParameteri(Z,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(Z,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Z,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(G.wrapS!==yi||G.wrapT!==yi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,N(G.magFilter)),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,N(G.minFilter)),G.minFilter!==Ar&&G.minFilter!==Wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),G.compareFunction&&(n.texParameteri(Z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Z,n.TEXTURE_COMPARE_FUNC,Ue[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const je=e.get("EXT_texture_filter_anisotropic");if(G.magFilter===Ar||G.minFilter!==Bh&&G.minFilter!==Da||G.type===Fi&&e.has("OES_texture_float_linear")===!1||a===!1&&G.type===Yi&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||r.get(G).__currentAnisotropy)&&(n.texParameterf(Z,je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy)}}function rt(Z,G){let _e=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,G.addEventListener("dispose",W));const je=G.source;let ke=A.get(je);ke===void 0&&(ke={},A.set(je,ke));const Ke=fe(G);if(Ke!==Z.__cacheKey){ke[Ke]===void 0&&(ke[Ke]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),ke[Ke].usedTimes++;const xt=ke[Z.__cacheKey];xt!==void 0&&(ke[Z.__cacheKey].usedTimes--,xt.usedTimes===0&&ie(G)),Z.__cacheKey=Ke,Z.__webglTexture=ke[Ke].texture}return _e}function Gt(Z,G,_e){let je=n.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(je=n.TEXTURE_2D_ARRAY),G.isData3DTexture&&(je=n.TEXTURE_3D);const ke=rt(Z,G),Ke=G.source;t.bindTexture(je,Z.__webglTexture,n.TEXTURE0+_e);const xt=r.get(Ke);if(Ke.version!==xt.__version||ke===!0){t.activeTexture(n.TEXTURE0+_e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Qe=I(G)&&C(G.image)===!1;let Ee=S(G.image,Qe,!1,h);Ee=un(G,Ee);const bt=C(Ee)||a,ct=s.convert(G.format,G.colorSpace);let pt=s.convert(G.type),yt=z(G.internalFormat,ct,pt,G.colorSpace);Xe(je,G,bt);let mt;const It=G.mipmaps,Ut=a&&G.isVideoTexture!==!0,de=xt.__version===void 0||ke===!0,Ae=L(G,Ee,bt);if(G.isDepthTexture)yt=n.DEPTH_COMPONENT,a?G.type===Fi?yt=n.DEPTH_COMPONENT32F:G.type===xl?yt=n.DEPTH_COMPONENT24:G.type===Ou?yt=n.DEPTH24_STENCIL8:yt=n.DEPTH_COMPONENT16:G.type===Fi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Fu&&yt===n.DEPTH_COMPONENT&&G.type!==T1&&G.type!==xl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=xl,pt=s.convert(G.type)),G.format===Mf&&yt===n.DEPTH_COMPONENT&&(yt=n.DEPTH_STENCIL,G.type!==Ou&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Ou,pt=s.convert(G.type))),de&&(Ut?t.texStorage2D(n.TEXTURE_2D,1,yt,Ee.width,Ee.height):t.texImage2D(n.TEXTURE_2D,0,yt,Ee.width,Ee.height,0,ct,pt,null));else if(G.isDataTexture)if(It.length>0&&bt){Ut&&de&&t.texStorage2D(n.TEXTURE_2D,Ae,yt,It[0].width,It[0].height);for(let Me=0,Ze=It.length;Me<Ze;Me++)mt=It[Me],Ut?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,mt.width,mt.height,ct,pt,mt.data):t.texImage2D(n.TEXTURE_2D,Me,yt,mt.width,mt.height,0,ct,pt,mt.data);G.generateMipmaps=!1}else Ut?(de&&t.texStorage2D(n.TEXTURE_2D,Ae,yt,Ee.width,Ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee.width,Ee.height,ct,pt,Ee.data)):t.texImage2D(n.TEXTURE_2D,0,yt,Ee.width,Ee.height,0,ct,pt,Ee.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Ut&&de&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ae,yt,It[0].width,It[0].height,Ee.depth);for(let Me=0,Ze=It.length;Me<Ze;Me++)mt=It[Me],G.format!==Ki?ct!==null?Ut?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,mt.width,mt.height,Ee.depth,ct,mt.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Me,yt,mt.width,mt.height,Ee.depth,0,mt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,mt.width,mt.height,Ee.depth,ct,pt,mt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Me,yt,mt.width,mt.height,Ee.depth,0,ct,pt,mt.data)}else{Ut&&de&&t.texStorage2D(n.TEXTURE_2D,Ae,yt,It[0].width,It[0].height);for(let Me=0,Ze=It.length;Me<Ze;Me++)mt=It[Me],G.format!==Ki?ct!==null?Ut?t.compressedTexSubImage2D(n.TEXTURE_2D,Me,0,0,mt.width,mt.height,ct,mt.data):t.compressedTexImage2D(n.TEXTURE_2D,Me,yt,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,mt.width,mt.height,ct,pt,mt.data):t.texImage2D(n.TEXTURE_2D,Me,yt,mt.width,mt.height,0,ct,pt,mt.data)}else if(G.isDataArrayTexture)Ut?(de&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ae,yt,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ee.width,Ee.height,Ee.depth,ct,pt,Ee.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,yt,Ee.width,Ee.height,Ee.depth,0,ct,pt,Ee.data);else if(G.isData3DTexture)Ut?(de&&t.texStorage3D(n.TEXTURE_3D,Ae,yt,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ee.width,Ee.height,Ee.depth,ct,pt,Ee.data)):t.texImage3D(n.TEXTURE_3D,0,yt,Ee.width,Ee.height,Ee.depth,0,ct,pt,Ee.data);else if(G.isFramebufferTexture){if(de)if(Ut)t.texStorage2D(n.TEXTURE_2D,Ae,yt,Ee.width,Ee.height);else{let Me=Ee.width,Ze=Ee.height;for(let it=0;it<Ae;it++)t.texImage2D(n.TEXTURE_2D,it,yt,Me,Ze,0,ct,pt,null),Me>>=1,Ze>>=1}}else if(It.length>0&&bt){Ut&&de&&t.texStorage2D(n.TEXTURE_2D,Ae,yt,It[0].width,It[0].height);for(let Me=0,Ze=It.length;Me<Ze;Me++)mt=It[Me],Ut?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,ct,pt,mt):t.texImage2D(n.TEXTURE_2D,Me,yt,ct,pt,mt);G.generateMipmaps=!1}else Ut?(de&&t.texStorage2D(n.TEXTURE_2D,Ae,yt,Ee.width,Ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ct,pt,Ee)):t.texImage2D(n.TEXTURE_2D,0,yt,ct,pt,Ee);B(G,bt)&&O(je),xt.__version=Ke.version,G.onUpdate&&G.onUpdate(G)}Z.__version=G.version}function Dt(Z,G,_e){if(G.image.length!==6)return;const je=rt(Z,G),ke=G.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture,n.TEXTURE0+_e);const Ke=r.get(ke);if(ke.version!==Ke.__version||je===!0){t.activeTexture(n.TEXTURE0+_e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const xt=G.isCompressedTexture||G.image[0].isCompressedTexture,Qe=G.image[0]&&G.image[0].isDataTexture,Ee=[];for(let Me=0;Me<6;Me++)!xt&&!Qe?Ee[Me]=S(G.image[Me],!1,!0,f):Ee[Me]=Qe?G.image[Me].image:G.image[Me],Ee[Me]=un(G,Ee[Me]);const bt=Ee[0],ct=C(bt)||a,pt=s.convert(G.format,G.colorSpace),yt=s.convert(G.type),mt=z(G.internalFormat,pt,yt,G.colorSpace),It=a&&G.isVideoTexture!==!0,Ut=Ke.__version===void 0||je===!0;let de=L(G,bt,ct);Xe(n.TEXTURE_CUBE_MAP,G,ct);let Ae;if(xt){It&&Ut&&t.texStorage2D(n.TEXTURE_CUBE_MAP,de,mt,bt.width,bt.height);for(let Me=0;Me<6;Me++){Ae=Ee[Me].mipmaps;for(let Ze=0;Ze<Ae.length;Ze++){const it=Ae[Ze];G.format!==Ki?pt!==null?It?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,0,0,it.width,it.height,pt,it.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,mt,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,0,0,it.width,it.height,pt,yt,it.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,mt,it.width,it.height,0,pt,yt,it.data)}}}else{Ae=G.mipmaps,It&&Ut&&(Ae.length>0&&de++,t.texStorage2D(n.TEXTURE_CUBE_MAP,de,mt,Ee[0].width,Ee[0].height));for(let Me=0;Me<6;Me++)if(Qe){It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Ee[Me].width,Ee[Me].height,pt,yt,Ee[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,mt,Ee[Me].width,Ee[Me].height,0,pt,yt,Ee[Me].data);for(let Ze=0;Ze<Ae.length;Ze++){const $t=Ae[Ze].image[Me].image;It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,0,0,$t.width,$t.height,pt,yt,$t.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,mt,$t.width,$t.height,0,pt,yt,$t.data)}}else{It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,pt,yt,Ee[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,mt,pt,yt,Ee[Me]);for(let Ze=0;Ze<Ae.length;Ze++){const it=Ae[Ze];It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,0,0,pt,yt,it.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,mt,pt,yt,it.image[Me])}}}B(G,ct)&&O(n.TEXTURE_CUBE_MAP),Ke.__version=ke.version,G.onUpdate&&G.onUpdate(G)}Z.__version=G.version}function Ge(Z,G,_e,je,ke,Ke){const xt=s.convert(_e.format,_e.colorSpace),Qe=s.convert(_e.type),Ee=z(_e.internalFormat,xt,Qe,_e.colorSpace);if(!r.get(G).__hasExternalTextures){const ct=Math.max(1,G.width>>Ke),pt=Math.max(1,G.height>>Ke);ke===n.TEXTURE_3D||ke===n.TEXTURE_2D_ARRAY?t.texImage3D(ke,Ke,Ee,ct,pt,G.depth,0,xt,Qe,null):t.texImage2D(ke,Ke,Ee,ct,pt,0,xt,Qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,Z),Ct(G)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,je,ke,r.get(_e).__webglTexture,0,ft(G)):(ke===n.TEXTURE_2D||ke>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ke<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,je,ke,r.get(_e).__webglTexture,Ke),t.bindFramebuffer(n.FRAMEBUFFER,null)}function $(Z,G,_e){if(n.bindRenderbuffer(n.RENDERBUFFER,Z),G.depthBuffer&&!G.stencilBuffer){let je=n.DEPTH_COMPONENT16;if(_e||Ct(G)){const ke=G.depthTexture;ke&&ke.isDepthTexture&&(ke.type===Fi?je=n.DEPTH_COMPONENT32F:ke.type===xl&&(je=n.DEPTH_COMPONENT24));const Ke=ft(G);Ct(G)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ke,je,G.width,G.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ke,je,G.width,G.height)}else n.renderbufferStorage(n.RENDERBUFFER,je,G.width,G.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,Z)}else if(G.depthBuffer&&G.stencilBuffer){const je=ft(G);_e&&Ct(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,je,n.DEPTH24_STENCIL8,G.width,G.height):Ct(G)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,je,n.DEPTH24_STENCIL8,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,Z)}else{const je=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let ke=0;ke<je.length;ke++){const Ke=je[ke],xt=s.convert(Ke.format,Ke.colorSpace),Qe=s.convert(Ke.type),Ee=z(Ke.internalFormat,xt,Qe,Ke.colorSpace),bt=ft(G);_e&&Ct(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,Ee,G.width,G.height):Ct(G)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,bt,Ee,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,G.width,G.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ne(Z,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Z),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),re(G.depthTexture,0);const je=r.get(G.depthTexture).__webglTexture,ke=ft(G);if(G.depthTexture.format===Fu)Ct(G)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,je,0,ke):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,je,0);else if(G.depthTexture.format===Mf)Ct(G)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,je,0,ke):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,je,0);else throw new Error("Unknown depthTexture format")}function Be(Z){const G=r.get(Z),_e=Z.isWebGLCubeRenderTarget===!0;if(Z.depthTexture&&!G.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");Ne(G.__webglFramebuffer,Z)}else if(_e){G.__webglDepthbuffer=[];for(let je=0;je<6;je++)t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer[je]),G.__webglDepthbuffer[je]=n.createRenderbuffer(),$(G.__webglDepthbuffer[je],Z,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer=n.createRenderbuffer(),$(G.__webglDepthbuffer,Z,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ve(Z,G,_e){const je=r.get(Z);G!==void 0&&Ge(je.__webglFramebuffer,Z,Z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),_e!==void 0&&Be(Z)}function He(Z){const G=Z.texture,_e=r.get(Z),je=r.get(G);Z.addEventListener("dispose",ae),Z.isWebGLMultipleRenderTargets!==!0&&(je.__webglTexture===void 0&&(je.__webglTexture=n.createTexture()),je.__version=G.version,o.memory.textures++);const ke=Z.isWebGLCubeRenderTarget===!0,Ke=Z.isWebGLMultipleRenderTargets===!0,xt=C(Z)||a;if(ke){_e.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)if(a&&G.mipmaps&&G.mipmaps.length>0){_e.__webglFramebuffer[Qe]=[];for(let Ee=0;Ee<G.mipmaps.length;Ee++)_e.__webglFramebuffer[Qe][Ee]=n.createFramebuffer()}else _e.__webglFramebuffer[Qe]=n.createFramebuffer()}else{if(a&&G.mipmaps&&G.mipmaps.length>0){_e.__webglFramebuffer=[];for(let Qe=0;Qe<G.mipmaps.length;Qe++)_e.__webglFramebuffer[Qe]=n.createFramebuffer()}else _e.__webglFramebuffer=n.createFramebuffer();if(Ke)if(i.drawBuffers){const Qe=Z.texture;for(let Ee=0,bt=Qe.length;Ee<bt;Ee++){const ct=r.get(Qe[Ee]);ct.__webglTexture===void 0&&(ct.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Z.samples>0&&Ct(Z)===!1){const Qe=Ke?G:[G];_e.__webglMultisampledFramebuffer=n.createFramebuffer(),_e.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let Ee=0;Ee<Qe.length;Ee++){const bt=Qe[Ee];_e.__webglColorRenderbuffer[Ee]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,_e.__webglColorRenderbuffer[Ee]);const ct=s.convert(bt.format,bt.colorSpace),pt=s.convert(bt.type),yt=z(bt.internalFormat,ct,pt,bt.colorSpace,Z.isXRRenderTarget===!0),mt=ft(Z);n.renderbufferStorageMultisample(n.RENDERBUFFER,mt,yt,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,_e.__webglColorRenderbuffer[Ee])}n.bindRenderbuffer(n.RENDERBUFFER,null),Z.depthBuffer&&(_e.__webglDepthRenderbuffer=n.createRenderbuffer(),$(_e.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ke){t.bindTexture(n.TEXTURE_CUBE_MAP,je.__webglTexture),Xe(n.TEXTURE_CUBE_MAP,G,xt);for(let Qe=0;Qe<6;Qe++)if(a&&G.mipmaps&&G.mipmaps.length>0)for(let Ee=0;Ee<G.mipmaps.length;Ee++)Ge(_e.__webglFramebuffer[Qe][Ee],Z,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,Ee);else Ge(_e.__webglFramebuffer[Qe],Z,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0);B(G,xt)&&O(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ke){const Qe=Z.texture;for(let Ee=0,bt=Qe.length;Ee<bt;Ee++){const ct=Qe[Ee],pt=r.get(ct);t.bindTexture(n.TEXTURE_2D,pt.__webglTexture),Xe(n.TEXTURE_2D,ct,xt),Ge(_e.__webglFramebuffer,Z,ct,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,0),B(ct,xt)&&O(n.TEXTURE_2D)}t.unbindTexture()}else{let Qe=n.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(a?Qe=Z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Qe,je.__webglTexture),Xe(Qe,G,xt),a&&G.mipmaps&&G.mipmaps.length>0)for(let Ee=0;Ee<G.mipmaps.length;Ee++)Ge(_e.__webglFramebuffer[Ee],Z,G,n.COLOR_ATTACHMENT0,Qe,Ee);else Ge(_e.__webglFramebuffer,Z,G,n.COLOR_ATTACHMENT0,Qe,0);B(G,xt)&&O(Qe),t.unbindTexture()}Z.depthBuffer&&Be(Z)}function vt(Z){const G=C(Z)||a,_e=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let je=0,ke=_e.length;je<ke;je++){const Ke=_e[je];if(B(Ke,G)){const xt=Z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Qe=r.get(Ke).__webglTexture;t.bindTexture(xt,Qe),O(xt),t.unbindTexture()}}}function st(Z){if(a&&Z.samples>0&&Ct(Z)===!1){const G=Z.isWebGLMultipleRenderTargets?Z.texture:[Z.texture],_e=Z.width,je=Z.height;let ke=n.COLOR_BUFFER_BIT;const Ke=[],xt=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=r.get(Z),Ee=Z.isWebGLMultipleRenderTargets===!0;if(Ee)for(let bt=0;bt<G.length;bt++)t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let bt=0;bt<G.length;bt++){Ke.push(n.COLOR_ATTACHMENT0+bt),Z.depthBuffer&&Ke.push(xt);const ct=Qe.__ignoreDepthValues!==void 0?Qe.__ignoreDepthValues:!1;if(ct===!1&&(Z.depthBuffer&&(ke|=n.DEPTH_BUFFER_BIT),Z.stencilBuffer&&(ke|=n.STENCIL_BUFFER_BIT)),Ee&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[bt]),ct===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[xt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[xt])),Ee){const pt=r.get(G[bt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,pt,0)}n.blitFramebuffer(0,0,_e,je,0,0,_e,je,ke,n.NEAREST),v&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ke)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ee)for(let bt=0;bt<G.length;bt++){t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[bt]);const ct=r.get(G[bt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,ct,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}}function ft(Z){return Math.min(p,Z.samples)}function Ct(Z){const G=r.get(Z);return a&&Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function jt(Z){const G=o.render.frame;x.get(Z)!==G&&(x.set(Z,G),Z.update())}function un(Z,G){const _e=Z.colorSpace,je=Z.format,ke=Z.type;return Z.isCompressedTexture===!0||Z.format===Y_||_e!==jo&&_e!==Uu&&(_e===Qt?a===!1?e.has("EXT_sRGB")===!0&&je===Ki?(Z.format=Y_,Z.minFilter=Wn,Z.generateMipmaps=!1):G=gT.sRGBToLinear(G):(je!==Ki||ke!==Ca)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_e)),G}this.allocateTextureUnit=K,this.resetTextureUnits=he,this.setTexture2D=re,this.setTexture2DArray=se,this.setTexture3D=oe,this.setTextureCube=Le,this.rebindTextures=Ve,this.setupRenderTarget=He,this.updateRenderTargetMipmap=vt,this.updateMultisampleRenderTarget=st,this.setupDepthRenderbuffer=Be,this.setupFrameBufferTexture=Ge,this.useMultisampledRTT=Ct}function DD(n,e,t){const r=t.isWebGL2;function i(s,o=Uu){let a;if(s===Ca)return n.UNSIGNED_BYTE;if(s===sT)return n.UNSIGNED_SHORT_4_4_4_4;if(s===oT)return n.UNSIGNED_SHORT_5_5_5_1;if(s===Q3)return n.BYTE;if(s===Z3)return n.SHORT;if(s===T1)return n.UNSIGNED_SHORT;if(s===iT)return n.INT;if(s===xl)return n.UNSIGNED_INT;if(s===Fi)return n.FLOAT;if(s===Yi)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===$3)return n.ALPHA;if(s===Ki)return n.RGBA;if(s===eD)return n.LUMINANCE;if(s===tD)return n.LUMINANCE_ALPHA;if(s===Fu)return n.DEPTH_COMPONENT;if(s===Mf)return n.DEPTH_STENCIL;if(s===Y_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===aT)return n.RED;if(s===lT)return n.RED_INTEGER;if(s===nD)return n.RG;if(s===uT)return n.RG_INTEGER;if(s===cT)return n.RGBA_INTEGER;if(s===u_||s===c_||s===f_||s===d_)if(o===Qt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===u_)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===c_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===f_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===d_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===u_)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===c_)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===f_)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===d_)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===lE||s===uE||s===cE||s===fE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===lE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===uE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===cE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===fE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===rD)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===dE||s===hE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===dE)return o===Qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===hE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===pE||s===mE||s===gE||s===vE||s===yE||s===_E||s===xE||s===SE||s===AE||s===ME||s===EE||s===wE||s===TE||s===CE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===pE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===mE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===gE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===vE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===yE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===_E)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===xE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===SE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===AE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ME)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===EE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===wE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===TE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===CE)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===h_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===h_)return o===Qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===iD||s===bE||s===RE||s===PE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===h_)return a.COMPRESSED_RED_RGTC1_EXT;if(s===bE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===RE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===PE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ou?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class OD extends Cr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ma extends Sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const xj={type:"move"};class TA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ma,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ma,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ma,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const E of e.hand.values()){const A=t.getJointPose(E,r),y=this._getHandJoint(f,E);A!==null&&(y.matrix.fromArray(A.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=A.radius),y.visible=A!==null}const h=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],m=h.position.distanceTo(p.position),v=.02,x=.005;f.inputState.pinching&&m>v+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&m<=v-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(xj)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Ma;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class FD extends tr{constructor(e,t,r,i,s,o,a,l,f,h){if(h=h!==void 0?h:Fu,h!==Fu&&h!==Mf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Fu&&(r=xl),r===void 0&&h===Mf&&(r=Ou),super(null,i,s,o,a,l,h,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ar,this.minFilter=l!==void 0?l:Ar,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Sj extends Il{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,f=null,h=null,p=null,m=null,v=null,x=null;const E=t.getContextAttributes();let A=null,y=null;const M=[],S=[],C=new Cr;C.layers.enable(1),C.viewport=new Mn;const I=new Cr;I.layers.enable(2),I.viewport=new Mn;const B=[C,I],O=new OD;O.layers.enable(1),O.layers.enable(2);let z=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let oe=M[se];return oe===void 0&&(oe=new TA,M[se]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(se){let oe=M[se];return oe===void 0&&(oe=new TA,M[se]=oe),oe.getGripSpace()},this.getHand=function(se){let oe=M[se];return oe===void 0&&(oe=new TA,M[se]=oe),oe.getHandSpace()};function N(se){const oe=S.indexOf(se.inputSource);if(oe===-1)return;const Le=M[oe];Le!==void 0&&(Le.update(se.inputSource,se.frame,f||o),Le.dispatchEvent({type:se.type,data:se.inputSource}))}function W(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",W),i.removeEventListener("inputsourceschange",ae);for(let se=0;se<M.length;se++){const oe=S[se];oe!==null&&(S[se]=null,M[se].disconnect(oe))}z=null,L=null,e.setRenderTarget(A),v=null,m=null,p=null,i=null,y=null,re.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){s=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(se){f=se},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(se){if(i=se,i!==null){if(A=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",W),i.addEventListener("inputsourceschange",ae),E.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const oe={antialias:i.renderState.layers===void 0?E.antialias:!0,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(i,t,oe),i.updateRenderState({baseLayer:v}),y=new Xo(v.framebufferWidth,v.framebufferHeight,{format:Ki,type:Ca,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil})}else{let oe=null,Le=null,Oe=null;E.depth&&(Oe=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,oe=E.stencil?Mf:Fu,Le=E.stencil?Ou:xl);const De={colorFormat:t.RGBA8,depthFormat:Oe,scaleFactor:s};p=new XRWebGLBinding(i,t),m=p.createProjectionLayer(De),i.updateRenderState({layers:[m]}),y=new Xo(m.textureWidth,m.textureHeight,{format:Ki,type:Ca,depthTexture:new FD(m.textureWidth,m.textureHeight,Le,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0});const Ue=e.properties.get(y);Ue.__ignoreDepthValues=m.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(l),f=null,o=await i.requestReferenceSpace(a),re.setContext(i),re.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ae(se){for(let oe=0;oe<se.removed.length;oe++){const Le=se.removed[oe],Oe=S.indexOf(Le);Oe>=0&&(S[Oe]=null,M[Oe].disconnect(Le))}for(let oe=0;oe<se.added.length;oe++){const Le=se.added[oe];let Oe=S.indexOf(Le);if(Oe===-1){for(let Ue=0;Ue<M.length;Ue++)if(Ue>=S.length){S.push(Le),Oe=Ue;break}else if(S[Ue]===null){S[Ue]=Le,Oe=Ue;break}if(Oe===-1)break}const De=M[Oe];De&&De.connect(Le)}}const te=new J,ie=new J;function le(se,oe,Le){te.setFromMatrixPosition(oe.matrixWorld),ie.setFromMatrixPosition(Le.matrixWorld);const Oe=te.distanceTo(ie),De=oe.projectionMatrix.elements,Ue=Le.projectionMatrix.elements,Xe=De[14]/(De[10]-1),rt=De[14]/(De[10]+1),Gt=(De[9]+1)/De[5],Dt=(De[9]-1)/De[5],Ge=(De[8]-1)/De[0],$=(Ue[8]+1)/Ue[0],Ne=Xe*Ge,Be=Xe*$,Ve=Oe/(-Ge+$),He=Ve*-Ge;oe.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(He),se.translateZ(Ve),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const vt=Xe+Ve,st=rt+Ve,ft=Ne-He,Ct=Be+(Oe-He),jt=Gt*rt/st*vt,un=Dt*rt/st*vt;se.projectionMatrix.makePerspective(ft,Ct,jt,un,vt,st),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}function ce(se,oe){oe===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(oe.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(i===null)return;O.near=I.near=C.near=se.near,O.far=I.far=C.far=se.far,(z!==O.near||L!==O.far)&&(i.updateRenderState({depthNear:O.near,depthFar:O.far}),z=O.near,L=O.far);const oe=se.parent,Le=O.cameras;ce(O,oe);for(let Oe=0;Oe<Le.length;Oe++)ce(Le[Oe],oe);Le.length===2?le(O,C,I):O.projectionMatrix.copy(C.projectionMatrix),he(se,O,oe)};function he(se,oe,Le){Le===null?se.matrix.copy(oe.matrixWorld):(se.matrix.copy(Le.matrixWorld),se.matrix.invert(),se.matrix.multiply(oe.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0);const Oe=se.children;for(let De=0,Ue=Oe.length;De<Ue;De++)Oe[De].updateMatrixWorld(!0);se.projectionMatrix.copy(oe.projectionMatrix),se.projectionMatrixInverse.copy(oe.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=Yh*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(m===null&&v===null))return l},this.setFoveation=function(se){l=se,m!==null&&(m.fixedFoveation=se),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=se)};let K=null;function fe(se,oe){if(h=oe.getViewerPose(f||o),x=oe,h!==null){const Le=h.views;v!==null&&(e.setRenderTargetFramebuffer(y,v.framebuffer),e.setRenderTarget(y));let Oe=!1;Le.length!==O.cameras.length&&(O.cameras.length=0,Oe=!0);for(let De=0;De<Le.length;De++){const Ue=Le[De];let Xe=null;if(v!==null)Xe=v.getViewport(Ue);else{const Gt=p.getViewSubImage(m,Ue);Xe=Gt.viewport,De===0&&(e.setRenderTargetTextures(y,Gt.colorTexture,m.ignoreDepthValues?void 0:Gt.depthStencilTexture),e.setRenderTarget(y))}let rt=B[De];rt===void 0&&(rt=new Cr,rt.layers.enable(De),rt.viewport=new Mn,B[De]=rt),rt.matrix.fromArray(Ue.transform.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.projectionMatrix.fromArray(Ue.projectionMatrix),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert(),rt.viewport.set(Xe.x,Xe.y,Xe.width,Xe.height),De===0&&(O.matrix.copy(rt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),Oe===!0&&O.cameras.push(rt)}}for(let Le=0;Le<M.length;Le++){const Oe=S[Le],De=M[Le];Oe!==null&&De!==void 0&&De.update(Oe,oe,f||o)}K&&K(se,oe),oe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:oe}),x=null}const re=new RD;re.setAnimationLoop(fe),this.setAnimationLoop=function(se){K=se},this.dispose=function(){}}}function Aj(n,e){function t(A,y){A.matrixAutoUpdate===!0&&A.updateMatrix(),y.value.copy(A.matrix)}function r(A,y){y.color.getRGB(A.fogColor.value,TD(n)),y.isFog?(A.fogNear.value=y.near,A.fogFar.value=y.far):y.isFogExp2&&(A.fogDensity.value=y.density)}function i(A,y,M,S,C){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(A,y):y.isMeshToonMaterial?(s(A,y),p(A,y)):y.isMeshPhongMaterial?(s(A,y),h(A,y)):y.isMeshStandardMaterial?(s(A,y),m(A,y),y.isMeshPhysicalMaterial&&v(A,y,C)):y.isMeshMatcapMaterial?(s(A,y),x(A,y)):y.isMeshDepthMaterial?s(A,y):y.isMeshDistanceMaterial?(s(A,y),E(A,y)):y.isMeshNormalMaterial?s(A,y):y.isLineBasicMaterial?(o(A,y),y.isLineDashedMaterial&&a(A,y)):y.isPointsMaterial?l(A,y,M,S):y.isSpriteMaterial?f(A,y):y.isShadowMaterial?(A.color.value.copy(y.color),A.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(A,y){A.opacity.value=y.opacity,y.color&&A.diffuse.value.copy(y.color),y.emissive&&A.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(A.map.value=y.map,t(y.map,A.mapTransform)),y.alphaMap&&(A.alphaMap.value=y.alphaMap,t(y.alphaMap,A.alphaMapTransform)),y.bumpMap&&(A.bumpMap.value=y.bumpMap,t(y.bumpMap,A.bumpMapTransform),A.bumpScale.value=y.bumpScale,y.side===Qi&&(A.bumpScale.value*=-1)),y.normalMap&&(A.normalMap.value=y.normalMap,t(y.normalMap,A.normalMapTransform),A.normalScale.value.copy(y.normalScale),y.side===Qi&&A.normalScale.value.negate()),y.displacementMap&&(A.displacementMap.value=y.displacementMap,t(y.displacementMap,A.displacementMapTransform),A.displacementScale.value=y.displacementScale,A.displacementBias.value=y.displacementBias),y.emissiveMap&&(A.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,A.emissiveMapTransform)),y.specularMap&&(A.specularMap.value=y.specularMap,t(y.specularMap,A.specularMapTransform)),y.alphaTest>0&&(A.alphaTest.value=y.alphaTest);const M=e.get(y).envMap;if(M&&(A.envMap.value=M,A.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=y.reflectivity,A.ior.value=y.ior,A.refractionRatio.value=y.refractionRatio),y.lightMap){A.lightMap.value=y.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;A.lightMapIntensity.value=y.lightMapIntensity*S,t(y.lightMap,A.lightMapTransform)}y.aoMap&&(A.aoMap.value=y.aoMap,A.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,A.aoMapTransform))}function o(A,y){A.diffuse.value.copy(y.color),A.opacity.value=y.opacity,y.map&&(A.map.value=y.map,t(y.map,A.mapTransform))}function a(A,y){A.dashSize.value=y.dashSize,A.totalSize.value=y.dashSize+y.gapSize,A.scale.value=y.scale}function l(A,y,M,S){A.diffuse.value.copy(y.color),A.opacity.value=y.opacity,A.size.value=y.size*M,A.scale.value=S*.5,y.map&&(A.map.value=y.map,t(y.map,A.uvTransform)),y.alphaMap&&(A.alphaMap.value=y.alphaMap,t(y.alphaMap,A.alphaMapTransform)),y.alphaTest>0&&(A.alphaTest.value=y.alphaTest)}function f(A,y){A.diffuse.value.copy(y.color),A.opacity.value=y.opacity,A.rotation.value=y.rotation,y.map&&(A.map.value=y.map,t(y.map,A.mapTransform)),y.alphaMap&&(A.alphaMap.value=y.alphaMap,t(y.alphaMap,A.alphaMapTransform)),y.alphaTest>0&&(A.alphaTest.value=y.alphaTest)}function h(A,y){A.specular.value.copy(y.specular),A.shininess.value=Math.max(y.shininess,1e-4)}function p(A,y){y.gradientMap&&(A.gradientMap.value=y.gradientMap)}function m(A,y){A.metalness.value=y.metalness,y.metalnessMap&&(A.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,A.metalnessMapTransform)),A.roughness.value=y.roughness,y.roughnessMap&&(A.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,A.roughnessMapTransform)),e.get(y).envMap&&(A.envMapIntensity.value=y.envMapIntensity)}function v(A,y,M){A.ior.value=y.ior,y.sheen>0&&(A.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),A.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(A.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,A.sheenColorMapTransform)),y.sheenRoughnessMap&&(A.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,A.sheenRoughnessMapTransform))),y.clearcoat>0&&(A.clearcoat.value=y.clearcoat,A.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(A.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,A.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(A.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Qi&&A.clearcoatNormalScale.value.negate())),y.iridescence>0&&(A.iridescence.value=y.iridescence,A.iridescenceIOR.value=y.iridescenceIOR,A.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(A.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,A.iridescenceMapTransform)),y.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),y.transmission>0&&(A.transmission.value=y.transmission,A.transmissionSamplerMap.value=M.texture,A.transmissionSamplerSize.value.set(M.width,M.height),y.transmissionMap&&(A.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,A.transmissionMapTransform)),A.thickness.value=y.thickness,y.thicknessMap&&(A.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=y.attenuationDistance,A.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(A.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(A.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=y.specularIntensity,A.specularColor.value.copy(y.specularColor),y.specularColorMap&&(A.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,A.specularColorMapTransform)),y.specularIntensityMap&&(A.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,A.specularIntensityMapTransform))}function x(A,y){y.matcap&&(A.matcap.value=y.matcap)}function E(A,y){const M=e.get(y).light;A.referencePosition.value.setFromMatrixPosition(M.matrixWorld),A.nearDistance.value=M.shadow.camera.near,A.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Mj(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(M,S){const C=S.program;r.uniformBlockBinding(M,C)}function f(M,S){let C=i[M.id];C===void 0&&(x(M),C=h(M),i[M.id]=C,M.addEventListener("dispose",A));const I=S.program;r.updateUBOMapping(M,I);const B=e.render.frame;s[M.id]!==B&&(m(M),s[M.id]=B)}function h(M){const S=p();M.__bindingPointIndex=S;const C=n.createBuffer(),I=M.__size,B=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,I,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,C),C}function p(){for(let M=0;M<a;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(M){const S=i[M.id],C=M.uniforms,I=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let B=0,O=C.length;B<O;B++){const z=C[B];if(v(z,B,I)===!0){const L=z.__offset,N=Array.isArray(z.value)?z.value:[z.value];let W=0;for(let ae=0;ae<N.length;ae++){const te=N[ae],ie=E(te);typeof te=="number"?(z.__data[0]=te,n.bufferSubData(n.UNIFORM_BUFFER,L+W,z.__data)):te.isMatrix3?(z.__data[0]=te.elements[0],z.__data[1]=te.elements[1],z.__data[2]=te.elements[2],z.__data[3]=te.elements[0],z.__data[4]=te.elements[3],z.__data[5]=te.elements[4],z.__data[6]=te.elements[5],z.__data[7]=te.elements[0],z.__data[8]=te.elements[6],z.__data[9]=te.elements[7],z.__data[10]=te.elements[8],z.__data[11]=te.elements[0]):(te.toArray(z.__data,W),W+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,L,z.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(M,S,C){const I=M.value;if(C[S]===void 0){if(typeof I=="number")C[S]=I;else{const B=Array.isArray(I)?I:[I],O=[];for(let z=0;z<B.length;z++)O.push(B[z].clone());C[S]=O}return!0}else if(typeof I=="number"){if(C[S]!==I)return C[S]=I,!0}else{const B=Array.isArray(C[S])?C[S]:[C[S]],O=Array.isArray(I)?I:[I];for(let z=0;z<B.length;z++){const L=B[z];if(L.equals(O[z])===!1)return L.copy(O[z]),!0}}return!1}function x(M){const S=M.uniforms;let C=0;const I=16;let B=0;for(let O=0,z=S.length;O<z;O++){const L=S[O],N={boundary:0,storage:0},W=Array.isArray(L.value)?L.value:[L.value];for(let ae=0,te=W.length;ae<te;ae++){const ie=W[ae],le=E(ie);N.boundary+=le.boundary,N.storage+=le.storage}if(L.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=C,O>0){B=C%I;const ae=I-B;B!==0&&ae-N.boundary<0&&(C+=I-B,L.__offset=C)}C+=N.storage}return B=C%I,B>0&&(C+=I-B),M.__size=C,M.__cache={},this}function E(M){const S={boundary:0,storage:0};return typeof M=="number"?(S.boundary=4,S.storage=4):M.isVector2?(S.boundary=8,S.storage=8):M.isVector3||M.isColor?(S.boundary=16,S.storage=12):M.isVector4?(S.boundary=16,S.storage=16):M.isMatrix3?(S.boundary=48,S.storage=48):M.isMatrix4?(S.boundary=64,S.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),S}function A(M){const S=M.target;S.removeEventListener("dispose",A);const C=o.indexOf(S.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function y(){for(const M in i)n.deleteBuffer(i[M]);o=[],i={},s={}}return{bind:l,update:f,dispose:y}}function Ej(){const n=Vg("canvas");return n.style.display="block",n}class ET{constructor(e={}){const{canvas:t=Ej(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let m;r!==null?m=r.getContextAttributes().alpha:m=o;const v=new Uint32Array(4),x=new Int32Array(4);let E=null,A=null;const y=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Qt,this._useLegacyLights=!1,this.toneMapping=Ta,this.toneMappingExposure=1;const S=this;let C=!1,I=0,B=0,O=null,z=-1,L=null;const N=new Mn,W=new Mn;let ae=null;const te=new tt(0);let ie=0,le=t.width,ce=t.height,he=1,K=null,fe=null;const re=new Mn(0,0,le,ce),se=new Mn(0,0,le,ce);let oe=!1;const Le=new R1;let Oe=!1,De=!1,Ue=null;const Xe=new Ht,rt=new ze,Gt=new J,Dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ge(){return O===null?he:1}let $=r;function Ne(R,H){for(let Y=0;Y<R.length;Y++){const X=R[Y],Q=t.getContext(X,H);if(Q!==null)return Q}return null}try{const R={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ap}`),t.addEventListener("webglcontextlost",Ae,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Ze,!1),$===null){const H=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&H.shift(),$=Ne(H,R),$===null)throw Ne(H)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&$ instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}let Be,Ve,He,vt,st,ft,Ct,jt,un,Z,G,_e,je,ke,Ke,xt,Qe,Ee,bt,ct,pt,yt,mt,It;function Ut(){Be=new kV($),Ve=new LV($,Be,e),Be.init(Ve),yt=new DD($,Be,Ve),He=new yj($,Be,Ve),vt=new GV($),st=new oj,ft=new _j($,Be,He,st,Ve,yt,vt),Ct=new OV(S),jt=new UV(S),un=new Z8($,Ve),mt=new IV($,Be,un,Ve),Z=new zV($,un,vt,mt),G=new XV($,Z,un,vt),bt=new jV($,Ve,ft),xt=new DV(st),_e=new sj(S,Ct,jt,Be,Ve,mt,xt),je=new Aj(S,st),ke=new lj,Ke=new pj(Be,Ve),Ee=new PV(S,Ct,jt,He,G,m,l),Qe=new vj(S,G,Ve),It=new Mj($,vt,Ve,He),ct=new BV($,Be,vt,Ve),pt=new HV($,Be,vt,Ve),vt.programs=_e.programs,S.capabilities=Ve,S.extensions=Be,S.properties=st,S.renderLists=ke,S.shadowMap=Qe,S.state=He,S.info=vt}Ut();const de=new Sj(S,$);this.xr=de,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const R=Be.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=Be.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(R){R!==void 0&&(he=R,this.setSize(le,ce,!1))},this.getSize=function(R){return R.set(le,ce)},this.setSize=function(R,H,Y=!0){if(de.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}le=R,ce=H,t.width=Math.floor(R*he),t.height=Math.floor(H*he),Y===!0&&(t.style.width=R+"px",t.style.height=H+"px"),this.setViewport(0,0,R,H)},this.getDrawingBufferSize=function(R){return R.set(le*he,ce*he).floor()},this.setDrawingBufferSize=function(R,H,Y){le=R,ce=H,he=Y,t.width=Math.floor(R*Y),t.height=Math.floor(H*Y),this.setViewport(0,0,R,H)},this.getCurrentViewport=function(R){return R.copy(N)},this.getViewport=function(R){return R.copy(re)},this.setViewport=function(R,H,Y,X){R.isVector4?re.set(R.x,R.y,R.z,R.w):re.set(R,H,Y,X),He.viewport(N.copy(re).multiplyScalar(he).floor())},this.getScissor=function(R){return R.copy(se)},this.setScissor=function(R,H,Y,X){R.isVector4?se.set(R.x,R.y,R.z,R.w):se.set(R,H,Y,X),He.scissor(W.copy(se).multiplyScalar(he).floor())},this.getScissorTest=function(){return oe},this.setScissorTest=function(R){He.setScissorTest(oe=R)},this.setOpaqueSort=function(R){K=R},this.setTransparentSort=function(R){fe=R},this.getClearColor=function(R){return R.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function(R=!0,H=!0,Y=!0){let X=0;if(R){let Q=!1;if(O!==null){const ye=O.texture.format;Q=ye===cT||ye===uT||ye===lT}if(Q){const ye=O.texture.type,Se=ye===Ca||ye===xl||ye===T1||ye===Ou||ye===sT||ye===oT,Ie=Ee.getClearColor(),Pe=Ee.getClearAlpha(),Fe=Ie.r,Ce=Ie.g,dt=Ie.b;Se?(v[0]=Fe,v[1]=Ce,v[2]=dt,v[3]=Pe,$.clearBufferuiv($.COLOR,0,v)):(x[0]=Fe,x[1]=Ce,x[2]=dt,x[3]=Pe,$.clearBufferiv($.COLOR,0,x))}else X|=$.COLOR_BUFFER_BIT}H&&(X|=$.DEPTH_BUFFER_BIT),Y&&(X|=$.STENCIL_BUFFER_BIT),$.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ae,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Ze,!1),ke.dispose(),Ke.dispose(),st.dispose(),Ct.dispose(),jt.dispose(),G.dispose(),mt.dispose(),It.dispose(),_e.dispose(),de.dispose(),de.removeEventListener("sessionstart",sn),de.removeEventListener("sessionend",Gr),Ue&&(Ue.dispose(),Ue=null),or.stop()};function Ae(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const R=vt.autoReset,H=Qe.enabled,Y=Qe.autoUpdate,X=Qe.needsUpdate,Q=Qe.type;Ut(),vt.autoReset=R,Qe.enabled=H,Qe.autoUpdate=Y,Qe.needsUpdate=X,Qe.type=Q}function Ze(R){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",R.statusMessage)}function it(R){const H=R.target;H.removeEventListener("dispose",it),$t(H)}function $t(R){wn(R),st.remove(R)}function wn(R){const H=st.get(R).programs;H!==void 0&&(H.forEach(function(Y){_e.releaseProgram(Y)}),R.isShaderMaterial&&_e.releaseShaderCache(R))}this.renderBufferDirect=function(R,H,Y,X,Q,ye){H===null&&(H=Dt);const Se=Q.isMesh&&Q.matrixWorld.determinant()<0,Ie=Mo(R,H,Y,X,Q);He.setMaterial(X,Se);let Pe=Y.index,Fe=1;if(X.wireframe===!0){if(Pe=Z.getWireframeAttribute(Y),Pe===void 0)return;Fe=2}const Ce=Y.drawRange,dt=Y.attributes.position;let et=Ce.start*Fe,nt=(Ce.start+Ce.count)*Fe;ye!==null&&(et=Math.max(et,ye.start*Fe),nt=Math.min(nt,(ye.start+ye.count)*Fe)),Pe!==null?(et=Math.max(et,0),nt=Math.min(nt,Pe.count)):dt!=null&&(et=Math.max(et,0),nt=Math.min(nt,dt.count));const St=nt-et;if(St<0||St===1/0)return;mt.setup(Q,X,Ie,Y,Pe);let Lt,Rt=ct;if(Pe!==null&&(Lt=un.get(Pe),Rt=pt,Rt.setIndex(Lt)),Q.isMesh)X.wireframe===!0?(He.setLineWidth(X.wireframeLinewidth*Ge()),Rt.setMode($.LINES)):Rt.setMode($.TRIANGLES);else if(Q.isLine){let lt=X.linewidth;lt===void 0&&(lt=1),He.setLineWidth(lt*Ge()),Q.isLineSegments?Rt.setMode($.LINES):Q.isLineLoop?Rt.setMode($.LINE_LOOP):Rt.setMode($.LINE_STRIP)}else Q.isPoints?Rt.setMode($.POINTS):Q.isSprite&&Rt.setMode($.TRIANGLES);if(Q.isInstancedMesh)Rt.renderInstances(et,St,Q.count);else if(Y.isInstancedBufferGeometry){const lt=Y._maxInstanceCount!==void 0?Y._maxInstanceCount:1/0,Ft=Math.min(Y.instanceCount,lt);Rt.renderInstances(et,St,Ft)}else Rt.render(et,St)},this.compile=function(R,H){function Y(X,Q,ye){X.transparent===!0&&X.side===Fs&&X.forceSinglePass===!1?(X.side=Qi,X.needsUpdate=!0,Ir(X,Q,ye),X.side=Ba,X.needsUpdate=!0,Ir(X,Q,ye),X.side=Fs):Ir(X,Q,ye)}A=Ke.get(R),A.init(),M.push(A),R.traverseVisible(function(X){X.isLight&&X.layers.test(H.layers)&&(A.pushLight(X),X.castShadow&&A.pushShadow(X))}),A.setupLights(S._useLegacyLights),R.traverse(function(X){const Q=X.material;if(Q)if(Array.isArray(Q))for(let ye=0;ye<Q.length;ye++){const Se=Q[ye];Y(Se,R,X)}else Y(Q,R,X)}),M.pop(),A=null};let Nn=null;function ci(R){Nn&&Nn(R)}function sn(){or.stop()}function Gr(){or.start()}const or=new RD;or.setAnimationLoop(ci),typeof self<"u"&&or.setContext(self),this.setAnimationLoop=function(R){Nn=R,de.setAnimationLoop(R),R===null?or.stop():or.start()},de.addEventListener("sessionstart",sn),de.addEventListener("sessionend",Gr),this.render=function(R,H){if(H!==void 0&&H.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;R.matrixWorldAutoUpdate===!0&&R.updateMatrixWorld(),H.parent===null&&H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),de.enabled===!0&&de.isPresenting===!0&&(de.cameraAutoUpdate===!0&&de.updateCamera(H),H=de.getCamera()),R.isScene===!0&&R.onBeforeRender(S,R,H,O),A=Ke.get(R,M.length),A.init(),M.push(A),Xe.multiplyMatrices(H.projectionMatrix,H.matrixWorldInverse),Le.setFromProjectionMatrix(Xe),De=this.localClippingEnabled,Oe=xt.init(this.clippingPlanes,De),E=ke.get(R,y.length),E.init(),y.push(E),Zo(R,H,0,S.sortObjects),E.finish(),S.sortObjects===!0&&E.sort(K,fe),this.info.render.frame++,Oe===!0&&xt.beginShadows();const Y=A.state.shadowsArray;if(Qe.render(Y,R,H),Oe===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ee.render(E,R),A.setupLights(S._useLegacyLights),H.isArrayCamera){const X=H.cameras;for(let Q=0,ye=X.length;Q<ye;Q++){const Se=X[Q];$o(E,R,Se,Se.viewport)}}else $o(E,R,H);O!==null&&(ft.updateMultisampleRenderTarget(O),ft.updateRenderTargetMipmap(O)),R.isScene===!0&&R.onAfterRender(S,R,H),mt.resetDefaultState(),z=-1,L=null,M.pop(),M.length>0?A=M[M.length-1]:A=null,y.pop(),y.length>0?E=y[y.length-1]:E=null};function Zo(R,H,Y,X){if(R.visible===!1)return;if(R.layers.test(H.layers)){if(R.isGroup)Y=R.renderOrder;else if(R.isLOD)R.autoUpdate===!0&&R.update(H);else if(R.isLight)A.pushLight(R),R.castShadow&&A.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||Le.intersectsSprite(R)){X&&Gt.setFromMatrixPosition(R.matrixWorld).applyMatrix4(Xe);const Se=G.update(R),Ie=R.material;Ie.visible&&E.push(R,Se,Ie,Y,Gt.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(!R.frustumCulled||Le.intersectsObject(R))){const Se=G.update(R),Ie=R.material;if(X&&(R.boundingSphere!==void 0?(R.boundingSphere===null&&R.computeBoundingSphere(),Gt.copy(R.boundingSphere.center)):(Se.boundingSphere===null&&Se.computeBoundingSphere(),Gt.copy(Se.boundingSphere.center)),Gt.applyMatrix4(R.matrixWorld).applyMatrix4(Xe)),Array.isArray(Ie)){const Pe=Se.groups;for(let Fe=0,Ce=Pe.length;Fe<Ce;Fe++){const dt=Pe[Fe],et=Ie[dt.materialIndex];et&&et.visible&&E.push(R,Se,et,Y,Gt.z,dt)}}else Ie.visible&&E.push(R,Se,Ie,Y,Gt.z,null)}}const ye=R.children;for(let Se=0,Ie=ye.length;Se<Ie;Se++)Zo(ye[Se],H,Y,X)}function $o(R,H,Y,X){const Q=R.opaque,ye=R.transmissive,Se=R.transparent;A.setupLightsView(Y),Oe===!0&&xt.setGlobalState(S.clippingPlanes,Y),ye.length>0&&ws(Q,ye,H,Y),X&&He.viewport(N.copy(X)),Q.length>0&&ts(Q,H,Y),ye.length>0&&ts(ye,H,Y),Se.length>0&&ts(Se,H,Y),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function ws(R,H,Y,X){const Q=Ve.isWebGL2;Ue===null&&(Ue=new Xo(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")?Yi:Ca,minFilter:Da,samples:Q?4:0})),S.getDrawingBufferSize(rt),Q?Ue.setSize(rt.x,rt.y):Ue.setSize(q_(rt.x),q_(rt.y));const ye=S.getRenderTarget();S.setRenderTarget(Ue),S.getClearColor(te),ie=S.getClearAlpha(),ie<1&&S.setClearColor(16777215,.5),S.clear();const Se=S.toneMapping;S.toneMapping=Ta,ts(R,Y,X),ft.updateMultisampleRenderTarget(Ue),ft.updateRenderTargetMipmap(Ue);let Ie=!1;for(let Pe=0,Fe=H.length;Pe<Fe;Pe++){const Ce=H[Pe],dt=Ce.object,et=Ce.geometry,nt=Ce.material,St=Ce.group;if(nt.side===Fs&&dt.layers.test(X.layers)){const Lt=nt.side;nt.side=Qi,nt.needsUpdate=!0,ns(dt,Y,X,et,nt,St),nt.side=Lt,nt.needsUpdate=!0,Ie=!0}}Ie===!0&&(ft.updateMultisampleRenderTarget(Ue),ft.updateRenderTargetMipmap(Ue)),S.setRenderTarget(ye),S.setClearColor(te,ie),S.toneMapping=Se}function ts(R,H,Y){const X=H.isScene===!0?H.overrideMaterial:null;for(let Q=0,ye=R.length;Q<ye;Q++){const Se=R[Q],Ie=Se.object,Pe=Se.geometry,Fe=X===null?Se.material:X,Ce=Se.group;Ie.layers.test(Y.layers)&&ns(Ie,H,Y,Pe,Fe,Ce)}}function ns(R,H,Y,X,Q,ye){R.onBeforeRender(S,H,Y,X,Q,ye),R.modelViewMatrix.multiplyMatrices(Y.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),Q.onBeforeRender(S,H,Y,X,R,ye),Q.transparent===!0&&Q.side===Fs&&Q.forceSinglePass===!1?(Q.side=Qi,Q.needsUpdate=!0,S.renderBufferDirect(Y,H,X,Q,R,ye),Q.side=Ba,Q.needsUpdate=!0,S.renderBufferDirect(Y,H,X,Q,R,ye),Q.side=Fs):S.renderBufferDirect(Y,H,X,Q,R,ye),R.onAfterRender(S,H,Y,X,Q,ye)}function Ir(R,H,Y){H.isScene!==!0&&(H=Dt);const X=st.get(R),Q=A.state.lights,ye=A.state.shadowsArray,Se=Q.state.version,Ie=_e.getParameters(R,Q.state,ye,H,Y),Pe=_e.getProgramCacheKey(Ie);let Fe=X.programs;X.environment=R.isMeshStandardMaterial?H.environment:null,X.fog=H.fog,X.envMap=(R.isMeshStandardMaterial?jt:Ct).get(R.envMap||X.environment),Fe===void 0&&(R.addEventListener("dispose",it),Fe=new Map,X.programs=Fe);let Ce=Fe.get(Pe);if(Ce!==void 0){if(X.currentProgram===Ce&&X.lightsStateVersion===Se)return zt(R,Ie),Ce}else Ie.uniforms=_e.getUniforms(R),R.onBuild(Y,Ie,S),R.onBeforeCompile(Ie,S),Ce=_e.acquireProgram(Ie,Pe),Fe.set(Pe,Ce),X.uniforms=Ie.uniforms;const dt=X.uniforms;(!R.isShaderMaterial&&!R.isRawShaderMaterial||R.clipping===!0)&&(dt.clippingPlanes=xt.uniform),zt(R,Ie),X.needsLights=U(R),X.lightsStateVersion=Se,X.needsLights&&(dt.ambientLightColor.value=Q.state.ambient,dt.lightProbe.value=Q.state.probe,dt.directionalLights.value=Q.state.directional,dt.directionalLightShadows.value=Q.state.directionalShadow,dt.spotLights.value=Q.state.spot,dt.spotLightShadows.value=Q.state.spotShadow,dt.rectAreaLights.value=Q.state.rectArea,dt.ltc_1.value=Q.state.rectAreaLTC1,dt.ltc_2.value=Q.state.rectAreaLTC2,dt.pointLights.value=Q.state.point,dt.pointLightShadows.value=Q.state.pointShadow,dt.hemisphereLights.value=Q.state.hemi,dt.directionalShadowMap.value=Q.state.directionalShadowMap,dt.directionalShadowMatrix.value=Q.state.directionalShadowMatrix,dt.spotShadowMap.value=Q.state.spotShadowMap,dt.spotLightMatrix.value=Q.state.spotLightMatrix,dt.spotLightMap.value=Q.state.spotLightMap,dt.pointShadowMap.value=Q.state.pointShadowMap,dt.pointShadowMatrix.value=Q.state.pointShadowMatrix);const et=Ce.getUniforms(),nt=g_.seqWithValue(et.seq,dt);return X.currentProgram=Ce,X.uniformsList=nt,Ce}function zt(R,H){const Y=st.get(R);Y.outputColorSpace=H.outputColorSpace,Y.instancing=H.instancing,Y.instancingColor=H.instancingColor,Y.skinning=H.skinning,Y.morphTargets=H.morphTargets,Y.morphNormals=H.morphNormals,Y.morphColors=H.morphColors,Y.morphTargetsCount=H.morphTargetsCount,Y.numClippingPlanes=H.numClippingPlanes,Y.numIntersection=H.numClipIntersection,Y.vertexAlphas=H.vertexAlphas,Y.vertexTangents=H.vertexTangents,Y.toneMapping=H.toneMapping}function Mo(R,H,Y,X,Q){H.isScene!==!0&&(H=Dt),ft.resetTextureUnits();const ye=H.fog,Se=X.isMeshStandardMaterial?H.environment:null,Ie=O===null?S.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:jo,Pe=(X.isMeshStandardMaterial?jt:Ct).get(X.envMap||Se),Fe=X.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,Ce=!!Y.attributes.tangent&&(!!X.normalMap||X.anisotropy>0),dt=!!Y.morphAttributes.position,et=!!Y.morphAttributes.normal,nt=!!Y.morphAttributes.color;let St=Ta;X.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(St=S.toneMapping);const Lt=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,Rt=Lt!==void 0?Lt.length:0,lt=st.get(X),Ft=A.state.lights;if(Oe===!0&&(De===!0||R!==L)){const Wt=R===L&&X.id===z;xt.setState(X,R,Wt)}let gt=!1;X.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Ft.state.version||lt.outputColorSpace!==Ie||Q.isInstancedMesh&&lt.instancing===!1||!Q.isInstancedMesh&&lt.instancing===!0||Q.isSkinnedMesh&&lt.skinning===!1||!Q.isSkinnedMesh&&lt.skinning===!0||Q.isInstancedMesh&&lt.instancingColor===!0&&Q.instanceColor===null||Q.isInstancedMesh&&lt.instancingColor===!1&&Q.instanceColor!==null||lt.envMap!==Pe||X.fog===!0&&lt.fog!==ye||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==xt.numPlanes||lt.numIntersection!==xt.numIntersection)||lt.vertexAlphas!==Fe||lt.vertexTangents!==Ce||lt.morphTargets!==dt||lt.morphNormals!==et||lt.morphColors!==nt||lt.toneMapping!==St||Ve.isWebGL2===!0&&lt.morphTargetsCount!==Rt)&&(gt=!0):(gt=!0,lt.__version=X.version);let Vt=lt.currentProgram;gt===!0&&(Vt=Ir(X,H,Q));let vn=!1,kt=!1,dn=!1;const cn=Vt.getUniforms(),Tn=lt.uniforms;if(He.useProgram(Vt.program)&&(vn=!0,kt=!0,dn=!0),X.id!==z&&(z=X.id,kt=!0),vn||L!==R){if(cn.setValue($,"projectionMatrix",R.projectionMatrix),Ve.logarithmicDepthBuffer&&cn.setValue($,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),L!==R&&(L=R,kt=!0,dn=!0),X.isShaderMaterial||X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshStandardMaterial||X.envMap){const Wt=cn.map.cameraPosition;Wt!==void 0&&Wt.setValue($,Gt.setFromMatrixPosition(R.matrixWorld))}(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&cn.setValue($,"isOrthographic",R.isOrthographicCamera===!0),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial||X.isShadowMaterial||Q.isSkinnedMesh)&&cn.setValue($,"viewMatrix",R.matrixWorldInverse)}if(Q.isSkinnedMesh){cn.setOptional($,Q,"bindMatrix"),cn.setOptional($,Q,"bindMatrixInverse");const Wt=Q.skeleton;Wt&&(Ve.floatVertexTextures?(Wt.boneTexture===null&&Wt.computeBoneTexture(),cn.setValue($,"boneTexture",Wt.boneTexture,ft),cn.setValue($,"boneTextureSize",Wt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Un=Y.morphAttributes;if((Un.position!==void 0||Un.normal!==void 0||Un.color!==void 0&&Ve.isWebGL2===!0)&&bt.update(Q,Y,Vt),(kt||lt.receiveShadow!==Q.receiveShadow)&&(lt.receiveShadow=Q.receiveShadow,cn.setValue($,"receiveShadow",Q.receiveShadow)),X.isMeshGouraudMaterial&&X.envMap!==null&&(Tn.envMap.value=Pe,Tn.flipEnvMap.value=Pe.isCubeTexture&&Pe.isRenderTargetTexture===!1?-1:1),kt&&(cn.setValue($,"toneMappingExposure",S.toneMappingExposure),lt.needsLights&&Fa(Tn,dn),ye&&X.fog===!0&&je.refreshFogUniforms(Tn,ye),je.refreshMaterialUniforms(Tn,X,he,ce,Ue),g_.upload($,lt.uniformsList,Tn,ft)),X.isShaderMaterial&&X.uniformsNeedUpdate===!0&&(g_.upload($,lt.uniformsList,Tn,ft),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&cn.setValue($,"center",Q.center),cn.setValue($,"modelViewMatrix",Q.modelViewMatrix),cn.setValue($,"normalMatrix",Q.normalMatrix),cn.setValue($,"modelMatrix",Q.matrixWorld),X.isShaderMaterial||X.isRawShaderMaterial){const Wt=X.uniformsGroups;for(let Gn=0,mn=Wt.length;Gn<mn;Gn++)if(Ve.isWebGL2){const an=Wt[Gn];It.update(an,Vt),It.bind(an,Vt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vt}function Fa(R,H){R.ambientLightColor.needsUpdate=H,R.lightProbe.needsUpdate=H,R.directionalLights.needsUpdate=H,R.directionalLightShadows.needsUpdate=H,R.pointLights.needsUpdate=H,R.pointLightShadows.needsUpdate=H,R.spotLights.needsUpdate=H,R.spotLightShadows.needsUpdate=H,R.rectAreaLights.needsUpdate=H,R.hemisphereLights.needsUpdate=H}function U(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&R.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(R,H,Y){st.get(R.texture).__webglTexture=H,st.get(R.depthTexture).__webglTexture=Y;const X=st.get(R);X.__hasExternalTextures=!0,X.__hasExternalTextures&&(X.__autoAllocateDepthBuffer=Y===void 0,X.__autoAllocateDepthBuffer||Be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),X.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(R,H){const Y=st.get(R);Y.__webglFramebuffer=H,Y.__useDefaultFramebuffer=H===void 0},this.setRenderTarget=function(R,H=0,Y=0){O=R,I=H,B=Y;let X=!0,Q=null,ye=!1,Se=!1;if(R){const Pe=st.get(R);Pe.__useDefaultFramebuffer!==void 0?(He.bindFramebuffer($.FRAMEBUFFER,null),X=!1):Pe.__webglFramebuffer===void 0?ft.setupRenderTarget(R):Pe.__hasExternalTextures&&ft.rebindTextures(R,st.get(R.texture).__webglTexture,st.get(R.depthTexture).__webglTexture);const Fe=R.texture;(Fe.isData3DTexture||Fe.isDataArrayTexture||Fe.isCompressedArrayTexture)&&(Se=!0);const Ce=st.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(Array.isArray(Ce[H])?Q=Ce[H][Y]:Q=Ce[H],ye=!0):Ve.isWebGL2&&R.samples>0&&ft.useMultisampledRTT(R)===!1?Q=st.get(R).__webglMultisampledFramebuffer:Array.isArray(Ce)?Q=Ce[Y]:Q=Ce,N.copy(R.viewport),W.copy(R.scissor),ae=R.scissorTest}else N.copy(re).multiplyScalar(he).floor(),W.copy(se).multiplyScalar(he).floor(),ae=oe;if(He.bindFramebuffer($.FRAMEBUFFER,Q)&&Ve.drawBuffers&&X&&He.drawBuffers(R,Q),He.viewport(N),He.scissor(W),He.setScissorTest(ae),ye){const Pe=st.get(R.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+H,Pe.__webglTexture,Y)}else if(Se){const Pe=st.get(R.texture),Fe=H||0;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,Pe.__webglTexture,Y||0,Fe)}z=-1},this.readRenderTargetPixels=function(R,H,Y,X,Q,ye,Se){if(!(R&&R.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ie=st.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&Se!==void 0&&(Ie=Ie[Se]),Ie){He.bindFramebuffer($.FRAMEBUFFER,Ie);try{const Pe=R.texture,Fe=Pe.format,Ce=Pe.type;if(Fe!==Ki&&yt.convert(Fe)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const dt=Ce===Yi&&(Be.has("EXT_color_buffer_half_float")||Ve.isWebGL2&&Be.has("EXT_color_buffer_float"));if(Ce!==Ca&&yt.convert(Ce)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ce===Fi&&(Ve.isWebGL2||Be.has("OES_texture_float")||Be.has("WEBGL_color_buffer_float")))&&!dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}H>=0&&H<=R.width-X&&Y>=0&&Y<=R.height-Q&&$.readPixels(H,Y,X,Q,yt.convert(Fe),yt.convert(Ce),ye)}finally{const Pe=O!==null?st.get(O).__webglFramebuffer:null;He.bindFramebuffer($.FRAMEBUFFER,Pe)}}},this.copyFramebufferToTexture=function(R,H,Y=0){const X=Math.pow(2,-Y),Q=Math.floor(H.image.width*X),ye=Math.floor(H.image.height*X);ft.setTexture2D(H,0),$.copyTexSubImage2D($.TEXTURE_2D,Y,0,0,R.x,R.y,Q,ye),He.unbindTexture()},this.copyTextureToTexture=function(R,H,Y,X=0){const Q=H.image.width,ye=H.image.height,Se=yt.convert(Y.format),Ie=yt.convert(Y.type);ft.setTexture2D(Y,0),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Y.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Y.unpackAlignment),H.isDataTexture?$.texSubImage2D($.TEXTURE_2D,X,R.x,R.y,Q,ye,Se,Ie,H.image.data):H.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,X,R.x,R.y,H.mipmaps[0].width,H.mipmaps[0].height,Se,H.mipmaps[0].data):$.texSubImage2D($.TEXTURE_2D,X,R.x,R.y,Se,Ie,H.image),X===0&&Y.generateMipmaps&&$.generateMipmap($.TEXTURE_2D),He.unbindTexture()},this.copyTextureToTexture3D=function(R,H,Y,X,Q=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ye=R.max.x-R.min.x+1,Se=R.max.y-R.min.y+1,Ie=R.max.z-R.min.z+1,Pe=yt.convert(X.format),Fe=yt.convert(X.type);let Ce;if(X.isData3DTexture)ft.setTexture3D(X,0),Ce=$.TEXTURE_3D;else if(X.isDataArrayTexture)ft.setTexture2DArray(X,0),Ce=$.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,X.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,X.unpackAlignment);const dt=$.getParameter($.UNPACK_ROW_LENGTH),et=$.getParameter($.UNPACK_IMAGE_HEIGHT),nt=$.getParameter($.UNPACK_SKIP_PIXELS),St=$.getParameter($.UNPACK_SKIP_ROWS),Lt=$.getParameter($.UNPACK_SKIP_IMAGES),Rt=Y.isCompressedTexture?Y.mipmaps[0]:Y.image;$.pixelStorei($.UNPACK_ROW_LENGTH,Rt.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Rt.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,R.min.x),$.pixelStorei($.UNPACK_SKIP_ROWS,R.min.y),$.pixelStorei($.UNPACK_SKIP_IMAGES,R.min.z),Y.isDataTexture||Y.isData3DTexture?$.texSubImage3D(Ce,Q,H.x,H.y,H.z,ye,Se,Ie,Pe,Fe,Rt.data):Y.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(Ce,Q,H.x,H.y,H.z,ye,Se,Ie,Pe,Rt.data)):$.texSubImage3D(Ce,Q,H.x,H.y,H.z,ye,Se,Ie,Pe,Fe,Rt),$.pixelStorei($.UNPACK_ROW_LENGTH,dt),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,et),$.pixelStorei($.UNPACK_SKIP_PIXELS,nt),$.pixelStorei($.UNPACK_SKIP_ROWS,St),$.pixelStorei($.UNPACK_SKIP_IMAGES,Lt),Q===0&&X.generateMipmaps&&$.generateMipmap(Ce),He.unbindTexture()},this.initTexture=function(R){R.isCubeTexture?ft.setTextureCube(R,0):R.isData3DTexture?ft.setTexture3D(R,0):R.isDataArrayTexture||R.isCompressedArrayTexture?ft.setTexture2DArray(R,0):ft.setTexture2D(R,0),He.unbindTexture()},this.resetState=function(){I=0,B=0,O=null,He.reset(),mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Aa}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Qt?Nu:hT}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Nu?Qt:jo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class ND extends ET{}ND.prototype.isWebGL1Renderer=!0;class I1{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new tt(e),this.density=t}clone(){return new I1(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class B1{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new tt(e),this.near=t,this.far=r}clone(){return new B1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let Wg=class extends Sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class f0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Hg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Hs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ji=new J;class Wu{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.applyMatrix4(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.applyNormalMatrix(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.transformDirection(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ys(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ys(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ys(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ys(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Wu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class wT extends Hr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Hd;const Pm=new J,Gd=new J,Vd=new J,Wd=new ze,Im=new ze,UD=new Ht,Ay=new J,Bm=new J,My=new J,LP=new ze,CA=new ze,DP=new ze;class kD extends Sn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Hd===void 0){Hd=new Zt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new f0(t,5);Hd.setIndex([0,1,2,0,2,3]),Hd.setAttribute("position",new Wu(r,3,0,!1)),Hd.setAttribute("uv",new Wu(r,2,3,!1))}this.geometry=Hd,this.material=e!==void 0?e:new wT,this.center=new ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gd.setFromMatrixScale(this.matrixWorld),UD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gd.multiplyScalar(-Vd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Ey(Ay.set(-.5,-.5,0),Vd,o,Gd,i,s),Ey(Bm.set(.5,-.5,0),Vd,o,Gd,i,s),Ey(My.set(.5,.5,0),Vd,o,Gd,i,s),LP.set(0,0),CA.set(1,0),DP.set(1,1);let a=e.ray.intersectTriangle(Ay,Bm,My,!1,Pm);if(a===null&&(Ey(Bm.set(-.5,.5,0),Vd,o,Gd,i,s),CA.set(0,1),a=e.ray.intersectTriangle(Ay,My,Bm,!1,Pm),a===null))return;const l=e.ray.origin.distanceTo(Pm);l<e.near||l>e.far||t.push({distance:l,point:Pm.clone(),uv:vs.getInterpolation(Pm,Ay,Bm,My,LP,CA,DP,new ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ey(n,e,t,r,i,s){Wd.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Im.x=s*Wd.x-i*Wd.y,Im.y=i*Wd.x+s*Wd.y):Im.copy(Wd),n.copy(e),n.x+=Im.x,n.y+=Im.y,n.applyMatrix4(UD)}const wy=new J,OP=new J;class zD extends Sn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){wy.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(wy);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){wy.setFromMatrixPosition(e.matrixWorld),OP.setFromMatrixPosition(this.matrixWorld);const r=wy.distanceTo(OP)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const FP=new J,NP=new Mn,UP=new Mn,wj=new J,kP=new Ht,jd=new J,bA=new xo,zP=new Ht,RA=new up;class TT extends Kr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ko),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)jd.fromBufferAttribute(t,r),this.applyBoneTransform(r,jd),this.boundingBox.expandByPoint(jd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)jd.fromBufferAttribute(t,r),this.applyBoneTransform(r,jd),this.boundingSphere.expandByPoint(jd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bA.copy(this.boundingSphere),bA.applyMatrix4(i),e.ray.intersectsSphere(bA)!==!1&&(zP.copy(i).invert(),RA.copy(e.ray).applyMatrix4(zP),!(this.boundingBox!==null&&RA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,RA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;NP.fromBufferAttribute(i.attributes.skinIndex,e),UP.fromBufferAttribute(i.attributes.skinWeight,e),FP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=UP.getComponent(s);if(o!==0){const a=NP.getComponent(s);kP.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(wj.copy(FP).applyMatrix4(kP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class L1 extends Sn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Dh extends tr{constructor(e=null,t=1,r=1,i,s,o,a,l,f=Ar,h=Ar,p,m){super(null,o,a,l,f,h,i,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const HP=new Ht,Tj=new Ht;class d0{constructor(e=[],t=[]){this.uuid=Hs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ht;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Tj;HP.multiplyMatrices(a,t[s]),HP.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new d0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=SD(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Dh(t,e,e,Ki,Fi);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new L1),this.bones.push(o),this.boneInverses.push(new Ht().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Qh extends Cn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Xd=new Ht,GP=new Ht,Ty=[],VP=new Ko,Cj=new Ht,Lm=new Kr,Dm=new xo;class CT extends Kr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qh(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Cj)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ko),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Xd),VP.copy(e.boundingBox).applyMatrix4(Xd),this.boundingBox.union(VP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Xd),Dm.copy(e.boundingSphere).applyMatrix4(Xd),this.boundingSphere.union(Dm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Lm.geometry=this.geometry,Lm.material=this.material,Lm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Dm.copy(this.boundingSphere),Dm.applyMatrix4(r),e.ray.intersectsSphere(Dm)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Xd),GP.multiplyMatrices(r,Xd),Lm.matrixWorld=GP,Lm.raycast(e,Ty);for(let o=0,a=Ty.length;o<a;o++){const l=Ty[o];l.instanceId=s,l.object=this,t.push(l)}Ty.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ui extends Hr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const WP=new J,jP=new J,XP=new Ht,PA=new up,Cy=new xo;class bl extends Sn{constructor(e=new Zt,t=new Ui){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)WP.fromBufferAttribute(t,i-1),jP.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=WP.distanceTo(jP);e.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Cy.copy(r.boundingSphere),Cy.applyMatrix4(i),Cy.radius+=s,e.ray.intersectsSphere(Cy)===!1)return;XP.copy(i).invert(),PA.copy(e.ray).applyMatrix4(XP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=new J,h=new J,p=new J,m=new J,v=this.isLineSegments?2:1,x=r.index,A=r.attributes.position;if(x!==null){const y=Math.max(0,o.start),M=Math.min(x.count,o.start+o.count);for(let S=y,C=M-1;S<C;S+=v){const I=x.getX(S),B=x.getX(S+1);if(f.fromBufferAttribute(A,I),h.fromBufferAttribute(A,B),PA.distanceSqToSegment(f,h,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(m);z<e.near||z>e.far||t.push({distance:z,point:p.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),M=Math.min(A.count,o.start+o.count);for(let S=y,C=M-1;S<C;S+=v){if(f.fromBufferAttribute(A,S),h.fromBufferAttribute(A,S+1),PA.distanceSqToSegment(f,h,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(m);B<e.near||B>e.far||t.push({distance:B,point:p.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const JP=new J,KP=new J;class Yo extends bl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)JP.fromBufferAttribute(t,i),KP.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+JP.distanceTo(KP);e.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bT extends bl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class D1 extends Hr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const YP=new Ht,OE=new up,by=new xo,Ry=new J;class RT extends Sn{constructor(e=new Zt,t=new D1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),by.copy(r.boundingSphere),by.applyMatrix4(i),by.radius+=s,e.ray.intersectsSphere(by)===!1)return;YP.copy(i).invert(),OE.copy(e.ray).applyMatrix4(YP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=r.index,p=r.attributes.position;if(f!==null){const m=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=m,E=v;x<E;x++){const A=f.getX(x);Ry.fromBufferAttribute(p,A),qP(Ry,A,l,i,e,t,this)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=m,E=v;x<E;x++)Ry.fromBufferAttribute(p,x),qP(Ry,x,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function qP(n,e,t,r,i,s,o){const a=OE.distanceSqToPoint(n);if(a<t){const l=new J;OE.closestPointToPoint(n,l),l.applyMatrix4(r);const f=i.ray.origin.distanceTo(l);if(f<i.near||f>i.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class bj extends tr{constructor(e,t,r,i,s,o,a,l,f){super(e,t,r,i,s,o,a,l,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Wn,this.magFilter=s!==void 0?s:Wn,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Rj extends tr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ar,this.minFilter=Ar,this.generateMipmaps=!1,this.needsUpdate=!0}}class O1 extends tr{constructor(e,t,r,i,s,o,a,l,f,h,p,m){super(null,o,a,l,f,h,i,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Pj extends O1{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=yi}}class Ij extends O1{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,La),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bj extends tr{constructor(e,t,r,i,s,o,a,l,f){super(e,t,r,i,s,o,a,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,f;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),f=r[i]-o,f<0)a=i+1;else if(f>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],m=r[i+1]-h,v=(o-h)/m;return(i+v)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new ze:new J);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new J,i=[],s=[],o=[],a=new J,l=new Ht;for(let v=0;v<=e;v++){const x=v/e;i[v]=this.getTangentAt(x,new J)}s[0]=new J,o[0]=new J;let f=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),m=Math.abs(i[0].z);h<=f&&(f=h,r.set(1,0,0)),p<=f&&(f=p,r.set(0,1,0)),m<=f&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(i[v-1],i[v]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(Mr(i[v-1].dot(i[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(a,x))}o[v].crossVectors(i[v],s[v])}if(t===!0){let v=Math.acos(Mr(s[0].dot(s[e]),-1,1));v/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(i[x],v*x)),o[x].crossVectors(i[x],s[x])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class F1 extends qo{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new ze,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=l-this.aX,v=f-this.aY;l=m*h-v*p+this.aX,f=m*p+v*h+this.aY}return r.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class HD extends F1{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function PT(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,f){i(o,a,f*(a-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,f,h,p){let m=(o-s)/f-(a-s)/(f+h)+(a-o)/h,v=(a-o)/h-(l-o)/(h+p)+(l-a)/p;m*=h,v*=h,i(o,a,m,v)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Py=new J,IA=new PT,BA=new PT,LA=new PT;class GD extends qo{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new J){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let f,h;this.closed||a>0?f=i[(a-1)%s]:(Py.subVectors(i[0],i[1]).add(i[0]),f=Py);const p=i[a%s],m=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(Py.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=Py),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(p),v),E=Math.pow(p.distanceToSquared(m),v),A=Math.pow(m.distanceToSquared(h),v);E<1e-4&&(E=1),x<1e-4&&(x=E),A<1e-4&&(A=E),IA.initNonuniformCatmullRom(f.x,p.x,m.x,h.x,x,E,A),BA.initNonuniformCatmullRom(f.y,p.y,m.y,h.y,x,E,A),LA.initNonuniformCatmullRom(f.z,p.z,m.z,h.z,x,E,A)}else this.curveType==="catmullrom"&&(IA.initCatmullRom(f.x,p.x,m.x,h.x,this.tension),BA.initCatmullRom(f.y,p.y,m.y,h.y,this.tension),LA.initCatmullRom(f.z,p.z,m.z,h.z,this.tension));return r.set(IA.calc(l),BA.calc(l),LA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new J().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function QP(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Lj(n,e){const t=1-n;return t*t*e}function Dj(n,e){return 2*(1-n)*n*e}function Oj(n,e){return n*n*e}function pg(n,e,t,r){return Lj(n,e)+Dj(n,t)+Oj(n,r)}function Fj(n,e){const t=1-n;return t*t*t*e}function Nj(n,e){const t=1-n;return 3*t*t*n*e}function Uj(n,e){return 3*(1-n)*n*n*e}function kj(n,e){return n*n*n*e}function mg(n,e,t,r,i){return Fj(n,e)+Nj(n,t)+Uj(n,r)+kj(n,i)}class IT extends qo{constructor(e=new ze,t=new ze,r=new ze,i=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ze){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(mg(e,i.x,s.x,o.x,a.x),mg(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class VD extends qo{constructor(e=new J,t=new J,r=new J,i=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new J){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(mg(e,i.x,s.x,o.x,a.x),mg(e,i.y,s.y,o.y,a.y),mg(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class N1 extends qo{constructor(e=new ze,t=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ze){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WD extends qo{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BT extends qo{constructor(e=new ze,t=new ze,r=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ze){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(pg(e,i.x,s.x,o.x),pg(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LT extends qo{constructor(e=new J,t=new J,r=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new J){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(pg(e,i.x,s.x,o.x),pg(e,i.y,s.y,o.y),pg(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DT extends qo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ze){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],f=i[o],h=i[o>i.length-2?i.length-1:o+1],p=i[o>i.length-3?i.length-1:o+2];return r.set(QP(a,l.x,f.x,h.x,p.x),QP(a,l.y,f.y,h.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ze().fromArray(i))}return this}}var OT=Object.freeze({__proto__:null,ArcCurve:HD,CatmullRomCurve3:GD,CubicBezierCurve:IT,CubicBezierCurve3:VD,EllipseCurve:F1,LineCurve:N1,LineCurve3:WD,QuadraticBezierCurve:BT,QuadraticBezierCurve3:LT,SplineCurve:DT});class jD extends qo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new N1(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),f=l===0?0:1-o/l;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let f=0;f<l.length;f++){const h=l[f];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new OT[i.type]().fromJSON(i))}return this}}class jg extends jD{constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new N1(this.currentPoint.clone(),new ze(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new BT(this.currentPoint.clone(),new ze(e,t),new ze(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new IT(this.currentPoint.clone(),new ze(e,t),new ze(r,i),new ze(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new DT(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const f=new F1(e,t,r,i,s,o,a,l);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class h0 extends Zt{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Mr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],f=[],h=1/t,p=new J,m=new ze,v=new J,x=new J,E=new J;let A=0,y=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:A=e[M+1].x-e[M].x,y=e[M+1].y-e[M].y,v.x=y*1,v.y=-A,v.z=y*0,E.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(E.x,E.y,E.z);break;default:A=e[M+1].x-e[M].x,y=e[M+1].y-e[M].y,v.x=y*1,v.y=-A,v.z=y*0,x.copy(v),v.x+=E.x,v.y+=E.y,v.z+=E.z,v.normalize(),l.push(v.x,v.y,v.z),E.copy(x)}for(let M=0;M<=t;M++){const S=r+M*h*i,C=Math.sin(S),I=Math.cos(S);for(let B=0;B<=e.length-1;B++){p.x=e[B].x*C,p.y=e[B].y,p.z=e[B].x*I,o.push(p.x,p.y,p.z),m.x=M/t,m.y=B/(e.length-1),a.push(m.x,m.y);const O=l[3*B+0]*C,z=l[3*B+1],L=l[3*B+0]*I;f.push(O,z,L)}}for(let M=0;M<t;M++)for(let S=0;S<e.length-1;S++){const C=S+M*e.length,I=C,B=C+e.length,O=C+e.length+1,z=C+1;s.push(I,B,z),s.push(O,z,B)}this.setIndex(s),this.setAttribute("position",new wt(o,3)),this.setAttribute("uv",new wt(a,2)),this.setAttribute("normal",new wt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.points,e.segments,e.phiStart,e.phiLength)}}class U1 extends h0{constructor(e=1,t=1,r=4,i=8){const s=new jg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new U1(e.radius,e.length,e.capSegments,e.radialSegments)}}class k1 extends Zt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],f=new J,h=new ze;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const v=r+p/t*i;f.x=e*Math.cos(v),f.y=e*Math.sin(v),o.push(f.x,f.y,f.z),a.push(0,0,1),h.x=(o[m]/e+1)/2,h.y=(o[m+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new wt(o,3)),this.setAttribute("normal",new wt(a,3)),this.setAttribute("uv",new wt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class dp extends Zt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const f=this;i=Math.floor(i),s=Math.floor(s);const h=[],p=[],m=[],v=[];let x=0;const E=[],A=r/2;let y=0;M(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new wt(p,3)),this.setAttribute("normal",new wt(m,3)),this.setAttribute("uv",new wt(v,2));function M(){const C=new J,I=new J;let B=0;const O=(t-e)/r;for(let z=0;z<=s;z++){const L=[],N=z/s,W=N*(t-e)+e;for(let ae=0;ae<=i;ae++){const te=ae/i,ie=te*l+a,le=Math.sin(ie),ce=Math.cos(ie);I.x=W*le,I.y=-N*r+A,I.z=W*ce,p.push(I.x,I.y,I.z),C.set(le,O,ce).normalize(),m.push(C.x,C.y,C.z),v.push(te,1-N),L.push(x++)}E.push(L)}for(let z=0;z<i;z++)for(let L=0;L<s;L++){const N=E[L][z],W=E[L+1][z],ae=E[L+1][z+1],te=E[L][z+1];h.push(N,W,te),h.push(W,ae,te),B+=6}f.addGroup(y,B,0),y+=B}function S(C){const I=x,B=new ze,O=new J;let z=0;const L=C===!0?e:t,N=C===!0?1:-1;for(let ae=1;ae<=i;ae++)p.push(0,A*N,0),m.push(0,N,0),v.push(.5,.5),x++;const W=x;for(let ae=0;ae<=i;ae++){const ie=ae/i*l+a,le=Math.cos(ie),ce=Math.sin(ie);O.x=L*ce,O.y=A*N,O.z=L*le,p.push(O.x,O.y,O.z),m.push(0,N,0),B.x=le*.5+.5,B.y=ce*.5*N+.5,v.push(B.x,B.y),x++}for(let ae=0;ae<i;ae++){const te=I+ae,ie=W+ae;C===!0?h.push(ie,ie+1,te):h.push(ie+1,ie,te),z+=3}f.addGroup(y,z,C===!0?1:2),y+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class z1 extends dp{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new z1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Zu extends Zt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),f(r),h(),this.setAttribute("position",new wt(s,3)),this.setAttribute("normal",new wt(s.slice(),3)),this.setAttribute("uv",new wt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const S=new J,C=new J,I=new J;for(let B=0;B<t.length;B+=3)v(t[B+0],S),v(t[B+1],C),v(t[B+2],I),l(S,C,I,M)}function l(M,S,C,I){const B=I+1,O=[];for(let z=0;z<=B;z++){O[z]=[];const L=M.clone().lerp(C,z/B),N=S.clone().lerp(C,z/B),W=B-z;for(let ae=0;ae<=W;ae++)ae===0&&z===B?O[z][ae]=L:O[z][ae]=L.clone().lerp(N,ae/W)}for(let z=0;z<B;z++)for(let L=0;L<2*(B-z)-1;L++){const N=Math.floor(L/2);L%2===0?(m(O[z][N+1]),m(O[z+1][N]),m(O[z][N])):(m(O[z][N+1]),m(O[z+1][N+1]),m(O[z+1][N]))}}function f(M){const S=new J;for(let C=0;C<s.length;C+=3)S.x=s[C+0],S.y=s[C+1],S.z=s[C+2],S.normalize().multiplyScalar(M),s[C+0]=S.x,s[C+1]=S.y,s[C+2]=S.z}function h(){const M=new J;for(let S=0;S<s.length;S+=3){M.x=s[S+0],M.y=s[S+1],M.z=s[S+2];const C=A(M)/2/Math.PI+.5,I=y(M)/Math.PI+.5;o.push(C,1-I)}x(),p()}function p(){for(let M=0;M<o.length;M+=6){const S=o[M+0],C=o[M+2],I=o[M+4],B=Math.max(S,C,I),O=Math.min(S,C,I);B>.9&&O<.1&&(S<.2&&(o[M+0]+=1),C<.2&&(o[M+2]+=1),I<.2&&(o[M+4]+=1))}}function m(M){s.push(M.x,M.y,M.z)}function v(M,S){const C=M*3;S.x=e[C+0],S.y=e[C+1],S.z=e[C+2]}function x(){const M=new J,S=new J,C=new J,I=new J,B=new ze,O=new ze,z=new ze;for(let L=0,N=0;L<s.length;L+=9,N+=6){M.set(s[L+0],s[L+1],s[L+2]),S.set(s[L+3],s[L+4],s[L+5]),C.set(s[L+6],s[L+7],s[L+8]),B.set(o[N+0],o[N+1]),O.set(o[N+2],o[N+3]),z.set(o[N+4],o[N+5]),I.copy(M).add(S).add(C).divideScalar(3);const W=A(I);E(B,N+0,M,W),E(O,N+2,S,W),E(z,N+4,C,W)}}function E(M,S,C,I){I<0&&M.x===1&&(o[S]=M.x-1),C.x===0&&C.z===0&&(o[S]=I/2/Math.PI+.5)}function A(M){return Math.atan2(M.z,-M.x)}function y(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zu(e.vertices,e.indices,e.radius,e.details)}}class H1 extends Zu{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new H1(e.radius,e.detail)}}const Iy=new J,By=new J,DA=new J,Ly=new vs;class XD extends Zt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(mf*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,f=[0,0,0],h=["a","b","c"],p=new Array(3),m={},v=[];for(let x=0;x<l;x+=3){o?(f[0]=o.getX(x),f[1]=o.getX(x+1),f[2]=o.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:E,b:A,c:y}=Ly;if(E.fromBufferAttribute(a,f[0]),A.fromBufferAttribute(a,f[1]),y.fromBufferAttribute(a,f[2]),Ly.getNormal(DA),p[0]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,p[1]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,p[2]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let M=0;M<3;M++){const S=(M+1)%3,C=p[M],I=p[S],B=Ly[h[M]],O=Ly[h[S]],z=`${C}_${I}`,L=`${I}_${C}`;L in m&&m[L]?(DA.dot(m[L].normal)<=s&&(v.push(B.x,B.y,B.z),v.push(O.x,O.y,O.z)),m[L]=null):z in m||(m[z]={index0:f[M],index1:f[S],normal:DA.clone()})}}for(const x in m)if(m[x]){const{index0:E,index1:A}=m[x];Iy.fromBufferAttribute(a,E),By.fromBufferAttribute(a,A),v.push(Iy.x,Iy.y,Iy.z),v.push(By.x,By.y,By.z)}this.setAttribute("position",new wt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class vf extends jg{constructor(e){super(e),this.uuid=Hs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new jg().fromJSON(i))}return this}}const zj={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=JD(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,f,h,p,m,v;if(r&&(s=jj(n,e,s,t)),n.length>80*t){a=f=n[0],l=h=n[1];for(let x=t;x<i;x+=t)p=n[x],m=n[x+1],p<a&&(a=p),m<l&&(l=m),p>f&&(f=p),m>h&&(h=m);v=Math.max(f-a,h-l),v=v!==0?32767/v:0}return Xg(s,o,t,a,l,v,0),o}};function JD(n,e,t,r,i){let s,o;if(i===n7(n,e,t,r)>0)for(s=e;s<t;s+=r)o=ZP(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=ZP(s,n[s],n[s+1],o);return o&&G1(o,o.next)&&(Kg(o),o=o.next),o}function wf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(G1(t,t.next)||cr(t.prev,t,t.next)===0)){if(Kg(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Xg(n,e,t,r,i,s,o){if(!n)return;!o&&s&&qj(n,r,i,s);let a=n,l,f;for(;n.prev!==n.next;){if(l=n.prev,f=n.next,s?Gj(n,r,i,s):Hj(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),Kg(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=Vj(wf(n),e,t),Xg(n,e,t,r,i,s,2)):o===2&&Wj(n,e,t,r,i,s):Xg(wf(n),e,t,r,i,s,1);break}}}function Hj(n){const e=n.prev,t=n,r=n.next;if(cr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,f=r.y,h=i<s?i<o?i:o:s<o?s:o,p=a<l?a<f?a:f:l<f?l:f,m=i>s?i>o?i:o:s>o?s:o,v=a>l?a>f?a:f:l>f?l:f;let x=r.next;for(;x!==e;){if(x.x>=h&&x.x<=m&&x.y>=p&&x.y<=v&&Mh(i,a,s,l,o,f,x.x,x.y)&&cr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function Gj(n,e,t,r){const i=n.prev,s=n,o=n.next;if(cr(i,s,o)>=0)return!1;const a=i.x,l=s.x,f=o.x,h=i.y,p=s.y,m=o.y,v=a<l?a<f?a:f:l<f?l:f,x=h<p?h<m?h:m:p<m?p:m,E=a>l?a>f?a:f:l>f?l:f,A=h>p?h>m?h:m:p>m?p:m,y=FE(v,x,e,t,r),M=FE(E,A,e,t,r);let S=n.prevZ,C=n.nextZ;for(;S&&S.z>=y&&C&&C.z<=M;){if(S.x>=v&&S.x<=E&&S.y>=x&&S.y<=A&&S!==i&&S!==o&&Mh(a,h,l,p,f,m,S.x,S.y)&&cr(S.prev,S,S.next)>=0||(S=S.prevZ,C.x>=v&&C.x<=E&&C.y>=x&&C.y<=A&&C!==i&&C!==o&&Mh(a,h,l,p,f,m,C.x,C.y)&&cr(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;S&&S.z>=y;){if(S.x>=v&&S.x<=E&&S.y>=x&&S.y<=A&&S!==i&&S!==o&&Mh(a,h,l,p,f,m,S.x,S.y)&&cr(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;C&&C.z<=M;){if(C.x>=v&&C.x<=E&&C.y>=x&&C.y<=A&&C!==i&&C!==o&&Mh(a,h,l,p,f,m,C.x,C.y)&&cr(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Vj(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!G1(i,s)&&KD(i,r,r.next,s)&&Jg(i,s)&&Jg(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Kg(r),Kg(r.next),r=n=s),r=r.next}while(r!==n);return wf(r)}function Wj(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&$j(o,a)){let l=YD(o,a);o=wf(o,o.next),l=wf(l,l.next),Xg(o,e,t,r,i,s,0),Xg(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function jj(n,e,t,r){const i=[];let s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,f=JD(n,a,l,r,!1),f===f.next&&(f.steiner=!0),i.push(Zj(f));for(i.sort(Xj),s=0;s<i.length;s++)t=Jj(i[s],t);return t}function Xj(n,e){return n.x-e.x}function Jj(n,e){const t=Kj(n,e);if(!t)return e;const r=YD(t,n);return wf(r,r.next),wf(t,t.next)}function Kj(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>r&&(r=m,i=t.x<t.next.x?t:t.next,m===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,f=i.y;let h=1/0,p;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Mh(o<f?s:r,o,l,f,o<f?r:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),Jg(t,n)&&(p<h||p===h&&(t.x>i.x||t.x===i.x&&Yj(i,t)))&&(i=t,h=p)),t=t.next;while(t!==a);return i}function Yj(n,e){return cr(n.prev,n,e.prev)<0&&cr(e.next,n,n.next)<0}function qj(n,e,t,r){let i=n;do i.z===0&&(i.z=FE(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Qj(i)}function Qj(n){let e,t,r,i,s,o,a,l,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<f&&(a++,r=r.nextZ,!!r);e++);for(l=f;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,f*=2}while(o>1);return n}function FE(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Zj(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Mh(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function $j(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!e7(n,e)&&(Jg(n,e)&&Jg(e,n)&&t7(n,e)&&(cr(n.prev,n,e.prev)||cr(n,e.prev,e))||G1(n,e)&&cr(n.prev,n,n.next)>0&&cr(e.prev,e,e.next)>0)}function cr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function G1(n,e){return n.x===e.x&&n.y===e.y}function KD(n,e,t,r){const i=Oy(cr(n,e,t)),s=Oy(cr(n,e,r)),o=Oy(cr(t,r,n)),a=Oy(cr(t,r,e));return!!(i!==s&&o!==a||i===0&&Dy(n,t,e)||s===0&&Dy(n,r,e)||o===0&&Dy(t,n,r)||a===0&&Dy(t,e,r))}function Dy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Oy(n){return n>0?1:n<0?-1:0}function e7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&KD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Jg(n,e){return cr(n.prev,n,n.next)<0?cr(n,e,n.next)>=0&&cr(n,n.prev,e)>=0:cr(n,e,n.prev)<0||cr(n,n.next,e)<0}function t7(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function YD(n,e){const t=new NE(n.i,n.x,n.y),r=new NE(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function ZP(n,e,t,r){const i=new NE(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Kg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function NE(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function n7(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ba{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ba.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];$P(e),e2(r,e);let o=e.length;t.forEach($P);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,e2(r,t[l]);const a=zj.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function $P(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function e2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class V1 extends Zt{constructor(e=new vf([new ze(.5,.5),new ze(-.5,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];o(f)}this.setAttribute("position",new wt(i,3)),this.setAttribute("uv",new wt(s,2)),this.computeVertexNormals();function o(a){const l=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:v-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:r7;let S,C=!1,I,B,O,z;y&&(S=y.getSpacedPoints(h),C=!0,m=!1,I=y.computeFrenetFrames(h,!1),B=new J,O=new J,z=new J),m||(A=0,v=0,x=0,E=0);const L=a.extractPoints(f);let N=L.shape;const W=L.holes;if(!ba.isClockWise(N)){N=N.reverse();for(let $=0,Ne=W.length;$<Ne;$++){const Be=W[$];ba.isClockWise(Be)&&(W[$]=Be.reverse())}}const te=ba.triangulateShape(N,W),ie=N;for(let $=0,Ne=W.length;$<Ne;$++){const Be=W[$];N=N.concat(Be)}function le($,Ne,Be){return Ne||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().addScaledVector(Ne,Be)}const ce=N.length,he=te.length;function K($,Ne,Be){let Ve,He,vt;const st=$.x-Ne.x,ft=$.y-Ne.y,Ct=Be.x-$.x,jt=Be.y-$.y,un=st*st+ft*ft,Z=st*jt-ft*Ct;if(Math.abs(Z)>Number.EPSILON){const G=Math.sqrt(un),_e=Math.sqrt(Ct*Ct+jt*jt),je=Ne.x-ft/G,ke=Ne.y+st/G,Ke=Be.x-jt/_e,xt=Be.y+Ct/_e,Qe=((Ke-je)*jt-(xt-ke)*Ct)/(st*jt-ft*Ct);Ve=je+st*Qe-$.x,He=ke+ft*Qe-$.y;const Ee=Ve*Ve+He*He;if(Ee<=2)return new ze(Ve,He);vt=Math.sqrt(Ee/2)}else{let G=!1;st>Number.EPSILON?Ct>Number.EPSILON&&(G=!0):st<-Number.EPSILON?Ct<-Number.EPSILON&&(G=!0):Math.sign(ft)===Math.sign(jt)&&(G=!0),G?(Ve=-ft,He=st,vt=Math.sqrt(un)):(Ve=st,He=ft,vt=Math.sqrt(un/2))}return new ze(Ve/vt,He/vt)}const fe=[];for(let $=0,Ne=ie.length,Be=Ne-1,Ve=$+1;$<Ne;$++,Be++,Ve++)Be===Ne&&(Be=0),Ve===Ne&&(Ve=0),fe[$]=K(ie[$],ie[Be],ie[Ve]);const re=[];let se,oe=fe.concat();for(let $=0,Ne=W.length;$<Ne;$++){const Be=W[$];se=[];for(let Ve=0,He=Be.length,vt=He-1,st=Ve+1;Ve<He;Ve++,vt++,st++)vt===He&&(vt=0),st===He&&(st=0),se[Ve]=K(Be[Ve],Be[vt],Be[st]);re.push(se),oe=oe.concat(se)}for(let $=0;$<A;$++){const Ne=$/A,Be=v*Math.cos(Ne*Math.PI/2),Ve=x*Math.sin(Ne*Math.PI/2)+E;for(let He=0,vt=ie.length;He<vt;He++){const st=le(ie[He],fe[He],Ve);Xe(st.x,st.y,-Be)}for(let He=0,vt=W.length;He<vt;He++){const st=W[He];se=re[He];for(let ft=0,Ct=st.length;ft<Ct;ft++){const jt=le(st[ft],se[ft],Ve);Xe(jt.x,jt.y,-Be)}}}const Le=x+E;for(let $=0;$<ce;$++){const Ne=m?le(N[$],oe[$],Le):N[$];C?(O.copy(I.normals[0]).multiplyScalar(Ne.x),B.copy(I.binormals[0]).multiplyScalar(Ne.y),z.copy(S[0]).add(O).add(B),Xe(z.x,z.y,z.z)):Xe(Ne.x,Ne.y,0)}for(let $=1;$<=h;$++)for(let Ne=0;Ne<ce;Ne++){const Be=m?le(N[Ne],oe[Ne],Le):N[Ne];C?(O.copy(I.normals[$]).multiplyScalar(Be.x),B.copy(I.binormals[$]).multiplyScalar(Be.y),z.copy(S[$]).add(O).add(B),Xe(z.x,z.y,z.z)):Xe(Be.x,Be.y,p/h*$)}for(let $=A-1;$>=0;$--){const Ne=$/A,Be=v*Math.cos(Ne*Math.PI/2),Ve=x*Math.sin(Ne*Math.PI/2)+E;for(let He=0,vt=ie.length;He<vt;He++){const st=le(ie[He],fe[He],Ve);Xe(st.x,st.y,p+Be)}for(let He=0,vt=W.length;He<vt;He++){const st=W[He];se=re[He];for(let ft=0,Ct=st.length;ft<Ct;ft++){const jt=le(st[ft],se[ft],Ve);C?Xe(jt.x,jt.y+S[h-1].y,S[h-1].x+Be):Xe(jt.x,jt.y,p+Be)}}}Oe(),De();function Oe(){const $=i.length/3;if(m){let Ne=0,Be=ce*Ne;for(let Ve=0;Ve<he;Ve++){const He=te[Ve];rt(He[2]+Be,He[1]+Be,He[0]+Be)}Ne=h+A*2,Be=ce*Ne;for(let Ve=0;Ve<he;Ve++){const He=te[Ve];rt(He[0]+Be,He[1]+Be,He[2]+Be)}}else{for(let Ne=0;Ne<he;Ne++){const Be=te[Ne];rt(Be[2],Be[1],Be[0])}for(let Ne=0;Ne<he;Ne++){const Be=te[Ne];rt(Be[0]+ce*h,Be[1]+ce*h,Be[2]+ce*h)}}r.addGroup($,i.length/3-$,0)}function De(){const $=i.length/3;let Ne=0;Ue(ie,Ne),Ne+=ie.length;for(let Be=0,Ve=W.length;Be<Ve;Be++){const He=W[Be];Ue(He,Ne),Ne+=He.length}r.addGroup($,i.length/3-$,1)}function Ue($,Ne){let Be=$.length;for(;--Be>=0;){const Ve=Be;let He=Be-1;He<0&&(He=$.length-1);for(let vt=0,st=h+A*2;vt<st;vt++){const ft=ce*vt,Ct=ce*(vt+1),jt=Ne+Ve+ft,un=Ne+He+ft,Z=Ne+He+Ct,G=Ne+Ve+Ct;Gt(jt,un,Z,G)}}}function Xe($,Ne,Be){l.push($),l.push(Ne),l.push(Be)}function rt($,Ne,Be){Dt($),Dt(Ne),Dt(Be);const Ve=i.length/3,He=M.generateTopUV(r,i,Ve-3,Ve-2,Ve-1);Ge(He[0]),Ge(He[1]),Ge(He[2])}function Gt($,Ne,Be,Ve){Dt($),Dt(Ne),Dt(Ve),Dt(Ne),Dt(Be),Dt(Ve);const He=i.length/3,vt=M.generateSideWallUV(r,i,He-6,He-3,He-2,He-1);Ge(vt[0]),Ge(vt[1]),Ge(vt[3]),Ge(vt[1]),Ge(vt[2]),Ge(vt[3])}function Dt($){i.push(l[$*3+0]),i.push(l[$*3+1]),i.push(l[$*3+2])}function Ge($){s.push($.x),s.push($.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return i7(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new OT[i.type]().fromJSON(i)),new V1(r,e.options)}}const r7={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],f=e[i*3],h=e[i*3+1];return[new ze(s,o),new ze(a,l),new ze(f,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],f=e[r*3],h=e[r*3+1],p=e[r*3+2],m=e[i*3],v=e[i*3+1],x=e[i*3+2],E=e[s*3],A=e[s*3+1],y=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new ze(o,1-l),new ze(f,1-p),new ze(m,1-x),new ze(E,1-y)]:[new ze(a,1-l),new ze(h,1-p),new ze(v,1-x),new ze(A,1-y)]}};function i7(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class p0 extends Zu{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new p0(e.radius,e.detail)}}class m0 extends Zu{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new m0(e.radius,e.detail)}}class W1 extends Zt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],f=[],h=[];let p=e;const m=(t-e)/i,v=new J,x=new ze;for(let E=0;E<=i;E++){for(let A=0;A<=r;A++){const y=s+A/r*o;v.x=p*Math.cos(y),v.y=p*Math.sin(y),l.push(v.x,v.y,v.z),f.push(0,0,1),x.x=(v.x/t+1)/2,x.y=(v.y/t+1)/2,h.push(x.x,x.y)}p+=m}for(let E=0;E<i;E++){const A=E*(r+1);for(let y=0;y<r;y++){const M=y+A,S=M,C=M+r+1,I=M+r+2,B=M+1;a.push(S,C,B),a.push(C,I,B)}}this.setIndex(a),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(f,3)),this.setAttribute("uv",new wt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class j1 extends Zt{constructor(e=new vf([new ze(0,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new wt(i,3)),this.setAttribute("normal",new wt(s,3)),this.setAttribute("uv",new wt(o,2));function f(h){const p=i.length/3,m=h.extractPoints(t);let v=m.shape;const x=m.holes;ba.isClockWise(v)===!1&&(v=v.reverse());for(let A=0,y=x.length;A<y;A++){const M=x[A];ba.isClockWise(M)===!0&&(x[A]=M.reverse())}const E=ba.triangulateShape(v,x);for(let A=0,y=x.length;A<y;A++){const M=x[A];v=v.concat(M)}for(let A=0,y=v.length;A<y;A++){const M=v[A];i.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let A=0,y=E.length;A<y;A++){const M=E[A],S=M[0]+p,C=M[1]+p,I=M[2]+p;r.push(S,C,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return s7(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new j1(r,e.curveSegments)}}function s7(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class g0 extends Zt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let f=0;const h=[],p=new J,m=new J,v=[],x=[],E=[],A=[];for(let y=0;y<=r;y++){const M=[],S=y/r;let C=0;y===0&&o===0?C=.5/t:y===r&&l===Math.PI&&(C=-.5/t);for(let I=0;I<=t;I++){const B=I/t;p.x=-e*Math.cos(i+B*s)*Math.sin(o+S*a),p.y=e*Math.cos(o+S*a),p.z=e*Math.sin(i+B*s)*Math.sin(o+S*a),x.push(p.x,p.y,p.z),m.copy(p).normalize(),E.push(m.x,m.y,m.z),A.push(B+C,1-S),M.push(f++)}h.push(M)}for(let y=0;y<r;y++)for(let M=0;M<t;M++){const S=h[y][M+1],C=h[y][M],I=h[y+1][M],B=h[y+1][M+1];(y!==0||o>0)&&v.push(S,C,B),(y!==r-1||l<Math.PI)&&v.push(C,I,B)}this.setIndex(v),this.setAttribute("position",new wt(x,3)),this.setAttribute("normal",new wt(E,3)),this.setAttribute("uv",new wt(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class X1 extends Zu{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X1(e.radius,e.detail)}}class J1 extends Zt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],f=[],h=new J,p=new J,m=new J;for(let v=0;v<=r;v++)for(let x=0;x<=i;x++){const E=x/i*s,A=v/r*Math.PI*2;p.x=(e+t*Math.cos(A))*Math.cos(E),p.y=(e+t*Math.cos(A))*Math.sin(E),p.z=t*Math.sin(A),a.push(p.x,p.y,p.z),h.x=e*Math.cos(E),h.y=e*Math.sin(E),m.subVectors(p,h).normalize(),l.push(m.x,m.y,m.z),f.push(x/i),f.push(v/r)}for(let v=1;v<=r;v++)for(let x=1;x<=i;x++){const E=(i+1)*v+x-1,A=(i+1)*(v-1)+x-1,y=(i+1)*(v-1)+x,M=(i+1)*v+x;o.push(E,A,M),o.push(A,y,M)}this.setIndex(o),this.setAttribute("position",new wt(a,3)),this.setAttribute("normal",new wt(l,3)),this.setAttribute("uv",new wt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class K1 extends Zt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],f=[],h=[],p=new J,m=new J,v=new J,x=new J,E=new J,A=new J,y=new J;for(let S=0;S<=r;++S){const C=S/r*s*Math.PI*2;M(C,s,o,e,v),M(C+.01,s,o,e,x),A.subVectors(x,v),y.addVectors(x,v),E.crossVectors(A,y),y.crossVectors(E,A),E.normalize(),y.normalize();for(let I=0;I<=i;++I){const B=I/i*Math.PI*2,O=-t*Math.cos(B),z=t*Math.sin(B);p.x=v.x+(O*y.x+z*E.x),p.y=v.y+(O*y.y+z*E.y),p.z=v.z+(O*y.z+z*E.z),l.push(p.x,p.y,p.z),m.subVectors(p,v).normalize(),f.push(m.x,m.y,m.z),h.push(S/r),h.push(I/i)}}for(let S=1;S<=r;S++)for(let C=1;C<=i;C++){const I=(i+1)*(S-1)+(C-1),B=(i+1)*S+(C-1),O=(i+1)*S+C,z=(i+1)*(S-1)+C;a.push(I,B,z),a.push(B,O,z)}this.setIndex(a),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(f,3)),this.setAttribute("uv",new wt(h,2));function M(S,C,I,B,O){const z=Math.cos(S),L=Math.sin(S),N=I/C*S,W=Math.cos(N);O.x=B*(2+W)*.5*z,O.y=B*(2+W)*L*.5,O.z=B*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Y1 extends Zt{constructor(e=new LT(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,f=new ze;let h=new J;const p=[],m=[],v=[],x=[];E(),this.setIndex(x),this.setAttribute("position",new wt(p,3)),this.setAttribute("normal",new wt(m,3)),this.setAttribute("uv",new wt(v,2));function E(){for(let S=0;S<t;S++)A(S);A(s===!1?t:0),M(),y()}function A(S){h=e.getPointAt(S/t,h);const C=o.normals[S],I=o.binormals[S];for(let B=0;B<=i;B++){const O=B/i*Math.PI*2,z=Math.sin(O),L=-Math.cos(O);l.x=L*C.x+z*I.x,l.y=L*C.y+z*I.y,l.z=L*C.z+z*I.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,p.push(a.x,a.y,a.z)}}function y(){for(let S=1;S<=t;S++)for(let C=1;C<=i;C++){const I=(i+1)*(S-1)+(C-1),B=(i+1)*S+(C-1),O=(i+1)*S+C,z=(i+1)*(S-1)+C;x.push(I,B,z),x.push(B,O,z)}}function M(){for(let S=0;S<=t;S++)for(let C=0;C<=i;C++)f.x=S/t,f.y=C/i,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Y1(new OT[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class qD extends Zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new J,s=new J;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,h=l.length;f<h;++f){const p=l[f],m=p.start,v=p.count;for(let x=m,E=m+v;x<E;x+=3)for(let A=0;A<3;A++){const y=a.getX(x+A),M=a.getX(x+(A+1)%3);i.fromBufferAttribute(o,y),s.fromBufferAttribute(o,M),t2(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let f=0;f<3;f++){const h=3*a+f,p=3*a+(f+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,p),t2(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new wt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function t2(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var n2=Object.freeze({__proto__:null,BoxGeometry:Rf,CapsuleGeometry:U1,CircleGeometry:k1,ConeGeometry:z1,CylinderGeometry:dp,DodecahedronGeometry:H1,EdgesGeometry:XD,ExtrudeGeometry:V1,IcosahedronGeometry:p0,LatheGeometry:h0,OctahedronGeometry:m0,PlaneGeometry:c0,PolyhedronGeometry:Zu,RingGeometry:W1,ShapeGeometry:j1,SphereGeometry:g0,TetrahedronGeometry:X1,TorusGeometry:J1,TorusKnotGeometry:K1,TubeGeometry:Y1,WireframeGeometry:qD});class QD extends Hr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new tt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ZD extends Jo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class v0 extends Hr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Oa extends v0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class $D extends Hr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new tt(16777215),this.specular=new tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eO extends Hr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class tO extends Hr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nO extends Hr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rO extends Hr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iO extends Ui{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function lo(n,e,t){return FT(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function cf(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function FT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function sO(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function UE(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function NT(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function o7(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],h=f.getValueSize(),p=[],m=[];for(let v=0;v<f.times.length;++v){const x=f.times[v]*i;if(!(x<t||x>=r)){p.push(f.times[v]);for(let E=0;E<h;++E)m.push(f.values[v*h+E])}}p.length!==0&&(f.times=cf(p,f.times.constructor),f.values=cf(m,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function a7(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const f=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(f===void 0)continue;let h=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let m=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const x=a.times.length-1;let E;if(s<=a.times[0]){const y=h,M=p-h;E=lo(a.values,y,M)}else if(s>=a.times[x]){const y=x*p+h,M=y+p-h;E=lo(a.values,y,M)}else{const y=a.createInterpolant(),M=h,S=p-h;y.evaluate(s),E=lo(y.resultBuffer,M,S)}l==="quaternion"&&new br().fromArray(E).normalize().conjugate().toArray(E);const A=f.times.length;for(let y=0;y<A;++y){const M=y*v+m;if(l==="quaternion")br.multiplyQuaternionsFlat(f.values,M,E,0,f.values,M);else{const S=v-m*2;for(let C=0;C<S;++C)f.values[M+C]-=E[C]}}}return n.blendMode=fT,n}const l7={arraySlice:lo,convertArray:cf,isTypedArray:FT,getKeyframeOrder:sO,sortedArray:UE,flattenJSON:NT,subclip:o7,makeClipAdditive:a7};class hp{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class oO extends hp{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:of,endingEnd:of}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case af:s=e,a=2*t-r;break;case zg:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case af:o=e,l=2*r-t;break;case zg:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const f=(r-t)*.5,h=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,v=this._weightNext,x=(r-t)/(i-t),E=x*x,A=E*x,y=-m*A+2*m*E-m*x,M=(1+m)*A+(-1.5-2*m)*E+(-.5+m)*x+1,S=(-1-v)*A+(1.5+v)*E+.5*x,C=v*A-v*E;for(let I=0;I!==a;++I)s[I]=y*o[h+I]+M*o[f+I]+S*o[l+I]+C*o[p+I];return s}}class UT extends hp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=(r-t)/(i-t),p=1-h;for(let m=0;m!==a;++m)s[m]=o[f+m]*p+o[l+m]*h;return s}}class aO extends hp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qo{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cf(t,this.TimeBufferType),this.values=cf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:cf(e.times,Array),values:cf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new aO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new UT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new oO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Kh:t=this.InterpolantFactoryMethodDiscrete;break;case Ef:t=this.InterpolantFactoryMethodLinear;break;case p_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Kh;case this.InterpolantFactoryMethodLinear:return Ef;case this.InterpolantFactoryMethodSmooth:return p_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=lo(r,s,o),this.values=lo(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&FT(i))for(let a=0,l=i.length;a!==l;++a){const f=i[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=lo(this.times),t=lo(this.values),r=this.getValueSize(),i=this.getInterpolation()===p_,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const f=e[a],h=e[a+1];if(f!==h&&(a!==1||f!==e[0]))if(i)l=!0;else{const p=a*r,m=p-r,v=p+r;for(let x=0;x!==r;++x){const E=t[p+x];if(E!==t[m+x]||E!==t[v+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*r,m=o*r;for(let v=0;v!==r;++v)t[m+v]=t[p+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,f=0;f!==r;++f)t[l+f]=t[a+f];++o}return o!==e.length?(this.times=lo(e,0,o),this.values=lo(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=lo(this.times,0),t=lo(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Qo.prototype.TimeBufferType=Float32Array;Qo.prototype.ValueBufferType=Float32Array;Qo.prototype.DefaultInterpolation=Ef;class Pf extends Qo{}Pf.prototype.ValueTypeName="bool";Pf.prototype.ValueBufferType=Array;Pf.prototype.DefaultInterpolation=Kh;Pf.prototype.InterpolantFactoryMethodLinear=void 0;Pf.prototype.InterpolantFactoryMethodSmooth=void 0;class kT extends Qo{}kT.prototype.ValueTypeName="color";class Zh extends Qo{}Zh.prototype.ValueTypeName="number";class lO extends hp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let f=e*a;for(let h=f+a;f!==h;f+=4)br.slerpFlat(s,0,o,f-a,o,f,l);return s}}class ju extends Qo{InterpolantFactoryMethodLinear(e){return new lO(this.times,this.values,this.getValueSize(),e)}}ju.prototype.ValueTypeName="quaternion";ju.prototype.DefaultInterpolation=Ef;ju.prototype.InterpolantFactoryMethodSmooth=void 0;class If extends Qo{}If.prototype.ValueTypeName="string";If.prototype.ValueBufferType=Array;If.prototype.DefaultInterpolation=Kh;If.prototype.InterpolantFactoryMethodLinear=void 0;If.prototype.InterpolantFactoryMethodSmooth=void 0;class $h extends Qo{}$h.prototype.ValueTypeName="vector";class ep{constructor(e,t=-1,r,i=C1){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Hs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(c7(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Qo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],f=[];l.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const h=sO(l);l=UE(l,1,h),f=UE(f,1,h),!i&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new Zh(".morphTargetInfluences["+t[a].name+"]",l,f).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const f=e[a],h=f.name.match(s);if(h&&h.length>1){const p=h[1];let m=i[p];m||(i[p]=m=[]),m.push(f)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,m,v,x,E){if(v.length!==0){const A=[],y=[];NT(v,A,y,x),A.length!==0&&E.push(new p(m,A,y))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const m=f[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let E=0;E<m[x].morphTargets.length;E++)v[m[x].morphTargets[E]]=-1;for(const E in v){const A=[],y=[];for(let M=0;M!==m[x].morphTargets.length;++M){const S=m[x];A.push(S.time),y.push(S.morphTarget===E?1:0)}i.push(new Zh(".morphTargetInfluence["+E+"]",A,y))}l=v.length*o}else{const v=".bones["+t[p].name+"]";r($h,v+".position",m,"pos",i),r(ju,v+".quaternion",m,"rot",i),r($h,v+".scale",m,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function u7(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Zh;case"vector":case"vector2":case"vector3":case"vector4":return $h;case"color":return kT;case"quaternion":return ju;case"bool":case"boolean":return Pf;case"string":return If}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function c7(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=u7(n.type);if(n.times===void 0){const t=[],r=[];NT(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Tf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class zT{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return f.push(h,p),this},this.removeHandler=function(h){const p=f.indexOf(h);return p!==-1&&f.splice(p,2),this},this.getHandler=function(h){for(let p=0,m=f.length;p<m;p+=2){const v=f[p],x=f[p+1];if(v.global&&(v.lastIndex=0),v.test(h))return x}return null}}}const Eh=new zT;let ki=class{constructor(e){this.manager=e!==void 0?e:Eh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};ki.DEFAULT_MATERIAL_NAME="__DEFAULT";const fl={};class f7 extends Error{constructor(e,t){super(e),this.response=t}}class Ws extends ki{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Tf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fl[e]!==void 0){fl[e].push({onLoad:t,onProgress:r,onError:i});return}fl[e]=[],fl[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=fl[e],p=f.body.getReader(),m=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),v=m?parseInt(m):0,x=v!==0;let E=0;const A=new ReadableStream({start(y){M();function M(){p.read().then(({done:S,value:C})=>{if(S)y.close();else{E+=C.byteLength;const I=new ProgressEvent("progress",{lengthComputable:x,loaded:E,total:v});for(let B=0,O=h.length;B<O;B++){const z=h[B];z.onProgress&&z.onProgress(I)}y.enqueue(C),M()}})}}});return new Response(A)}else throw new f7(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return f.json();default:if(a===void 0)return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),m=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(m);return f.arrayBuffer().then(x=>v.decode(x))}}}).then(f=>{Tf.add(e,f);const h=fl[e];delete fl[e];for(let p=0,m=h.length;p<m;p++){const v=h[p];v.onLoad&&v.onLoad(f)}}).catch(f=>{const h=fl[e];if(h===void 0)throw this.manager.itemError(e),f;delete fl[e];for(let p=0,m=h.length;p<m;p++){const v=h[p];v.onError&&v.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class d7 extends ki{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ws(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=ep.parse(e[r]);t.push(i)}return t}}class h7 extends ki{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new O1,l=new Ws(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function h(p){l.load(e[p],function(m){const v=s.parse(m,!0);o[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(a.minFilter=Wn),a.image=o,a.format=v.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)h(p);else l.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let x=0;x<v;x++){o[x]={mipmaps:[]};for(let E=0;E<m.mipmapCount;E++)o[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+E]),o[x].format=m.format,o[x].width=m.width,o[x].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Wn),a.format=m.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Yg extends ki{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Tf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Vg("img");function l(){h(),Tf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(p){h(),i&&i(p),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class uO extends ki{constructor(e){super(e)}load(e,t,r,i){const s=new u0;s.colorSpace=Qt;const o=new Yg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(f){o.load(e[f],function(h){s.images[f]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let f=0;f<e.length;++f)l(f);return s}}class HT extends ki{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Dh,a=new Ws(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let f;try{f=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}if(!f)return i();f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:yi,o.wrapT=f.wrapT!==void 0?f.wrapT:yi,o.magFilter=f.magFilter!==void 0?f.magFilter:Wn,o.minFilter=f.minFilter!==void 0?f.minFilter:Wn,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?o.colorSpace=f.colorSpace:f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Da),f.mipmapCount===1&&(o.minFilter=Wn),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},r,i),o}}class cO extends ki{constructor(e){super(e)}load(e,t,r,i){const s=new tr,o=new Yg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class $u extends Sn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new tt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class fO extends $u{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new tt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const OA=new Ht,r2=new J,i2=new J;class GT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new Ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new R1,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;r2.setFromMatrixPosition(e.matrixWorld),t.position.copy(r2),i2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i2),t.updateMatrixWorld(),OA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(OA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class p7 extends GT{constructor(){super(new Cr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Yh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class VT extends $u{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new p7}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const s2=new Ht,Om=new J,FA=new J;class m7 extends GT{constructor(){super(new Cr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Om.setFromMatrixPosition(e.matrixWorld),r.position.copy(Om),FA.copy(r.position),FA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(FA),r.updateMatrixWorld(),i.makeTranslation(-Om.x,-Om.y,-Om.z),s2.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s2)}}class WT extends $u{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new m7}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class g7 extends GT{constructor(){super(new Qu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jT extends $u{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.shadow=new g7}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class dO extends $u{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class hO extends $u{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class pO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class q1 extends $u{constructor(e=new pO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Q1 extends ki{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Ws(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Q1.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new tt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new tt().setHex(o.value);break;case"v2":i.uniforms[s].value=new ze().fromArray(o.value);break;case"v3":i.uniforms[s].value=new J().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Mn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new on().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ht().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:QD,SpriteMaterial:wT,RawShaderMaterial:ZD,ShaderMaterial:Jo,PointsMaterial:D1,MeshPhysicalMaterial:Oa,MeshStandardMaterial:v0,MeshPhongMaterial:$D,MeshToonMaterial:eO,MeshNormalMaterial:tO,MeshLambertMaterial:nO,MeshDepthMaterial:AT,MeshDistanceMaterial:MT,MeshBasicMaterial:ks,MeshMatcapMaterial:rO,LineDashedMaterial:iO,LineBasicMaterial:Ui,Material:Hr};return new t[e]}}class Ra{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mO extends Zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class gO extends ki{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ws(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(v,x){if(t[x]!==void 0)return t[x];const A=v.interleavedBuffers[x],y=s(v,A.buffer),M=Sh(A.type,y),S=new f0(M,A.stride);return S.uuid=A.uuid,t[x]=S,S}function s(v,x){if(r[x]!==void 0)return r[x];const A=v.arrayBuffers[x],y=new Uint32Array(A).buffer;return r[x]=y,y}const o=e.isInstancedBufferGeometry?new mO:new Zt,a=e.data.index;if(a!==void 0){const v=Sh(a.type,a.array);o.setIndex(new Cn(v,1))}const l=e.data.attributes;for(const v in l){const x=l[v];let E;if(x.isInterleavedBufferAttribute){const A=i(e.data,x.data);E=new Wu(A,x.itemSize,x.offset,x.normalized)}else{const A=Sh(x.type,x.array),y=x.isInstancedBufferAttribute?Qh:Cn;E=new y(A,x.itemSize,x.normalized)}x.name!==void 0&&(E.name=x.name),x.usage!==void 0&&E.setUsage(x.usage),x.updateRange!==void 0&&(E.updateRange.offset=x.updateRange.offset,E.updateRange.count=x.updateRange.count),o.setAttribute(v,E)}const f=e.data.morphAttributes;if(f)for(const v in f){const x=f[v],E=[];for(let A=0,y=x.length;A<y;A++){const M=x[A];let S;if(M.isInterleavedBufferAttribute){const C=i(e.data,M.data);S=new Wu(C,M.itemSize,M.offset,M.normalized)}else{const C=Sh(M.type,M.array);S=new Cn(C,M.itemSize,M.normalized)}M.name!==void 0&&(S.name=M.name),E.push(S)}o.morphAttributes[v]=E}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,x=p.length;v!==x;++v){const E=p[v];o.addGroup(E.start,E.count,E.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const v=new J;m.center!==void 0&&v.fromArray(m.center),o.boundingSphere=new xo(v,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class v7 extends ki{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Ra.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ws(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Ra.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ws(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new vf().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new d0().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new gO;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in n2?a=n2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Q1;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=ep.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const f=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return o(h)}else return l.data?{data:Sh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new zT(t);s=new Yg(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const p=e[f],m=p.url;if(Array.isArray(m)){const v=[];for(let x=0,E=m.length;x<E;x++){const A=m[x],y=a(A);y!==null&&(y instanceof HTMLImageElement?v.push(y):v.push(new Dh(y.data,y.width,y.height)))}i[p.uuid]=new lf(v)}else{const v=a(p.url);i[p.uuid]=new lf(v)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Sh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Yg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],f=l.url;if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p],x=await s(v);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new Dh(x.data,x.width,x.height)))}r[l.uuid]=new lf(h)}else{const h=await s(l.url);r[l.uuid]=new lf(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],f=l.data;let h;Array.isArray(f)?(h=new u0,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new Dh:h=new tr,f&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,y7)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],o2),h.wrapT=r(a.wrap[1],o2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,a2)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,a2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let x=0,E=m.length;x<E;x++){const A=m[x];r[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),v.push(r[A])}return v}return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),r[m]}}function f(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),i[m]}let h,p;switch(e.type){case"Scene":o=new Wg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new tt(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new B1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new I1(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Cr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Qu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new dO(e.color,e.intensity);break;case"DirectionalLight":o=new jT(e.color,e.intensity);break;case"PointLight":o=new WT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new hO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new VT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new fO(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new q1().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),p=l(e.material),o=new TT(h,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),p=l(e.material),o=new Kr(h,p);break;case"InstancedMesh":h=a(e.geometry),p=l(e.material);const m=e.count,v=e.instanceMatrix,x=e.instanceColor;o=new CT(h,p,m),o.instanceMatrix=new Qh(new Float32Array(v.array),16),x!==void 0&&(o.instanceColor=new Qh(new Float32Array(x.array),x.itemSize));break;case"LOD":o=new zD;break;case"Line":o=new bl(a(e.geometry),l(e.material));break;case"LineLoop":o=new bT(a(e.geometry),l(e.material));break;case"LineSegments":o=new Yo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new RT(a(e.geometry),l(e.material));break;case"Sprite":o=new kD(l(e.material));break;case"Group":o=new Ma;break;case"Bone":o=new L1;break;default:o=new Sn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)o.add(this.parseObject(m[v],t,r,i,s))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const x=m[v];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const x=m[v],E=o.getObjectByProperty("uuid",x.object);E!==void 0&&o.addLevel(E,x.distance,x.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const y7={UVMapping:E1,CubeReflectionMapping:La,CubeRefractionMapping:Gu,EquirectangularReflectionMapping:Xh,EquirectangularRefractionMapping:Ug,CubeUVReflectionMapping:lp},o2={RepeatWrapping:Vu,ClampToEdgeWrapping:yi,MirroredRepeatWrapping:Jh},a2={NearestFilter:Ar,NearestMipmapNearestFilter:kg,NearestMipmapLinearFilter:Bh,LinearFilter:Wn,LinearMipmapNearestFilter:w1,LinearMipmapLinearFilter:Da};class vO extends ki{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Tf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Tf.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Fy,XT=class{static getContext(){return Fy===void 0&&(Fy=new(window.AudioContext||window.webkitAudioContext)),Fy}static setContext(e){Fy=e}};class _7 extends ki{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ws(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const f=l.slice(0);XT.getContext().decodeAudioData(f,function(p){t(p)},a)}catch(f){a(f)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class x7 extends q1{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new tt().set(e),s=new tt().set(t),o=new J(i.r,i.g,i.b),a=new J(s.r,s.g,s.b),l=Math.sqrt(Math.PI),f=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(f)}}class S7 extends q1{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new tt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const l2=new Ht,u2=new Ht,Gc=new Ht;class A7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Cr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Cr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Gc.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(mf*t.fov*.5)/t.zoom;let a,l;u2.elements[12]=-i,l2.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Gc.elements[0]=2*t.near/(l-a),Gc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Gc),a=-o*t.aspect-s,l=o*t.aspect-s,Gc.elements[0]=2*t.near/(l-a),Gc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Gc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(u2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(l2)}}class JT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=c2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=c2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function c2(){return(typeof performance>"u"?Date:performance).now()}const Vc=new J,f2=new br,M7=new J,Wc=new J;class E7 extends Sn{constructor(){super(),this.type="AudioListener",this.context=XT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new JT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vc,f2,M7),Wc.set(0,0,-1).applyQuaternion(f2),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Vc.x,i),t.positionY.linearRampToValueAtTime(Vc.y,i),t.positionZ.linearRampToValueAtTime(Vc.z,i),t.forwardX.linearRampToValueAtTime(Wc.x,i),t.forwardY.linearRampToValueAtTime(Wc.y,i),t.forwardZ.linearRampToValueAtTime(Wc.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Vc.x,Vc.y,Vc.z),t.setOrientation(Wc.x,Wc.y,Wc.z,r.x,r.y,r.z)}}class yO extends Sn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const jc=new J,d2=new br,w7=new J,Xc=new J;class T7 extends yO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(jc,d2,w7),Xc.set(0,0,1).applyQuaternion(d2);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(jc.x,r),t.positionY.linearRampToValueAtTime(jc.y,r),t.positionZ.linearRampToValueAtTime(jc.z,r),t.orientationX.linearRampToValueAtTime(Xc.x,r),t.orientationY.linearRampToValueAtTime(Xc.y,r),t.orientationZ.linearRampToValueAtTime(Xc.z,r)}else t.setPosition(jc.x,jc.y,jc.z),t.setOrientation(Xc.x,Xc.y,Xc.z)}}class C7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class _O{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,f=t+t;l!==f;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){br.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;br.multiplyQuaternionsFlat(e,o,e,t,e,r),br.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const KT="\\[\\]\\.:\\/",b7=new RegExp("["+KT+"]","g"),YT="[^"+KT+"]",R7="[^"+KT.replace("\\.","")+"]",P7=/((?:WC+[\/:])*)/.source.replace("WC",YT),I7=/(WCOD+)?/.source.replace("WCOD",R7),B7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YT),L7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YT),D7=new RegExp("^"+P7+I7+B7+L7+"$"),O7=["material","materials","bones","map"];class F7{constructor(e,t,r){const i=r||xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class xn{constructor(e,t,r){this.path=t,this.parsedPath=r||xn.parseTrackName(t),this.node=xn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new xn.Composite(e,t,r):new xn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(b7,"")}static parseTrackName(e){const t=D7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);O7.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=xn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[i];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xn.Composite=F7;xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};xn.prototype.GetterByBindingType=[xn.prototype._getValue_direct,xn.prototype._getValue_array,xn.prototype._getValue_arrayElement,xn.prototype._getValue_toArray];xn.prototype.SetterByBindingTypeAndVersioning=[[xn.prototype._setValue_direct,xn.prototype._setValue_direct_setNeedsUpdate,xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_array,xn.prototype._setValue_array_setNeedsUpdate,xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_arrayElement,xn.prototype._setValue_arrayElement_setNeedsUpdate,xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_fromArray,xn.prototype._setValue_fromArray_setNeedsUpdate,xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class N7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Hs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,f=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const m=arguments[h],v=m.uuid;let x=t[v];if(x===void 0){x=l++,t[v]=x,e.push(m);for(let E=0,A=o;E!==A;++E)s[E].push(new xn(m,r[E],i[E]))}else if(x<f){a=e[x];const E=--f,A=e[E];t[A.uuid]=x,e[x]=A,t[v]=E,e[E]=m;for(let y=0,M=o;y!==M;++y){const S=s[y],C=S[E];let I=S[x];S[x]=C,I===void 0&&(I=new xn(m,r[y],i[y])),S[E]=I}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],f=l.uuid,h=t[f];if(h!==void 0&&h>=s){const p=s++,m=e[p];t[m.uuid]=h,e[h]=m,t[f]=p,e[p]=l;for(let v=0,x=i;v!==x;++v){const E=r[v],A=E[p],y=E[h];E[h]=A,E[p]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],h=f.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<s){const m=--s,v=e[m],x=--o,E=e[x];t[v.uuid]=p,e[p]=v,t[E.uuid]=m,e[m]=E,e.pop();for(let A=0,y=i;A!==y;++A){const M=r[A],S=M[m],C=M[x];M[p]=S,M[m]=C,M.pop()}}else{const m=--o,v=e[m];m>0&&(t[v.uuid]=p),e[p]=v,e.pop();for(let x=0,E=i;x!==E;++x){const A=r[x];A[p]=A[m],A.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,f=l.length,h=this.nCachedObjects_,p=new Array(f);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(p);for(let m=h,v=l.length;m!==v;++m){const x=l[m];p[m]=new xn(x,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],f=e[a];t[f]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class xO{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:of,endingEnd:of};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);a[f]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=oD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=s,l[1]=s+r,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case fT:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(o),f[h].accumulateAdditive(a);break;case C1:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(o),f[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===aD;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===sD){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=af,i.endingEnd=af):(e?i.endingStart=this.zeroSlopeAtStart?af:of:i.endingStart=zg,t?i.endingEnd=this.zeroSlopeAtEnd?af:of:i.endingEnd=zg)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const U7=new Float32Array(1);class k7 extends Il{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,f=this._bindingsByRootAndName;let h=f[l];h===void 0&&(h={},f[l]=h);for(let p=0;p!==s;++p){const m=i[p],v=m.name;let x=h[v];if(x!==void 0)++x.referenceCount,o[p]=x;else{if(x=o[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,v));continue}const E=t&&t._propertyBindings[p].binding.parsedPath;x=new _O(xn.create(r,v,E),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,v),o[p]=x}a[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,f=l[l.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,l[h]=f,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],f=e._cacheIndex;l._cacheIndex=f,t[f]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new UT(new Float32Array(2),new Float32Array(2),1,U7),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?ep.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let f=null;if(r===void 0&&(o!==null?r=o.blendMode:r=C1),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===r)return p;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new xO(this,o,t,r);return this._bindAction(h,f),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?ep.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const f=o[a];this._deactivateAction(f);const h=f._cacheIndex,p=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(f)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class qT{constructor(e){this.value=e}clone(){return new qT(this.value.clone===void 0?this.value:this.value.clone())}}let z7=0;class H7 extends Il{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:z7++}),this.name="",this.usage=Hg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class G7 extends f0{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class V7{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class QT{constructor(e,t,r=0,i=1/0){this.ray=new up(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new gf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return kE(e,this,r,t),r.sort(h2),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)kE(e[i],this,r,t);return r.sort(h2),r}}function h2(n,e){return n.distance-e.distance}function kE(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)kE(i[s],e,t,!0)}}class SO{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Mr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class W7{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const p2=new ze;class j7{constructor(e=new ze(1/0,1/0),t=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=p2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,p2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const m2=new J,Ny=new J;class X7{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){m2.subVectors(e,this.start),Ny.subVectors(this.end,this.start);const r=Ny.dot(Ny);let s=Ny.dot(m2)/r;return t&&(s=Mr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const g2=new J;class AO extends Sn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Zt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const f=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new wt(i,3));const s=new Ui({fog:!1,toneMapped:!1});this.cone=new Yo(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),g2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(g2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const hu=new J,Uy=new Ht,NA=new Ht;class J7 extends Yo{constructor(e){const t=MO(e),r=new Zt,i=[],s=[],o=new tt(0,0,1),a=new tt(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new wt(i,3)),r.setAttribute("color",new wt(s,3));const l=new Ui({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");NA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Uy.multiplyMatrices(NA,a.matrixWorld),hu.setFromMatrixPosition(Uy),i.setXYZ(o,hu.x,hu.y,hu.z),Uy.multiplyMatrices(NA,a.parent.matrixWorld),hu.setFromMatrixPosition(Uy),i.setXYZ(o+1,hu.x,hu.y,hu.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function MO(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,MO(n.children[t]));return e}class EO extends Kr{constructor(e,t,r){const i=new g0(t,4,2),s=new ks({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const K7=new J,v2=new tt,y2=new tt;class Y7 extends Sn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new m0(t);i.rotateY(Math.PI*.5),this.material=new ks({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Cn(o,3)),this.add(new Kr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");v2.copy(this.light.color),y2.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?v2:y2;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(K7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class q7 extends Yo{constructor(e=10,t=10,r=4473924,i=8947848){r=new tt(r),i=new tt(i);const s=t/2,o=e/t,a=e/2,l=[],f=[];for(let m=0,v=0,x=-a;m<=t;m++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const E=m===s?r:i;E.toArray(f,v),v+=3,E.toArray(f,v),v+=3,E.toArray(f,v),v+=3,E.toArray(f,v),v+=3}const h=new Zt;h.setAttribute("position",new wt(l,3)),h.setAttribute("color",new wt(f,3));const p=new Ui({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Q7 extends Yo{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new tt(s),o=new tt(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),v=Math.sin(m)*e,x=Math.cos(m)*e;a.push(0,0,0),a.push(v,0,x);const E=p&1?s:o;l.push(E.r,E.g,E.b),l.push(E.r,E.g,E.b)}for(let p=0;p<r;p++){const m=p&1?s:o,v=e-e/r*p;for(let x=0;x<i;x++){let E=x/i*(Math.PI*2),A=Math.sin(E)*v,y=Math.cos(E)*v;a.push(A,0,y),l.push(m.r,m.g,m.b),E=(x+1)/i*(Math.PI*2),A=Math.sin(E)*v,y=Math.cos(E)*v,a.push(A,0,y),l.push(m.r,m.g,m.b)}}const f=new Zt;f.setAttribute("position",new wt(a,3)),f.setAttribute("color",new wt(l,3));const h=new Ui({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _2=new J,ky=new J,x2=new J;class wO extends Sn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Zt;i.setAttribute("position",new wt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ui({fog:!1,toneMapped:!1});this.lightPlane=new bl(i,s),this.add(this.lightPlane),i=new Zt,i.setAttribute("position",new wt([0,0,0,0,0,1],3)),this.targetLine=new bl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_2.setFromMatrixPosition(this.light.matrixWorld),ky.setFromMatrixPosition(this.light.target.matrixWorld),x2.subVectors(ky,_2),this.lightPlane.lookAt(ky),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ky),this.targetLine.scale.z=x2.length()}}const zy=new J,yr=new l0;class TO extends Yo{constructor(e){const t=new Zt,r=new Ui({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,E){l(x),l(E)}function l(x){i.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(i.length/3-1)}t.setAttribute("position",new wt(i,3)),t.setAttribute("color",new wt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new tt(16755200),h=new tt(16711680),p=new tt(43775),m=new tt(16777215),v=new tt(3355443);this.setColors(f,h,p,m,v)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;yr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wr("c",t,e,yr,0,0,-1),wr("t",t,e,yr,0,0,1),wr("n1",t,e,yr,-r,-i,-1),wr("n2",t,e,yr,r,-i,-1),wr("n3",t,e,yr,-r,i,-1),wr("n4",t,e,yr,r,i,-1),wr("f1",t,e,yr,-r,-i,1),wr("f2",t,e,yr,r,-i,1),wr("f3",t,e,yr,-r,i,1),wr("f4",t,e,yr,r,i,1),wr("u1",t,e,yr,r*.7,i*1.1,-1),wr("u2",t,e,yr,-r*.7,i*1.1,-1),wr("u3",t,e,yr,0,i*2,-1),wr("cf1",t,e,yr,-r,0,1),wr("cf2",t,e,yr,r,0,1),wr("cf3",t,e,yr,0,-i,1),wr("cf4",t,e,yr,0,i,1),wr("cn1",t,e,yr,-r,0,-1),wr("cn2",t,e,yr,r,0,-1),wr("cn3",t,e,yr,0,-i,-1),wr("cn4",t,e,yr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wr(n,e,t,r,i,s,o){zy.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let f=0,h=a.length;f<h;f++)l.setXYZ(a[f],zy.x,zy.y,zy.z)}}const Hy=new Ko;class Q_ extends Yo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Zt;s.setIndex(new Cn(r,1)),s.setAttribute("position",new Cn(i,3)),super(s,new Ui({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Hy.setFromObject(this.object),Hy.isEmpty())return;const t=Hy.min,r=Hy.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z7 extends Yo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Zt;s.setIndex(new Cn(r,1)),s.setAttribute("position",new wt(i,3)),super(s,new Ui({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class $7 extends bl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Zt;o.setAttribute("position",new wt(s,3)),o.computeBoundingSphere(),super(o,new Ui({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Zt;l.setAttribute("position",new wt(a,3)),l.computeBoundingSphere(),this.add(new Kr(l,new ks({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const S2=new J;let Gy,UA;class eX extends Sn{constructor(e=new J(0,0,1),t=new J(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Gy===void 0&&(Gy=new Zt,Gy.setAttribute("position",new wt([0,0,0,0,1,0],3)),UA=new dp(0,.5,1,5,1),UA.translate(0,-.5,0)),this.position.copy(t),this.line=new bl(Gy,new Ui({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Kr(UA,new ks({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{S2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(S2,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class tX extends Yo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Zt;i.setAttribute("position",new wt(t,3)),i.setAttribute("color",new wt(r,3));const s=new Ui({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new tt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nX{constructor(){this.type="ShapePath",this.color=new tt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const M=[];for(let S=0,C=y.length;S<C;S++){const I=y[S],B=new vf;B.curves=I.curves,M.push(B)}return M}function r(y,M){const S=M.length;let C=!1;for(let I=S-1,B=0;B<S;I=B++){let O=M[I],z=M[B],L=z.x-O.x,N=z.y-O.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(O=M[B],L=-L,z=M[I],N=-N),y.y<O.y||y.y>z.y)continue;if(y.y===O.y){if(y.x===O.x)return!0}else{const W=N*(y.x-O.x)-L*(y.y-O.y);if(W===0)return!0;if(W<0)continue;C=!C}}else{if(y.y!==O.y)continue;if(z.x<=y.x&&y.x<=O.x||O.x<=y.x&&y.x<=z.x)return!0}}return C}const i=ba.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const f=[];if(s.length===1)return a=s[0],l=new vf,l.curves=a.curves,f.push(l),f;let h=!i(s[0].getPoints());h=e?!h:h;const p=[],m=[];let v=[],x=0,E;m[x]=void 0,v[x]=[];for(let y=0,M=s.length;y<M;y++)a=s[y],E=a.getPoints(),o=i(E),o=e?!o:o,o?(!h&&m[x]&&x++,m[x]={s:new vf,p:E},m[x].s.curves=a.curves,h&&x++,v[x]=[]):v[x].push({h:a,p:E[0]});if(!m[0])return t(s);if(m.length>1){let y=!1,M=0;for(let S=0,C=m.length;S<C;S++)p[S]=[];for(let S=0,C=m.length;S<C;S++){const I=v[S];for(let B=0;B<I.length;B++){const O=I[B];let z=!0;for(let L=0;L<m.length;L++)r(O.p,m[L].p)&&(S!==L&&M++,z?(z=!1,p[L].push(O)):y=!0);z&&p[S].push(O)}}M>0&&y===!1&&(v=p)}let A;for(let y=0,M=m.length;y<M;y++){l=m[y].s,f.push(l),A=v[y];for(let S=0,C=A.length;S<C;S++)l.holes.push(A[S].h)}return f}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ap}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ap);const rX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rT,AddEquation:ef,AddOperation:X3,AdditiveAnimationBlendMode:fT,AdditiveBlending:rE,AlphaFormat:$3,AlwaysCompare:xD,AlwaysDepth:k3,AlwaysStencilFunc:dD,AmbientLight:dO,AmbientLightProbe:S7,AnimationAction:xO,AnimationClip:ep,AnimationLoader:d7,AnimationMixer:k7,AnimationObjectGroup:N7,AnimationUtils:l7,ArcCurve:HD,ArrayCamera:OD,ArrowHelper:eX,Audio:yO,AudioAnalyser:C7,AudioContext:XT,AudioListener:E7,AudioLoader:_7,AxesHelper:tX,BackSide:Qi,BasicDepthPacking:uD,BasicShadowMap:w3,Bone:L1,BooleanKeyframeTrack:Pf,Box2:j7,Box3:Ko,Box3Helper:Z7,BoxGeometry:Rf,BoxHelper:Q_,BufferAttribute:Cn,BufferGeometry:Zt,BufferGeometryLoader:gO,ByteType:Q3,Cache:Tf,Camera:l0,CameraHelper:TO,CanvasTexture:Bj,CapsuleGeometry:U1,CatmullRomCurve3:GD,CineonToneMapping:Y3,CircleGeometry:k1,ClampToEdgeWrapping:yi,Clock:JT,Color:tt,ColorKeyframeTrack:kT,ColorManagement:oo,CompressedArrayTexture:Pj,CompressedCubeTexture:Ij,CompressedTexture:O1,CompressedTextureLoader:h7,ConeGeometry:z1,CubeCamera:bD,CubeReflectionMapping:La,CubeRefractionMapping:Gu,CubeTexture:u0,CubeTextureLoader:uO,CubeUVReflectionMapping:lp,CubicBezierCurve:IT,CubicBezierCurve3:VD,CubicInterpolant:oO,CullFaceBack:nE,CullFaceFront:E3,CullFaceFrontBack:RG,CullFaceNone:M3,Curve:qo,CurvePath:jD,CustomBlending:T3,CustomToneMapping:q3,CylinderGeometry:dp,Cylindrical:W7,Data3DTexture:vT,DataArrayTexture:b1,DataTexture:Dh,DataTextureLoader:HT,DataUtils:uf,DecrementStencilOp:UG,DecrementWrapStencilOp:zG,DefaultLoadingManager:Eh,DepthFormat:Fu,DepthStencilFormat:Mf,DepthTexture:FD,DirectionalLight:jT,DirectionalLightHelper:wO,DiscreteInterpolant:aO,DisplayP3ColorSpace:pT,DodecahedronGeometry:H1,DoubleSide:Fs,DstAlphaFactor:L3,DstColorFactor:O3,DynamicCopyUsage:t8,DynamicDrawUsage:YG,DynamicReadUsage:ZG,EdgesGeometry:XD,EllipseCurve:F1,EqualCompare:mD,EqualDepth:H3,EqualStencilFunc:WG,EquirectangularReflectionMapping:Xh,EquirectangularRefractionMapping:Ug,Euler:cp,EventDispatcher:Il,ExtrudeGeometry:V1,FileLoader:Ws,Float16BufferAttribute:V8,Float32BufferAttribute:wt,Float64BufferAttribute:W8,FloatType:Fi,Fog:B1,FogExp2:I1,FramebufferTexture:Rj,FrontSide:Ba,Frustum:R1,GLBufferAttribute:V7,GLSL1:r8,GLSL3:IE,GreaterCompare:vD,GreaterDepth:V3,GreaterEqualCompare:_D,GreaterEqualDepth:G3,GreaterEqualStencilFunc:KG,GreaterStencilFunc:XG,GridHelper:q7,Group:Ma,HalfFloatType:Yi,HemisphereLight:fO,HemisphereLightHelper:Y7,HemisphereLightProbe:x7,IcosahedronGeometry:p0,ImageBitmapLoader:vO,ImageLoader:Yg,ImageUtils:gT,IncrementStencilOp:NG,IncrementWrapStencilOp:kG,InstancedBufferAttribute:Qh,InstancedBufferGeometry:mO,InstancedInterleavedBuffer:G7,InstancedMesh:CT,Int16BufferAttribute:H8,Int32BufferAttribute:G8,Int8BufferAttribute:U8,IntType:iT,InterleavedBuffer:f0,InterleavedBufferAttribute:Wu,Interpolant:hp,InterpolateDiscrete:Kh,InterpolateLinear:Ef,InterpolateSmooth:p_,InvertStencilOp:HG,KeepStencilOp:m_,KeyframeTrack:Qo,LOD:zD,LatheGeometry:h0,Layers:gf,LessCompare:pD,LessDepth:z3,LessEqualCompare:gD,LessEqualDepth:J_,LessEqualStencilFunc:jG,LessStencilFunc:VG,Light:$u,LightProbe:q1,Line:bl,Line3:X7,LineBasicMaterial:Ui,LineCurve:N1,LineCurve3:WD,LineDashedMaterial:iO,LineLoop:bT,LineSegments:Yo,LinearEncoding:hT,LinearFilter:Wn,LinearInterpolant:UT,LinearMipMapLinearFilter:DG,LinearMipMapNearestFilter:LG,LinearMipmapLinearFilter:Da,LinearMipmapNearestFilter:w1,LinearSRGBColorSpace:jo,LinearToneMapping:J3,Loader:ki,LoaderUtils:Ra,LoadingManager:zT,LoopOnce:sD,LoopPingPong:aD,LoopRepeat:oD,LuminanceAlphaFormat:tD,LuminanceFormat:eD,MOUSE:CG,Material:Hr,MaterialLoader:Q1,MathUtils:AD,Matrix3:on,Matrix4:Ht,MaxEquation:aE,Mesh:Kr,MeshBasicMaterial:ks,MeshDepthMaterial:AT,MeshDistanceMaterial:MT,MeshLambertMaterial:nO,MeshMatcapMaterial:rO,MeshNormalMaterial:tO,MeshPhongMaterial:$D,MeshPhysicalMaterial:Oa,MeshStandardMaterial:v0,MeshToonMaterial:eO,MinEquation:oE,MirroredRepeatWrapping:Jh,MixOperation:j3,MultiplyBlending:sE,MultiplyOperation:a0,NearestFilter:Ar,NearestMipMapLinearFilter:BG,NearestMipMapNearestFilter:IG,NearestMipmapLinearFilter:Bh,NearestMipmapNearestFilter:kg,NeverCompare:hD,NeverDepth:U3,NeverStencilFunc:GG,NoBlending:Ml,NoColorSpace:Uu,NoToneMapping:Ta,NormalAnimationBlendMode:C1,NormalBlending:pf,NotEqualCompare:yD,NotEqualDepth:W3,NotEqualStencilFunc:JG,NumberKeyframeTrack:Zh,Object3D:Sn,ObjectLoader:v7,ObjectSpaceNormalMap:fD,OctahedronGeometry:m0,OneFactor:P3,OneMinusDstAlphaFactor:D3,OneMinusDstColorFactor:F3,OneMinusSrcAlphaFactor:nT,OneMinusSrcColorFactor:B3,OrthographicCamera:Qu,PCFShadowMap:M1,PCFSoftShadowMap:fg,PMREMGenerator:LE,Path:jg,PerspectiveCamera:Cr,Plane:yu,PlaneGeometry:c0,PlaneHelper:$7,PointLight:WT,PointLightHelper:EO,Points:RT,PointsMaterial:D1,PolarGridHelper:Q7,PolyhedronGeometry:Zu,PositionalAudio:T7,PropertyBinding:xn,PropertyMixer:_O,QuadraticBezierCurve:BT,QuadraticBezierCurve3:LT,Quaternion:br,QuaternionKeyframeTrack:ju,QuaternionLinearInterpolant:lO,RED_GREEN_RGTC2_Format:RE,RED_RGTC1_Format:iD,REVISION:ap,RGBADepthPacking:cD,RGBAFormat:Ki,RGBAIntegerFormat:cT,RGBA_ASTC_10x10_Format:wE,RGBA_ASTC_10x5_Format:AE,RGBA_ASTC_10x6_Format:ME,RGBA_ASTC_10x8_Format:EE,RGBA_ASTC_12x10_Format:TE,RGBA_ASTC_12x12_Format:CE,RGBA_ASTC_4x4_Format:pE,RGBA_ASTC_5x4_Format:mE,RGBA_ASTC_5x5_Format:gE,RGBA_ASTC_6x5_Format:vE,RGBA_ASTC_6x6_Format:yE,RGBA_ASTC_8x5_Format:_E,RGBA_ASTC_8x6_Format:xE,RGBA_ASTC_8x8_Format:SE,RGBA_BPTC_Format:h_,RGBA_ETC2_EAC_Format:hE,RGBA_PVRTC_2BPPV1_Format:fE,RGBA_PVRTC_4BPPV1_Format:cE,RGBA_S3TC_DXT1_Format:c_,RGBA_S3TC_DXT3_Format:f_,RGBA_S3TC_DXT5_Format:d_,RGB_ETC1_Format:rD,RGB_ETC2_Format:dE,RGB_PVRTC_2BPPV1_Format:uE,RGB_PVRTC_4BPPV1_Format:lE,RGB_S3TC_DXT1_Format:u_,RGFormat:nD,RGIntegerFormat:uT,RawShaderMaterial:ZD,Ray:up,Raycaster:QT,RectAreaLight:hO,RedFormat:aT,RedIntegerFormat:lT,ReinhardToneMapping:K3,RenderTarget:ED,RepeatWrapping:Vu,ReplaceStencilOp:FG,ReverseSubtractEquation:b3,RingGeometry:W1,SIGNED_RED_GREEN_RGTC2_Format:PE,SIGNED_RED_RGTC1_Format:bE,SRGBColorSpace:Qt,Scene:Wg,ShaderChunk:nn,ShaderLib:Ho,ShaderMaterial:Jo,ShadowMaterial:QD,Shape:vf,ShapeGeometry:j1,ShapePath:nX,ShapeUtils:ba,ShortType:Z3,Skeleton:d0,SkeletonHelper:J7,SkinnedMesh:TT,Source:lf,Sphere:xo,SphereGeometry:g0,Spherical:SO,SphericalHarmonics3:pO,SplineCurve:DT,SpotLight:VT,SpotLightHelper:AO,Sprite:kD,SpriteMaterial:wT,SrcAlphaFactor:tT,SrcAlphaSaturateFactor:N3,SrcColorFactor:I3,StaticCopyUsage:e8,StaticDrawUsage:Hg,StaticReadUsage:QG,StereoCamera:A7,StreamCopyUsage:n8,StreamDrawUsage:qG,StreamReadUsage:$G,StringKeyframeTrack:If,SubtractEquation:C3,SubtractiveBlending:iE,TOUCH:bG,TangentSpaceNormalMap:qu,TetrahedronGeometry:X1,Texture:tr,TextureLoader:cO,TorusGeometry:J1,TorusKnotGeometry:K1,Triangle:vs,TriangleFanDrawMode:K_,TriangleStripDrawMode:dT,TrianglesDrawMode:lD,TubeGeometry:Y1,TwoPassDoubleSide:PG,UVMapping:E1,Uint16BufferAttribute:yT,Uint32BufferAttribute:_T,Uint8BufferAttribute:k8,Uint8ClampedBufferAttribute:z8,Uniform:qT,UniformsGroup:H7,UniformsLib:ot,UniformsUtils:CD,UnsignedByteType:Ca,UnsignedInt248Type:Ou,UnsignedIntType:xl,UnsignedShort4444Type:sT,UnsignedShort5551Type:oT,UnsignedShortType:T1,VSMShadowMap:Uo,Vector2:ze,Vector3:J,Vector4:Mn,VectorKeyframeTrack:$h,VideoTexture:bj,WebGL1Renderer:ND,WebGL3DRenderTarget:C8,WebGLArrayRenderTarget:T8,WebGLCoordinateSystem:Aa,WebGLCubeRenderTarget:xT,WebGLMultipleRenderTargets:b8,WebGLRenderTarget:Xo,WebGLRenderer:ET,WebGLUtils:DD,WebGPUCoordinateSystem:Gg,WireframeGeometry:qD,WrapAroundEnding:zg,ZeroCurvatureEnding:of,ZeroFactor:R3,ZeroSlopeEnding:af,ZeroStencilOp:OG,_SRGBAFormat:Y_,sRGBEncoding:Nu},Symbol.toStringTag,{value:"Module"}));var CO={exports:{}},Bf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Bf.ConcurrentRoot=1;Bf.ContinuousEventPriority=4;Bf.DefaultEventPriority=16;Bf.DiscreteEventPriority=1;Bf.IdleEventPriority=536870912;Bf.LegacyRoot=0;CO.exports=Bf;var wh=CO.exports;function iX(n){let e;const t=new Set,r=(f,h)=>{const p=typeof f=="function"?f(e):f;if(p!==e){const m=e;e=h?p:Object.assign({},e,p),t.forEach(v=>v(e,m))}},i=()=>e,s=(f,h=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(e);function v(){const x=h(e);if(!p(m,x)){const E=m;f(m=x,E)}}return t.add(v),()=>t.delete(v)},l={setState:r,getState:i,subscribe:(f,h,p)=>h||p?s(f,h,p):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(r,i,l),l}const sX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),A2=sX?ee.useEffect:ee.useLayoutEffect;function ZT(n){const e=typeof n=="function"?iX(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=ee.useReducer(A=>A+1,0),o=e.getState(),a=ee.useRef(o),l=ee.useRef(r),f=ee.useRef(i),h=ee.useRef(!1),p=ee.useRef();p.current===void 0&&(p.current=r(o));let m,v=!1;(a.current!==o||l.current!==r||f.current!==i||h.current)&&(m=r(o),v=!i(p.current,m)),A2(()=>{v&&(p.current=m),a.current=o,l.current=r,f.current=i,h.current=!1});const x=ee.useRef(o);A2(()=>{const A=()=>{try{const M=e.getState(),S=l.current(M);f.current(p.current,S)||(a.current=M,p.current=S,s())}catch{h.current=!0,s()}},y=e.subscribe(A);return e.getState()!==x.current&&A(),y},[]);const E=v?m:p.current;return ee.useDebugValue(E),E};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var bO={exports:{}},RO={exports:{}},PO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,fe){var re=K.length;K.push(fe);e:for(;0<re;){var se=re-1>>>1,oe=K[se];if(0<i(oe,fe))K[se]=fe,K[re]=oe,re=se;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var fe=K[0],re=K.pop();if(re!==fe){K[0]=re;e:for(var se=0,oe=K.length,Le=oe>>>1;se<Le;){var Oe=2*(se+1)-1,De=K[Oe],Ue=Oe+1,Xe=K[Ue];if(0>i(De,re))Ue<oe&&0>i(Xe,De)?(K[se]=Xe,K[Ue]=re,se=Ue):(K[se]=De,K[Oe]=re,se=Oe);else if(Ue<oe&&0>i(Xe,re))K[se]=Xe,K[Ue]=re,se=Ue;else break e}}return fe}function i(K,fe){var re=K.sortIndex-fe.sortIndex;return re!==0?re:K.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,p=null,m=3,v=!1,x=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var fe=t(f);fe!==null;){if(fe.callback===null)r(f);else if(fe.startTime<=K)r(f),fe.sortIndex=fe.expirationTime,e(l,fe);else break;fe=t(f)}}function C(K){if(E=!1,S(K),!x)if(t(l)!==null)x=!0,ce(I);else{var fe=t(f);fe!==null&&he(C,fe.startTime-K)}}function I(K,fe){x=!1,E&&(E=!1,y(z),z=-1),v=!0;var re=m;try{for(S(fe),p=t(l);p!==null&&(!(p.expirationTime>fe)||K&&!W());){var se=p.callback;if(typeof se=="function"){p.callback=null,m=p.priorityLevel;var oe=se(p.expirationTime<=fe);fe=n.unstable_now(),typeof oe=="function"?p.callback=oe:p===t(l)&&r(l),S(fe)}else r(l);p=t(l)}if(p!==null)var Le=!0;else{var Oe=t(f);Oe!==null&&he(C,Oe.startTime-fe),Le=!1}return Le}finally{p=null,m=re,v=!1}}var B=!1,O=null,z=-1,L=5,N=-1;function W(){return!(n.unstable_now()-N<L)}function ae(){if(O!==null){var K=n.unstable_now();N=K;var fe=!0;try{fe=O(!0,K)}finally{fe?te():(B=!1,O=null)}}else B=!1}var te;if(typeof M=="function")te=function(){M(ae)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,le=ie.port2;ie.port1.onmessage=ae,te=function(){le.postMessage(null)}}else te=function(){A(ae,0)};function ce(K){O=K,B||(B=!0,te())}function he(K,fe){z=A(function(){K(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){x||v||(x=!0,ce(I))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(K){switch(m){case 1:case 2:case 3:var fe=3;break;default:fe=m}var re=m;m=fe;try{return K()}finally{m=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,fe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=m;m=K;try{return fe()}finally{m=re}},n.unstable_scheduleCallback=function(K,fe,re){var se=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?se+re:se):re=se,K){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=re+oe,K={id:h++,callback:fe,priorityLevel:K,startTime:re,expirationTime:oe,sortIndex:-1},re>se?(K.sortIndex=re,e(f,K),t(l)===null&&K===t(f)&&(E?(y(z),z=-1):E=!0,he(C,re-se))):(K.sortIndex=oe,e(l,K),x||v||(x=!0,ce(I))),K},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(K){var fe=m;return function(){var re=m;m=fe;try{return K.apply(this,arguments)}finally{m=re}}}})(PO);RO.exports=PO;var zE=RO.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oX=function(e){var t={},r=ee,i=zE,s=Object.assign;function o(u){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+u,_=1;_<arguments.length;_++)c+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),I=Symbol.iterator;function B(u){return u===null||typeof u!="object"?null:(u=I&&u[I]||u["@@iterator"],typeof u=="function"?u:null)}function O(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case f:return"Portal";case m:return"Profiler";case p:return"StrictMode";case A:return"Suspense";case y:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case x:return(u.displayName||"Context")+".Consumer";case v:return(u._context.displayName||"Context")+".Provider";case E:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case M:return c=u.displayName||null,c!==null?c:O(u.type)||"Memo";case S:c=u._payload,u=u._init;try{return O(u(c))}catch{}}return null}function z(u){var c=u.type;switch(u.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=c.render,u=u.displayName||u.name||"",c.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(c);case 8:return c===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function L(u){var c=u,_=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,c.flags&4098&&(_=c.return),u=c.return;while(u)}return c.tag===3?_:null}function N(u){if(L(u)!==u)throw Error(o(188))}function W(u){var c=u.alternate;if(!c){if(c=L(u),c===null)throw Error(o(188));return c!==u?null:u}for(var _=u,w=c;;){var b=_.return;if(b===null)break;var D=b.alternate;if(D===null){if(w=b.return,w!==null){_=w;continue}break}if(b.child===D.child){for(D=b.child;D;){if(D===_)return N(b),u;if(D===w)return N(b),c;D=D.sibling}throw Error(o(188))}if(_.return!==w.return)_=b,w=D;else{for(var q=!1,pe=b.child;pe;){if(pe===_){q=!0,_=b,w=D;break}if(pe===w){q=!0,w=b,_=D;break}pe=pe.sibling}if(!q){for(pe=D.child;pe;){if(pe===_){q=!0,_=D,w=b;break}if(pe===w){q=!0,w=D,_=b;break}pe=pe.sibling}if(!q)throw Error(o(189))}}if(_.alternate!==w)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?u:c}function ae(u){return u=W(u),u!==null?te(u):null}function te(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var c=te(u);if(c!==null)return c;u=u.sibling}return null}function ie(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var c=ie(u);if(c!==null)return c}u=u.sibling}return null}var le=Array.isArray,ce=e.getPublicInstance,he=e.getRootHostContext,K=e.getChildHostContext,fe=e.prepareForCommit,re=e.resetAfterCommit,se=e.createInstance,oe=e.appendInitialChild,Le=e.finalizeInitialChildren,Oe=e.prepareUpdate,De=e.shouldSetTextContent,Ue=e.createTextInstance,Xe=e.scheduleTimeout,rt=e.cancelTimeout,Gt=e.noTimeout,Dt=e.isPrimaryRenderer,Ge=e.supportsMutation,$=e.supportsPersistence,Ne=e.supportsHydration,Be=e.getInstanceFromNode,Ve=e.preparePortalMount,He=e.getCurrentEventPriority,vt=e.detachDeletedInstance,st=e.supportsMicrotasks,ft=e.scheduleMicrotask,Ct=e.supportsTestSelectors,jt=e.findFiberRoot,un=e.getBoundingRect,Z=e.getTextContent,G=e.isHiddenSubtree,_e=e.matchAccessibilityRole,je=e.setFocusIfFocusable,ke=e.setupIntersectionObserver,Ke=e.appendChild,xt=e.appendChildToContainer,Qe=e.commitTextUpdate,Ee=e.commitMount,bt=e.commitUpdate,ct=e.insertBefore,pt=e.insertInContainerBefore,yt=e.removeChild,mt=e.removeChildFromContainer,It=e.resetTextContent,Ut=e.hideInstance,de=e.hideTextInstance,Ae=e.unhideInstance,Me=e.unhideTextInstance,Ze=e.clearContainer,it=e.cloneInstance,$t=e.createContainerChildSet,wn=e.appendChildToContainerChildSet,Nn=e.finalizeContainerChildren,ci=e.replaceContainerChildren,sn=e.cloneHiddenInstance,Gr=e.cloneHiddenTextInstance,or=e.canHydrateInstance,Zo=e.canHydrateTextInstance,$o=e.canHydrateSuspenseInstance,ws=e.isSuspenseInstancePending,ts=e.isSuspenseInstanceFallback,ns=e.registerSuspenseInstanceRetry,Ir=e.getNextHydratableSibling,zt=e.getFirstHydratableChild,Mo=e.getFirstHydratableChildWithinContainer,Fa=e.getFirstHydratableChildWithinSuspenseInstance,U=e.hydrateInstance,R=e.hydrateTextInstance,H=e.hydrateSuspenseInstance,Y=e.getNextHydratableInstanceAfterSuspenseInstance,X=e.commitHydratedContainer,Q=e.commitHydratedSuspenseInstance,ye=e.clearSuspenseBoundary,Se=e.clearSuspenseBoundaryFromContainer,Ie=e.shouldDeleteUnhydratedTailInstances,Pe=e.didNotMatchHydratedContainerTextInstance,Fe=e.didNotMatchHydratedTextInstance,Ce;function dt(u){if(Ce===void 0)try{throw Error()}catch(_){var c=_.stack.trim().match(/\n( *(at )?)/);Ce=c&&c[1]||""}return`
`+Ce+u}var et=!1;function nt(u,c){if(!u||et)return"";et=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch($e){var w=$e}Reflect.construct(u,[],c)}else{try{c.call()}catch($e){w=$e}u.call(c.prototype)}else{try{throw Error()}catch($e){w=$e}u()}}catch($e){if($e&&w&&typeof $e.stack=="string"){for(var b=$e.stack.split(`
`),D=w.stack.split(`
`),q=b.length-1,pe=D.length-1;1<=q&&0<=pe&&b[q]!==D[pe];)pe--;for(;1<=q&&0<=pe;q--,pe--)if(b[q]!==D[pe]){if(q!==1||pe!==1)do if(q--,pe--,0>pe||b[q]!==D[pe]){var Re=`
`+b[q].replace(" at new "," at ");return u.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",u.displayName)),Re}while(1<=q&&0<=pe);break}}}finally{et=!1,Error.prepareStackTrace=_}return(u=u?u.displayName||u.name:"")?dt(u):""}var St=Object.prototype.hasOwnProperty,Lt=[],Rt=-1;function lt(u){return{current:u}}function Ft(u){0>Rt||(u.current=Lt[Rt],Lt[Rt]=null,Rt--)}function gt(u,c){Rt++,Lt[Rt]=u.current,u.current=c}var Vt={},vn=lt(Vt),kt=lt(!1),dn=Vt;function cn(u,c){var _=u.type.contextTypes;if(!_)return Vt;var w=u.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var b={},D;for(D in _)b[D]=c[D];return w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=c,u.__reactInternalMemoizedMaskedChildContext=b),b}function Tn(u){return u=u.childContextTypes,u!=null}function Un(){Ft(kt),Ft(vn)}function Wt(u,c,_){if(vn.current!==Vt)throw Error(o(168));gt(vn,c),gt(kt,_)}function Gn(u,c,_){var w=u.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return _;w=w.getChildContext();for(var b in w)if(!(b in c))throw Error(o(108,z(u)||"Unknown",b));return s({},_,w)}function mn(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Vt,dn=vn.current,gt(vn,u),gt(kt,kt.current),!0}function an(u,c,_){var w=u.stateNode;if(!w)throw Error(o(169));_?(u=Gn(u,c,dn),w.__reactInternalMemoizedMergedChildContext=u,Ft(kt),Ft(vn),gt(vn,u)):Ft(kt),gt(kt,_)}var kn=Math.clz32?Math.clz32:rs,Zr=Math.log,Br=Math.LN2;function rs(u){return u>>>=0,u===0?32:31-(Zr(u)/Br|0)|0}var ea=64,Ll=4194304;function is(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Eo(u,c){var _=u.pendingLanes;if(_===0)return 0;var w=0,b=u.suspendedLanes,D=u.pingedLanes,q=_&268435455;if(q!==0){var pe=q&~b;pe!==0?w=is(pe):(D&=q,D!==0&&(w=is(D)))}else q=_&~b,q!==0?w=is(q):D!==0&&(w=is(D));if(w===0)return 0;if(c!==0&&c!==w&&!(c&b)&&(b=w&-w,D=c&-c,b>=D||b===16&&(D&4194240)!==0))return c;if(w&4&&(w|=_&16),c=u.entangledLanes,c!==0)for(u=u.entanglements,c&=w;0<c;)_=31-kn(c),b=1<<_,w|=u[_],c&=~b;return w}function yp(u,c){switch(u){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(u,c){for(var _=u.suspendedLanes,w=u.pingedLanes,b=u.expirationTimes,D=u.pendingLanes;0<D;){var q=31-kn(D),pe=1<<q,Re=b[q];Re===-1?(!(pe&_)||pe&w)&&(b[q]=yp(pe,c)):Re<=c&&(u.expiredLanes|=pe),D&=~pe}}function ec(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function tc(u){for(var c=[],_=0;31>_;_++)c.push(u);return c}function Ua(u,c,_){u.pendingLanes|=c,c!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,c=31-kn(c),u[c]=_}function _p(u,c){var _=u.pendingLanes&~c;u.pendingLanes=c,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=c,u.mutableReadLanes&=c,u.entangledLanes&=c,c=u.entanglements;var w=u.eventTimes;for(u=u.expirationTimes;0<_;){var b=31-kn(_),D=1<<b;c[b]=0,w[b]=-1,u[b]=-1,_&=~D}}function nc(u,c){var _=u.entangledLanes|=c;for(u=u.entanglements;_;){var w=31-kn(_),b=1<<w;b&c|u[w]&c&&(u[w]|=c),_&=~b}}var ln=0;function rc(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Dl=i.unstable_scheduleCallback,ic=i.unstable_cancelCallback,xp=i.unstable_shouldYield,Sp=i.unstable_requestPaint,pr=i.unstable_now,sc=i.unstable_ImmediatePriority,Ap=i.unstable_UserBlockingPriority,Ks=i.unstable_NormalPriority,Ol=i.unstable_IdlePriority,Fl=null,Si=null;function Mp(u){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(Fl,u,void 0,(u.current.flags&128)===128)}catch{}}function Ep(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var ss=typeof Object.is=="function"?Object.is:Ep,Ts=null,Nl=!1,oc=!1;function Df(u){Ts===null?Ts=[u]:Ts.push(u)}function wp(u){Nl=!0,Df(u)}function os(){if(!oc&&Ts!==null){oc=!0;var u=0,c=ln;try{var _=Ts;for(ln=1;u<_.length;u++){var w=_[u];do w=w(!0);while(w!==null)}Ts=null,Nl=!1}catch(b){throw Ts!==null&&(Ts=Ts.slice(u+1)),Dl(sc,os),b}finally{ln=c,oc=!1}}return null}var Tp=a.ReactCurrentBatchConfig;function ka(u,c){if(ss(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var _=Object.keys(u),w=Object.keys(c);if(_.length!==w.length)return!1;for(w=0;w<_.length;w++){var b=_[w];if(!St.call(c,b)||!ss(u[b],c[b]))return!1}return!0}function Of(u){switch(u.tag){case 5:return dt(u.type);case 16:return dt("Lazy");case 13:return dt("Suspense");case 19:return dt("SuspenseList");case 0:case 2:case 15:return u=nt(u.type,!1),u;case 11:return u=nt(u.type.render,!1),u;case 1:return u=nt(u.type,!0),u;default:return""}}function Ai(u,c){if(u&&u.defaultProps){c=s({},c),u=u.defaultProps;for(var _ in u)c[_]===void 0&&(c[_]=u[_]);return c}return c}var za=lt(null),Ha=null,ta=null,Ul=null;function Ga(){Ul=ta=Ha=null}function na(u,c,_){Dt?(gt(za,c._currentValue),c._currentValue=_):(gt(za,c._currentValue2),c._currentValue2=_)}function kl(u){var c=za.current;Ft(za),Dt?u._currentValue=c:u._currentValue2=c}function ac(u,c,_){for(;u!==null;){var w=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),u===_)break;u=u.return}}function $r(u,c){Ha=u,Ul=ta=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&c&&(Gi=!0),u.firstContext=null)}function Lr(u){var c=Dt?u._currentValue:u._currentValue2;if(Ul!==u)if(u={context:u,memoizedValue:c,next:null},ta===null){if(Ha===null)throw Error(o(308));ta=u,Ha.dependencies={lanes:0,firstContext:u}}else ta=ta.next=u;return c}var fi=null,as=!1;function Cs(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lc(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ei(u,c){return{eventTime:u,lane:c,tag:0,payload:null,callback:null,next:null}}function zn(u,c){var _=u.updateQueue;_!==null&&(_=_.shared,ar!==null&&u.mode&1&&!(tn&2)?(u=_.interleaved,u===null?(c.next=c,fi===null?fi=[_]:fi.push(_)):(c.next=u.next,u.next=c),_.interleaved=c):(u=_.pending,u===null?c.next=c:(c.next=u.next,u.next=c),_.pending=c))}function wo(u,c,_){if(c=c.updateQueue,c!==null&&(c=c.shared,(_&4194240)!==0)){var w=c.lanes;w&=u.pendingLanes,_|=w,c.lanes=_,nc(u,_)}}function zl(u,c){var _=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,_===w)){var b=null,D=null;if(_=_.firstBaseUpdate,_!==null){do{var q={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};D===null?b=D=q:D=D.next=q,_=_.next}while(_!==null);D===null?b=D=c:D=D.next=c}else b=D=c;_={baseState:w.baseState,firstBaseUpdate:b,lastBaseUpdate:D,shared:w.shared,effects:w.effects},u.updateQueue=_;return}u=_.lastBaseUpdate,u===null?_.firstBaseUpdate=c:u.next=c,_.lastBaseUpdate=c}function Hl(u,c,_,w){var b=u.updateQueue;as=!1;var D=b.firstBaseUpdate,q=b.lastBaseUpdate,pe=b.shared.pending;if(pe!==null){b.shared.pending=null;var Re=pe,$e=Re.next;Re.next=null,q===null?D=$e:q.next=$e,q=Re;var _t=u.alternate;_t!==null&&(_t=_t.updateQueue,pe=_t.lastBaseUpdate,pe!==q&&(pe===null?_t.firstBaseUpdate=$e:pe.next=$e,_t.lastBaseUpdate=Re))}if(D!==null){var Xt=b.baseState;q=0,_t=$e=Re=null,pe=D;do{var Ot=pe.lane,Ln=pe.eventTime;if((w&Ot)===Ot){_t!==null&&(_t=_t.next={eventTime:Ln,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var Pt=u,si=pe;switch(Ot=c,Ln=_,si.tag){case 1:if(Pt=si.payload,typeof Pt=="function"){Xt=Pt.call(Ln,Xt,Ot);break e}Xt=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=si.payload,Ot=typeof Pt=="function"?Pt.call(Ln,Xt,Ot):Pt,Ot==null)break e;Xt=s({},Xt,Ot);break e;case 2:as=!0}}pe.callback!==null&&pe.lane!==0&&(u.flags|=64,Ot=b.effects,Ot===null?b.effects=[pe]:Ot.push(pe))}else Ln={eventTime:Ln,lane:Ot,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},_t===null?($e=_t=Ln,Re=Xt):_t=_t.next=Ln,q|=Ot;if(pe=pe.next,pe===null){if(pe=b.shared.pending,pe===null)break;Ot=pe,pe=Ot.next,Ot.next=null,b.lastBaseUpdate=Ot,b.shared.pending=null}}while(1);if(_t===null&&(Re=Xt),b.baseState=Re,b.firstBaseUpdate=$e,b.lastBaseUpdate=_t,c=b.shared.interleaved,c!==null){b=c;do q|=b.lane,b=b.next;while(b!==c)}else D===null&&(b.shared.lanes=0);ru|=q,u.lanes=q,u.memoizedState=Xt}}function Ys(u,c,_){if(u=c.effects,c.effects=null,u!==null)for(c=0;c<u.length;c++){var w=u[c],b=w.callback;if(b!==null){if(w.callback=null,w=_,typeof b!="function")throw Error(o(191,b));b.call(w)}}}var ra=new r.Component().refs;function uc(u,c,_,w){c=u.memoizedState,_=_(w,c),_=_==null?c:s({},c,_),u.memoizedState=_,u.lanes===0&&(u.updateQueue.baseState=_)}var Gl={isMounted:function(u){return(u=u._reactInternals)?L(u)===u:!1},enqueueSetState:function(u,c,_){u=u._reactInternals;var w=vr(),b=us(u),D=ei(w,b);D.payload=c,_!=null&&(D.callback=_),zn(u,D),c=cs(u,b,w),c!==null&&wo(c,u,b)},enqueueReplaceState:function(u,c,_){u=u._reactInternals;var w=vr(),b=us(u),D=ei(w,b);D.tag=1,D.payload=c,_!=null&&(D.callback=_),zn(u,D),c=cs(u,b,w),c!==null&&wo(c,u,b)},enqueueForceUpdate:function(u,c){u=u._reactInternals;var _=vr(),w=us(u),b=ei(_,w);b.tag=2,c!=null&&(b.callback=c),zn(u,b),c=cs(u,w,_),c!==null&&wo(c,u,w)}};function Vl(u,c,_,w,b,D,q){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,D,q):c.prototype&&c.prototype.isPureReactComponent?!ka(_,w)||!ka(b,D):!0}function Ff(u,c,_){var w=!1,b=Vt,D=c.contextType;return typeof D=="object"&&D!==null?D=Lr(D):(b=Tn(c)?dn:vn.current,w=c.contextTypes,D=(w=w!=null)?cn(u,b):Vt),c=new c(_,D),u.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Gl,u.stateNode=c,c._reactInternals=u,w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=b,u.__reactInternalMemoizedMaskedChildContext=D),c}function cc(u,c,_,w){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(_,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(_,w),c.state!==u&&Gl.enqueueReplaceState(c,c.state,null)}function fc(u,c,_,w){var b=u.stateNode;b.props=_,b.state=u.memoizedState,b.refs=ra,Cs(u);var D=c.contextType;typeof D=="object"&&D!==null?b.context=Lr(D):(D=Tn(c)?dn:vn.current,b.context=cn(u,D)),b.state=u.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(uc(u,c,D,_),b.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&Gl.enqueueReplaceState(b,b.state,null),Hl(u,_,b,w),b.state=u.memoizedState),typeof b.componentDidMount=="function"&&(u.flags|=4194308)}var qs=[],ia=0,Va=null,Wa=0,Vr=[],bn=0,To=null,zi=1,ls="";function Qs(u,c){qs[ia++]=Wa,qs[ia++]=Va,Va=u,Wa=c}function ti(u,c,_){Vr[bn++]=zi,Vr[bn++]=ls,Vr[bn++]=To,To=u;var w=zi;u=ls;var b=32-kn(w)-1;w&=~(1<<b),_+=1;var D=32-kn(c)+b;if(30<D){var q=b-b%5;D=(w&(1<<q)-1).toString(32),w>>=q,b-=q,zi=1<<32-kn(c)+b|_<<b|w,ls=D+u}else zi=1<<D|_<<b|w,ls=u}function dc(u){u.return!==null&&(Qs(u,1),ti(u,1,0))}function hc(u){for(;u===Va;)Va=qs[--ia],qs[ia]=null,Wa=qs[--ia],qs[ia]=null;for(;u===To;)To=Vr[--bn],Vr[bn]=null,ls=Vr[--bn],Vr[bn]=null,zi=Vr[--bn],Vr[bn]=null}var di=null,ni=null,Hn=!1,qn=!1,Wr=null;function sa(u,c){var _=fs(5,null,null,0);_.elementType="DELETED",_.stateNode=c,_.return=u,c=u.deletions,c===null?(u.deletions=[_],u.flags|=16):c.push(_)}function oa(u,c){switch(u.tag){case 5:return c=or(c,u.type,u.pendingProps),c!==null?(u.stateNode=c,di=u,ni=zt(c),!0):!1;case 6:return c=Zo(c,u.pendingProps),c!==null?(u.stateNode=c,di=u,ni=null,!0):!1;case 13:if(c=$o(c),c!==null){var _=To!==null?{id:zi,overflow:ls}:null;return u.memoizedState={dehydrated:c,treeContext:_,retryLane:1073741824},_=fs(18,null,null,0),_.stateNode=c,_.return=u,u.child=_,di=u,ni=null,!0}return!1;default:return!1}}function Wl(u){return(u.mode&1)!==0&&(u.flags&128)===0}function An(u){if(Hn){var c=ni;if(c){var _=c;if(!oa(u,c)){if(Wl(u))throw Error(o(418));c=Ir(_);var w=di;c&&oa(u,c)?sa(w,_):(u.flags=u.flags&-4097|2,Hn=!1,di=u)}}else{if(Wl(u))throw Error(o(418));u.flags=u.flags&-4097|2,Hn=!1,di=u}}}function jl(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;di=u}function ja(u){if(!Ne||u!==di)return!1;if(!Hn)return jl(u),Hn=!0,!1;if(u.tag!==3&&(u.tag!==5||Ie(u.type)&&!De(u.type,u.memoizedProps))){var c=ni;if(c){if(Wl(u)){for(u=ni;u;)u=Ir(u);throw Error(o(418))}for(;c;)sa(u,c),c=Ir(c)}}if(jl(u),u.tag===13){if(!Ne)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));ni=Y(u)}else ni=di?Ir(u.stateNode):null;return!0}function Co(){Ne&&(ni=di=null,qn=Hn=!1)}function Xl(u){Wr===null?Wr=[u]:Wr.push(u)}function aa(u,c,_){if(u=_.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var w=_.stateNode}if(!w)throw Error(o(147,u));var b=w,D=""+u;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===D?c.ref:(c=function(q){var pe=b.refs;pe===ra&&(pe=b.refs={}),q===null?delete pe[D]:pe[D]=q},c._stringRef=D,c)}if(typeof u!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,u))}return u}function Jl(u,c){throw u=Object.prototype.toString.call(c),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u))}function Xa(u){var c=u._init;return c(u._payload)}function Kl(u){function c(xe,me){if(u){var Te=xe.deletions;Te===null?(xe.deletions=[me],xe.flags|=16):Te.push(me)}}function _(xe,me){if(!u)return null;for(;me!==null;)c(xe,me),me=me.sibling;return null}function w(xe,me){for(xe=new Map;me!==null;)me.key!==null?xe.set(me.key,me):xe.set(me.index,me),me=me.sibling;return xe}function b(xe,me){return xe=ha(xe,me),xe.index=0,xe.sibling=null,xe}function D(xe,me,Te){return xe.index=Te,u?(Te=xe.alternate,Te!==null?(Te=Te.index,Te<me?(xe.flags|=2,me):Te):(xe.flags|=2,me)):(xe.flags|=1048576,me)}function q(xe){return u&&xe.alternate===null&&(xe.flags|=2),xe}function pe(xe,me,Te,ht){return me===null||me.tag!==6?(me=xd(Te,xe.mode,ht),me.return=xe,me):(me=b(me,Te),me.return=xe,me)}function Re(xe,me,Te,ht){var Tt=Te.type;return Tt===h?_t(xe,me,Te.props.children,ht,Te.key):me!==null&&(me.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&Xa(Tt)===me.type)?(ht=b(me,Te.props),ht.ref=aa(xe,me,Te),ht.return=xe,ht):(ht=su(Te.type,Te.key,Te.props,null,xe.mode,ht),ht.ref=aa(xe,me,Te),ht.return=xe,ht)}function $e(xe,me,Te,ht){return me===null||me.tag!==4||me.stateNode.containerInfo!==Te.containerInfo||me.stateNode.implementation!==Te.implementation?(me=am(Te,xe.mode,ht),me.return=xe,me):(me=b(me,Te.children||[]),me.return=xe,me)}function _t(xe,me,Te,ht,Tt){return me===null||me.tag!==7?(me=$a(Te,xe.mode,ht,Tt),me.return=xe,me):(me=b(me,Te),me.return=xe,me)}function Xt(xe,me,Te){if(typeof me=="string"&&me!==""||typeof me=="number")return me=xd(""+me,xe.mode,Te),me.return=xe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return Te=su(me.type,me.key,me.props,null,xe.mode,Te),Te.ref=aa(xe,null,me),Te.return=xe,Te;case f:return me=am(me,xe.mode,Te),me.return=xe,me;case S:var ht=me._init;return Xt(xe,ht(me._payload),Te)}if(le(me)||B(me))return me=$a(me,xe.mode,Te,null),me.return=xe,me;Jl(xe,me)}return null}function Ot(xe,me,Te,ht){var Tt=me!==null?me.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Tt!==null?null:pe(xe,me,""+Te,ht);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return Te.key===Tt?Re(xe,me,Te,ht):null;case f:return Te.key===Tt?$e(xe,me,Te,ht):null;case S:return Tt=Te._init,Ot(xe,me,Tt(Te._payload),ht)}if(le(Te)||B(Te))return Tt!==null?null:_t(xe,me,Te,ht,null);Jl(xe,Te)}return null}function Ln(xe,me,Te,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return xe=xe.get(Te)||null,pe(me,xe,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:return xe=xe.get(ht.key===null?Te:ht.key)||null,Re(me,xe,ht,Tt);case f:return xe=xe.get(ht.key===null?Te:ht.key)||null,$e(me,xe,ht,Tt);case S:var Yt=ht._init;return Ln(xe,me,Te,Yt(ht._payload),Tt)}if(le(ht)||B(ht))return xe=xe.get(Te)||null,_t(me,xe,ht,Tt,null);Jl(me,ht)}return null}function Pt(xe,me,Te,ht){for(var Tt=null,Yt=null,Jt=me,yn=me=0,Or=null;Jt!==null&&yn<Te.length;yn++){Jt.index>yn?(Or=Jt,Jt=null):Or=Jt.sibling;var _n=Ot(xe,Jt,Te[yn],ht);if(_n===null){Jt===null&&(Jt=Or);break}u&&Jt&&_n.alternate===null&&c(xe,Jt),me=D(_n,me,yn),Yt===null?Tt=_n:Yt.sibling=_n,Yt=_n,Jt=Or}if(yn===Te.length)return _(xe,Jt),Hn&&Qs(xe,yn),Tt;if(Jt===null){for(;yn<Te.length;yn++)Jt=Xt(xe,Te[yn],ht),Jt!==null&&(me=D(Jt,me,yn),Yt===null?Tt=Jt:Yt.sibling=Jt,Yt=Jt);return Hn&&Qs(xe,yn),Tt}for(Jt=w(xe,Jt);yn<Te.length;yn++)Or=Ln(Jt,xe,yn,Te[yn],ht),Or!==null&&(u&&Or.alternate!==null&&Jt.delete(Or.key===null?yn:Or.key),me=D(Or,me,yn),Yt===null?Tt=Or:Yt.sibling=Or,Yt=Or);return u&&Jt.forEach(function(pa){return c(xe,pa)}),Hn&&Qs(xe,yn),Tt}function si(xe,me,Te,ht){var Tt=B(Te);if(typeof Tt!="function")throw Error(o(150));if(Te=Tt.call(Te),Te==null)throw Error(o(151));for(var Yt=Tt=null,Jt=me,yn=me=0,Or=null,_n=Te.next();Jt!==null&&!_n.done;yn++,_n=Te.next()){Jt.index>yn?(Or=Jt,Jt=null):Or=Jt.sibling;var pa=Ot(xe,Jt,_n.value,ht);if(pa===null){Jt===null&&(Jt=Or);break}u&&Jt&&pa.alternate===null&&c(xe,Jt),me=D(pa,me,yn),Yt===null?Tt=pa:Yt.sibling=pa,Yt=pa,Jt=Or}if(_n.done)return _(xe,Jt),Hn&&Qs(xe,yn),Tt;if(Jt===null){for(;!_n.done;yn++,_n=Te.next())_n=Xt(xe,_n.value,ht),_n!==null&&(me=D(_n,me,yn),Yt===null?Tt=_n:Yt.sibling=_n,Yt=_n);return Hn&&Qs(xe,yn),Tt}for(Jt=w(xe,Jt);!_n.done;yn++,_n=Te.next())_n=Ln(Jt,xe,yn,_n.value,ht),_n!==null&&(u&&_n.alternate!==null&&Jt.delete(_n.key===null?yn:_n.key),me=D(_n,me,yn),Yt===null?Tt=_n:Yt.sibling=_n,Yt=_n);return u&&Jt.forEach(function(rS){return c(xe,rS)}),Hn&&Qs(xe,yn),Tt}function Wi(xe,me,Te,ht){if(typeof Te=="object"&&Te!==null&&Te.type===h&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:e:{for(var Tt=Te.key,Yt=me;Yt!==null;){if(Yt.key===Tt){if(Tt=Te.type,Tt===h){if(Yt.tag===7){_(xe,Yt.sibling),me=b(Yt,Te.props.children),me.return=xe,xe=me;break e}}else if(Yt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&Xa(Tt)===Yt.type){_(xe,Yt.sibling),me=b(Yt,Te.props),me.ref=aa(xe,Yt,Te),me.return=xe,xe=me;break e}_(xe,Yt);break}else c(xe,Yt);Yt=Yt.sibling}Te.type===h?(me=$a(Te.props.children,xe.mode,ht,Te.key),me.return=xe,xe=me):(ht=su(Te.type,Te.key,Te.props,null,xe.mode,ht),ht.ref=aa(xe,me,Te),ht.return=xe,xe=ht)}return q(xe);case f:e:{for(Yt=Te.key;me!==null;){if(me.key===Yt)if(me.tag===4&&me.stateNode.containerInfo===Te.containerInfo&&me.stateNode.implementation===Te.implementation){_(xe,me.sibling),me=b(me,Te.children||[]),me.return=xe,xe=me;break e}else{_(xe,me);break}else c(xe,me);me=me.sibling}me=am(Te,xe.mode,ht),me.return=xe,xe=me}return q(xe);case S:return Yt=Te._init,Wi(xe,me,Yt(Te._payload),ht)}if(le(Te))return Pt(xe,me,Te,ht);if(B(Te))return si(xe,me,Te,ht);Jl(xe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,me!==null&&me.tag===6?(_(xe,me.sibling),me=b(me,Te),me.return=xe,xe=me):(_(xe,me),me=xd(Te,xe.mode,ht),me.return=xe,xe=me),q(xe)):_(xe,me)}return Wi}var la=Kl(!0),Nf=Kl(!1),ua={},Mi=lt(ua),Ja=lt(ua),F=lt(ua);function j(u){if(u===ua)throw Error(o(174));return u}function ue(u,c){gt(F,c),gt(Ja,u),gt(Mi,ua),u=he(c),Ft(Mi),gt(Mi,u)}function we(){Ft(Mi),Ft(Ja),Ft(F)}function Nt(u){var c=j(F.current),_=j(Mi.current);c=K(_,u.type,c),_!==c&&(gt(Ja,u),gt(Mi,c))}function hn(u){Ja.current===u&&(Ft(Mi),Ft(Ja))}var en=lt(0);function hi(u){for(var c=u;c!==null;){if(c.tag===13){var _=c.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||ws(_)||ts(_)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Yl=[];function Zs(){for(var u=0;u<Yl.length;u++){var c=Yl[u];Dt?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Yl.length=0}var $s=a.ReactCurrentDispatcher,Hi=a.ReactCurrentBatchConfig,ql=0,nr=null,ri=null,Dr=null,Uf=!1,pc=!1,mc=0,kf=0;function ii(){throw Error(o(321))}function Cp(u,c){if(c===null)return!1;for(var _=0;_<c.length&&_<u.length;_++)if(!ss(u[_],c[_]))return!1;return!0}function gc(u,c,_,w,b,D){if(ql=D,nr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,$s.current=u===null||u.memoizedState===null?Nx:Ux,u=_(w,b),pc){D=0;do{if(pc=!1,mc=0,25<=D)throw Error(o(301));D+=1,Dr=ri=null,c.updateQueue=null,$s.current=kx,u=_(w,b)}while(pc)}if($s.current=Wf,c=ri!==null&&ri.next!==null,ql=0,Dr=ri=nr=null,Uf=!1,c)throw Error(o(300));return u}function bp(){var u=mc!==0;return mc=0,u}function eo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?nr.memoizedState=Dr=u:Dr=Dr.next=u,Dr}function to(){if(ri===null){var u=nr.alternate;u=u!==null?u.memoizedState:null}else u=ri.next;var c=Dr===null?nr.memoizedState:Dr.next;if(c!==null)Dr=c,ri=u;else{if(u===null)throw Error(o(310));ri=u,u={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},Dr===null?nr.memoizedState=Dr=u:Dr=Dr.next=u}return Dr}function Ka(u,c){return typeof c=="function"?c(u):c}function Ql(u){var c=to(),_=c.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=u;var w=ri,b=w.baseQueue,D=_.pending;if(D!==null){if(b!==null){var q=b.next;b.next=D.next,D.next=q}w.baseQueue=b=D,_.pending=null}if(b!==null){D=b.next,w=w.baseState;var pe=q=null,Re=null,$e=D;do{var _t=$e.lane;if((ql&_t)===_t)Re!==null&&(Re=Re.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),w=$e.hasEagerState?$e.eagerState:u(w,$e.action);else{var Xt={lane:_t,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};Re===null?(pe=Re=Xt,q=w):Re=Re.next=Xt,nr.lanes|=_t,ru|=_t}$e=$e.next}while($e!==null&&$e!==D);Re===null?q=w:Re.next=pe,ss(w,c.memoizedState)||(Gi=!0),c.memoizedState=w,c.baseState=q,c.baseQueue=Re,_.lastRenderedState=w}if(u=_.interleaved,u!==null){b=u;do D=b.lane,nr.lanes|=D,ru|=D,b=b.next;while(b!==u)}else b===null&&(_.lanes=0);return[c.memoizedState,_.dispatch]}function zf(u){var c=to(),_=c.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=u;var w=_.dispatch,b=_.pending,D=c.memoizedState;if(b!==null){_.pending=null;var q=b=b.next;do D=u(D,q.action),q=q.next;while(q!==b);ss(D,c.memoizedState)||(Gi=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),_.lastRenderedState=D}return[D,w]}function b0(){}function R0(u,c){var _=nr,w=to(),b=c(),D=!ss(w.memoizedState,b);if(D&&(w.memoizedState=b,Gi=!0),w=w.queue,Zl(Pp.bind(null,_,w,u),[u]),w.getSnapshot!==c||D||Dr!==null&&Dr.memoizedState.tag&1){if(_.flags|=2048,vc(9,Rp.bind(null,_,w,b,c),void 0,null),ar===null)throw Error(o(349));ql&30||P0(_,c,b)}return b}function P0(u,c,_){u.flags|=16384,u={getSnapshot:c,value:_},c=nr.updateQueue,c===null?(c={lastEffect:null,stores:null},nr.updateQueue=c,c.stores=[u]):(_=c.stores,_===null?c.stores=[u]:_.push(u))}function Rp(u,c,_,w){c.value=_,c.getSnapshot=w,I0(c)&&cs(u,1,-1)}function Pp(u,c,_){return _(function(){I0(c)&&cs(u,1,-1)})}function I0(u){var c=u.getSnapshot;u=u.value;try{var _=c();return!ss(u,_)}catch{return!0}}function Ip(u){var c=eo();return typeof u=="function"&&(u=u()),c.memoizedState=c.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:u},c.queue=u,u=u.dispatch=Fx.bind(null,nr,u),[c.memoizedState,u]}function vc(u,c,_,w){return u={tag:u,create:c,destroy:_,deps:w,next:null},c=nr.updateQueue,c===null?(c={lastEffect:null,stores:null},nr.updateQueue=c,c.lastEffect=u.next=u):(_=c.lastEffect,_===null?c.lastEffect=u.next=u:(w=_.next,_.next=u,u.next=w,c.lastEffect=u)),u}function Bp(){return to().memoizedState}function Hf(u,c,_,w){var b=eo();nr.flags|=u,b.memoizedState=vc(1|c,_,void 0,w===void 0?null:w)}function Gf(u,c,_,w){var b=to();w=w===void 0?null:w;var D=void 0;if(ri!==null){var q=ri.memoizedState;if(D=q.destroy,w!==null&&Cp(w,q.deps)){b.memoizedState=vc(c,_,D,w);return}}nr.flags|=u,b.memoizedState=vc(1|c,_,D,w)}function Vf(u,c){return Hf(8390656,8,u,c)}function Zl(u,c){return Gf(2048,8,u,c)}function B0(u,c){return Gf(4,2,u,c)}function Lp(u,c){return Gf(4,4,u,c)}function L0(u,c){if(typeof c=="function")return u=u(),c(u),function(){c(null)};if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function D0(u,c,_){return _=_!=null?_.concat([u]):null,Gf(4,4,L0.bind(null,c,u),_)}function $l(){}function O0(u,c){var _=to();c=c===void 0?null:c;var w=_.memoizedState;return w!==null&&c!==null&&Cp(c,w[1])?w[0]:(_.memoizedState=[u,c],u)}function F0(u,c){var _=to();c=c===void 0?null:c;var w=_.memoizedState;return w!==null&&c!==null&&Cp(c,w[1])?w[0]:(u=u(),_.memoizedState=[u,c],u)}function Dx(u,c){var _=ln;ln=_!==0&&4>_?_:4,u(!0);var w=Hi.transition;Hi.transition={};try{u(!1),c()}finally{ln=_,Hi.transition=w}}function N0(){return to().memoizedState}function Ox(u,c,_){var w=us(u);_={lane:w,action:_,hasEagerState:!1,eagerState:null,next:null},U0(u)?k0(c,_):(z0(u,c,_),_=vr(),u=cs(u,w,_),u!==null&&H0(u,c,w))}function Fx(u,c,_){var w=us(u),b={lane:w,action:_,hasEagerState:!1,eagerState:null,next:null};if(U0(u))k0(c,b);else{z0(u,c,b);var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var q=c.lastRenderedState,pe=D(q,_);if(b.hasEagerState=!0,b.eagerState=pe,ss(pe,q))return}catch{}finally{}_=vr(),u=cs(u,w,_),u!==null&&H0(u,c,w)}}function U0(u){var c=u.alternate;return u===nr||c!==null&&c===nr}function k0(u,c){pc=Uf=!0;var _=u.pending;_===null?c.next=c:(c.next=_.next,_.next=c),u.pending=c}function z0(u,c,_){ar!==null&&u.mode&1&&!(tn&2)?(u=c.interleaved,u===null?(_.next=_,fi===null?fi=[c]:fi.push(c)):(_.next=u.next,u.next=_),c.interleaved=_):(u=c.pending,u===null?_.next=_:(_.next=u.next,u.next=_),c.pending=_)}function H0(u,c,_){if(_&4194240){var w=c.lanes;w&=u.pendingLanes,_|=w,c.lanes=_,nc(u,_)}}var Wf={readContext:Lr,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},Nx={readContext:Lr,useCallback:function(u,c){return eo().memoizedState=[u,c===void 0?null:c],u},useContext:Lr,useEffect:Vf,useImperativeHandle:function(u,c,_){return _=_!=null?_.concat([u]):null,Hf(4194308,4,L0.bind(null,c,u),_)},useLayoutEffect:function(u,c){return Hf(4194308,4,u,c)},useInsertionEffect:function(u,c){return Hf(4,2,u,c)},useMemo:function(u,c){var _=eo();return c=c===void 0?null:c,u=u(),_.memoizedState=[u,c],u},useReducer:function(u,c,_){var w=eo();return c=_!==void 0?_(c):c,w.memoizedState=w.baseState=c,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:c},w.queue=u,u=u.dispatch=Ox.bind(null,nr,u),[w.memoizedState,u]},useRef:function(u){var c=eo();return u={current:u},c.memoizedState=u},useState:Ip,useDebugValue:$l,useDeferredValue:function(u){var c=Ip(u),_=c[0],w=c[1];return Vf(function(){var b=Hi.transition;Hi.transition={};try{w(u)}finally{Hi.transition=b}},[u]),_},useTransition:function(){var u=Ip(!1),c=u[0];return u=Dx.bind(null,u[1]),eo().memoizedState=u,[c,u]},useMutableSource:function(){},useSyncExternalStore:function(u,c,_){var w=nr,b=eo();if(Hn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=c(),ar===null)throw Error(o(349));ql&30||P0(w,c,_)}b.memoizedState=_;var D={value:_,getSnapshot:c};return b.queue=D,Vf(Pp.bind(null,w,D,u),[u]),w.flags|=2048,vc(9,Rp.bind(null,w,D,_,c),void 0,null),_},useId:function(){var u=eo(),c=ar.identifierPrefix;if(Hn){var _=ls,w=zi;_=(w&~(1<<32-kn(w)-1)).toString(32)+_,c=":"+c+"R"+_,_=mc++,0<_&&(c+="H"+_.toString(32)),c+=":"}else _=kf++,c=":"+c+"r"+_.toString(32)+":";return u.memoizedState=c},unstable_isNewReconciler:!1},Ux={readContext:Lr,useCallback:O0,useContext:Lr,useEffect:Zl,useImperativeHandle:D0,useInsertionEffect:B0,useLayoutEffect:Lp,useMemo:F0,useReducer:Ql,useRef:Bp,useState:function(){return Ql(Ka)},useDebugValue:$l,useDeferredValue:function(u){var c=Ql(Ka),_=c[0],w=c[1];return Zl(function(){var b=Hi.transition;Hi.transition={};try{w(u)}finally{Hi.transition=b}},[u]),_},useTransition:function(){var u=Ql(Ka)[0],c=to().memoizedState;return[u,c]},useMutableSource:b0,useSyncExternalStore:R0,useId:N0,unstable_isNewReconciler:!1},kx={readContext:Lr,useCallback:O0,useContext:Lr,useEffect:Zl,useImperativeHandle:D0,useInsertionEffect:B0,useLayoutEffect:Lp,useMemo:F0,useReducer:zf,useRef:Bp,useState:function(){return zf(Ka)},useDebugValue:$l,useDeferredValue:function(u){var c=zf(Ka),_=c[0],w=c[1];return Zl(function(){var b=Hi.transition;Hi.transition={};try{w(u)}finally{Hi.transition=b}},[u]),_},useTransition:function(){var u=zf(Ka)[0],c=to().memoizedState;return[u,c]},useMutableSource:b0,useSyncExternalStore:R0,useId:N0,unstable_isNewReconciler:!1};function Dp(u,c){try{var _="",w=c;do _+=Of(w),w=w.return;while(w);var b=_}catch(D){b=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:c,stack:b}}function Op(u,c){try{console.error(c.value)}catch(_){setTimeout(function(){throw _})}}var zx=typeof WeakMap=="function"?WeakMap:Map;function G0(u,c,_){_=ei(-1,_),_.tag=3,_.payload={element:null};var w=c.value;return _.callback=function(){ld||(ld=!0,tm=w),Op(u,c)},_}function V0(u,c,_){_=ei(-1,_),_.tag=3;var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var b=c.value;_.payload=function(){return w(b)},_.callback=function(){Op(u,c)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(_.callback=function(){Op(u,c),typeof w!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var q=c.stack;this.componentDidCatch(c.value,{componentStack:q!==null?q:""})}),_}function W0(u,c,_){var w=u.pingCache;if(w===null){w=u.pingCache=new zx;var b=new Set;w.set(c,b)}else b=w.get(c),b===void 0&&(b=new Set,w.set(c,b));b.has(_)||(b.add(_),u=Zx.bind(null,u,c,_),c.then(u,u))}function j0(u){do{var c;if((c=u.tag===13)&&(c=u.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return u;u=u.return}while(u!==null);return null}function X0(u,c,_,w,b){return u.mode&1?(u.flags|=65536,u.lanes=b,u):(u===c?u.flags|=65536:(u.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(c=ei(-1,1),c.tag=2,zn(_,c))),_.lanes|=1),u)}function no(u){u.flags|=4}function J0(u,c){if(u!==null&&u.child===c.child)return!0;if(c.flags&16)return!1;for(u=c.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Rn,yc,jf,Xf;if(Ge)Rn=function(u,c){for(var _=c.child;_!==null;){if(_.tag===5||_.tag===6)oe(u,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===c)break;for(;_.sibling===null;){if(_.return===null||_.return===c)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},yc=function(){},jf=function(u,c,_,w,b){if(u=u.memoizedProps,u!==w){var D=c.stateNode,q=j(Mi.current);_=Oe(D,_,u,w,b,q),(c.updateQueue=_)&&no(c)}},Xf=function(u,c,_,w){_!==w&&no(c)};else if($){Rn=function(u,c,_,w){for(var b=c.child;b!==null;){if(b.tag===5){var D=b.stateNode;_&&w&&(D=sn(D,b.type,b.memoizedProps,b)),oe(u,D)}else if(b.tag===6)D=b.stateNode,_&&w&&(D=Gr(D,b.memoizedProps,b)),oe(u,D);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)D=b.child,D!==null&&(D.return=b),Rn(u,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var Jf=function(u,c,_,w){for(var b=c.child;b!==null;){if(b.tag===5){var D=b.stateNode;_&&w&&(D=sn(D,b.type,b.memoizedProps,b)),wn(u,D)}else if(b.tag===6)D=b.stateNode,_&&w&&(D=Gr(D,b.memoizedProps,b)),wn(u,D);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)D=b.child,D!==null&&(D.return=b),Jf(u,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};yc=function(u,c){var _=c.stateNode;if(!J0(u,c)){u=_.containerInfo;var w=$t(u);Jf(w,c,!1,!1),_.pendingChildren=w,no(c),Nn(u,w)}},jf=function(u,c,_,w,b){var D=u.stateNode,q=u.memoizedProps;if((u=J0(u,c))&&q===w)c.stateNode=D;else{var pe=c.stateNode,Re=j(Mi.current),$e=null;q!==w&&($e=Oe(pe,_,q,w,b,Re)),u&&$e===null?c.stateNode=D:(D=it(D,$e,_,q,w,c,u,pe),Le(D,_,w,b,Re)&&no(c),c.stateNode=D,u?no(c):Rn(D,c,!1,!1))}},Xf=function(u,c,_,w){_!==w?(u=j(F.current),_=j(Mi.current),c.stateNode=Ue(w,u,_,c),no(c)):c.stateNode=u.stateNode}}else yc=function(){},jf=function(){},Xf=function(){};function eu(u,c){if(!Hn)switch(u.tailMode){case"hidden":c=u.tail;for(var _=null;c!==null;)c.alternate!==null&&(_=c),c=c.sibling;_===null?u.tail=null:_.sibling=null;break;case"collapsed":_=u.tail;for(var w=null;_!==null;)_.alternate!==null&&(w=_),_=_.sibling;w===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function mr(u){var c=u.alternate!==null&&u.alternate.child===u.child,_=0,w=0;if(c)for(var b=u.child;b!==null;)_|=b.lanes|b.childLanes,w|=b.subtreeFlags&14680064,w|=b.flags&14680064,b.return=u,b=b.sibling;else for(b=u.child;b!==null;)_|=b.lanes|b.childLanes,w|=b.subtreeFlags,w|=b.flags,b.return=u,b=b.sibling;return u.subtreeFlags|=w,u.childLanes=_,c}function Hx(u,c,_){var w=c.pendingProps;switch(hc(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(c),null;case 1:return Tn(c.type)&&Un(),mr(c),null;case 3:return w=c.stateNode,we(),Ft(kt),Ft(vn),Zs(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(u===null||u.child===null)&&(ja(c)?no(c):u===null||u.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Wr!==null&&(md(Wr),Wr=null))),yc(u,c),mr(c),null;case 5:hn(c),_=j(F.current);var b=c.type;if(u!==null&&c.stateNode!=null)jf(u,c,b,w,_),u.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(o(166));return mr(c),null}if(u=j(Mi.current),ja(c)){if(!Ne)throw Error(o(175));u=U(c.stateNode,c.type,c.memoizedProps,_,u,c,!qn),c.updateQueue=u,u!==null&&no(c)}else{var D=se(b,w,_,u,c);Rn(D,c,!1,!1),c.stateNode=D,Le(D,b,w,_,u)&&no(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return mr(c),null;case 6:if(u&&c.stateNode!=null)Xf(u,c,u.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(o(166));if(u=j(F.current),_=j(Mi.current),ja(c)){if(!Ne)throw Error(o(176));if(u=c.stateNode,w=c.memoizedProps,(_=R(u,w,c,!qn))&&(b=di,b!==null))switch(D=(b.mode&1)!==0,b.tag){case 3:Pe(b.stateNode.containerInfo,u,w,D);break;case 5:Fe(b.type,b.memoizedProps,b.stateNode,u,w,D)}_&&no(c)}else c.stateNode=Ue(w,u,_,c)}return mr(c),null;case 13:if(Ft(en),w=c.memoizedState,Hn&&ni!==null&&c.mode&1&&!(c.flags&128)){for(u=ni;u;)u=Ir(u);return Co(),c.flags|=98560,c}if(w!==null&&w.dehydrated!==null){if(w=ja(c),u===null){if(!w)throw Error(o(318));if(!Ne)throw Error(o(344));if(u=c.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));H(u,c)}else Co(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return mr(c),null}return Wr!==null&&(md(Wr),Wr=null),c.flags&128?(c.lanes=_,c):(w=w!==null,_=!1,u===null?ja(c):_=u.memoizedState!==null,w&&!_&&(c.child.flags|=8192,c.mode&1&&(u===null||en.current&1?Er===0&&(Er=3):gd())),c.updateQueue!==null&&(c.flags|=4),mr(c),null);case 4:return we(),yc(u,c),u===null&&Ve(c.stateNode.containerInfo),mr(c),null;case 10:return kl(c.type._context),mr(c),null;case 17:return Tn(c.type)&&Un(),mr(c),null;case 19:if(Ft(en),b=c.memoizedState,b===null)return mr(c),null;if(w=(c.flags&128)!==0,D=b.rendering,D===null)if(w)eu(b,!1);else{if(Er!==0||u!==null&&u.flags&128)for(u=c.child;u!==null;){if(D=hi(u),D!==null){for(c.flags|=128,eu(b,!1),u=D.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),c.subtreeFlags=0,u=_,w=c.child;w!==null;)_=w,b=u,_.flags&=14680066,D=_.alternate,D===null?(_.childLanes=0,_.lanes=b,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=D.childLanes,_.lanes=D.lanes,_.child=D.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=D.memoizedProps,_.memoizedState=D.memoizedState,_.updateQueue=D.updateQueue,_.type=D.type,b=D.dependencies,_.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),w=w.sibling;return gt(en,en.current&1|2),c.child}u=u.sibling}b.tail!==null&&pr()>ad&&(c.flags|=128,w=!0,eu(b,!1),c.lanes=4194304)}else{if(!w)if(u=hi(D),u!==null){if(c.flags|=128,w=!0,u=u.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),eu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!D.alternate&&!Hn)return mr(c),null}else 2*pr()-b.renderingStartTime>ad&&_!==1073741824&&(c.flags|=128,w=!0,eu(b,!1),c.lanes=4194304);b.isBackwards?(D.sibling=c.child,c.child=D):(u=b.last,u!==null?u.sibling=D:c.child=D,b.last=D)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=pr(),c.sibling=null,u=en.current,gt(en,w?u&1|2:u&1),c):(mr(c),null);case 22:case 23:return im(),w=c.memoizedState!==null,u!==null&&u.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?Vi&1073741824&&(mr(c),Ge&&c.subtreeFlags&6&&(c.flags|=8192)):mr(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var Fp=a.ReactCurrentOwner,Gi=!1;function gr(u,c,_,w){c.child=u===null?Nf(c,null,_,w):la(c,u.child,_,w)}function Np(u,c,_,w,b){_=_.render;var D=c.ref;return $r(c,b),w=gc(u,c,_,w,D,b),_=bp(),u!==null&&!Gi?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~b,bo(u,c,b)):(Hn&&_&&dc(c),c.flags|=1,gr(u,c,w,b),c.child)}function K0(u,c,_,w,b){if(u===null){var D=_.type;return typeof D=="function"&&!sm(D)&&D.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(c.tag=15,c.type=D,Up(u,c,D,w,b)):(u=su(_.type,null,w,c,c.mode,b),u.ref=c.ref,u.return=c,c.child=u)}if(D=u.child,!(u.lanes&b)){var q=D.memoizedProps;if(_=_.compare,_=_!==null?_:ka,_(q,w)&&u.ref===c.ref)return bo(u,c,b)}return c.flags|=1,u=ha(D,w),u.ref=c.ref,u.return=c,c.child=u}function Up(u,c,_,w,b){if(u!==null&&ka(u.memoizedProps,w)&&u.ref===c.ref)if(Gi=!1,(u.lanes&b)!==0)u.flags&131072&&(Gi=!0);else return c.lanes=u.lanes,bo(u,c,b);return kp(u,c,_,w,b)}function Y0(u,c,_){var w=c.pendingProps,b=w.children,D=u!==null?u.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},gt(nu,Vi),Vi|=_;else if(_&1073741824)c.memoizedState={baseLanes:0,cachePool:null},w=D!==null?D.baseLanes:_,gt(nu,Vi),Vi|=w;else return u=D!==null?D.baseLanes|_:_,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:u,cachePool:null},c.updateQueue=null,gt(nu,Vi),Vi|=u,null;else D!==null?(w=D.baseLanes|_,c.memoizedState=null):w=_,gt(nu,Vi),Vi|=w;return gr(u,c,b,_),c.child}function q0(u,c){var _=c.ref;(u===null&&_!==null||u!==null&&u.ref!==_)&&(c.flags|=512,c.flags|=2097152)}function kp(u,c,_,w,b){var D=Tn(_)?dn:vn.current;return D=cn(c,D),$r(c,b),_=gc(u,c,_,w,D,b),w=bp(),u!==null&&!Gi?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~b,bo(u,c,b)):(Hn&&w&&dc(c),c.flags|=1,gr(u,c,_,b),c.child)}function zp(u,c,_,w,b){if(Tn(_)){var D=!0;mn(c)}else D=!1;if($r(c,b),c.stateNode===null)u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),Ff(c,_,w),fc(c,_,w,b),w=!0;else if(u===null){var q=c.stateNode,pe=c.memoizedProps;q.props=pe;var Re=q.context,$e=_.contextType;typeof $e=="object"&&$e!==null?$e=Lr($e):($e=Tn(_)?dn:vn.current,$e=cn(c,$e));var _t=_.getDerivedStateFromProps,Xt=typeof _t=="function"||typeof q.getSnapshotBeforeUpdate=="function";Xt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(pe!==w||Re!==$e)&&cc(c,q,w,$e),as=!1;var Ot=c.memoizedState;q.state=Ot,Hl(c,w,q,b),Re=c.memoizedState,pe!==w||Ot!==Re||kt.current||as?(typeof _t=="function"&&(uc(c,_,_t,w),Re=c.memoizedState),(pe=as||Vl(c,_,pe,w,Ot,Re,$e))?(Xt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(c.flags|=4194308)):(typeof q.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Re),q.props=w,q.state=Re,q.context=$e,w=pe):(typeof q.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{q=c.stateNode,lc(u,c),pe=c.memoizedProps,$e=c.type===c.elementType?pe:Ai(c.type,pe),q.props=$e,Xt=c.pendingProps,Ot=q.context,Re=_.contextType,typeof Re=="object"&&Re!==null?Re=Lr(Re):(Re=Tn(_)?dn:vn.current,Re=cn(c,Re));var Ln=_.getDerivedStateFromProps;(_t=typeof Ln=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(pe!==Xt||Ot!==Re)&&cc(c,q,w,Re),as=!1,Ot=c.memoizedState,q.state=Ot,Hl(c,w,q,b);var Pt=c.memoizedState;pe!==Xt||Ot!==Pt||kt.current||as?(typeof Ln=="function"&&(uc(c,_,Ln,w),Pt=c.memoizedState),($e=as||Vl(c,_,$e,w,Ot,Pt,Re)||!1)?(_t||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(w,Pt,Re),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(w,Pt,Re)),typeof q.componentDidUpdate=="function"&&(c.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof q.componentDidUpdate!="function"||pe===u.memoizedProps&&Ot===u.memoizedState||(c.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||pe===u.memoizedProps&&Ot===u.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Pt),q.props=w,q.state=Pt,q.context=Re,w=$e):(typeof q.componentDidUpdate!="function"||pe===u.memoizedProps&&Ot===u.memoizedState||(c.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||pe===u.memoizedProps&&Ot===u.memoizedState||(c.flags|=1024),w=!1)}return Hp(u,c,_,w,D,b)}function Hp(u,c,_,w,b,D){q0(u,c);var q=(c.flags&128)!==0;if(!w&&!q)return b&&an(c,_,!1),bo(u,c,D);w=c.stateNode,Fp.current=c;var pe=q&&typeof _.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,u!==null&&q?(c.child=la(c,u.child,null,D),c.child=la(c,null,pe,D)):gr(u,c,pe,D),c.memoizedState=w.state,b&&an(c,_,!0),c.child}function Gp(u){var c=u.stateNode;c.pendingContext?Wt(u,c.pendingContext,c.pendingContext!==c.context):c.context&&Wt(u,c.context,!1),ue(u,c.containerInfo)}function Q0(u,c,_,w,b){return Co(),Xl(b),c.flags|=256,gr(u,c,_,w),c.child}var Kf={dehydrated:null,treeContext:null,retryLane:0};function Yf(u){return{baseLanes:u,cachePool:null}}function Z0(u,c,_){var w=c.pendingProps,b=en.current,D=!1,q=(c.flags&128)!==0,pe;if((pe=q)||(pe=u!==null&&u.memoizedState===null?!1:(b&2)!==0),pe?(D=!0,c.flags&=-129):(u===null||u.memoizedState!==null)&&(b|=1),gt(en,b&1),u===null)return An(c),u=c.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(c.mode&1?ts(u)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(b=w.children,u=w.fallback,D?(w=c.mode,D=c.child,b={mode:"hidden",children:b},!(w&1)&&D!==null?(D.childLanes=0,D.pendingProps=b):D=ou(b,w,0,null),u=$a(u,w,_,null),D.return=c,u.return=c,D.sibling=u,c.child=D,c.child.memoizedState=Yf(_),c.memoizedState=Kf,u):Vp(c,b));if(b=u.memoizedState,b!==null){if(pe=b.dehydrated,pe!==null){if(q)return c.flags&256?(c.flags&=-257,ca(u,c,_,Error(o(422)))):c.memoizedState!==null?(c.child=u.child,c.flags|=128,null):(D=w.fallback,b=c.mode,w=ou({mode:"visible",children:w.children},b,0,null),D=$a(D,b,_,null),D.flags|=2,w.return=c,D.return=c,w.sibling=D,c.child=w,c.mode&1&&la(c,u.child,null,_),c.child.memoizedState=Yf(_),c.memoizedState=Kf,D);if(!(c.mode&1))c=ca(u,c,_,null);else if(ts(pe))c=ca(u,c,_,Error(o(419)));else if(w=(_&u.childLanes)!==0,Gi||w){if(w=ar,w!==null){switch(_&-_){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}w=D&(w.suspendedLanes|_)?0:D,w!==0&&w!==b.retryLane&&(b.retryLane=w,cs(u,w,-1))}gd(),c=ca(u,c,_,Error(o(421)))}else ws(pe)?(c.flags|=128,c.child=u.child,c=$x.bind(null,u),ns(pe,c),c=null):(_=b.treeContext,Ne&&(ni=Fa(pe),di=c,Hn=!0,Wr=null,qn=!1,_!==null&&(Vr[bn++]=zi,Vr[bn++]=ls,Vr[bn++]=To,zi=_.id,ls=_.overflow,To=c)),c=Vp(c,c.pendingProps.children),c.flags|=4096);return c}return D?(w=ev(u,c,w.children,w.fallback,_),D=c.child,b=u.child.memoizedState,D.memoizedState=b===null?Yf(_):{baseLanes:b.baseLanes|_,cachePool:null},D.childLanes=u.childLanes&~_,c.memoizedState=Kf,w):(_=$0(u,c,w.children,_),c.memoizedState=null,_)}return D?(w=ev(u,c,w.children,w.fallback,_),D=c.child,b=u.child.memoizedState,D.memoizedState=b===null?Yf(_):{baseLanes:b.baseLanes|_,cachePool:null},D.childLanes=u.childLanes&~_,c.memoizedState=Kf,w):(_=$0(u,c,w.children,_),c.memoizedState=null,_)}function Vp(u,c){return c=ou({mode:"visible",children:c},u.mode,0,null),c.return=u,u.child=c}function $0(u,c,_,w){var b=u.child;return u=b.sibling,_=ha(b,{mode:"visible",children:_}),!(c.mode&1)&&(_.lanes=w),_.return=c,_.sibling=null,u!==null&&(w=c.deletions,w===null?(c.deletions=[u],c.flags|=16):w.push(u)),c.child=_}function ev(u,c,_,w,b){var D=c.mode;u=u.child;var q=u.sibling,pe={mode:"hidden",children:_};return!(D&1)&&c.child!==u?(_=c.child,_.childLanes=0,_.pendingProps=pe,c.deletions=null):(_=ha(u,pe),_.subtreeFlags=u.subtreeFlags&14680064),q!==null?w=ha(q,w):(w=$a(w,D,b,null),w.flags|=2),w.return=c,_.return=c,_.sibling=w,c.child=_,w}function ca(u,c,_,w){return w!==null&&Xl(w),la(c,u.child,null,_),u=Vp(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function tv(u,c,_){u.lanes|=c;var w=u.alternate;w!==null&&(w.lanes|=c),ac(u.return,c,_)}function Wp(u,c,_,w,b){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:_,tailMode:b}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=w,D.tail=_,D.tailMode=b)}function nv(u,c,_){var w=c.pendingProps,b=w.revealOrder,D=w.tail;if(gr(u,c,w.children,_),w=en.current,w&2)w=w&1|2,c.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&tv(u,_,c);else if(u.tag===19)tv(u,_,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}if(gt(en,w),!(c.mode&1))c.memoizedState=null;else switch(b){case"forwards":for(_=c.child,b=null;_!==null;)u=_.alternate,u!==null&&hi(u)===null&&(b=_),_=_.sibling;_=b,_===null?(b=c.child,c.child=null):(b=_.sibling,_.sibling=null),Wp(c,!1,b,_,D);break;case"backwards":for(_=null,b=c.child,c.child=null;b!==null;){if(u=b.alternate,u!==null&&hi(u)===null){c.child=b;break}u=b.sibling,b.sibling=_,_=b,b=u}Wp(c,!0,_,null,D);break;case"together":Wp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bo(u,c,_){if(u!==null&&(c.dependencies=u.dependencies),ru|=c.lanes,!(_&c.childLanes))return null;if(u!==null&&c.child!==u.child)throw Error(o(153));if(c.child!==null){for(u=c.child,_=ha(u,u.pendingProps),c.child=_,_.return=c;u.sibling!==null;)u=u.sibling,_=_.sibling=ha(u,u.pendingProps),_.return=c;_.sibling=null}return c.child}function Gx(u,c,_){switch(c.tag){case 3:Gp(c),Co();break;case 5:Nt(c);break;case 1:Tn(c.type)&&mn(c);break;case 4:ue(c,c.stateNode.containerInfo);break;case 10:na(c,c.type._context,c.memoizedProps.value);break;case 13:var w=c.memoizedState;if(w!==null)return w.dehydrated!==null?(gt(en,en.current&1),c.flags|=128,null):_&c.child.childLanes?Z0(u,c,_):(gt(en,en.current&1),u=bo(u,c,_),u!==null?u.sibling:null);gt(en,en.current&1);break;case 19:if(w=(_&c.childLanes)!==0,u.flags&128){if(w)return nv(u,c,_);c.flags|=128}var b=c.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),gt(en,en.current),w)break;return null;case 22:case 23:return c.lanes=0,Y0(u,c,_)}return bo(u,c,_)}function Vx(u,c){switch(hc(c),c.tag){case 1:return Tn(c.type)&&Un(),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return we(),Ft(kt),Ft(vn),Zs(),u=c.flags,u&65536&&!(u&128)?(c.flags=u&-65537|128,c):null;case 5:return hn(c),null;case 13:if(Ft(en),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(o(340));Co()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return Ft(en),null;case 4:return we(),null;case 10:return kl(c.type._context),null;case 22:case 23:return im(),null;case 24:return null;default:return null}}var qf=!1,Ro=!1,Wx=typeof WeakSet=="function"?WeakSet:Set,at=null;function Qf(u,c){var _=u.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(w){pi(u,c,w)}else _.current=null}function _c(u,c,_){try{_()}catch(w){pi(u,c,w)}}var rv=!1;function jx(u,c){for(fe(u.containerInfo),at=c;at!==null;)if(u=at,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,at=c;else for(;at!==null;){u=at;try{var _=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,b=_.memoizedState,D=u.stateNode,q=D.getSnapshotBeforeUpdate(u.elementType===u.type?w:Ai(u.type,w),b);D.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Ge&&Ze(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(pe){pi(u,u.return,pe)}if(c=u.sibling,c!==null){c.return=u.return,at=c;break}at=u.return}return _=rv,rv=!1,_}function Ya(u,c,_){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var b=w=w.next;do{if((b.tag&u)===u){var D=b.destroy;b.destroy=void 0,D!==void 0&&_c(c,_,D)}b=b.next}while(b!==w)}}function tu(u,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var _=c=c.next;do{if((_.tag&u)===u){var w=_.create;_.destroy=w()}_=_.next}while(_!==c)}}function jp(u){var c=u.ref;if(c!==null){var _=u.stateNode;switch(u.tag){case 5:u=ce(_);break;default:u=_}typeof c=="function"?c(u):c.current=u}}function iv(u,c,_){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(Fl,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(u=c.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var w=u=u.next;do{var b=w,D=b.destroy;b=b.tag,D!==void 0&&(b&2||b&4)&&_c(c,_,D),w=w.next}while(w!==u)}break;case 1:if(Qf(c,_),u=c.stateNode,typeof u.componentWillUnmount=="function")try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(q){pi(c,_,q)}break;case 5:Qf(c,_);break;case 4:Ge?uv(u,c,_):$&&$&&(c=c.stateNode.containerInfo,_=$t(c),ci(c,_))}}function sv(u,c,_){for(var w=c;;)if(iv(u,w,_),w.child===null||Ge&&w.tag===4){if(w===c)break;for(;w.sibling===null;){if(w.return===null||w.return===c)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function ov(u){var c=u.alternate;c!==null&&(u.alternate=null,ov(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&vt(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function av(u){return u.tag===5||u.tag===3||u.tag===4}function Xp(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||av(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function lv(u){if(Ge){e:{for(var c=u.return;c!==null;){if(av(c))break e;c=c.return}throw Error(o(160))}var _=c;switch(_.tag){case 5:c=_.stateNode,_.flags&32&&(It(c),_.flags&=-33),_=Xp(u),Kp(u,_,c);break;case 3:case 4:c=_.stateNode.containerInfo,_=Xp(u),Jp(u,_,c);break;default:throw Error(o(161))}}}function Jp(u,c,_){var w=u.tag;if(w===5||w===6)u=u.stateNode,c?pt(_,u,c):xt(_,u);else if(w!==4&&(u=u.child,u!==null))for(Jp(u,c,_),u=u.sibling;u!==null;)Jp(u,c,_),u=u.sibling}function Kp(u,c,_){var w=u.tag;if(w===5||w===6)u=u.stateNode,c?ct(_,u,c):Ke(_,u);else if(w!==4&&(u=u.child,u!==null))for(Kp(u,c,_),u=u.sibling;u!==null;)Kp(u,c,_),u=u.sibling}function uv(u,c,_){for(var w=c,b=!1,D,q;;){if(!b){b=w.return;e:for(;;){if(b===null)throw Error(o(160));switch(D=b.stateNode,b.tag){case 5:q=!1;break e;case 3:D=D.containerInfo,q=!0;break e;case 4:D=D.containerInfo,q=!0;break e}b=b.return}b=!0}if(w.tag===5||w.tag===6)sv(u,w,_),q?mt(D,w.stateNode):yt(D,w.stateNode);else if(w.tag===18)q?Se(D,w.stateNode):ye(D,w.stateNode);else if(w.tag===4){if(w.child!==null){D=w.stateNode.containerInfo,q=!0,w.child.return=w,w=w.child;continue}}else if(iv(u,w,_),w.child!==null){w.child.return=w,w=w.child;continue}if(w===c)break;for(;w.sibling===null;){if(w.return===null||w.return===c)return;w=w.return,w.tag===4&&(b=!1)}w.sibling.return=w.return,w=w.sibling}}function Yp(u,c){if(Ge){switch(c.tag){case 0:case 11:case 14:case 15:Ya(3,c,c.return),tu(3,c),Ya(5,c,c.return);return;case 1:return;case 5:var _=c.stateNode;if(_!=null){var w=c.memoizedProps;u=u!==null?u.memoizedProps:w;var b=c.type,D=c.updateQueue;c.updateQueue=null,D!==null&&bt(_,D,b,u,w,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));_=c.memoizedProps,Qe(c.stateNode,u!==null?u.memoizedProps:_,_);return;case 3:Ne&&u!==null&&u.memoizedState.isDehydrated&&X(c.stateNode.containerInfo);return;case 12:return;case 13:Zf(c);return;case 19:Zf(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:Ya(3,c,c.return),tu(3,c),Ya(5,c,c.return);return;case 12:return;case 13:Zf(c);return;case 19:Zf(c);return;case 3:Ne&&u!==null&&u.memoizedState.isDehydrated&&X(c.stateNode.containerInfo);break;case 22:case 23:return}e:if($){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,ci(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function Zf(u){var c=u.updateQueue;if(c!==null){u.updateQueue=null;var _=u.stateNode;_===null&&(_=u.stateNode=new Wx),c.forEach(function(w){var b=Sv.bind(null,u,w);_.has(w)||(_.add(w),w.then(b,b))})}}function Xx(u,c){for(at=c;at!==null;){c=at;var _=c.deletions;if(_!==null)for(var w=0;w<_.length;w++){var b=_[w];try{var D=u;Ge?uv(D,b,c):sv(D,b,c);var q=b.alternate;q!==null&&(q.return=null),b.return=null}catch(Tt){pi(b,c,Tt)}}if(_=c.child,c.subtreeFlags&12854&&_!==null)_.return=c,at=_;else for(;at!==null;){c=at;try{var pe=c.flags;if(pe&32&&Ge&&It(c.stateNode),pe&512){var Re=c.alternate;if(Re!==null){var $e=Re.ref;$e!==null&&(typeof $e=="function"?$e(null):$e.current=null)}}if(pe&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var _t=c.alternate;(_t===null||_t.memoizedState===null)&&(em=pr())}break;case 22:var Xt=c.memoizedState!==null,Ot=c.alternate,Ln=Ot!==null&&Ot.memoizedState!==null;if(_=c,Ge){e:if(w=_,b=Xt,D=null,Ge)for(var Pt=w;;){if(Pt.tag===5){if(D===null){D=Pt;var si=Pt.stateNode;b?Ut(si):Ae(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(D===null){var Wi=Pt.stateNode;b?de(Wi):Me(Wi,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===w)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===w)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===w)break e;D===Pt&&(D=null),Pt=Pt.return}D===Pt&&(D=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(Xt&&!Ln&&_.mode&1){at=_;for(var xe=_.child;xe!==null;){for(_=at=xe;at!==null;){w=at;var me=w.child;switch(w.tag){case 0:case 11:case 14:case 15:Ya(4,w,w.return);break;case 1:Qf(w,w.return);var Te=w.stateNode;if(typeof Te.componentWillUnmount=="function"){var ht=w.return;try{Te.props=w.memoizedProps,Te.state=w.memoizedState,Te.componentWillUnmount()}catch(Tt){pi(w,ht,Tt)}}break;case 5:Qf(w,w.return);break;case 22:if(w.memoizedState!==null){dv(_);continue}}me!==null?(me.return=w,at=me):dv(_)}xe=xe.sibling}}}switch(pe&4102){case 2:lv(c),c.flags&=-3;break;case 6:lv(c),c.flags&=-3,Yp(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,Yp(c.alternate,c);break;case 4:Yp(c.alternate,c)}}catch(Tt){pi(c,c.return,Tt)}if(_=c.sibling,_!==null){_.return=c.return,at=_;break}at=c.return}}}function Jx(u,c,_){at=u,cv(u)}function cv(u,c,_){for(var w=(u.mode&1)!==0;at!==null;){var b=at,D=b.child;if(b.tag===22&&w){var q=b.memoizedState!==null||qf;if(!q){var pe=b.alternate,Re=pe!==null&&pe.memoizedState!==null||Ro;pe=qf;var $e=Ro;if(qf=q,(Ro=Re)&&!$e)for(at=b;at!==null;)q=at,Re=q.child,q.tag===22&&q.memoizedState!==null?$f(b):Re!==null?(Re.return=q,at=Re):$f(b);for(;D!==null;)at=D,cv(D),D=D.sibling;at=b,qf=pe,Ro=$e}fv(u)}else b.subtreeFlags&8772&&D!==null?(D.return=b,at=D):fv(u)}}function fv(u){for(;at!==null;){var c=at;if(c.flags&8772){var _=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ro||tu(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ro)if(_===null)w.componentDidMount();else{var b=c.elementType===c.type?_.memoizedProps:Ai(c.type,_.memoizedProps);w.componentDidUpdate(b,_.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var D=c.updateQueue;D!==null&&Ys(c,D,w);break;case 3:var q=c.updateQueue;if(q!==null){if(_=null,c.child!==null)switch(c.child.tag){case 5:_=ce(c.child.stateNode);break;case 1:_=c.child.stateNode}Ys(c,q,_)}break;case 5:var pe=c.stateNode;_===null&&c.flags&4&&Ee(pe,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Ne&&c.memoizedState===null){var Re=c.alternate;if(Re!==null){var $e=Re.memoizedState;if($e!==null){var _t=$e.dehydrated;_t!==null&&Q(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ro||c.flags&512&&jp(c)}catch(Xt){pi(c,c.return,Xt)}}if(c===u){at=null;break}if(_=c.sibling,_!==null){_.return=c.return,at=_;break}at=c.return}}function dv(u){for(;at!==null;){var c=at;if(c===u){at=null;break}var _=c.sibling;if(_!==null){_.return=c.return,at=_;break}at=c.return}}function $f(u){for(;at!==null;){var c=at;try{switch(c.tag){case 0:case 11:case 15:var _=c.return;try{tu(4,c)}catch(Re){pi(c,_,Re)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var b=c.return;try{w.componentDidMount()}catch(Re){pi(c,b,Re)}}var D=c.return;try{jp(c)}catch(Re){pi(c,D,Re)}break;case 5:var q=c.return;try{jp(c)}catch(Re){pi(c,q,Re)}}}catch(Re){pi(c,c.return,Re)}if(c===u){at=null;break}var pe=c.sibling;if(pe!==null){pe.return=c.return,at=pe;break}at=c.return}}var ed=0,td=1,xc=2,nd=3,rd=4;if(typeof Symbol=="function"&&Symbol.for){var Sc=Symbol.for;ed=Sc("selector.component"),td=Sc("selector.has_pseudo_class"),xc=Sc("selector.role"),nd=Sc("selector.test_id"),rd=Sc("selector.text")}function qp(u){var c=Be(u);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(u=jt(u),u===null)throw Error(o(362));return u.stateNode.current}function Qp(u,c){switch(c.$$typeof){case ed:if(u.type===c.value)return!0;break;case td:e:{c=c.value,u=[u,0];for(var _=0;_<u.length;){var w=u[_++],b=u[_++],D=c[b];if(w.tag!==5||!G(w)){for(;D!=null&&Qp(w,D);)b++,D=c[b];if(b===c.length){c=!0;break e}else for(w=w.child;w!==null;)u.push(w,b),w=w.sibling}}c=!1}return c;case xc:if(u.tag===5&&_e(u.stateNode,c.value))return!0;break;case rd:if((u.tag===5||u.tag===6)&&(u=Z(u),u!==null&&0<=u.indexOf(c.value)))return!0;break;case nd:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Zp(u){switch(u.$$typeof){case ed:return"<"+(O(u.value)||"Unknown")+">";case td:return":has("+(Zp(u)||"")+")";case xc:return'[role="'+u.value+'"]';case rd:return'"'+u.value+'"';case nd:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function id(u,c){var _=[];u=[u,0];for(var w=0;w<u.length;){var b=u[w++],D=u[w++],q=c[D];if(b.tag!==5||!G(b)){for(;q!=null&&Qp(b,q);)D++,q=c[D];if(D===c.length)_.push(b);else for(b=b.child;b!==null;)u.push(b,D),b=b.sibling}}return _}function Ac(u,c){if(!Ct)throw Error(o(363));u=qp(u),u=id(u,c),c=[],u=Array.from(u);for(var _=0;_<u.length;){var w=u[_++];if(w.tag===5)G(w)||c.push(w.stateNode);else for(w=w.child;w!==null;)u.push(w),w=w.sibling}return c}var Kx=Math.ceil,Mc=a.ReactCurrentDispatcher,sd=a.ReactCurrentOwner,rr=a.ReactCurrentBatchConfig,tn=0,ar=null,lr=null,jr=0,Vi=0,nu=lt(0),Er=0,Ec=null,ru=0,od=0,$p=0,wc=null,Ei=null,em=0,ad=1/0;function iu(){ad=pr()+500}var ld=!1,tm=null,fa=null,ud=!1,da=null,cd=0,Tc=0,nm=null,fd=-1,dd=0;function vr(){return tn&6?pr():fd!==-1?fd:fd=pr()}function us(u){return u.mode&1?tn&2&&jr!==0?jr&-jr:Tp.transition!==null?(dd===0&&(u=ea,ea<<=1,!(ea&4194240)&&(ea=64),dd=u),dd):(u=ln,u!==0?u:He()):1}function cs(u,c,_){if(50<Tc)throw Tc=0,nm=null,Error(o(185));var w=hd(u,c);return w===null?null:(Ua(w,c,_),(!(tn&2)||w!==ar)&&(w===ar&&(!(tn&2)&&(od|=c),Er===4&&Po(w,jr)),wi(w,_),c===1&&tn===0&&!(u.mode&1)&&(iu(),Nl&&os())),w)}function hd(u,c){u.lanes|=c;var _=u.alternate;for(_!==null&&(_.lanes|=c),_=u,u=u.return;u!==null;)u.childLanes|=c,_=u.alternate,_!==null&&(_.childLanes|=c),_=u,u=u.return;return _.tag===3?_.stateNode:null}function wi(u,c){var _=u.callbackNode;Na(u,c);var w=Eo(u,u===ar?jr:0);if(w===0)_!==null&&ic(_),u.callbackNode=null,u.callbackPriority=0;else if(c=w&-w,u.callbackPriority!==c){if(_!=null&&ic(_),c===1)u.tag===0?wp(rm.bind(null,u)):Df(rm.bind(null,u)),st?ft(function(){tn===0&&os()}):Dl(sc,os),_=null;else{switch(rc(w)){case 1:_=sc;break;case 4:_=Ap;break;case 16:_=Ks;break;case 536870912:_=Ol;break;default:_=Ks}_=_d(_,hv.bind(null,u))}u.callbackPriority=c,u.callbackNode=_}}function hv(u,c){if(fd=-1,dd=0,tn&6)throw Error(o(327));var _=u.callbackNode;if(Za()&&u.callbackNode!==_)return null;var w=Eo(u,u===ar?jr:0);if(w===0)return null;if(w&30||w&u.expiredLanes||c)c=vd(u,w);else{c=w;var b=tn;tn|=2;var D=gv();(ar!==u||jr!==c)&&(iu(),qa(u,c));do try{vv();break}catch(pe){mv(u,pe)}while(1);Ga(),Mc.current=D,tn=b,lr!==null?c=0:(ar=null,jr=0,c=Er)}if(c!==0){if(c===2&&(b=ec(u),b!==0&&(w=b,c=pd(u,b))),c===1)throw _=Ec,qa(u,0),Po(u,w),wi(u,pr()),_;if(c===6)Po(u,w);else{if(b=u.current.alternate,!(w&30)&&!Yx(b)&&(c=vd(u,w),c===2&&(D=ec(u),D!==0&&(w=D,c=pd(u,D))),c===1))throw _=Ec,qa(u,0),Po(u,w),wi(u,pr()),_;switch(u.finishedWork=b,u.finishedLanes=w,c){case 0:case 1:throw Error(o(345));case 2:Qa(u,Ei);break;case 3:if(Po(u,w),(w&130023424)===w&&(c=em+500-pr(),10<c)){if(Eo(u,0)!==0)break;if(b=u.suspendedLanes,(b&w)!==w){vr(),u.pingedLanes|=u.suspendedLanes&b;break}u.timeoutHandle=Xe(Qa.bind(null,u,Ei),c);break}Qa(u,Ei);break;case 4:if(Po(u,w),(w&4194240)===w)break;for(c=u.eventTimes,b=-1;0<w;){var q=31-kn(w);D=1<<q,q=c[q],q>b&&(b=q),w&=~D}if(w=b,w=pr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Kx(w/1960))-w,10<w){u.timeoutHandle=Xe(Qa.bind(null,u,Ei),w);break}Qa(u,Ei);break;case 5:Qa(u,Ei);break;default:throw Error(o(329))}}}return wi(u,pr()),u.callbackNode===_?hv.bind(null,u):null}function pd(u,c){var _=wc;return u.current.memoizedState.isDehydrated&&(qa(u,c).flags|=256),u=vd(u,c),u!==2&&(c=Ei,Ei=_,c!==null&&md(c)),u}function md(u){Ei===null?Ei=u:Ei.push.apply(Ei,u)}function Yx(u){for(var c=u;;){if(c.flags&16384){var _=c.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var w=0;w<_.length;w++){var b=_[w],D=b.getSnapshot;b=b.value;try{if(!ss(D(),b))return!1}catch{return!1}}}if(_=c.child,c.subtreeFlags&16384&&_!==null)_.return=c,c=_;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Po(u,c){for(c&=~$p,c&=~od,u.suspendedLanes|=c,u.pingedLanes&=~c,u=u.expirationTimes;0<c;){var _=31-kn(c),w=1<<_;u[_]=-1,c&=~w}}function rm(u){if(tn&6)throw Error(o(327));Za();var c=Eo(u,0);if(!(c&1))return wi(u,pr()),null;var _=vd(u,c);if(u.tag!==0&&_===2){var w=ec(u);w!==0&&(c=w,_=pd(u,w))}if(_===1)throw _=Ec,qa(u,0),Po(u,c),wi(u,pr()),_;if(_===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=c,Qa(u,Ei),wi(u,pr()),null}function pv(u){da!==null&&da.tag===0&&!(tn&6)&&Za();var c=tn;tn|=1;var _=rr.transition,w=ln;try{if(rr.transition=null,ln=1,u)return u()}finally{ln=w,rr.transition=_,tn=c,!(tn&6)&&os()}}function im(){Vi=nu.current,Ft(nu)}function qa(u,c){u.finishedWork=null,u.finishedLanes=0;var _=u.timeoutHandle;if(_!==Gt&&(u.timeoutHandle=Gt,rt(_)),lr!==null)for(_=lr.return;_!==null;){var w=_;switch(hc(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Un();break;case 3:we(),Ft(kt),Ft(vn),Zs();break;case 5:hn(w);break;case 4:we();break;case 13:Ft(en);break;case 19:Ft(en);break;case 10:kl(w.type._context);break;case 22:case 23:im()}_=_.return}if(ar=u,lr=u=ha(u.current,null),jr=Vi=c,Er=0,Ec=null,$p=od=ru=0,Ei=wc=null,fi!==null){for(c=0;c<fi.length;c++)if(_=fi[c],w=_.interleaved,w!==null){_.interleaved=null;var b=w.next,D=_.pending;if(D!==null){var q=D.next;D.next=b,w.next=q}_.pending=w}fi=null}return u}function mv(u,c){do{var _=lr;try{if(Ga(),$s.current=Wf,Uf){for(var w=nr.memoizedState;w!==null;){var b=w.queue;b!==null&&(b.pending=null),w=w.next}Uf=!1}if(ql=0,Dr=ri=nr=null,pc=!1,mc=0,sd.current=null,_===null||_.return===null){Er=1,Ec=c,lr=null;break}e:{var D=u,q=_.return,pe=_,Re=c;if(c=jr,pe.flags|=32768,Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var $e=Re,_t=pe,Xt=_t.tag;if(!(_t.mode&1)&&(Xt===0||Xt===11||Xt===15)){var Ot=_t.alternate;Ot?(_t.updateQueue=Ot.updateQueue,_t.memoizedState=Ot.memoizedState,_t.lanes=Ot.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var Ln=j0(q);if(Ln!==null){Ln.flags&=-257,X0(Ln,q,pe,D,c),Ln.mode&1&&W0(D,$e,c),c=Ln,Re=$e;var Pt=c.updateQueue;if(Pt===null){var si=new Set;si.add(Re),c.updateQueue=si}else Pt.add(Re);break e}else{if(!(c&1)){W0(D,$e,c),gd();break e}Re=Error(o(426))}}else if(Hn&&pe.mode&1){var Wi=j0(q);if(Wi!==null){!(Wi.flags&65536)&&(Wi.flags|=256),X0(Wi,q,pe,D,c),Xl(Re);break e}}D=Re,Er!==4&&(Er=2),wc===null?wc=[D]:wc.push(D),Re=Dp(Re,pe),pe=q;do{switch(pe.tag){case 3:pe.flags|=65536,c&=-c,pe.lanes|=c;var xe=G0(pe,Re,c);zl(pe,xe);break e;case 1:D=Re;var me=pe.type,Te=pe.stateNode;if(!(pe.flags&128)&&(typeof me.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(fa===null||!fa.has(Te)))){pe.flags|=65536,c&=-c,pe.lanes|=c;var ht=V0(pe,D,c);zl(pe,ht);break e}}pe=pe.return}while(pe!==null)}yd(_)}catch(Tt){c=Tt,lr===_&&_!==null&&(lr=_=_.return);continue}break}while(1)}function gv(){var u=Mc.current;return Mc.current=Wf,u===null?Wf:u}function gd(){(Er===0||Er===3||Er===2)&&(Er=4),ar===null||!(ru&268435455)&&!(od&268435455)||Po(ar,jr)}function vd(u,c){var _=tn;tn|=2;var w=gv();ar===u&&jr===c||qa(u,c);do try{qx();break}catch(b){mv(u,b)}while(1);if(Ga(),tn=_,Mc.current=w,lr!==null)throw Error(o(261));return ar=null,jr=0,Er}function qx(){for(;lr!==null;)yv(lr)}function vv(){for(;lr!==null&&!xp();)yv(lr)}function yv(u){var c=Av(u.alternate,u,Vi);u.memoizedProps=u.pendingProps,c===null?yd(u):lr=c,sd.current=null}function yd(u){var c=u;do{var _=c.alternate;if(u=c.return,c.flags&32768){if(_=Vx(_,c),_!==null){_.flags&=32767,lr=_;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Er=6,lr=null;return}}else if(_=Hx(_,c,Vi),_!==null){lr=_;return}if(c=c.sibling,c!==null){lr=c;return}lr=c=u}while(c!==null);Er===0&&(Er=5)}function Qa(u,c){var _=ln,w=rr.transition;try{rr.transition=null,ln=1,Qx(u,c,_)}finally{rr.transition=w,ln=_}return null}function Qx(u,c,_){do Za();while(da!==null);if(tn&6)throw Error(o(327));var w=u.finishedWork,b=u.finishedLanes;if(w===null)return null;if(u.finishedWork=null,u.finishedLanes=0,w===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var D=w.lanes|w.childLanes;if(_p(u,D),u===ar&&(lr=ar=null,jr=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||ud||(ud=!0,_d(Ks,function(){return Za(),null})),D=(w.flags&15990)!==0,w.subtreeFlags&15990||D){D=rr.transition,rr.transition=null;var q=ln;ln=1;var pe=tn;tn|=4,sd.current=null,jx(u,w),Xx(u,w),re(u.containerInfo),u.current=w,Jx(w),Sp(),tn=pe,ln=q,rr.transition=D}else u.current=w;if(ud&&(ud=!1,da=u,cd=b),D=u.pendingLanes,D===0&&(fa=null),Mp(w.stateNode),wi(u,pr()),c!==null)for(_=u.onRecoverableError,w=0;w<c.length;w++)_(c[w]);if(ld)throw ld=!1,u=tm,tm=null,u;return cd&1&&u.tag!==0&&Za(),D=u.pendingLanes,D&1?u===nm?Tc++:(Tc=0,nm=u):Tc=0,os(),null}function Za(){if(da!==null){var u=rc(cd),c=rr.transition,_=ln;try{if(rr.transition=null,ln=16>u?16:u,da===null)var w=!1;else{if(u=da,da=null,cd=0,tn&6)throw Error(o(331));var b=tn;for(tn|=4,at=u.current;at!==null;){var D=at,q=D.child;if(at.flags&16){var pe=D.deletions;if(pe!==null){for(var Re=0;Re<pe.length;Re++){var $e=pe[Re];for(at=$e;at!==null;){var _t=at;switch(_t.tag){case 0:case 11:case 15:Ya(8,_t,D)}var Xt=_t.child;if(Xt!==null)Xt.return=_t,at=Xt;else for(;at!==null;){_t=at;var Ot=_t.sibling,Ln=_t.return;if(ov(_t),_t===$e){at=null;break}if(Ot!==null){Ot.return=Ln,at=Ot;break}at=Ln}}}var Pt=D.alternate;if(Pt!==null){var si=Pt.child;if(si!==null){Pt.child=null;do{var Wi=si.sibling;si.sibling=null,si=Wi}while(si!==null)}}at=D}}if(D.subtreeFlags&2064&&q!==null)q.return=D,at=q;else e:for(;at!==null;){if(D=at,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Ya(9,D,D.return)}var xe=D.sibling;if(xe!==null){xe.return=D.return,at=xe;break e}at=D.return}}var me=u.current;for(at=me;at!==null;){q=at;var Te=q.child;if(q.subtreeFlags&2064&&Te!==null)Te.return=q,at=Te;else e:for(q=me;at!==null;){if(pe=at,pe.flags&2048)try{switch(pe.tag){case 0:case 11:case 15:tu(9,pe)}}catch(Tt){pi(pe,pe.return,Tt)}if(pe===q){at=null;break e}var ht=pe.sibling;if(ht!==null){ht.return=pe.return,at=ht;break e}at=pe.return}}if(tn=b,os(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(Fl,u)}catch{}w=!0}return w}finally{ln=_,rr.transition=c}}return!1}function _v(u,c,_){c=Dp(_,c),c=G0(u,c,1),zn(u,c),c=vr(),u=hd(u,1),u!==null&&(Ua(u,1,c),wi(u,c))}function pi(u,c,_){if(u.tag===3)_v(u,u,_);else for(;c!==null;){if(c.tag===3){_v(c,u,_);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(fa===null||!fa.has(w))){u=Dp(_,u),u=V0(c,u,1),zn(c,u),u=vr(),c=hd(c,1),c!==null&&(Ua(c,1,u),wi(c,u));break}}c=c.return}}function Zx(u,c,_){var w=u.pingCache;w!==null&&w.delete(c),c=vr(),u.pingedLanes|=u.suspendedLanes&_,ar===u&&(jr&_)===_&&(Er===4||Er===3&&(jr&130023424)===jr&&500>pr()-em?qa(u,0):$p|=_),wi(u,c)}function xv(u,c){c===0&&(u.mode&1?(c=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):c=1);var _=vr();u=hd(u,c),u!==null&&(Ua(u,c,_),wi(u,_))}function $x(u){var c=u.memoizedState,_=0;c!==null&&(_=c.retryLane),xv(u,_)}function Sv(u,c){var _=0;switch(u.tag){case 13:var w=u.stateNode,b=u.memoizedState;b!==null&&(_=b.retryLane);break;case 19:w=u.stateNode;break;default:throw Error(o(314))}w!==null&&w.delete(c),xv(u,_)}var Av;Av=function(u,c,_){if(u!==null)if(u.memoizedProps!==c.pendingProps||kt.current)Gi=!0;else{if(!(u.lanes&_)&&!(c.flags&128))return Gi=!1,Gx(u,c,_);Gi=!!(u.flags&131072)}else Gi=!1,Hn&&c.flags&1048576&&ti(c,Wa,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps;var b=cn(c,vn.current);$r(c,_),b=gc(null,c,w,u,b,_);var D=bp();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Tn(w)?(D=!0,mn(c)):D=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Cs(c),b.updater=Gl,c.stateNode=b,b._reactInternals=c,fc(c,w,u,_),c=Hp(null,c,w,!0,D,_)):(c.tag=0,Hn&&D&&dc(c),gr(null,c,b,_),c=c.child),c;case 16:w=c.elementType;e:{switch(u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps,b=w._init,w=b(w._payload),c.type=w,b=c.tag=om(w),u=Ai(w,u),b){case 0:c=kp(null,c,w,u,_);break e;case 1:c=zp(null,c,w,u,_);break e;case 11:c=Np(null,c,w,u,_);break e;case 14:c=K0(null,c,w,Ai(w.type,u),_);break e}throw Error(o(306,w,""))}return c;case 0:return w=c.type,b=c.pendingProps,b=c.elementType===w?b:Ai(w,b),kp(u,c,w,b,_);case 1:return w=c.type,b=c.pendingProps,b=c.elementType===w?b:Ai(w,b),zp(u,c,w,b,_);case 3:e:{if(Gp(c),u===null)throw Error(o(387));w=c.pendingProps,D=c.memoizedState,b=D.element,lc(u,c),Hl(c,w,null,_);var q=c.memoizedState;if(w=q.element,Ne&&D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:q.cache,transitions:q.transitions},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){b=Error(o(423)),c=Q0(u,c,w,_,b);break e}else if(w!==b){b=Error(o(424)),c=Q0(u,c,w,_,b);break e}else for(Ne&&(ni=Mo(c.stateNode.containerInfo),di=c,Hn=!0,Wr=null,qn=!1),_=Nf(c,null,w,_),c.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Co(),w===b){c=bo(u,c,_);break e}gr(u,c,w,_)}c=c.child}return c;case 5:return Nt(c),u===null&&An(c),w=c.type,b=c.pendingProps,D=u!==null?u.memoizedProps:null,q=b.children,De(w,b)?q=null:D!==null&&De(w,D)&&(c.flags|=32),q0(u,c),gr(u,c,q,_),c.child;case 6:return u===null&&An(c),null;case 13:return Z0(u,c,_);case 4:return ue(c,c.stateNode.containerInfo),w=c.pendingProps,u===null?c.child=la(c,null,w,_):gr(u,c,w,_),c.child;case 11:return w=c.type,b=c.pendingProps,b=c.elementType===w?b:Ai(w,b),Np(u,c,w,b,_);case 7:return gr(u,c,c.pendingProps,_),c.child;case 8:return gr(u,c,c.pendingProps.children,_),c.child;case 12:return gr(u,c,c.pendingProps.children,_),c.child;case 10:e:{if(w=c.type._context,b=c.pendingProps,D=c.memoizedProps,q=b.value,na(c,w,q),D!==null)if(ss(D.value,q)){if(D.children===b.children&&!kt.current){c=bo(u,c,_);break e}}else for(D=c.child,D!==null&&(D.return=c);D!==null;){var pe=D.dependencies;if(pe!==null){q=D.child;for(var Re=pe.firstContext;Re!==null;){if(Re.context===w){if(D.tag===1){Re=ei(-1,_&-_),Re.tag=2;var $e=D.updateQueue;if($e!==null){$e=$e.shared;var _t=$e.pending;_t===null?Re.next=Re:(Re.next=_t.next,_t.next=Re),$e.pending=Re}}D.lanes|=_,Re=D.alternate,Re!==null&&(Re.lanes|=_),ac(D.return,_,c),pe.lanes|=_;break}Re=Re.next}}else if(D.tag===10)q=D.type===c.type?null:D.child;else if(D.tag===18){if(q=D.return,q===null)throw Error(o(341));q.lanes|=_,pe=q.alternate,pe!==null&&(pe.lanes|=_),ac(q,_,c),q=D.sibling}else q=D.child;if(q!==null)q.return=D;else for(q=D;q!==null;){if(q===c){q=null;break}if(D=q.sibling,D!==null){D.return=q.return,q=D;break}q=q.return}D=q}gr(u,c,b.children,_),c=c.child}return c;case 9:return b=c.type,w=c.pendingProps.children,$r(c,_),b=Lr(b),w=w(b),c.flags|=1,gr(u,c,w,_),c.child;case 14:return w=c.type,b=Ai(w,c.pendingProps),b=Ai(w.type,b),K0(u,c,w,b,_);case 15:return Up(u,c,c.type,c.pendingProps,_);case 17:return w=c.type,b=c.pendingProps,b=c.elementType===w?b:Ai(w,b),u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Tn(w)?(u=!0,mn(c)):u=!1,$r(c,_),Ff(c,w,b),fc(c,w,b,_),Hp(null,c,w,!0,u,_);case 19:return nv(u,c,_);case 22:return Y0(u,c,_)}throw Error(o(156,c.tag))};function _d(u,c){return Dl(u,c)}function eS(u,c,_,w){this.tag=u,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(u,c,_,w){return new eS(u,c,_,w)}function sm(u){return u=u.prototype,!(!u||!u.isReactComponent)}function om(u){if(typeof u=="function")return sm(u)?1:0;if(u!=null){if(u=u.$$typeof,u===E)return 11;if(u===M)return 14}return 2}function ha(u,c){var _=u.alternate;return _===null?(_=fs(u.tag,c,u.key,u.mode),_.elementType=u.elementType,_.type=u.type,_.stateNode=u.stateNode,_.alternate=u,u.alternate=_):(_.pendingProps=c,_.type=u.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=u.flags&14680064,_.childLanes=u.childLanes,_.lanes=u.lanes,_.child=u.child,_.memoizedProps=u.memoizedProps,_.memoizedState=u.memoizedState,_.updateQueue=u.updateQueue,c=u.dependencies,_.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},_.sibling=u.sibling,_.index=u.index,_.ref=u.ref,_}function su(u,c,_,w,b,D){var q=2;if(w=u,typeof u=="function")sm(u)&&(q=1);else if(typeof u=="string")q=5;else e:switch(u){case h:return $a(_.children,b,D,c);case p:q=8,b|=8;break;case m:return u=fs(12,_,c,b|2),u.elementType=m,u.lanes=D,u;case A:return u=fs(13,_,c,b),u.elementType=A,u.lanes=D,u;case y:return u=fs(19,_,c,b),u.elementType=y,u.lanes=D,u;case C:return ou(_,b,D,c);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case v:q=10;break e;case x:q=9;break e;case E:q=11;break e;case M:q=14;break e;case S:q=16,w=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return c=fs(q,_,c,b),c.elementType=u,c.type=w,c.lanes=D,c}function $a(u,c,_,w){return u=fs(7,u,w,c),u.lanes=_,u}function ou(u,c,_,w){return u=fs(22,u,w,c),u.elementType=C,u.lanes=_,u.stateNode={},u}function xd(u,c,_){return u=fs(6,u,null,c),u.lanes=_,u}function am(u,c,_){return c=fs(4,u.children!==null?u.children:[],u.key,c),c.lanes=_,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}function Mv(u,c,_,w,b){this.tag=c,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Gt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=w,this.onRecoverableError=b,Ne&&(this.mutableSourceEagerHydrationData=null)}function lm(u,c,_,w,b,D,q,pe,Re){return u=new Mv(u,c,_,pe,Re),c===1?(c=1,D===!0&&(c|=8)):c=0,D=fs(3,null,null,c),u.current=D,D.stateNode=u,D.memoizedState={element:w,isDehydrated:_,cache:null,transitions:null},Cs(D),u}function um(u){if(!u)return Vt;u=u._reactInternals;e:{if(L(u)!==u||u.tag!==1)throw Error(o(170));var c=u;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Tn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(u.tag===1){var _=u.type;if(Tn(_))return Gn(u,_,c)}return c}function cm(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=ae(c),u===null?null:u.stateNode}function Ev(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var _=u.retryLane;u.retryLane=_!==0&&_<c?_:c}}function fm(u,c){Ev(u,c),(u=u.alternate)&&Ev(u,c)}function tS(u){return u=ae(u),u===null?null:u.stateNode}function nS(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var c=vr();cs(u,134217728,c),fm(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var c=vr(),_=us(u);cs(u,_,c),fm(u,_)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var c=u.stateNode;if(c.current.memoizedState.isDehydrated){var _=is(c.pendingLanes);_!==0&&(nc(c,_|1),wi(c,pr()),!(tn&6)&&(iu(),os()))}break;case 13:var w=vr();pv(function(){return cs(u,1,w)}),fm(u,1)}},t.batchedUpdates=function(u,c){var _=tn;tn|=1;try{return u(c)}finally{tn=_,tn===0&&(iu(),Nl&&os())}},t.createComponentSelector=function(u){return{$$typeof:ed,value:u}},t.createContainer=function(u,c,_,w,b,D,q){return lm(u,c,!1,null,_,w,b,D,q)},t.createHasPseudoClassSelector=function(u){return{$$typeof:td,value:u}},t.createHydrationContainer=function(u,c,_,w,b,D,q,pe,Re){return u=lm(_,w,!0,u,b,D,q,pe,Re),u.context=um(null),_=u.current,w=vr(),b=us(_),D=ei(w,b),D.callback=c??null,zn(_,D),u.current.lanes=b,Ua(u,b,w),wi(u,w),u},t.createPortal=function(u,c,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:w==null?null:""+w,children:u,containerInfo:c,implementation:_}},t.createRoleSelector=function(u){return{$$typeof:xc,value:u}},t.createTestNameSelector=function(u){return{$$typeof:nd,value:u}},t.createTextSelector=function(u){return{$$typeof:rd,value:u}},t.deferredUpdates=function(u){var c=ln,_=rr.transition;try{return rr.transition=null,ln=16,u()}finally{ln=c,rr.transition=_}},t.discreteUpdates=function(u,c,_,w,b){var D=ln,q=rr.transition;try{return rr.transition=null,ln=1,u(c,_,w,b)}finally{ln=D,rr.transition=q,tn===0&&iu()}},t.findAllNodes=Ac,t.findBoundingRects=function(u,c){if(!Ct)throw Error(o(363));c=Ac(u,c),u=[];for(var _=0;_<c.length;_++)u.push(un(c[_]));for(c=u.length-1;0<c;c--){_=u[c];for(var w=_.x,b=w+_.width,D=_.y,q=D+_.height,pe=c-1;0<=pe;pe--)if(c!==pe){var Re=u[pe],$e=Re.x,_t=$e+Re.width,Xt=Re.y,Ot=Xt+Re.height;if(w>=$e&&D>=Xt&&b<=_t&&q<=Ot){u.splice(c,1);break}else if(w!==$e||_.width!==Re.width||Ot<D||Xt>q){if(!(D!==Xt||_.height!==Re.height||_t<w||$e>b)){$e>w&&(Re.width+=$e-w,Re.x=w),_t<b&&(Re.width=b-$e),u.splice(c,1);break}}else{Xt>D&&(Re.height+=Xt-D,Re.y=D),Ot<q&&(Re.height=q-Xt),u.splice(c,1);break}}}return u},t.findHostInstance=cm,t.findHostInstanceWithNoPortals=function(u){return u=W(u),u=u!==null?ie(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return cm(u)},t.flushControlled=function(u){var c=tn;tn|=1;var _=rr.transition,w=ln;try{rr.transition=null,ln=1,u()}finally{ln=w,rr.transition=_,tn=c,tn===0&&(iu(),os())}},t.flushPassiveEffects=Za,t.flushSync=pv,t.focusWithin=function(u,c){if(!Ct)throw Error(o(363));for(u=qp(u),c=id(u,c),c=Array.from(c),u=0;u<c.length;){var _=c[u++];if(!G(_)){if(_.tag===5&&je(_.stateNode))return!0;for(_=_.child;_!==null;)c.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return ln},t.getFindAllNodesFailureDescription=function(u,c){if(!Ct)throw Error(o(363));var _=0,w=[];u=[qp(u),0];for(var b=0;b<u.length;){var D=u[b++],q=u[b++],pe=c[q];if((D.tag!==5||!G(D))&&(Qp(D,pe)&&(w.push(Zp(pe)),q++,q>_&&(_=q)),q<c.length))for(D=D.child;D!==null;)u.push(D,q),D=D.sibling}if(_<c.length){for(u=[];_<c.length;_++)u.push(Zp(c[_]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ce(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:tS,findFiberByHostInstance:u.findFiberByHostInstance||nS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)u=!0;else{try{Fl=c.inject(u),Si=c}catch{}u=!!c.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,c,_,w){if(!Ct)throw Error(o(363));u=Ac(u,c);var b=ke(u,_,w).disconnect;return{disconnect:function(){b()}}},t.registerMutableSourceForHydration=function(u,c){var _=c._getVersion;_=_(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,_]:u.mutableSourceEagerHydrationData.push(c,_)},t.runWithPriority=function(u,c){var _=ln;try{return ln=u,c()}finally{ln=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,c,_,w){var b=c.current,D=vr(),q=us(b);return _=um(_),c.context===null?c.context=_:c.pendingContext=_,c=ei(D,q),c.payload={element:u},w=w===void 0?null:w,w!==null&&(c.callback=w),zn(b,c),u=cs(b,q,D),u!==null&&wo(u,b,q),q},t};bO.exports=oX;var aX=bO.exports;const lX=o1(aX),uX=n=>typeof n=="object"&&typeof n.then=="function",ff=[];function IO(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function BO(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of ff)if(IO(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=ff.indexOf(i);s!==-1&&ff.splice(s,1)},promise:(uX(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(ff.push(i),!t)throw i.promise}const cX=(n,e,t)=>BO(n,e,!1,t),fX=(n,e,t)=>void BO(n,e,!0,t),dX=n=>{if(n===void 0||n.length===0)ff.splice(0,ff.length);else{const e=ff.find(t=>IO(n,t.keys,t.equal));e&&e.remove()}},$T={},LO=n=>void Object.assign($T,n);function hX(n,e){function t(h,{args:p=[],attach:m,...v},x){let E=`${h[0].toUpperCase()}${h.slice(1)}`,A;if(h==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=v.object;A=ih(y,{type:h,root:x,attach:m,primitive:!0})}else{const y=$T[E];if(!y)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");A=ih(new y(...p),{type:h,root:x,attach:m,memoizedProps:{args:p}})}return A.__r3f.attach===void 0&&(A instanceof Zt?A.__r3f.attach="geometry":A instanceof Hr&&(A.__r3f.attach="material")),E!=="inject"&&HA(A,v),A}function r(h,p){let m=!1;if(p){var v,x;(v=p.__r3f)!=null&&v.attach?zA(h,p,p.__r3f.attach):p.isObject3D&&h.isObject3D&&(h.add(p),m=!0),m||(x=h.__r3f)==null||x.objects.push(p),p.__r3f||ih(p,{}),p.__r3f.parent=h,GE(p),sh(p)}}function i(h,p,m){let v=!1;if(p){var x,E;if((x=p.__r3f)!=null&&x.attach)zA(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){p.parent=h,p.dispatchEvent({type:"added"});const A=h.children.filter(M=>M!==p),y=A.indexOf(m);h.children=[...A.slice(0,y),p,...A.slice(y)],v=!0}v||(E=h.__r3f)==null||E.objects.push(p),p.__r3f||ih(p,{}),p.__r3f.parent=h,GE(p),sh(p)}}function s(h,p,m=!1){h&&[...h].forEach(v=>o(p,v,m))}function o(h,p,m){if(p){var v,x,E;if(p.__r3f&&(p.__r3f.parent=null),(v=h.__r3f)!=null&&v.objects&&(h.__r3f.objects=h.__r3f.objects.filter(C=>C!==p)),(x=p.__r3f)!=null&&x.attach)C2(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){var A;h.remove(p),(A=p.__r3f)!=null&&A.root&&SX(v_(p),p)}const M=(E=p.__r3f)==null?void 0:E.primitive,S=!M&&(m===void 0?p.dispose!==null:m);if(!M){var y;s((y=p.__r3f)==null?void 0:y.objects,p,S),s(p.children,p,S)}if(delete p.__r3f,S&&p.dispose&&p.type!=="Scene"){const C=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?zE.unstable_scheduleCallback(zE.unstable_IdlePriority,C):C()}sh(h)}}function a(h,p,m,v){var x;const E=(x=h.__r3f)==null?void 0:x.parent;if(!E)return;const A=t(p,m,h.__r3f.root);if(h.children){for(const y of h.children)y.__r3f&&r(A,y);h.children=h.children.filter(y=>!y.__r3f)}h.__r3f.objects.forEach(y=>r(A,y)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(E,h),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),r(E,A),A.raycast&&A.__r3f.eventCount&&v_(A).getState().internal.interaction.push(A),[v,v.alternate].forEach(y=>{y!==null&&(y.stateNode=A,y.ref&&(typeof y.ref=="function"?y.ref(A):y.ref.current=A))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:lX({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,p)=>{if(!p)return;const m=h.getState().scene;m.__r3f&&(m.__r3f.root=h,r(m,p))},removeChildFromContainer:(h,p)=>{p&&o(h.getState().scene,p)},insertInContainerBefore:(h,p,m)=>{if(!p||!m)return;const v=h.getState().scene;v.__r3f&&i(v,p,m)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var p;return!!((p=h==null?void 0:h.__r3f)!=null?p:{}).handlers},prepareUpdate(h,p,m,v){var x;if(((x=h==null?void 0:h.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==h)return[!0];{const{args:A=[],children:y,...M}=v,{args:S=[],children:C,...I}=m;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((O,z)=>O!==S[z]))return[!0];const B=zO(h,M,I,!0);return B.changes.length?[!1,B]:null}},commitUpdate(h,[p,m],v,x,E,A){p?a(h,v,E,A):HA(h,m)},commitMount(h,p,m,v){var x;const E=(x=h.__r3f)!=null?x:{};h.raycast&&E.handlers&&E.eventCount&&v_(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>ih(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&C2(v,h,m),h.isObject3D&&(h.visible=!1),sh(h)},unhideInstance(h,p){var m;const{attach:v,parent:x}=(m=h.__r3f)!=null?m:{};v&&x&&zA(x,h,v),(h.isObject3D&&p.visible==null||p.visible)&&(h.visible=!0),sh(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():wh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Zn.fun(performance.now)?performance.now:Zn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Zn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Zn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:HA}}var M2,E2;const kA=n=>"colorSpace"in n||"outputColorSpace"in n,DO=()=>{var n;return(n=$T.ColorManagement)!=null?n:null},OO=n=>n&&n.isOrthographicCamera,pX=n=>n&&n.hasOwnProperty("current"),y0=typeof window<"u"&&((M2=window.document)!=null&&M2.createElement||((E2=window.navigator)==null?void 0:E2.product)==="ReactNative")?ee.useLayoutEffect:ee.useEffect;function FO(n){const e=ee.useRef(n);return y0(()=>void(e.current=n),[n]),e}function mX({set:n}){return y0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class NO extends ee.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}NO.getDerivedStateFromError=()=>({error:!0});const UO="__default",w2=new Map,gX=n=>n&&!!n.memoized&&!!n.changes;function kO(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Fm=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function v_(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Zn={obj:n=>n===Object(n)&&!Zn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Zn.str(n)||Zn.num(n))return n===e;const s=Zn.obj(n);if(s&&r==="reference")return n===e;const o=Zn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Zn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Zn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function vX(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function yX(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function ih(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function HE(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const T2=/-\d+$/;function zA(n,e,t){if(Zn.str(t)){if(T2.test(t)){const s=t.replace(T2,""),{target:o,key:a}=HE(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=HE(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function C2(n,e,t){var r,i;if(Zn.str(t)){const{target:s,key:o}=HE(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function zO(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},f=!1){var h;const p=(h=n==null?void 0:n.__r3f)!=null?h:{},m=Object.entries(i),v=[];if(f){const E=Object.keys(l);for(let A=0;A<E.length;A++)i.hasOwnProperty(E[A])||m.unshift([E[A],UO+"remove"])}m.forEach(([E,A])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&E==="object"||Zn.equ(A,l[E]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(E))return v.push([E,A,!0,[]]);let M=[];E.includes("-")&&(M=E.split("-")),v.push([E,A,!1,M]);for(const S in i){const C=i[S];S.startsWith(`${E}-`)&&v.push([S,C,!1,S.split("-")])}});const x={...i};return p.memoizedProps&&p.memoizedProps.args&&(x.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(x.attach=p.memoizedProps.attach),{memoized:x,changes:v}}const _X=typeof process<"u"&&!1;function HA(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:f}=gX(e)?e:zO(n,e),h=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let m=0;m<f.length;m++){let[v,x,E,A]=f[m];if(kA(n)){const C="srgb",I="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?C:I):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?C:I)}let y=n,M=y[v];if(A.length&&(M=A.reduce((S,C)=>S[C],n),!(M&&M.set))){const[S,...C]=A.reverse();y=C.reverse().reduce((I,B)=>I[B],n),v=S}if(x===UO+"remove")if(y.constructor){let S=w2.get(y.constructor);S||(S=new y.constructor,w2.set(y.constructor,S)),x=S[v]}else x=0;if(E)x?s.handlers[v]=x:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(M&&M.set&&(M.copy||M instanceof gf)){if(Array.isArray(x))M.fromArray?M.fromArray(x):M.set(...x);else if(M.copy&&x&&x.constructor&&(_X?M.constructor.name===x.constructor.name:M.constructor===x.constructor))M.copy(x);else if(x!==void 0){const S=M instanceof tt;!S&&M.setScalar?M.setScalar(x):M instanceof gf&&x instanceof gf?M.mask=x.mask:M.set(x),!DO()&&!a.linear&&S&&M.convertSRGBToLinear()}}else if(y[v]=x,y[v]instanceof tr&&y[v].format===Ki&&y[v].type===Ca){const S=y[v];kA(S)&&kA(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}sh(n)}if(s.parent&&n.raycast&&h!==s.eventCount){const m=v_(n).getState().internal,v=m.interaction.indexOf(n);v>-1&&m.interaction.splice(v,1),s.eventCount&&m.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(i=n.__r3f)!=null&&i.parent&&GE(n),n}function sh(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function GE(n){n.onUpdate==null||n.onUpdate(n)}function HO(n,e){n.manual||(OO(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Vy(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function xX(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return wh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return wh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return wh.ContinuousEventPriority;default:return wh.DefaultEventPriority}}function GO(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function SX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{GO(t.capturedMap,e,r,i)})}function AX(n){function e(l){const{internal:f}=n.getState(),h=l.offsetX-f.initialClick[0],p=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function t(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=f.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function r(l,f){const h=n.getState(),p=new Set,m=[],v=f?f(h.internal.interaction):h.internal.interaction;for(let y=0;y<v.length;y++){const M=Fm(v[y]);M&&(M.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function x(y){const M=Fm(y);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var S;M.events.compute==null||M.events.compute(l,M,(S=M.previousRoot)==null?void 0:S.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(y,!0):[]}let E=v.flatMap(x).sort((y,M)=>{const S=Fm(y.object),C=Fm(M.object);return!S||!C?y.distance-M.distance:C.events.priority-S.events.priority||y.distance-M.distance}).filter(y=>{const M=Vy(y);return p.has(M)?!1:(p.add(M),!0)});h.events.filter&&(E=h.events.filter(E,h));for(const y of E){let M=y.object;for(;M;){var A;(A=M.__r3f)!=null&&A.eventCount&&m.push({...y,eventObject:M}),M=M.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let y of h.internal.capturedMap.get(l.pointerId).values())p.has(Vy(y.intersection))||m.push(y.intersection);return m}function i(l,f,h,p){const m=n.getState();if(l.length){const v={stopped:!1};for(const x of l){const E=Fm(x.object)||m,{raycaster:A,pointer:y,camera:M,internal:S}=E,C=new J(y.x,y.y,0).unproject(M),I=N=>{var W,ae;return(W=(ae=S.capturedMap.get(N))==null?void 0:ae.has(x.eventObject))!=null?W:!1},B=N=>{const W={intersection:x,target:f.target};S.capturedMap.has(N)?S.capturedMap.get(N).set(x.eventObject,W):S.capturedMap.set(N,new Map([[x.eventObject,W]])),f.target.setPointerCapture(N)},O=N=>{const W=S.capturedMap.get(N);W&&GO(S.capturedMap,x.eventObject,W,N)};let z={};for(let N in f){let W=f[N];typeof W!="function"&&(z[N]=W)}let L={...x,...z,pointer:y,intersections:l,stopped:v.stopped,delta:h,unprojectedPoint:C,ray:A.ray,camera:M,stopPropagation(){const N="pointerId"in f&&S.capturedMap.get(f.pointerId);if((!N||N.has(x.eventObject))&&(L.stopped=v.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(W=>W.eventObject===x.eventObject))){const W=l.slice(0,l.indexOf(x));s([...W,x])}},target:{hasPointerCapture:I,setPointerCapture:B,releasePointerCapture:O},currentTarget:{hasPointerCapture:I,setPointerCapture:B,releasePointerCapture:O},nativeEvent:f};if(p(L),v.stopped===!0)break}}return l}function s(l){const{internal:f}=n.getState();for(const h of f.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const m=h.eventObject.__r3f,v=m==null?void 0:m.handlers;if(f.hovered.delete(Vy(h)),m!=null&&m.eventCount){const x={...h,intersections:l};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function o(l,f){for(let h=0;h<f.length;h++){const p=f[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:h}=n.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),s([]))})}}return function(h){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=h;const v=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",A=r(h,v?t:void 0),y=x?e(h):0;l==="onPointerDown"&&(m.initialClick=[h.offsetX,h.offsetY],m.initialHits=A.map(S=>S.eventObject)),x&&!A.length&&y<=2&&(o(h,m.interaction),p&&p(h)),v&&s(A);function M(S){const C=S.eventObject,I=C.__r3f,B=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(v){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const O=Vy(S),z=m.hovered.get(O);z?z.stopped&&S.stopPropagation():(m.hovered.set(O,S),B.onPointerOver==null||B.onPointerOver(S),B.onPointerEnter==null||B.onPointerEnter(S))}B.onPointerMove==null||B.onPointerMove(S)}else{const O=B[l];O?(!x||m.initialHits.includes(C))&&(o(h,m.interaction.filter(z=>!m.initialHits.includes(z))),O(S)):x&&m.initialHits.includes(C)&&o(h,m.interaction.filter(z=>!m.initialHits.includes(z)))}}i(A,h,y,M)}}return{handlePointer:a}}const MX=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],VO=n=>!!(n!=null&&n.render),eC=ee.createContext(null),EX=(n,e)=>{const t=ZT((a,l)=>{const f=new J,h=new J,p=new J;function m(y=l().camera,M=h,S=l().size){const{width:C,height:I,top:B,left:O}=S,z=C/I;M instanceof J?p.copy(M):p.set(...M);const L=y.getWorldPosition(f).distanceTo(p);if(OO(y))return{width:C/y.zoom,height:I/y.zoom,top:B,left:O,factor:1,distance:L,aspect:z};{const N=y.fov*Math.PI/180,W=2*Math.tan(N/2)*L,ae=W*(C/I);return{width:ae,height:W,top:B,left:O,factor:C/ae,distance:L,aspect:z}}}let v;const x=y=>a(M=>({performance:{...M.performance,current:y}})),E=new ze;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>n(l(),y),advance:(y,M)=>e(y,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new JT,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();v&&clearTimeout(v),y.performance.current!==y.performance.min&&x(y.performance.min),v=setTimeout(()=>x(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:y=>a(M=>({...M,events:{...M.events,...y}})),setSize:(y,M,S,C,I)=>{const B=l().camera,O={width:y,height:M,top:C||0,left:I||0,updateStyle:S};a(z=>({size:O,viewport:{...z.viewport,...m(B,h,O)}}))},setDpr:y=>a(M=>{const S=kO(y);return{viewport:{...M.viewport,dpr:S,initialDpr:M.viewport.initialDpr||S}}}),setFrameloop:(y="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,y!=="never"&&(M.start(),M.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ee.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,M,S)=>{const C=l().internal;return C.priority=C.priority+(M>0?1:0),C.subscribers.push({ref:y,priority:M,store:S}),C.subscribers=C.subscribers.sort((I,B)=>I.priority-B.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(M>0?1:0),I.subscribers=I.subscribers.filter(B=>B.ref!==y))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:f,gl:h,set:p}=t.getState();if(l.width!==i.width||l.height!==i.height||f.dpr!==s){var m;i=l,s=f.dpr,HO(a,l),h.setPixelRatio(f.dpr);const v=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,v)}a!==o&&(o=a,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Wy,wX=new Set,TX=new Set,CX=new Set;function GA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Nm(n,e){switch(n){case"before":return GA(wX,e);case"after":return GA(TX,e);case"tail":return GA(CX,e)}}let VA,WA;function jA(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),VA=e.internal.subscribers,Wy=0;Wy<VA.length;Wy++)WA=VA[Wy],WA.ref.current(WA.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function bX(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Nm("before",l);for(const h of n.values()){var f;i=h.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((f=i.gl.xr)!=null&&f.isPresenting)&&(t+=jA(l,i))}if(Nm("after",l),t===0)return Nm("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,f=1){var h;if(!l)return n.forEach(p=>o(p.store.getState()),f);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function a(l,f=!0,h,p){if(f&&Nm("before",l),h)jA(l,h,p);else for(const m of n.values())jA(l,m.store.getState());f&&Nm("after",l)}return{loop:s,invalidate:o,advance:a}}function tC(){const n=ee.useContext(eC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Zi(n=t=>t,e){return tC()(n,e)}function Lf(n,e=0){const t=tC(),r=t.getState().internal.subscribe,i=FO(n);return y0(()=>r(i,e,t),[e,r,t]),null}const b2=new WeakMap;function WO(n,e){return function(t,...r){let i=b2.get(t);return i||(i=new t,b2.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,vX(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function pp(n,e,t,r){const i=Array.isArray(e)?e:[e],s=cX(WO(t,r),[n,...i],{equal:Zn.equ});return Array.isArray(e)?s:s[0]}pp.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return fX(WO(t),[n,...r])};pp.clear=function(n,e){const t=Array.isArray(e)?e:[e];return dX([n,...t])};const tp=new Map,{invalidate:R2,advance:P2}=bX(tp),{reconciler:qg,applyProps:Jd}=hX(tp,xX),Kd={objects:"shallow",strict:!1},RX=(n,e)=>{const t=typeof n=="function"?n(e):n;return VO(t)?t:new ET({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function PX(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function IX(n){const e=tp.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||EX(R2,P2),o=t||qg.createContainer(s,wh.ConcurrentRoot,null,!1,null,"",i,null);e||tp.set(n,{fiber:o,store:s});let a,l=!1,f;return{configure(h={}){let{gl:p,size:m,scene:v,events:x,onCreated:E,shadows:A=!1,linear:y=!1,flat:M=!1,legacy:S=!1,orthographic:C=!1,frameloop:I="always",dpr:B=[1,2],performance:O,raycaster:z,camera:L,onPointerMissed:N}=h,W=s.getState(),ae=W.gl;W.gl||W.set({gl:ae=RX(p,n)});let te=W.raycaster;te||W.set({raycaster:te=new QT});const{params:ie,...le}=z||{};if(Zn.equ(le,te,Kd)||Jd(te,{...le}),Zn.equ(ie,te.params,Kd)||Jd(te,{params:{...te.params,...ie}}),!W.camera||W.camera===f&&!Zn.equ(f,L,Kd)){f=L;const oe=L instanceof l0,Le=oe?L:C?new Qu(0,0,0,0,.1,1e3):new Cr(75,0,.1,1e3);oe||(Le.position.z=5,L&&Jd(Le,L),!W.camera&&!(L!=null&&L.rotation)&&Le.lookAt(0,0,0)),W.set({camera:Le}),te.camera=Le}if(!W.scene){let oe;v instanceof Wg?oe=v:(oe=new Wg,v&&Jd(oe,v)),W.set({scene:ih(oe)})}if(!W.xr){var ce;const oe=(De,Ue)=>{const Xe=s.getState();Xe.frameloop!=="never"&&P2(De,!0,Xe,Ue)},Le=()=>{const De=s.getState();De.gl.xr.enabled=De.gl.xr.isPresenting,De.gl.xr.setAnimationLoop(De.gl.xr.isPresenting?oe:null),De.gl.xr.isPresenting||R2(De)},Oe={connect(){const De=s.getState().gl;De.xr.addEventListener("sessionstart",Le),De.xr.addEventListener("sessionend",Le)},disconnect(){const De=s.getState().gl;De.xr.removeEventListener("sessionstart",Le),De.xr.removeEventListener("sessionend",Le)}};typeof((ce=ae.xr)==null?void 0:ce.addEventListener)=="function"&&Oe.connect(),W.set({xr:Oe})}if(ae.shadowMap){const oe=ae.shadowMap.enabled,Le=ae.shadowMap.type;if(ae.shadowMap.enabled=!!A,Zn.boo(A))ae.shadowMap.type=fg;else if(Zn.str(A)){var he;const Oe={basic:w3,percentage:M1,soft:fg,variance:Uo};ae.shadowMap.type=(he=Oe[A])!=null?he:fg}else Zn.obj(A)&&Object.assign(ae.shadowMap,A);(oe!==ae.shadowMap.enabled||Le!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}const K=DO();K&&("enabled"in K?K.enabled=!S:"legacyMode"in K&&(K.legacyMode=S)),Jd(ae,{outputEncoding:y?3e3:3001,toneMapping:M?Ta:rT}),W.legacy!==S&&W.set(()=>({legacy:S})),W.linear!==y&&W.set(()=>({linear:y})),W.flat!==M&&W.set(()=>({flat:M})),p&&!Zn.fun(p)&&!VO(p)&&!Zn.equ(p,ae,Kd)&&Jd(ae,p),x&&!W.events.handlers&&W.set({events:x(s)});const se=PX(n,m);return Zn.equ(se,W.size,Kd)||W.setSize(se.width,se.height,se.updateStyle,se.top,se.left),B&&W.viewport.dpr!==kO(B)&&W.setDpr(B),W.frameloop!==I&&W.setFrameloop(I),W.onPointerMissed||W.set({onPointerMissed:N}),O&&!Zn.equ(O,W.performance,Kd)&&W.set(oe=>({performance:{...oe.performance,...O}})),a=E,l=!0,this},render(h){return l||this.configure(),qg.updateContainer(ee.createElement(BX,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){jO(n)}}}function BX({store:n,children:e,onCreated:t,rootElement:r}){return y0(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),ee.createElement(eC.Provider,{value:n},e)}function jO(n,e){const t=tp.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),qg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),yX(i),tp.delete(n),e&&e(n)}catch{}},500)})}}function LX(n,e,t){return ee.createElement(DX,{key:e.uuid,children:n,container:e,state:t})}function DX({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=tC(),[a]=ee.useState(()=>new QT),[l]=ee.useState(()=>new ze),f=ee.useCallback((p,m)=>{const v={...p};Object.keys(p).forEach(E=>{(MX.includes(E)||p[E]!==m[E]&&m[E])&&delete v[E]});let x;if(m&&i){const E=m.camera;x=p.viewport.getCurrentViewport(E,new J,i),E!==p.camera&&HO(E,i)}return{...v,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...p.events,...m==null?void 0:m.events,...r},size:{...p.size,...i},viewport:{...p.viewport,...x},...s}},[n]),[h]=ee.useState(()=>{const p=o.getState();return ZT((v,x)=>({...p,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...p.events,...r},size:{...p.size,...i},...s,set:v,get:x,setEvents:E=>v(A=>({...A,events:{...A.events,...E}}))}))});return ee.useEffect(()=>{const p=o.subscribe(m=>h.setState(v=>f(m,v)));return()=>{p(),h.destroy()}},[]),ee.useEffect(()=>{h.setState(p=>f(o.getState(),p))},[f]),ee.createElement(ee.Fragment,null,qg.createPortal(ee.createElement(eC.Provider,{value:h},e),h,null))}qg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ee.version});function Et(){return Et=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Et.apply(this,arguments)}function VE(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,t||(a=n.apply(s,i),s=i=null))}var f=function(){s=this,i=arguments,o=Date.now();var h=t&&!r;return r||(r=setTimeout(l,e)),h&&(a=n.apply(s,i),s=i=null),a};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},f}VE.debounce=VE;var OX=VE;const I2=o1(OX);function FX(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=ee.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ee.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,p=ee.useRef(!1);ee.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,v,x]=ee.useMemo(()=>{const M=()=>{if(!l.current.element)return;const{left:S,top:C,width:I,height:B,bottom:O,right:z,x:L,y:N}=l.current.element.getBoundingClientRect(),W={left:S,top:C,width:I,height:B,bottom:O,right:z,x:L,y:N};l.current.element instanceof HTMLElement&&i&&(W.height=l.current.element.offsetHeight,W.width=l.current.element.offsetWidth),Object.freeze(W),p.current&&!zX(l.current.lastBounds,W)&&a(l.current.lastBounds=W)};return[M,h?I2(M,h):M,f?I2(M,f):M]},[a,i,f,h]);function E(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function A(){l.current.element&&(l.current.resizeObserver=new s(x),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(M=>M.addEventListener("scroll",x,{capture:!0,passive:!0})))}const y=M=>{!M||M===l.current.element||(E(),l.current.element=M,l.current.scrollContainers=XO(M),A())};return UX(x,!!t),NX(v),ee.useEffect(()=>{E(),A()},[t,x,v]),ee.useEffect(()=>E,[]),[y,o,m]}function NX(n){ee.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function UX(n,e){ee.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function XO(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...XO(n.parentElement)]}const kX=["x","y","top","bottom","left","right","width","height"],zX=(n,e)=>kX.every(t=>n[t]===e[t]);var HX=Object.defineProperty,GX=Object.defineProperties,VX=Object.getOwnPropertyDescriptors,B2=Object.getOwnPropertySymbols,WX=Object.prototype.hasOwnProperty,jX=Object.prototype.propertyIsEnumerable,L2=(n,e,t)=>e in n?HX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D2=(n,e)=>{for(var t in e||(e={}))WX.call(e,t)&&L2(n,t,e[t]);if(B2)for(var t of B2(e))jX.call(e,t)&&L2(n,t,e[t]);return n},XX=(n,e)=>GX(n,VX(e));function JO(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=JO(r,e,t);if(i)return i;r=e?null:r.sibling}}function KO(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const nC=KO(ee.createContext(null));class YO extends ee.Component{render(){return ee.createElement(nC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:O2,ReactCurrentDispatcher:F2}=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function JX(){const n=ee.useContext(nC);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ee.useId();return ee.useMemo(()=>{for(const r of[O2==null?void 0:O2.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=JO(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function KX(){var n,e;const t=JX(),[r]=ee.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==nC&&!r.has(s)&&r.set(s,(e=F2==null?void 0:F2.current)==null?void 0:e.readContext(KO(s))),i=i.return}return r}function YX(){const n=KX();return ee.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>ee.createElement(e,null,ee.createElement(t.Provider,XX(D2({},r),{value:n.get(t)}))),e=>ee.createElement(YO,D2({},e))),[n])}const XA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qX(n){const{handlePointer:e}=AX(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(XA).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,f]=XA[o];t.addEventListener(l,a,{passive:f})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=XA[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const QX=ee.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=qX,eventSource:a,eventPrefix:l,shadows:f,linear:h,flat:p,legacy:m,orthographic:v,frameloop:x,dpr:E,performance:A,raycaster:y,camera:M,scene:S,onPointerMissed:C,onCreated:I,...B},O){ee.useMemo(()=>LO(rX),[]);const z=YX(),[L,N]=FX({scroll:!0,debounce:{scroll:50,resize:0},...r}),W=ee.useRef(null),ae=ee.useRef(null);ee.useImperativeHandle(O,()=>W.current);const te=FO(C),[ie,le]=ee.useState(!1),[ce,he]=ee.useState(!1);if(ie)throw ie;if(ce)throw ce;const K=ee.useRef(null);y0(()=>{const re=W.current;N.width>0&&N.height>0&&re&&(K.current||(K.current=IX(re)),K.current.configure({gl:s,events:o,shadows:f,linear:h,flat:p,legacy:m,orthographic:v,frameloop:x,dpr:E,performance:A,raycaster:y,camera:M,scene:S,size:N,onPointerMissed:(...se)=>te.current==null?void 0:te.current(...se),onCreated:se=>{se.events.connect==null||se.events.connect(a?pX(a)?a.current:a:ae.current),l&&se.setEvents({compute:(oe,Le)=>{const Oe=oe[l+"X"],De=oe[l+"Y"];Le.pointer.set(Oe/Le.size.width*2-1,-(De/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),I==null||I(se)}}),K.current.render(ee.createElement(z,null,ee.createElement(NO,{set:he},ee.createElement(ee.Suspense,{fallback:ee.createElement(mX,{set:le})},e)))))}),ee.useEffect(()=>{const re=W.current;if(re)return()=>jO(re)},[]);const fe=a?"none":"auto";return ee.createElement("div",Et({ref:ae,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:fe,...i}},B),ee.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},ee.createElement("canvas",{ref:W,style:{display:"block"}},t)))}),ZX=ee.forwardRef(function(e,t){return ee.createElement(YO,null,ee.createElement(QX,Et({},e,{ref:t})))}),_0=new J,rC=new J,$X=new J;function eJ(n,e,t){const r=_0.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function tJ(n,e){const t=_0.setFromMatrixPosition(n.matrixWorld),r=rC.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection($X);return i.angleTo(s)>Math.PI/2}function nJ(n,e,t,r){const i=_0.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function rJ(n,e){if(e instanceof Qu)return e.zoom;if(e instanceof Cr){const t=_0.setFromMatrixPosition(n.matrixWorld),r=rC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function iJ(n,e,t){if(e instanceof Cr||e instanceof Qu){const r=_0.setFromMatrixPosition(n.matrixWorld),i=rC.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const WE=n=>Math.abs(n)<1e-10?0:n;function qO(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=WE(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const sJ=(n=>e=>qO(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),oJ=(n=>(e,t)=>qO(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function aJ(n){return n&&typeof n=="object"&&"current"in n}const QO=ee.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:f=!1,transform:h=!1,occlude:p,onOcclude:m,castShadow:v,receiveShadow:x,material:E,geometry:A,zIndexRange:y=[16777271,0],calculatePosition:M=eJ,as:S="div",wrapperClass:C,pointerEvents:I="auto",...B},O)=>{const{gl:z,camera:L,scene:N,size:W,raycaster:ae,events:te,viewport:ie}=Zi(),[le]=ee.useState(()=>document.createElement(S)),ce=ee.useRef(),he=ee.useRef(null),K=ee.useRef(0),fe=ee.useRef([0,0]),re=ee.useRef(null),se=ee.useRef(null),oe=(a==null?void 0:a.current)||te.connected||z.domElement.parentNode,Le=ee.useRef(null),Oe=ee.useRef(!1),De=ee.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&aJ(p[0]),[p]);ee.useLayoutEffect(()=>{const Dt=z.domElement;p&&p==="blending"?(Dt.style.zIndex=`${Math.floor(y[0]/2)}`,Dt.style.position="absolute",Dt.style.pointerEvents="none"):(Dt.style.zIndex=null,Dt.style.position=null,Dt.style.pointerEvents=null)},[p]),ee.useLayoutEffect(()=>{if(he.current){const Dt=ce.current=A3(le);if(N.updateMatrixWorld(),h)le.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ge=M(he.current,L,W);le.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ge[0]}px,${Ge[1]}px,0);transform-origin:0 0;`}return oe&&(i?oe.prepend(le):oe.appendChild(le)),()=>{oe&&oe.removeChild(le),Dt.unmount()}}},[oe,h]),ee.useLayoutEffect(()=>{C&&(le.className=C)},[C]);const Ue=ee.useMemo(()=>h?{position:"absolute",top:0,left:0,width:W.width,height:W.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-W.height/2,left:-W.width/2,width:W.width,height:W.height},...t},[t,s,o,W,h]),Xe=ee.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);ee.useLayoutEffect(()=>{if(Oe.current=!1,h){var Dt;(Dt=ce.current)==null||Dt.render(ee.createElement("div",{ref:re,style:Ue},ee.createElement("div",{ref:se,style:Xe},ee.createElement("div",{ref:O,className:r,style:t,children:n}))))}else{var Ge;(Ge=ce.current)==null||Ge.render(ee.createElement("div",{ref:O,style:Ue,className:r,children:n}))}});const rt=ee.useRef(!0);Lf(Dt=>{if(he.current){L.updateMatrixWorld(),he.current.updateWorldMatrix(!0,!1);const Ge=h?fe.current:M(he.current,L,W);if(h||Math.abs(K.current-L.zoom)>e||Math.abs(fe.current[0]-Ge[0])>e||Math.abs(fe.current[1]-Ge[1])>e){const $=tJ(he.current,L);let Ne=!1;De&&(Array.isArray(p)?Ne=p.map(vt=>vt.current):p!=="blending"&&(Ne=[N]));const Be=rt.current;if(Ne){const vt=nJ(he.current,L,ae,Ne);rt.current=vt&&!$}else rt.current=!$;Be!==rt.current&&(m?m(!rt.current):le.style.display=rt.current?"block":"none");const Ve=Math.floor(y[0]/2),He=p?De?[y[0],Ve]:[Ve-1,0]:y;if(le.style.zIndex=`${iJ(he.current,L,He)}`,h){const[vt,st]=[W.width/2,W.height/2],ft=L.projectionMatrix.elements[5]*st,{isOrthographicCamera:Ct,top:jt,left:un,bottom:Z,right:G}=L,_e=sJ(L.matrixWorldInverse),je=Ct?`scale(${ft})translate(${WE(-(G+un)/2)}px,${WE((jt+Z)/2)}px)`:`translateZ(${ft}px)`;let ke=he.current.matrixWorld;f&&(ke=L.matrixWorldInverse.clone().transpose().copyPosition(ke).scale(he.current.scale),ke.elements[3]=ke.elements[7]=ke.elements[11]=0,ke.elements[15]=1),le.style.width=W.width+"px",le.style.height=W.height+"px",le.style.perspective=Ct?"":`${ft}px`,re.current&&se.current&&(re.current.style.transform=`${je}${_e}translate(${vt}px,${st}px)`,se.current.style.transform=oJ(ke,1/((l||10)/400)))}else{const vt=l===void 0?1:rJ(he.current,L)*l;le.style.transform=`translate3d(${Ge[0]}px,${Ge[1]}px,0) scale(${vt})`}fe.current=Ge,K.current=L.zoom}}if(!De&&Le.current&&!Oe.current)if(h){if(re.current){const Ge=re.current.children[0];if(Ge!=null&&Ge.clientWidth&&Ge!=null&&Ge.clientHeight){const{isOrthographicCamera:$}=L;if($||A)B.scale&&(Array.isArray(B.scale)?B.scale instanceof J?Le.current.scale.copy(B.scale.clone().divideScalar(1)):Le.current.scale.set(1/B.scale[0],1/B.scale[1],1/B.scale[2]):Le.current.scale.setScalar(1/B.scale));else{const Ne=(l||10)/400,Be=Ge.clientWidth*Ne,Ve=Ge.clientHeight*Ne;Le.current.scale.set(Be,Ve,1)}Oe.current=!0}}}else{const Ge=le.children[0];if(Ge!=null&&Ge.clientWidth&&Ge!=null&&Ge.clientHeight){const $=1/ie.factor,Ne=Ge.clientWidth*$,Be=Ge.clientHeight*$;Le.current.scale.set(Ne,Be,1),Oe.current=!0}Le.current.lookAt(Dt.camera.position)}});const Gt=ee.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return ee.createElement("group",Et({},B,{ref:he}),p&&!De&&ee.createElement("mesh",{castShadow:v,receiveShadow:x,ref:Le},A||ee.createElement("planeGeometry",null),E||ee.createElement("shaderMaterial",{side:Fs,vertexShader:Gt.vertexShader,fragmentShader:Gt.fragmentShader})))});let Um=0;const lJ=ZT(n=>(Eh.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Um)/(r-Um)*100})},Eh.onLoad=()=>{n({active:!1})},Eh.onError=e=>n(t=>({errors:[...t.errors,e]})),Eh.onProgress=(e,t,r)=>{t===r&&(Um=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Um)/(r-Um)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function gg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function uJ(n,e){if(n){if(typeof n=="string")return jE(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jE(n,e)}}function cJ(n){if(Array.isArray(n))return jE(n)}function fJ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hJ(n){return cJ(n)||fJ(n)||uJ(n)||dJ()}new ze;new ze;function pJ(n,e,t){return Math.max(e,Math.min(t,n))}function mJ(n,e){return pJ(n-Math.floor(n/e)*e,0,e)}function gJ(n,e){var t=mJ(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function ZO(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var so=function n(e,t,r){var i=this;ZO(this,n),gg(this,"dot2",function(s,o){return i.x*s+i.y*o}),gg(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=r},vJ=[new so(1,1,0),new so(-1,1,0),new so(1,-1,0),new so(-1,-1,0),new so(1,0,1),new so(-1,0,1),new so(1,0,-1),new so(-1,0,-1),new so(0,1,1),new so(0,-1,1),new so(0,1,-1),new so(0,-1,-1)],N2=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],U2=new Array(512),k2=new Array(512),yJ=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=N2[t]^e&255:r=N2[t]^e>>8&255,U2[t]=U2[t+256]=r,k2[t]=k2[t+256]=vJ[r%12]}};yJ(0);function _J(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function z2(n){var e=_J(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var xJ=function n(e){var t=this;ZO(this,n),gg(this,"seed",0),gg(this,"init",function(r){t.seed=r,t.value=z2(r)}),gg(this,"value",z2(this.seed)),this.init(e)};new xJ(Math.random());var SJ=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*i)/t)},$O=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},AJ=function(e){return e},MJ={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},EJ={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},wJ={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},TJ={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},CJ={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},bJ={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Yr(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:$O,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;r=Math.max(1e-4,r);var f=2/r,h=o(f*i),p=n[e]-t,m=t,v=s*r;p=Math.min(Math.max(p,-v),v),t=n[e]-p;var x=(n.__damp[l]+f*p)*i;n.__damp[l]=(n.__damp[l]-f*x)*h;var E=t+(p+x)*h;return m-n[e]>0==E>m&&(E=m,n.__damp[l]=(E-m)/i),n[e]=E,!0}var RJ=function(e){return e&&e.isCamera},PJ=function(e){return e&&e.isLight},km=new J,H2=new br,G2=new br,zm=new Ht,JA=new J;function IJ(n,e,t,r,i,s,o){typeof e=="number"?km.setScalar(e):Array.isArray(e)?km.set(e[0],e[1],e[2]):km.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),JA.setFromMatrixPosition(n.matrixWorld),RJ(n)||PJ(n)?zm.lookAt(JA,km,n.up):zm.lookAt(km,JA,n.up),Z_(n.quaternion,G2.setFromRotationMatrix(zm),t,r,i,s,o),a&&(zm.extractRotation(a.matrixWorld),H2.setFromRotationMatrix(zm),Z_(n.quaternion,G2.copy(n.quaternion).premultiply(H2.invert()),t,r,i,s,o))}function Oh(n,e,t,r,i,s,o,a){return Yr(n,e,n[e]+gJ(n[e],t),r,i,s,o,a)}var Hm=new ze,V2,W2;function BJ(n,e,t,r,i,s,o){return typeof e=="number"?Hm.setScalar(e):Array.isArray(e)?Hm.set(e[0],e[1]):Hm.copy(e),V2=Yr(n,"x",Hm.x,t,r,i,s,o),W2=Yr(n,"y",Hm.y,t,r,i,s,o),V2||W2}var Yd=new J,j2,X2,J2;function XE(n,e,t,r,i,s,o){return typeof e=="number"?Yd.setScalar(e):Array.isArray(e)?Yd.set(e[0],e[1],e[2]):Yd.copy(e),j2=Yr(n,"x",Yd.x,t,r,i,s,o),X2=Yr(n,"y",Yd.y,t,r,i,s,o),J2=Yr(n,"z",Yd.z,t,r,i,s,o),j2||X2||J2}var Jc=new Mn,K2,Y2,q2,Q2;function LJ(n,e,t,r,i,s,o){return typeof e=="number"?Jc.setScalar(e):Array.isArray(e)?Jc.set(e[0],e[1],e[2],e[3]):Jc.copy(e),K2=Yr(n,"x",Jc.x,t,r,i,s,o),Y2=Yr(n,"y",Jc.y,t,r,i,s,o),q2=Yr(n,"z",Jc.z,t,r,i,s,o),Q2=Yr(n,"w",Jc.w,t,r,i,s,o),K2||Y2||q2||Q2}var Gm=new cp,Z2,$2,eI;function DJ(n,e,t,r,i,s,o){return Array.isArray(e)?Gm.set(e[0],e[1],e[2],e[3]):Gm.copy(e),Z2=Oh(n,"x",Gm.x,t,r,i,s,o),$2=Oh(n,"y",Gm.y,t,r,i,s,o),eI=Oh(n,"z",Gm.z,t,r,i,s,o),Z2||$2||eI}var qd=new tt,tI,nI,rI;function OJ(n,e,t,r,i,s,o){return e instanceof tt?qd.copy(e):Array.isArray(e)?qd.setRGB(e[0],e[1],e[2]):qd.set(e),tI=Yr(n,"r",qd.r,t,r,i,s,o),nI=Yr(n,"g",qd.g,t,r,i,s,o),rI=Yr(n,"b",qd.b,t,r,i,s,o),tI||nI||rI}var Oo=new br,dl=new Mn,iI=new Mn,Vm=new Mn,sI,oI,aI,lI;function Z_(n,e,t,r,i,s,o){var a=n;Array.isArray(e)?Oo.set(e[0],e[1],e[2],e[3]):Oo.copy(e);var l=n.dot(Oo)>0?1:-1;return Oo.x*=l,Oo.y*=l,Oo.z*=l,Oo.w*=l,sI=Yr(n,"x",Oo.x,t,r,i,s,o),oI=Yr(n,"y",Oo.y,t,r,i,s,o),aI=Yr(n,"z",Oo.z,t,r,i,s,o),lI=Yr(n,"w",Oo.w,t,r,i,s,o),dl.set(n.x,n.y,n.z,n.w).normalize(),iI.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),Vm.copy(dl).multiplyScalar(iI.dot(dl)/dl.dot(dl)),a.__damp.velocity_x-=Vm.x,a.__damp.velocity_y-=Vm.y,a.__damp.velocity_z-=Vm.z,a.__damp.velocity_w-=Vm.w,n.set(dl.x,dl.y,dl.z,dl.w),sI||oI||aI||lI}var Wm=new SO,uI,cI,fI;function FJ(n,e,t,r,i,s,o){return Array.isArray(e)?Wm.set(e[0],e[1],e[2]):Wm.copy(e),uI=Yr(n,"radius",Wm.radius,t,r,i,s,o),cI=Oh(n,"phi",Wm.phi,t,r,i,s,o),fI=Oh(n,"theta",Wm.theta,t,r,i,s,o),uI||cI||fI}var jy=new Ht,dI=new J,hI=new br,pI=new J,mI,gI,vI;function NJ(n,e,t,r,i,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new J,rotation:new br,scale:new J},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?jy.set.apply(jy,hJ(e)):jy.copy(e),jy.decompose(dI,hI,pI),mI=XE(a.__damp.position,dI,t,r,i,s,o),gI=Z_(a.__damp.rotation,hI,t,r,i,s,o),vI=XE(a.__damp.scale,pI,t,r,i,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),mI||gI||vI}var yI=Object.freeze({__proto__:null,rsqw:SJ,exp:$O,linear:AJ,sine:MJ,cubic:EJ,quint:wJ,circ:TJ,quart:CJ,expo:bJ,damp:Yr,dampLookAt:IJ,dampAngle:Oh,damp2:BJ,damp3:XE,damp4:LJ,dampE:DJ,dampC:OJ,dampQ:Z_,dampS:FJ,dampM:NJ});const eF=ee.createContext(null);function tF(){return ee.useContext(eF)}function UJ({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:r,pages:i=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,style:l={},children:f}){const{get:h,setEvents:p,gl:m,size:v,invalidate:x,events:E}=Zi(),[A]=ee.useState(()=>document.createElement("div")),[y]=ee.useState(()=>document.createElement("div")),[M]=ee.useState(()=>document.createElement("div")),S=m.domElement.parentNode,C=ee.useRef(0),I=ee.useMemo(()=>({el:A,eps:n,fill:y,fixed:M,horizontal:r,damping:o,offset:0,delta:0,scroll:C,pages:i,range(z,L,N=0){const W=z-N,ae=W+L+N*2;return this.offset<W?0:this.offset>ae?1:(this.offset-W)/(ae-W)},curve(z,L,N=0){return Math.sin(this.range(z,L,N)*Math.PI)},visible(z,L,N=0){const W=z-N,ae=W+L+N*2;return this.offset>=W&&this.offset<=ae}}),[n,o,r,i]);ee.useEffect(()=>{A.style.position="absolute",A.style.width="100%",A.style.height="100%",A.style[r?"overflowX":"overflowY"]="auto",A.style[r?"overflowY":"overflowX"]="hidden",A.style.top="0px",A.style.left="0px";for(const L in l)A.style[L]=l[L];M.style.position="sticky",M.style.top="0px",M.style.left="0px",M.style.width="100%",M.style.height="100%",M.style.overflow="hidden",A.appendChild(M),y.style.height=r?"100%":`${i*s*100}%`,y.style.width=r?`${i*s*100}%`:"100%",y.style.pointerEvents="none",A.appendChild(y),S.appendChild(A),A[r?"scrollLeft":"scrollTop"]=1;const O=E.connected||m.domElement;requestAnimationFrame(()=>E.connect==null?void 0:E.connect(A));const z=h().events.compute;return p({compute(L,N){const{left:W,top:ae}=S.getBoundingClientRect(),te=L.clientX-W,ie=L.clientY-ae;N.pointer.set(te/N.size.width*2-1,-(ie/N.size.height)*2+1),N.raycaster.setFromCamera(N.pointer,N.camera)}}),()=>{S.removeChild(A),p({compute:z}),E.connect==null||E.connect(O)}},[i,s,r,A,y,M,S]),ee.useEffect(()=>{if(E.connected===A){const O=v[r?"width":"height"],z=A[r?"scrollWidth":"scrollHeight"],L=z-O;let N=0,W=!0,ae=!0;const te=()=>{if(!(!e||ae)&&(x(),N=A[r?"scrollLeft":"scrollTop"],C.current=N/L,t)){if(!W){if(N>=L){const le=1-I.offset;A[r?"scrollLeft":"scrollTop"]=1,C.current=I.offset=-le,W=!0}else if(N<=0){const le=1+I.offset;A[r?"scrollLeft":"scrollTop"]=z,C.current=I.offset=le,W=!0}}W&&setTimeout(()=>W=!1,40)}};A.addEventListener("scroll",te,{passive:!0}),requestAnimationFrame(()=>ae=!1);const ie=le=>A.scrollLeft+=le.deltaY/2;return r&&A.addEventListener("wheel",ie,{passive:!0}),()=>{A.removeEventListener("scroll",te),r&&A.removeEventListener("wheel",ie)}}},[A,E,v,t,I,x,r,e]);let B=0;return Lf((O,z)=>{B=I.offset,yI.damp(I,"offset",C.current,o,z,a,void 0,n),yI.damp(I,"delta",Math.abs(B-I.offset),o,z,a,void 0,n),I.delta>n&&x()}),ee.createElement(eF.Provider,{value:I},f)}function _I(n,e){if(e===lD)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===K_||e===dT){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===K_)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const kJ=parseInt(ap.replace(/\D+/g,""));var po=Uint8Array,Tu=Uint16Array,JE=Uint32Array,nF=new po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rF=new po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zJ=new po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iF=function(n,e){for(var t=new Tu(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new JE(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},sF=iF(nF,2),oF=sF[0],HJ=sF[1];oF[28]=258,HJ[258]=28;var GJ=iF(rF,0),VJ=GJ[0],KE=new Tu(32768);for(var $n=0;$n<32768;++$n){var pu=($n&43690)>>>1|($n&21845)<<1;pu=(pu&52428)>>>2|(pu&13107)<<2,pu=(pu&61680)>>>4|(pu&3855)<<4,KE[$n]=((pu&65280)>>>8|(pu&255)<<8)>>>1}var vg=function(n,e,t){for(var r=n.length,i=0,s=new Tu(e);i<r;++i)++s[n[i]-1];var o=new Tu(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Tu(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,m=p|(1<<h)-1;p<=m;++p)a[KE[p]>>>l]=f}else for(a=new Tu(r),i=0;i<r;++i)n[i]&&(a[i]=KE[o[n[i]-1]++]>>>15-n[i]);return a},x0=new po(288);for(var $n=0;$n<144;++$n)x0[$n]=8;for(var $n=144;$n<256;++$n)x0[$n]=9;for(var $n=256;$n<280;++$n)x0[$n]=7;for(var $n=280;$n<288;++$n)x0[$n]=8;var aF=new po(32);for(var $n=0;$n<32;++$n)aF[$n]=5;var WJ=vg(x0,9,1),jJ=vg(aF,5,1),KA=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Fo=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},YA=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},XJ=function(n){return(n/8|0)+(n&7&&1)},JJ=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Tu?Tu:n instanceof JE?JE:po)(t-e);return r.set(n.subarray(e,t)),r},KJ=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new po(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new po(r*3));var o=function(Ue){var Xe=e.length;if(Ue>Xe){var rt=new po(Math.max(Xe*2,Ue));rt.set(e),e=rt}},a=t.f||0,l=t.p||0,f=t.b||0,h=t.l,p=t.d,m=t.m,v=t.n,x=r*8;do{if(!h){t.f=a=Fo(n,l,1);var E=Fo(n,l+1,3);if(l+=3,E)if(E==1)h=WJ,p=jJ,m=9,v=5;else if(E==2){var S=Fo(n,l,31)+257,C=Fo(n,l+10,15)+4,I=S+Fo(n,l+5,31)+1;l+=14;for(var B=new po(I),O=new po(19),z=0;z<C;++z)O[zJ[z]]=Fo(n,l+z*3,7);l+=C*3;for(var L=KA(O),N=(1<<L)-1,W=vg(O,L,1),z=0;z<I;){var ae=W[Fo(n,l,N)];l+=ae&15;var A=ae>>>4;if(A<16)B[z++]=A;else{var te=0,ie=0;for(A==16?(ie=3+Fo(n,l,3),l+=2,te=B[z-1]):A==17?(ie=3+Fo(n,l,7),l+=3):A==18&&(ie=11+Fo(n,l,127),l+=7);ie--;)B[z++]=te}}var le=B.subarray(0,S),ce=B.subarray(S);m=KA(le),v=KA(ce),h=vg(le,m,1),p=vg(ce,v,1)}else throw"invalid block type";else{var A=XJ(l)+4,y=n[A-4]|n[A-3]<<8,M=A+y;if(M>r){if(s)throw"unexpected EOF";break}i&&o(f+y),e.set(n.subarray(A,M),f),t.b=f+=y,t.p=l=M*8;continue}if(l>x){if(s)throw"unexpected EOF";break}}i&&o(f+131072);for(var he=(1<<m)-1,K=(1<<v)-1,fe=l;;fe=l){var te=h[YA(n,l)&he],re=te>>>4;if(l+=te&15,l>x){if(s)throw"unexpected EOF";break}if(!te)throw"invalid length/literal";if(re<256)e[f++]=re;else if(re==256){fe=l,h=null;break}else{var se=re-254;if(re>264){var z=re-257,oe=nF[z];se=Fo(n,l,(1<<oe)-1)+oF[z],l+=oe}var Le=p[YA(n,l)&K],Oe=Le>>>4;if(!Le)throw"invalid distance";l+=Le&15;var ce=VJ[Oe];if(Oe>3){var oe=rF[Oe];ce+=YA(n,l)&(1<<oe)-1,l+=oe}if(l>x){if(s)throw"unexpected EOF";break}i&&o(f+131072);for(var De=f+se;f<De;f+=4)e[f]=e[f-ce],e[f+1]=e[f+1-ce],e[f+2]=e[f+2-ce],e[f+3]=e[f+3-ce];f=De}}t.l=h,t.p=fe,t.b=f,h&&(a=1,t.m=m,t.d=p,t.n=v)}while(!a);return f==e.length?e:JJ(e,0,f)},YJ=new po(0),qJ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Xy(n,e){return KJ((qJ(n),n.subarray(2,-4)),e)}var QJ=typeof TextDecoder<"u"&&new TextDecoder,ZJ=0;try{QJ.decode(YJ,{stream:!0}),ZJ=1}catch{}const $J=n=>n&&n.isCubeTexture;class eK extends Kr{constructor(e,t){var r,i;const s=$J(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),f=Math.pow(2,l),h=3*Math.max(f,16*7),p=4*f,m=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/p}`,`#define CUBEUV_MAX_MIP ${l}.0`],v=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,x=m.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(ap.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,E={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},A=new p0(1,16),y=new Jo({uniforms:E,fragmentShader:x,vertexShader:v,side:Fs});super(A,y)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class iC extends ki{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new sK(t)}),this.register(function(t){return new hK(t)}),this.register(function(t){return new pK(t)}),this.register(function(t){return new mK(t)}),this.register(function(t){return new aK(t)}),this.register(function(t){return new lK(t)}),this.register(function(t){return new uK(t)}),this.register(function(t){return new cK(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new fK(t)}),this.register(function(t){return new oK(t)}),this.register(function(t){return new dK(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new gK(t)}),this.register(function(t){return new vK(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Ra.extractUrlBase(e),this.manager.itemStart(e);const a=function(f){i?i(f):console.error(f),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ws(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{s.parse(f,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ra.decodeText(new Uint8Array(e.slice(0,4)))===lF){try{o[gn.KHR_BINARY_GLTF]=new yK(e)}catch(h){i&&i(h);return}s=JSON.parse(o[gn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Ra.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new IK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const h=this.pluginCallbacks[f](l);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let f=0;f<s.extensionsUsed.length;++f){const h=s.extensionsUsed[f],p=s.extensionsRequired||[];switch(h){case gn.KHR_MATERIALS_UNLIT:o[h]=new rK;break;case gn.KHR_DRACO_MESH_COMPRESSION:o[h]=new _K(s,this.dracoLoader);break;case gn.KHR_TEXTURE_TRANSFORM:o[h]=new xK;break;case gn.KHR_MESH_QUANTIZATION:o[h]=new SK;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function tK(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const gn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class nK{constructor(e){this.parser=e,this.name=gn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let f;const h=new tt(16777215);l.color!==void 0&&h.fromArray(l.color);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":f=new jT(h),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new WT(h),f.distance=p;break;case"spot":f=new VT(h),f.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,f.angle=l.spot.outerConeAngle,f.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return f.position.set(0,0,0),f.decay=2,_u(f,l),l.intensity!==void 0&&(f.intensity=l.intensity),f.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(f),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class rK{constructor(){this.name=gn.KHR_MATERIALS_UNLIT}getMaterialType(){return ks}extendParams(e,t,r){const i=[];e.color=new tt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class iK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class sK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ze(a,a)}return Promise.all(s)}}class oK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class aK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new tt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class lK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class uK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new tt(a[0],a[1],a[2]),Promise.all(s)}}class cK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class fK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new tt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class dK{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Oa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class hK{constructor(e){this.parser=e,this.name=gn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class pK{constructor(e){this.parser=e,this.name=gn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const f=r.options.manager.getHandler(a.uri);f!==null&&(l=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mK{constructor(e){this.parser=e,this.name=gn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const f=r.options.manager.getHandler(a.uri);f!==null&&(l=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class gK{constructor(e){this.name=gn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,f=i.byteLength||0,h=i.count,p=i.byteStride,m=new Uint8Array(a,l,f);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,p,m,i.mode,i.filter).then(function(v){return v.buffer}):o.ready.then(function(){const v=new ArrayBuffer(h*p);return o.decodeGltfBuffer(new Uint8Array(v),h,p,m,i.mode,i.filter),v})})}else return null}}class vK{constructor(e){this.name=gn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const f of i.primitives)if(f.mode!==ao.TRIANGLES&&f.mode!==ao.TRIANGLE_STRIP&&f.mode!==ao.TRIANGLE_FAN&&f.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const f in o)a.push(this.parser.getDependency("accessor",o[f]).then(h=>(l[f]=h,l[f])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(f=>{const h=f.pop(),p=h.isGroup?h.children:[h],m=f[0].count,v=[];for(const x of p){const E=new Ht,A=new J,y=new br,M=new J(1,1,1),S=new CT(x.geometry,x.material,m);for(let C=0;C<m;C++)l.TRANSLATION&&A.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,C),l.SCALE&&M.fromBufferAttribute(l.SCALE,C),S.setMatrixAt(C,E.compose(A,y,M));for(const C in l)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&x.geometry.setAttribute(C,l[C]);Sn.prototype.copy.call(S,x),this.parser.assignFinalMaterial(S),v.push(S)}return h.isGroup?(h.clear(),h.add(...v),h):v[0]}))}}const lF="glTF",jm=12,xI={JSON:1313821514,BIN:5130562};class yK{constructor(e){this.name=gn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,jm);if(this.header={magic:Ra.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==lF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-jm,i=new DataView(e,jm);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===xI.JSON){const l=new Uint8Array(e,jm+s,o);this.content=Ra.decodeText(l)}else if(a===xI.BIN){const l=jm+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class _K{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},f={};for(const h in o){const p=YE[h]||h.toLowerCase();a[p]=o[h]}for(const h in e.attributes){const p=YE[h]||h.toLowerCase();if(o[h]!==void 0){const m=r.accessors[e.attributes[h]],v=Fh[m.componentType];f[p]=v.name,l[p]=m.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(p){i.decodeDracoFile(h,function(m){for(const v in m.attributes){const x=m.attributes[v],E=l[v];E!==void 0&&(x.normalized=E)}p(m)},a,f)})})}}class xK{constructor(){this.name=gn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class SK{constructor(){this.name=gn.KHR_MESH_QUANTIZATION}}class uF extends hp{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,f=a*3,h=i-t,p=(r-t)/h,m=p*p,v=m*p,x=e*f,E=x-f,A=-2*v+3*m,y=v-m,M=1-A,S=y-m+p;for(let C=0;C!==a;C++){const I=o[E+C+a],B=o[E+C+l]*h,O=o[x+C+a],z=o[x+C]*h;s[C]=M*I+S*B+A*O+y*z}return s}}const AK=new br;class MK extends uF{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return AK.fromArray(s).normalize().toArray(s),s}}const ao={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Fh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},SI={9728:Ar,9729:Wn,9984:kg,9985:w1,9986:Bh,9987:Da},AI={33071:yi,33648:Jh,10497:Vu},qA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...kJ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},mu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},EK={CUBICSPLINE:void 0,LINEAR:Ef,STEP:Kh},QA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function wK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new v0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ba})),n.DefaultMaterial}function Kc(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function _u(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function TK(n,e,t){let r=!1,i=!1,s=!1;for(let f=0,h=e.length;f<h;f++){const p=e[f];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(i=!0),p.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let f=0,h=e.length;f<h;f++){const p=e[f];if(r){const m=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):n.attributes.position;o.push(m)}if(i){const m=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):n.attributes.normal;a.push(m)}if(s){const m=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):n.attributes.color;l.push(m)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(f){const h=f[0],p=f[1],m=f[2];return r&&(n.morphAttributes.position=h),i&&(n.morphAttributes.normal=p),s&&(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function CK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function bK(n){let e;const t=n.extensions&&n.extensions[gn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+ZA(t.attributes):e=n.indices+":"+ZA(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+ZA(n.targets[r]);return e}function ZA(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function qE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function RK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const PK=new Ht;class IK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tK,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new cO(this.options.manager):this.textureLoader=new vO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ws(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Kc(s,a,i),_u(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[f,h]of o.children.entries())s(h,a.children[f])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[gn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Ra.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=qA[i.type],a=Fh[i.componentType],l=i.normalized===!0,f=new a(i.count*o);return Promise.resolve(new Cn(f,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=qA[i.type],f=Fh[i.componentType],h=f.BYTES_PER_ELEMENT,p=h*l,m=i.byteOffset||0,v=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,x=i.normalized===!0;let E,A;if(v&&v!==p){const y=Math.floor(m/v),M="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+y+":"+i.count;let S=t.cache.get(M);S||(E=new f(a,y*v,i.count*v/h),S=new f0(E,v/h),t.cache.add(M,S)),A=new Wu(S,l,m%v/h,x)}else a===null?E=new f(i.count*l):E=new f(a,m,i.count*l),A=new Cn(E,l,x);if(i.sparse!==void 0){const y=qA.SCALAR,M=Fh[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,I=new M(o[1],S,i.sparse.count*y),B=new f(o[2],C,i.sparse.count*l);a!==null&&(A=new Cn(A.array.slice(),A.itemSize,A.normalized));for(let O=0,z=I.length;O<z;O++){const L=I[O];if(A.setX(L,B[O*l]),l>=2&&A.setY(L,B[O*l+1]),l>=3&&A.setZ(L,B[O*l+2]),l>=4&&A.setW(L,B[O*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const f=this.loadImageSource(t,r).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const m=(s.samplers||{})[o.sampler]||{};return h.magFilter=SI[m.magFilter]||Wn,h.minFilter=SI[m.minFilter]||Da,h.wrapS=AI[m.wrapS]||Vu,h.wrapT=AI[m.wrapT]||Vu,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=f,f}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",f=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(p){f=!0;const m=new Blob([p],{type:o.mimeType});return l=a.createObjectURL(m),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(p){return new Promise(function(m,v){let x=m;t.isImageBitmapLoader===!0&&(x=function(E){const A=new tr(E);A.needsUpdate=!0,m(A)}),t.load(Ra.resolveURL(p,s.path),x,void 0,v)})}).then(function(p){return f===!0&&a.revokeObjectURL(l),p.userData.mimeType=o.mimeType||RK(o.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[e]=h,h}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[gn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[gn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[gn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new D1,Hr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Ui,Hr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return v0}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},f=[];if(l[gn.KHR_MATERIALS_UNLIT]){const p=i[gn.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),f.push(p.extendParams(a,s,t))}else{const p=s.pbrMetallicRoughness||{};if(a.color=new tt(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;a.color.fromArray(m),a.opacity=m[3]}p.baseColorTexture!==void 0&&f.push(t.assignTexture(a,"map",p.baseColorTexture,3001)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),f.push(t.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Fs);const h=s.alphaMode||QA.OPAQUE;if(h===QA.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===QA.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ks&&(f.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ze(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;a.normalScale.set(p,p)}return s.occlusionTexture!==void 0&&o!==ks&&(f.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ks&&(a.emissive=new tt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ks&&f.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(f).then(function(){const p=new o(a);return s.name&&(p.name=s.name),_u(p,s),t.associations.set(p,{materials:e}),s.extensions&&Kc(i,p,s),p})}createUniqueName(e){const t=xn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[gn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return MI(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const f=e[a],h=bK(f),p=i[h];if(p)o.push(p.promise);else{let m;f.extensions&&f.extensions[gn.KHR_DRACO_MESH_COMPRESSION]?m=s(f):m=MI(new Zt,f,t),i[h]={primitive:f,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,f=o.length;l<f;l++){const h=o[l].material===void 0?wK(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const f=l.slice(0,l.length-1),h=l[l.length-1],p=[];for(let v=0,x=h.length;v<x;v++){const E=h[v],A=o[v];let y;const M=f[v];if(A.mode===ao.TRIANGLES||A.mode===ao.TRIANGLE_STRIP||A.mode===ao.TRIANGLE_FAN||A.mode===void 0)y=s.isSkinnedMesh===!0?new TT(E,M):new Kr(E,M),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),A.mode===ao.TRIANGLE_STRIP?y.geometry=_I(y.geometry,dT):A.mode===ao.TRIANGLE_FAN&&(y.geometry=_I(y.geometry,K_));else if(A.mode===ao.LINES)y=new Yo(E,M);else if(A.mode===ao.LINE_STRIP)y=new bl(E,M);else if(A.mode===ao.LINE_LOOP)y=new bT(E,M);else if(A.mode===ao.POINTS)y=new RT(E,M);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(y.geometry.morphAttributes).length>0&&CK(y,s),y.name=t.createUniqueName(s.name||"mesh_"+e),_u(y,s),A.extensions&&Kc(i,y,A),t.assignFinalMaterial(y),p.push(y)}for(let v=0,x=p.length;v<x;v++)t.associations.set(p[v],{meshes:e,primitives:v});if(p.length===1)return s.extensions&&Kc(i,p[0],s),p[0];const m=new Ma;s.extensions&&Kc(i,m,s),t.associations.set(m,{meshes:e});for(let v=0,x=p.length;v<x;v++)m.add(p[v]);return m})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Cr(AD.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Qu(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),_u(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let f=0,h=o.length;f<h;f++){const p=o[f];if(p){a.push(p);const m=new Ht;s!==null&&m.fromArray(s.array,f*16),l.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new d0(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){const m=r.channels[h],v=r.samplers[m.sampler],x=m.target,E=x.node,A=r.parameters!==void 0?r.parameters[v.input]:v.input,y=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&&(s.push(this.getDependency("node",E)),o.push(this.getDependency("accessor",A)),a.push(this.getDependency("accessor",y)),l.push(v),f.push(x))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(f)]).then(function(h){const p=h[0],m=h[1],v=h[2],x=h[3],E=h[4],A=[];for(let y=0,M=p.length;y<M;y++){const S=p[y],C=m[y],I=v[y],B=x[y],O=E[y];if(S===void 0)continue;S.updateMatrix();let z;switch(mu[O.path]){case mu.weights:z=Zh;break;case mu.rotation:z=ju;break;case mu.position:case mu.scale:default:z=$h;break}const L=S.name?S.name:S.uuid,N=B.interpolation!==void 0?EK[B.interpolation]:Ef,W=[];mu[O.path]===mu.weights?S.traverse(function(te){te.morphTargetInfluences&&W.push(te.name?te.name:te.uuid)}):W.push(L);let ae=I.array;if(I.normalized){const te=qE(ae.constructor),ie=new Float32Array(ae.length);for(let le=0,ce=ae.length;le<ce;le++)ie[le]=ae[le]*te;ae=ie}for(let te=0,ie=W.length;te<ie;te++){const le=new z(W[te]+"."+mu[O.path],C.array,ae,N);B.interpolation==="CUBICSPLINE"&&(le.createInterpolant=function(he){const K=this instanceof ju?MK:uF;return new K(this.times,this.values,this.getValueSize()/3,he)},le.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),A.push(le)}}return new ep(i,void 0,A)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,f=i.weights.length;l<f;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let f=0,h=a.length;f<h;f++)o.push(r.getDependency("node",a[f]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(f){const h=f[0],p=f[1],m=f[2];m!==null&&h.traverse(function(v){v.isSkinnedMesh&&v.bind(m,PK)});for(let v=0,x=p.length;v<x;v++)h.add(p[v]);return h})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(f){return i._getNodeRef(i.cameraCache,s.camera,f)})),i._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){a.push(f)}),this.nodeCache[e]=Promise.all(a).then(function(f){let h;if(s.isBone===!0?h=new L1:f.length>1?h=new Ma:f.length===1?h=f[0]:h=new Sn,h!==f[0])for(let p=0,m=f.length;p<m;p++)h.add(f[p]);if(s.name&&(h.userData.name=s.name,h.name=o),_u(h,s),s.extensions&&Kc(r,h,s),s.matrix!==void 0){const p=new Ht;p.fromArray(s.matrix),h.applyMatrix4(p)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Ma;r.name&&(s.name=i.createUniqueName(r.name)),_u(s,r),r.extensions&&Kc(t,s,r);const o=r.nodes||[],a=[];for(let l=0,f=o.length;l<f;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,p=l.length;h<p;h++)s.add(l[h]);const f=h=>{const p=new Map;for(const[m,v]of i.associations)(m instanceof Hr||m instanceof tr)&&p.set(m,v);return h.traverse(m=>{const v=i.associations.get(m);v!=null&&p.set(m,v)}),p};return i.associations=f(s),s})}}function BK(n,e,t){const r=e.attributes,i=new Ko;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,f=a.max;if(l!==void 0&&f!==void 0){if(i.set(new J(l[0],l[1],l[2]),new J(f[0],f[1],f[2])),a.normalized){const h=qE(Fh[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new J,l=new J;for(let f=0,h=s.length;f<h;f++){const p=s[f];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],v=m.min,x=m.max;if(v!==void 0&&x!==void 0){if(l.setX(Math.max(Math.abs(v[0]),Math.abs(x[0]))),l.setY(Math.max(Math.abs(v[1]),Math.abs(x[1]))),l.setZ(Math.max(Math.abs(v[2]),Math.abs(x[2]))),m.normalized){const E=qE(Fh[m.componentType]);l.multiplyScalar(E)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new xo;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function MI(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=YE[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return _u(n,e),BK(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?TK(n,e.targets,t):n})}class LK extends HT{constructor(e){super(e),this.type=Yi}parse(e){const a=function(S,C){switch(S){case 1:console.error("THREE.RGBELoader Read Error: "+(C||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(C||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(C||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(C||""))}return-1},p=`
`,m=function(S,C,I){C=C||1024;let O=S.pos,z=-1,L=0,N="",W=String.fromCharCode.apply(null,new Uint16Array(S.subarray(O,O+128)));for(;0>(z=W.indexOf(p))&&L<C&&O<S.byteLength;)N+=W,L+=W.length,O+=128,W+=String.fromCharCode.apply(null,new Uint16Array(S.subarray(O,O+128)));return-1<z?(I!==!1&&(S.pos+=L+z+1),N+W.slice(0,z)):!1},v=function(S){const C=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,L={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let N,W;if(S.pos>=S.byteLength||!(N=m(S)))return a(1,"no header found");if(!(W=N.match(C)))return a(3,"bad initial token");for(L.valid|=1,L.programtype=W[1],L.string+=N+`
`;N=m(S),N!==!1;){if(L.string+=N+`
`,N.charAt(0)==="#"){L.comments+=N+`
`;continue}if((W=N.match(I))&&(L.gamma=parseFloat(W[1])),(W=N.match(B))&&(L.exposure=parseFloat(W[1])),(W=N.match(O))&&(L.valid|=2,L.format=W[1]),(W=N.match(z))&&(L.valid|=4,L.height=parseInt(W[1],10),L.width=parseInt(W[2],10)),L.valid&2&&L.valid&4)break}return L.valid&2?L.valid&4?L:a(3,"missing image size specifier"):a(3,"missing format specifier")},x=function(S,C,I){const B=C;if(B<8||B>32767||S[0]!==2||S[1]!==2||S[2]&128)return new Uint8Array(S);if(B!==(S[2]<<8|S[3]))return a(3,"wrong scanline width");const O=new Uint8Array(4*C*I);if(!O.length)return a(4,"unable to allocate buffer space");let z=0,L=0;const N=4*B,W=new Uint8Array(4),ae=new Uint8Array(N);let te=I;for(;te>0&&L<S.byteLength;){if(L+4>S.byteLength)return a(1);if(W[0]=S[L++],W[1]=S[L++],W[2]=S[L++],W[3]=S[L++],W[0]!=2||W[1]!=2||(W[2]<<8|W[3])!=B)return a(3,"bad rgbe scanline format");let ie=0,le;for(;ie<N&&L<S.byteLength;){le=S[L++];const he=le>128;if(he&&(le-=128),le===0||ie+le>N)return a(3,"bad scanline data");if(he){const K=S[L++];for(let fe=0;fe<le;fe++)ae[ie++]=K}else ae.set(S.subarray(L,L+le),ie),ie+=le,L+=le}const ce=B;for(let he=0;he<ce;he++){let K=0;O[z]=ae[he+K],K+=B,O[z+1]=ae[he+K],K+=B,O[z+2]=ae[he+K],K+=B,O[z+3]=ae[he+K],z+=4}te--}return O},E=function(S,C,I,B){const O=S[C+3],z=Math.pow(2,O-128)/255;I[B+0]=S[C+0]*z,I[B+1]=S[C+1]*z,I[B+2]=S[C+2]*z,I[B+3]=1},A=function(S,C,I,B){const O=S[C+3],z=Math.pow(2,O-128)/255;I[B+0]=uf.toHalfFloat(Math.min(S[C+0]*z,65504)),I[B+1]=uf.toHalfFloat(Math.min(S[C+1]*z,65504)),I[B+2]=uf.toHalfFloat(Math.min(S[C+2]*z,65504)),I[B+3]=uf.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const M=v(y);if(M!==-1){const S=M.width,C=M.height,I=x(y.subarray(y.pos),S,C);if(I!==-1){let B,O,z;switch(this.type){case Fi:z=I.length/4;const L=new Float32Array(z*4);for(let W=0;W<z;W++)E(I,W*4,L,W*4);B=L,O=Fi;break;case Yi:z=I.length/4;const N=new Uint16Array(z*4);for(let W=0;W<z;W++)A(I,W*4,N,W*4);B=N,O=Yi;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:S,height:C,data:B,header:M.string,gamma:M.gamma,exposure:M.exposure,type:O}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case Fi:case Yi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Wn,o.magFilter=Wn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const Xm="colorSpace"in new tr;class DK extends HT{constructor(e){super(e),this.type=Yi}parse(e){const L=Math.pow(2.7182818,2.2);function N(U,R){for(var H=0,Y=0;Y<65536;++Y)(Y==0||U[Y>>3]&1<<(Y&7))&&(R[H++]=Y);for(var X=H-1;H<65536;)R[H++]=0;return X}function W(U){for(var R=0;R<16384;R++)U[R]={},U[R].len=0,U[R].lit=0,U[R].p=null}const ae={l:0,c:0,lc:0};function te(U,R,H,Y,X){for(;H<U;)R=R<<8|yt(Y,X),H+=8;H-=U,ae.l=R>>H&(1<<U)-1,ae.c=R,ae.lc=H}const ie=new Array(59);function le(U){for(var R=0;R<=58;++R)ie[R]=0;for(var R=0;R<65537;++R)ie[U[R]]+=1;for(var H=0,R=58;R>0;--R){var Y=H+ie[R]>>1;ie[R]=H,H=Y}for(var R=0;R<65537;++R){var X=U[R];X>0&&(U[R]=X|ie[X]++<<6)}}function ce(U,R,H,Y,X,Q,ye){for(var Se=H,Ie=0,Pe=0;X<=Q;X++){if(Se.value-H.value>Y)return!1;te(6,Ie,Pe,U,Se);var Fe=ae.l;if(Ie=ae.c,Pe=ae.lc,ye[X]=Fe,Fe==63){if(Se.value-H.value>Y)throw"Something wrong with hufUnpackEncTable";te(8,Ie,Pe,U,Se);var Ce=ae.l+6;if(Ie=ae.c,Pe=ae.lc,X+Ce>Q+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)ye[X++]=0;X--}else if(Fe>=59){var Ce=Fe-59+2;if(X+Ce>Q+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)ye[X++]=0;X--}}le(ye)}function he(U){return U&63}function K(U){return U>>6}function fe(U,R,H,Y){for(;R<=H;R++){var X=K(U[R]),Q=he(U[R]);if(X>>Q)throw"Invalid table entry";if(Q>14){var ye=Y[X>>Q-14];if(ye.len)throw"Invalid table entry";if(ye.lit++,ye.p){var Se=ye.p;ye.p=new Array(ye.lit);for(var Ie=0;Ie<ye.lit-1;++Ie)ye.p[Ie]=Se[Ie]}else ye.p=new Array(1);ye.p[ye.lit-1]=R}else if(Q)for(var Pe=0,Ie=1<<14-Q;Ie>0;Ie--){var ye=Y[(X<<14-Q)+Pe];if(ye.len||ye.p)throw"Invalid table entry";ye.len=Q,ye.lit=R,Pe++}}return!0}const re={c:0,lc:0};function se(U,R,H,Y){U=U<<8|yt(H,Y),R+=8,re.c=U,re.lc=R}const oe={c:0,lc:0};function Le(U,R,H,Y,X,Q,ye,Se,Ie,Pe){if(U==R){Y<8&&(se(H,Y,X,ye),H=re.c,Y=re.lc),Y-=8;var Fe=H>>Y,Fe=new Uint8Array([Fe])[0];if(Ie.value+Fe>Pe)return!1;for(var Ce=Se[Ie.value-1];Fe-- >0;)Se[Ie.value++]=Ce}else if(Ie.value<Pe)Se[Ie.value++]=U;else return!1;oe.c=H,oe.lc=Y}function Oe(U){return U&65535}function De(U){var R=Oe(U);return R>32767?R-65536:R}const Ue={a:0,b:0};function Xe(U,R){var H=De(U),Y=De(R),X=Y,Q=H+(X&1)+(X>>1),ye=Q,Se=Q-X;Ue.a=ye,Ue.b=Se}function rt(U,R){var H=Oe(U),Y=Oe(R),X=H-(Y>>1)&65535,Q=Y+X-32768&65535;Ue.a=Q,Ue.b=X}function Gt(U,R,H,Y,X,Q,ye){for(var Se=ye<16384,Ie=H>X?X:H,Pe=1,Fe;Pe<=Ie;)Pe<<=1;for(Pe>>=1,Fe=Pe,Pe>>=1;Pe>=1;){for(var Ce=0,dt=Ce+Q*(X-Fe),et=Q*Pe,nt=Q*Fe,St=Y*Pe,Lt=Y*Fe,Rt,lt,Ft,gt;Ce<=dt;Ce+=nt){for(var Vt=Ce,vn=Ce+Y*(H-Fe);Vt<=vn;Vt+=Lt){var kt=Vt+St,dn=Vt+et,cn=dn+St;Se?(Xe(U[Vt+R],U[dn+R]),Rt=Ue.a,Ft=Ue.b,Xe(U[kt+R],U[cn+R]),lt=Ue.a,gt=Ue.b,Xe(Rt,lt),U[Vt+R]=Ue.a,U[kt+R]=Ue.b,Xe(Ft,gt),U[dn+R]=Ue.a,U[cn+R]=Ue.b):(rt(U[Vt+R],U[dn+R]),Rt=Ue.a,Ft=Ue.b,rt(U[kt+R],U[cn+R]),lt=Ue.a,gt=Ue.b,rt(Rt,lt),U[Vt+R]=Ue.a,U[kt+R]=Ue.b,rt(Ft,gt),U[dn+R]=Ue.a,U[cn+R]=Ue.b)}if(H&Pe){var dn=Vt+et;Se?Xe(U[Vt+R],U[dn+R]):rt(U[Vt+R],U[dn+R]),Rt=Ue.a,U[dn+R]=Ue.b,U[Vt+R]=Rt}}if(X&Pe)for(var Vt=Ce,vn=Ce+Y*(H-Fe);Vt<=vn;Vt+=Lt){var kt=Vt+St;Se?Xe(U[Vt+R],U[kt+R]):rt(U[Vt+R],U[kt+R]),Rt=Ue.a,U[kt+R]=Ue.b,U[Vt+R]=Rt}Fe=Pe,Pe>>=1}return Ce}function Dt(U,R,H,Y,X,Q,ye,Se,Ie,Pe){for(var Fe=0,Ce=0,dt=Se,et=Math.trunc(X.value+(Q+7)/8);X.value<et;)for(se(Fe,Ce,H,X),Fe=re.c,Ce=re.lc;Ce>=14;){var nt=Fe>>Ce-14&16383,St=R[nt];if(St.len)Ce-=St.len,Le(St.lit,ye,Fe,Ce,H,Y,X,Ie,Pe,dt),Fe=oe.c,Ce=oe.lc;else{if(!St.p)throw"hufDecode issues";var Lt;for(Lt=0;Lt<St.lit;Lt++){for(var Rt=he(U[St.p[Lt]]);Ce<Rt&&X.value<et;)se(Fe,Ce,H,X),Fe=re.c,Ce=re.lc;if(Ce>=Rt&&K(U[St.p[Lt]])==(Fe>>Ce-Rt&(1<<Rt)-1)){Ce-=Rt,Le(St.p[Lt],ye,Fe,Ce,H,Y,X,Ie,Pe,dt),Fe=oe.c,Ce=oe.lc;break}}if(Lt==St.lit)throw"hufDecode issues"}}var lt=8-Q&7;for(Fe>>=lt,Ce-=lt;Ce>0;){var St=R[Fe<<14-Ce&16383];if(St.len)Ce-=St.len,Le(St.lit,ye,Fe,Ce,H,Y,X,Ie,Pe,dt),Fe=oe.c,Ce=oe.lc;else throw"hufDecode issues"}return!0}function Ge(U,R,H,Y,X,Q){var ye={value:0},Se=H.value,Ie=pt(R,H),Pe=pt(R,H);H.value+=4;var Fe=pt(R,H);if(H.value+=4,Ie<0||Ie>=65537||Pe<0||Pe>=65537)throw"Something wrong with HUF_ENCSIZE";var Ce=new Array(65537),dt=new Array(16384);W(dt);var et=Y-(H.value-Se);if(ce(U,R,H,et,Ie,Pe,Ce),Fe>8*(Y-(H.value-Se)))throw"Something wrong with hufUncompress";fe(Ce,Ie,Pe,dt),Dt(Ce,dt,U,R,H,Fe,Pe,Q,X,ye)}function $(U,R,H){for(var Y=0;Y<H;++Y)R[Y]=U[R[Y]]}function Ne(U){for(var R=1;R<U.length;R++){var H=U[R-1]+U[R]-128;U[R]=H}}function Be(U,R){for(var H=0,Y=Math.floor((U.length+1)/2),X=0,Q=U.length-1;!(X>Q||(R[X++]=U[H++],X>Q));)R[X++]=U[Y++]}function Ve(U){for(var R=U.byteLength,H=new Array,Y=0,X=new DataView(U);R>0;){var Q=X.getInt8(Y++);if(Q<0){var ye=-Q;R-=ye+1;for(var Se=0;Se<ye;Se++)H.push(X.getUint8(Y++))}else{var ye=Q;R-=2;for(var Ie=X.getUint8(Y++),Se=0;Se<ye+1;Se++)H.push(Ie)}}return H}function He(U,R,H,Y,X,Q){var kt=new DataView(Q.buffer),ye=H[U.idx[0]].width,Se=H[U.idx[0]].height,Ie=3,Pe=Math.floor(ye/8),Fe=Math.ceil(ye/8),Ce=Math.ceil(Se/8),dt=ye-(Fe-1)*8,et=Se-(Ce-1)*8,nt={value:0},St=new Array(Ie),Lt=new Array(Ie),Rt=new Array(Ie),lt=new Array(Ie),Ft=new Array(Ie);for(let Wt=0;Wt<Ie;++Wt)Ft[Wt]=R[U.idx[Wt]],St[Wt]=Wt<1?0:St[Wt-1]+Fe*Ce,Lt[Wt]=new Float32Array(64),Rt[Wt]=new Uint16Array(64),lt[Wt]=new Uint16Array(Fe*64);for(let Wt=0;Wt<Ce;++Wt){var gt=8;Wt==Ce-1&&(gt=et);var Vt=8;for(let mn=0;mn<Fe;++mn){mn==Fe-1&&(Vt=dt);for(let an=0;an<Ie;++an)Rt[an].fill(0),Rt[an][0]=X[St[an]++],vt(nt,Y,Rt[an]),st(Rt[an],Lt[an]),ft(Lt[an]);Ct(Lt);for(let an=0;an<Ie;++an)jt(Lt[an],lt[an],mn*64)}let Gn=0;for(let mn=0;mn<Ie;++mn){const an=H[U.idx[mn]].type;for(let kn=8*Wt;kn<8*Wt+gt;++kn){Gn=Ft[mn][kn];for(let Zr=0;Zr<Pe;++Zr){const Br=Zr*64+(kn&7)*8;kt.setUint16(Gn+0*2*an,lt[mn][Br+0],!0),kt.setUint16(Gn+1*2*an,lt[mn][Br+1],!0),kt.setUint16(Gn+2*2*an,lt[mn][Br+2],!0),kt.setUint16(Gn+3*2*an,lt[mn][Br+3],!0),kt.setUint16(Gn+4*2*an,lt[mn][Br+4],!0),kt.setUint16(Gn+5*2*an,lt[mn][Br+5],!0),kt.setUint16(Gn+6*2*an,lt[mn][Br+6],!0),kt.setUint16(Gn+7*2*an,lt[mn][Br+7],!0),Gn+=8*2*an}}if(Pe!=Fe)for(let kn=8*Wt;kn<8*Wt+gt;++kn){const Zr=Ft[mn][kn]+8*Pe*2*an,Br=Pe*64+(kn&7)*8;for(let rs=0;rs<Vt;++rs)kt.setUint16(Zr+rs*2*an,lt[mn][Br+rs],!0)}}}for(var vn=new Uint16Array(ye),kt=new DataView(Q.buffer),dn=0;dn<Ie;++dn){H[U.idx[dn]].decoded=!0;var cn=H[U.idx[dn]].type;if(H[dn].type==2)for(var Tn=0;Tn<Se;++Tn){const Wt=Ft[dn][Tn];for(var Un=0;Un<ye;++Un)vn[Un]=kt.getUint16(Wt+Un*2*cn,!0);for(var Un=0;Un<ye;++Un)kt.setFloat32(Wt+Un*2*cn,Ae(vn[Un]),!0)}}}function vt(U,R,H){for(var Y,X=1;X<64;)Y=R[U.value],Y==65280?X=64:Y>>8==255?X+=Y&255:(H[X]=Y,X++),U.value++}function st(U,R){R[0]=Ae(U[0]),R[1]=Ae(U[1]),R[2]=Ae(U[5]),R[3]=Ae(U[6]),R[4]=Ae(U[14]),R[5]=Ae(U[15]),R[6]=Ae(U[27]),R[7]=Ae(U[28]),R[8]=Ae(U[2]),R[9]=Ae(U[4]),R[10]=Ae(U[7]),R[11]=Ae(U[13]),R[12]=Ae(U[16]),R[13]=Ae(U[26]),R[14]=Ae(U[29]),R[15]=Ae(U[42]),R[16]=Ae(U[3]),R[17]=Ae(U[8]),R[18]=Ae(U[12]),R[19]=Ae(U[17]),R[20]=Ae(U[25]),R[21]=Ae(U[30]),R[22]=Ae(U[41]),R[23]=Ae(U[43]),R[24]=Ae(U[9]),R[25]=Ae(U[11]),R[26]=Ae(U[18]),R[27]=Ae(U[24]),R[28]=Ae(U[31]),R[29]=Ae(U[40]),R[30]=Ae(U[44]),R[31]=Ae(U[53]),R[32]=Ae(U[10]),R[33]=Ae(U[19]),R[34]=Ae(U[23]),R[35]=Ae(U[32]),R[36]=Ae(U[39]),R[37]=Ae(U[45]),R[38]=Ae(U[52]),R[39]=Ae(U[54]),R[40]=Ae(U[20]),R[41]=Ae(U[22]),R[42]=Ae(U[33]),R[43]=Ae(U[38]),R[44]=Ae(U[46]),R[45]=Ae(U[51]),R[46]=Ae(U[55]),R[47]=Ae(U[60]),R[48]=Ae(U[21]),R[49]=Ae(U[34]),R[50]=Ae(U[37]),R[51]=Ae(U[47]),R[52]=Ae(U[50]),R[53]=Ae(U[56]),R[54]=Ae(U[59]),R[55]=Ae(U[61]),R[56]=Ae(U[35]),R[57]=Ae(U[36]),R[58]=Ae(U[48]),R[59]=Ae(U[49]),R[60]=Ae(U[57]),R[61]=Ae(U[58]),R[62]=Ae(U[62]),R[63]=Ae(U[63])}function ft(U){const R=.5*Math.cos(.7853975),H=.5*Math.cos(3.14159/16),Y=.5*Math.cos(3.14159/8),X=.5*Math.cos(3*3.14159/16),Q=.5*Math.cos(5*3.14159/16),ye=.5*Math.cos(3*3.14159/8),Se=.5*Math.cos(7*3.14159/16);for(var Ie=new Array(4),Pe=new Array(4),Fe=new Array(4),Ce=new Array(4),dt=0;dt<8;++dt){var et=dt*8;Ie[0]=Y*U[et+2],Ie[1]=ye*U[et+2],Ie[2]=Y*U[et+6],Ie[3]=ye*U[et+6],Pe[0]=H*U[et+1]+X*U[et+3]+Q*U[et+5]+Se*U[et+7],Pe[1]=X*U[et+1]-Se*U[et+3]-H*U[et+5]-Q*U[et+7],Pe[2]=Q*U[et+1]-H*U[et+3]+Se*U[et+5]+X*U[et+7],Pe[3]=Se*U[et+1]-Q*U[et+3]+X*U[et+5]-H*U[et+7],Fe[0]=R*(U[et+0]+U[et+4]),Fe[3]=R*(U[et+0]-U[et+4]),Fe[1]=Ie[0]+Ie[3],Fe[2]=Ie[1]-Ie[2],Ce[0]=Fe[0]+Fe[1],Ce[1]=Fe[3]+Fe[2],Ce[2]=Fe[3]-Fe[2],Ce[3]=Fe[0]-Fe[1],U[et+0]=Ce[0]+Pe[0],U[et+1]=Ce[1]+Pe[1],U[et+2]=Ce[2]+Pe[2],U[et+3]=Ce[3]+Pe[3],U[et+4]=Ce[3]-Pe[3],U[et+5]=Ce[2]-Pe[2],U[et+6]=Ce[1]-Pe[1],U[et+7]=Ce[0]-Pe[0]}for(var nt=0;nt<8;++nt)Ie[0]=Y*U[16+nt],Ie[1]=ye*U[16+nt],Ie[2]=Y*U[48+nt],Ie[3]=ye*U[48+nt],Pe[0]=H*U[8+nt]+X*U[24+nt]+Q*U[40+nt]+Se*U[56+nt],Pe[1]=X*U[8+nt]-Se*U[24+nt]-H*U[40+nt]-Q*U[56+nt],Pe[2]=Q*U[8+nt]-H*U[24+nt]+Se*U[40+nt]+X*U[56+nt],Pe[3]=Se*U[8+nt]-Q*U[24+nt]+X*U[40+nt]-H*U[56+nt],Fe[0]=R*(U[nt]+U[32+nt]),Fe[3]=R*(U[nt]-U[32+nt]),Fe[1]=Ie[0]+Ie[3],Fe[2]=Ie[1]-Ie[2],Ce[0]=Fe[0]+Fe[1],Ce[1]=Fe[3]+Fe[2],Ce[2]=Fe[3]-Fe[2],Ce[3]=Fe[0]-Fe[1],U[0+nt]=Ce[0]+Pe[0],U[8+nt]=Ce[1]+Pe[1],U[16+nt]=Ce[2]+Pe[2],U[24+nt]=Ce[3]+Pe[3],U[32+nt]=Ce[3]-Pe[3],U[40+nt]=Ce[2]-Pe[2],U[48+nt]=Ce[1]-Pe[1],U[56+nt]=Ce[0]-Pe[0]}function Ct(U){for(var R=0;R<64;++R){var H=U[0][R],Y=U[1][R],X=U[2][R];U[0][R]=H+1.5747*X,U[1][R]=H-.1873*Y-.4682*X,U[2][R]=H+1.8556*Y}}function jt(U,R,H){for(var Y=0;Y<64;++Y)R[H+Y]=uf.toHalfFloat(un(U[Y]))}function un(U){return U<=1?Math.sign(U)*Math.pow(Math.abs(U),2.2):Math.sign(U)*Math.pow(L,Math.abs(U)-1)}function Z(U){return new DataView(U.array.buffer,U.offset.value,U.size)}function G(U){var R=U.viewer.buffer.slice(U.offset.value,U.offset.value+U.size),H=new Uint8Array(Ve(R)),Y=new Uint8Array(H.length);return Ne(H),Be(H,Y),new DataView(Y.buffer)}function _e(U){var R=U.array.slice(U.offset.value,U.offset.value+U.size),H=Xy(R),Y=new Uint8Array(H.length);return Ne(H),Be(H,Y),new DataView(Y.buffer)}function je(U){for(var R=U.viewer,H={value:U.offset.value},Y=new Uint16Array(U.width*U.scanlineBlockSize*(U.channels*U.type)),X=new Uint8Array(8192),Q=0,ye=new Array(U.channels),Se=0;Se<U.channels;Se++)ye[Se]={},ye[Se].start=Q,ye[Se].end=ye[Se].start,ye[Se].nx=U.width,ye[Se].ny=U.lines,ye[Se].size=U.type,Q+=ye[Se].nx*ye[Se].ny*ye[Se].size;var Ie=Me(R,H),Pe=Me(R,H);if(Pe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ie<=Pe)for(var Se=0;Se<Pe-Ie+1;Se++)X[Se+Ie]=mt(R,H);var Fe=new Uint16Array(65536),Ce=N(X,Fe),dt=pt(R,H);Ge(U.array,R,H,dt,Y,Q);for(var Se=0;Se<U.channels;++Se)for(var et=ye[Se],nt=0;nt<ye[Se].size;++nt)Gt(Y,et.start+nt,et.nx,et.size,et.ny,et.nx*et.size,Ce);$(Fe,Y,Q);for(var St=0,Lt=new Uint8Array(Y.buffer.byteLength),Rt=0;Rt<U.lines;Rt++)for(var lt=0;lt<U.channels;lt++){var et=ye[lt],Ft=et.nx*et.size,gt=new Uint8Array(Y.buffer,et.end*2,Ft*2);Lt.set(gt,St),St+=Ft*2,et.end+=Ft}return new DataView(Lt.buffer)}function ke(U){var R=U.array.slice(U.offset.value,U.offset.value+U.size),H=Xy(R);const Y=U.lines*U.channels*U.width,X=U.type==1?new Uint16Array(Y):new Uint32Array(Y);let Q=0,ye=0;const Se=new Array(4);for(let Ie=0;Ie<U.lines;Ie++)for(let Pe=0;Pe<U.channels;Pe++){let Fe=0;switch(U.type){case 1:Se[0]=Q,Se[1]=Se[0]+U.width,Q=Se[1]+U.width;for(let Ce=0;Ce<U.width;++Ce){const dt=H[Se[0]++]<<8|H[Se[1]++];Fe+=dt,X[ye]=Fe,ye++}break;case 2:Se[0]=Q,Se[1]=Se[0]+U.width,Se[2]=Se[1]+U.width,Q=Se[2]+U.width;for(let Ce=0;Ce<U.width;++Ce){const dt=H[Se[0]++]<<24|H[Se[1]++]<<16|H[Se[2]++]<<8;Fe+=dt,X[ye]=Fe,ye++}break}}return new DataView(X.buffer)}function Ke(U){var R=U.viewer,H={value:U.offset.value},Y=new Uint8Array(U.width*U.lines*(U.channels*U.type*2)),X={version:It(R,H),unknownUncompressedSize:It(R,H),unknownCompressedSize:It(R,H),acCompressedSize:It(R,H),dcCompressedSize:It(R,H),rleCompressedSize:It(R,H),rleUncompressedSize:It(R,H),rleRawSize:It(R,H),totalAcUncompressedCount:It(R,H),totalDcUncompressedCount:It(R,H),acCompression:It(R,H)};if(X.version<2)throw"EXRLoader.parse: "+Ir.compression+" version "+X.version+" is unsupported";for(var Q=new Array,ye=Me(R,H)-2;ye>0;){var Se=xt(R.buffer,H),Ie=mt(R,H),Pe=Ie>>2&3,Fe=(Ie>>4)-1,Ce=new Int8Array([Fe])[0],dt=mt(R,H);Q.push({name:Se,index:Ce,type:dt,compression:Pe}),ye-=Se.length+3}for(var et=Ir.channels,nt=new Array(U.channels),St=0;St<U.channels;++St){var Lt=nt[St]={},Rt=et[St];Lt.name=Rt.name,Lt.compression=0,Lt.decoded=!1,Lt.type=Rt.pixelType,Lt.pLinear=Rt.pLinear,Lt.width=U.width,Lt.height=U.lines}for(var lt={idx:new Array(3)},Ft=0;Ft<U.channels;++Ft)for(var Lt=nt[Ft],St=0;St<Q.length;++St){var gt=Q[St];Lt.name==gt.name&&(Lt.compression=gt.compression,gt.index>=0&&(lt.idx[gt.index]=Ft),Lt.offset=Ft)}if(X.acCompressedSize>0)switch(X.acCompression){case 0:var kt=new Uint16Array(X.totalAcUncompressedCount);Ge(U.array,R,H,X.acCompressedSize,kt,X.totalAcUncompressedCount);break;case 1:var Vt=U.array.slice(H.value,H.value+X.totalAcUncompressedCount),vn=Xy(Vt),kt=new Uint16Array(vn.buffer);H.value+=X.totalAcUncompressedCount;break}if(X.dcCompressedSize>0){var dn={array:U.array,offset:H,size:X.dcCompressedSize},cn=new Uint16Array(_e(dn).buffer);H.value+=X.dcCompressedSize}if(X.rleRawSize>0){var Vt=U.array.slice(H.value,H.value+X.rleCompressedSize),vn=Xy(Vt),Tn=Ve(vn.buffer);H.value+=X.rleCompressedSize}for(var Un=0,Wt=new Array(nt.length),St=0;St<Wt.length;++St)Wt[St]=new Array;for(var Gn=0;Gn<U.lines;++Gn)for(var mn=0;mn<nt.length;++mn)Wt[mn].push(Un),Un+=nt[mn].width*U.type*2;He(lt,Wt,nt,kt,cn,Y);for(var St=0;St<nt.length;++St){var Lt=nt[St];if(!Lt.decoded)switch(Lt.compression){case 2:for(var an=0,kn=0,Gn=0;Gn<U.lines;++Gn){for(var Zr=Wt[St][an],Br=0;Br<Lt.width;++Br){for(var rs=0;rs<2*Lt.type;++rs)Y[Zr++]=Tn[kn+rs*Lt.width*Lt.height];kn++}an++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Y.buffer)}function xt(U,R){for(var H=new Uint8Array(U),Y=0;H[R.value+Y]!=0;)Y+=1;var X=new TextDecoder().decode(H.slice(R.value,R.value+Y));return R.value=R.value+Y+1,X}function Qe(U,R,H){var Y=new TextDecoder().decode(new Uint8Array(U).slice(R.value,R.value+H));return R.value=R.value+H,Y}function Ee(U,R){var H=ct(U,R),Y=pt(U,R);return[H,Y]}function bt(U,R){var H=pt(U,R),Y=pt(U,R);return[H,Y]}function ct(U,R){var H=U.getInt32(R.value,!0);return R.value=R.value+4,H}function pt(U,R){var H=U.getUint32(R.value,!0);return R.value=R.value+4,H}function yt(U,R){var H=U[R.value];return R.value=R.value+1,H}function mt(U,R){var H=U.getUint8(R.value);return R.value=R.value+1,H}const It=function(U,R){let H;return"getBigInt64"in DataView.prototype?H=Number(U.getBigInt64(R.value,!0)):H=U.getUint32(R.value+4,!0)+Number(U.getUint32(R.value,!0)<<32),R.value+=8,H};function Ut(U,R){var H=U.getFloat32(R.value,!0);return R.value+=4,H}function de(U,R){return uf.toHalfFloat(Ut(U,R))}function Ae(U){var R=(U&31744)>>10,H=U&1023;return(U>>15?-1:1)*(R?R===31?H?NaN:1/0:Math.pow(2,R-15)*(1+H/1024):6103515625e-14*(H/1024))}function Me(U,R){var H=U.getUint16(R.value,!0);return R.value+=2,H}function Ze(U,R){return Ae(Me(U,R))}function it(U,R,H,Y){for(var X=H.value,Q=[];H.value<X+Y-1;){var ye=xt(R,H),Se=ct(U,H),Ie=mt(U,H);H.value+=3;var Pe=ct(U,H),Fe=ct(U,H);Q.push({name:ye,pixelType:Se,pLinear:Ie,xSampling:Pe,ySampling:Fe})}return H.value+=1,Q}function $t(U,R){var H=Ut(U,R),Y=Ut(U,R),X=Ut(U,R),Q=Ut(U,R),ye=Ut(U,R),Se=Ut(U,R),Ie=Ut(U,R),Pe=Ut(U,R);return{redX:H,redY:Y,greenX:X,greenY:Q,blueX:ye,blueY:Se,whiteX:Ie,whiteY:Pe}}function wn(U,R){var H=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Y=mt(U,R);return H[Y]}function Nn(U,R){var H=pt(U,R),Y=pt(U,R),X=pt(U,R),Q=pt(U,R);return{xMin:H,yMin:Y,xMax:X,yMax:Q}}function ci(U,R){var H=["INCREASING_Y"],Y=mt(U,R);return H[Y]}function sn(U,R){var H=Ut(U,R),Y=Ut(U,R);return[H,Y]}function Gr(U,R){var H=Ut(U,R),Y=Ut(U,R),X=Ut(U,R);return[H,Y,X]}function or(U,R,H,Y,X){if(Y==="string"||Y==="stringvector"||Y==="iccProfile")return Qe(R,H,X);if(Y==="chlist")return it(U,R,H,X);if(Y==="chromaticities")return $t(U,H);if(Y==="compression")return wn(U,H);if(Y==="box2i")return Nn(U,H);if(Y==="lineOrder")return ci(U,H);if(Y==="float")return Ut(U,H);if(Y==="v2f")return sn(U,H);if(Y==="v3f")return Gr(U,H);if(Y==="int")return ct(U,H);if(Y==="rational")return Ee(U,H);if(Y==="timecode")return bt(U,H);if(Y==="preview")return H.value+=X,"skipped";H.value+=X}function Zo(U,R,H){const Y={};if(U.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Y.version=U.getUint8(4);const X=U.getUint8(5);Y.spec={singleTile:!!(X&2),longName:!!(X&4),deepFormat:!!(X&8),multiPart:!!(X&16)},H.value=8;for(var Q=!0;Q;){var ye=xt(R,H);if(ye==0)Q=!1;else{var Se=xt(R,H),Ie=pt(U,H),Pe=or(U,R,H,Se,Ie);Pe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Se}'.`):Y[ye]=Pe}}if(X&-5)throw console.error("EXRHeader:",Y),"THREE.EXRLoader: provided file is currently unsupported.";return Y}function $o(U,R,H,Y,X){const Q={size:0,viewer:R,array:H,offset:Y,width:U.dataWindow.xMax-U.dataWindow.xMin+1,height:U.dataWindow.yMax-U.dataWindow.yMin+1,channels:U.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:U.channels[0].pixelType,uncompress:null,getter:null,format:null,[Xm?"colorSpace":"encoding"]:null};switch(U.compression){case"NO_COMPRESSION":Q.lines=1,Q.uncompress=Z;break;case"RLE_COMPRESSION":Q.lines=1,Q.uncompress=G;break;case"ZIPS_COMPRESSION":Q.lines=1,Q.uncompress=_e;break;case"ZIP_COMPRESSION":Q.lines=16,Q.uncompress=_e;break;case"PIZ_COMPRESSION":Q.lines=32,Q.uncompress=je;break;case"PXR24_COMPRESSION":Q.lines=16,Q.uncompress=ke;break;case"DWAA_COMPRESSION":Q.lines=32,Q.uncompress=Ke;break;case"DWAB_COMPRESSION":Q.lines=256,Q.uncompress=Ke;break;default:throw"EXRLoader.parse: "+U.compression+" is unsupported"}if(Q.scanlineBlockSize=Q.lines,Q.type==1)switch(X){case Fi:Q.getter=Ze,Q.inputSize=2;break;case Yi:Q.getter=Me,Q.inputSize=2;break}else if(Q.type==2)switch(X){case Fi:Q.getter=Ut,Q.inputSize=4;break;case Yi:Q.getter=de,Q.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Q.type+" for "+U.compression+".";Q.blockCount=(U.dataWindow.yMax+1)/Q.scanlineBlockSize;for(var ye=0;ye<Q.blockCount;ye++)It(R,Y);Q.outputChannels=Q.channels==3?4:Q.channels;const Se=Q.width*Q.height*Q.outputChannels;switch(X){case Fi:Q.byteArray=new Float32Array(Se),Q.channels<Q.outputChannels&&Q.byteArray.fill(1,0,Se);break;case Yi:Q.byteArray=new Uint16Array(Se),Q.channels<Q.outputChannels&&Q.byteArray.fill(15360,0,Se);break;default:console.error("THREE.EXRLoader: unsupported type: ",X);break}return Q.bytesPerLine=Q.width*Q.inputSize*Q.channels,Q.outputChannels==4?Q.format=Ki:Q.format=aT,Xm?Q.colorSpace="srgb-linear":Q.encoding=3e3,Q}const ws=new DataView(e),ts=new Uint8Array(e),ns={value:0},Ir=Zo(ws,e,ns),zt=$o(Ir,ws,ts,ns,this.type),Mo={value:0},Fa={R:0,G:1,B:2,A:3,Y:0};for(let U=0;U<zt.height/zt.scanlineBlockSize;U++){const R=pt(ws,ns);zt.size=pt(ws,ns),zt.lines=R+zt.scanlineBlockSize>zt.height?zt.height-R:zt.scanlineBlockSize;const Y=zt.size<zt.lines*zt.bytesPerLine?zt.uncompress(zt):Z(zt);ns.value+=zt.size;for(let X=0;X<zt.scanlineBlockSize;X++){const Q=X+U*zt.scanlineBlockSize;if(Q>=zt.height)break;for(let ye=0;ye<zt.channels;ye++){const Se=Fa[Ir.channels[ye].name];for(let Ie=0;Ie<zt.width;Ie++){Mo.value=(X*(zt.channels*zt.width)+ye*zt.width+Ie)*zt.inputSize;const Pe=(zt.height-1-Q)*(zt.width*zt.outputChannels)+Ie*zt.outputChannels+Se;zt.byteArray[Pe]=zt.getter(Y,Mo)}}}}return{header:Ir,width:zt.width,height:zt.height,data:zt.byteArray,format:zt.format,[Xm?"colorSpace":"encoding"]:zt[Xm?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){Xm?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Wn,o.magFilter=Wn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const $A=new WeakMap;class OK extends ki{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Ws(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const f=t.attributeTypes[l];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=f.name)}const r=JSON.stringify(t);if($A.has(e)){const l=$A.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((f,h)=>{i._callbacks[s]={resolve:f,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),$A.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Zt;e.index&&t.setIndex(new Cn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Cn(o,a))}return t}_loadLibrary(e,t){const r=new Ws(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=FK.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function FK(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(p){h({draco:p})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,f=a.taskConfig;e.then(h=>{const p=h.draco,m=new p.Decoder,v=new p.DecoderBuffer;v.Init(new Int8Array(l),l.byteLength);try{const x=t(p,m,v,f),E=x.attributes.map(A=>A.array.buffer);x.index&&E.push(x.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:x},E)}catch(x){console.error(x),self.postMessage({type:"error",id:a.id,error:x.message})}finally{p.destroy(v),p.destroy(m)}});break}};function t(o,a,l,f){const h=f.attributeIDs,p=f.attributeTypes;let m,v;const x=a.GetEncodedGeometryType(l);if(x===o.TRIANGULAR_MESH)m=new o.Mesh,v=a.DecodeBufferToMesh(l,m);else if(x===o.POINT_CLOUD)m=new o.PointCloud,v=a.DecodeBufferToPointCloud(l,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const E={index:null,attributes:[]};for(const A in h){const y=self[p[A]];let M,S;if(f.useUniqueIDs)S=h[A],M=a.GetAttributeByUniqueId(m,S);else{if(S=a.GetAttributeId(m,o[h[A]]),S===-1)continue;M=a.GetAttribute(m,S)}E.attributes.push(i(o,a,m,A,y,M))}return x===o.TRIANGULAR_MESH&&(E.index=r(o,a,m)),o.destroy(m),E}function r(o,a,l){const h=l.num_faces()*3,p=h*4,m=o._malloc(p);a.GetTrianglesUInt32Array(l,p,m);const v=new Uint32Array(o.HEAPF32.buffer,m,h).slice();return o._free(m),{array:v,itemSize:1}}function i(o,a,l,f,h,p){const m=p.num_components(),x=l.num_points()*m,E=x*h.BYTES_PER_ELEMENT,A=s(o,h),y=o._malloc(E);a.GetAttributeDataArrayForAllPoints(l,p,A,E,y);const M=new h(o.HEAPF32.buffer,y,x).slice();return o._free(y),{name:f,array:M,itemSize:m}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Jy;const eM=()=>{if(Jy)return Jy;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(p=>{s=p.instance,s.exports.__wasm_call_ctors()});function a(p){const m=new Uint8Array(p.length);for(let x=0;x<p.length;++x){const E=p.charCodeAt(x);m[x]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}let v=0;for(let x=0;x<p.length;++x)m[v++]=m[x]<60?r[m[x]]:(m[x]-60)*64+m[++x];return m.buffer.slice(0,v)}function l(p,m,v,x,E,A){const y=s.exports.sbrk,M=v+3&-4,S=y(M*x),C=y(E.length),I=new Uint8Array(s.exports.memory.buffer);I.set(E,C);const B=p(S,v,x,C,E.length);if(B===0&&A&&A(S,M,x),m.set(I.subarray(S,S+v*x)),y(S-y(0)),B!==0)throw new Error(`Malformed buffer data: ${B}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Jy={ready:o,supported:!0,decodeVertexBuffer(p,m,v,x,E){l(s.exports.meshopt_decodeVertexBuffer,p,m,v,x,s.exports[f[E]])},decodeIndexBuffer(p,m,v,x){l(s.exports.meshopt_decodeIndexBuffer,p,m,v,x)},decodeIndexSequence(p,m,v,x){l(s.exports.meshopt_decodeIndexSequence,p,m,v,x)},decodeGltfBuffer(p,m,v,x,E,A){l(s.exports[h[E]],p,m,v,x,s.exports[f[A]])}},Jy};let Ky=null,cF="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function fF(n,e,t){return r=>{t&&t(r),n&&(Ky||(Ky=new OK),Ky.setDecoderPath(typeof n=="string"?n:cF),r.setDRACOLoader(Ky)),e&&r.setMeshoptDecoder(typeof eM=="function"?eM():eM)}}function Z1(n,e=!0,t=!0,r){return pp(iC,n,fF(e,t,r))}Z1.preload=(n,e=!0,t=!0,r)=>pp.preload(iC,n,fF(e,t,r));Z1.clear=n=>pp.clear(iC,n);Z1.setDecoderPath=n=>{cF=n};const tM={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},NK="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",EI=n=>Array.isArray(n);function dF({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in tM))throw new Error("Preset must be one of: "+Object.keys(tM).join(", "));n=tM[t],e=NK}if(a=EI(n),l=EI(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?uO:l==="hdr"?LK:l==="exr"?DK:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const f=pp(o,a?[n]:n,v=>{v.setPath==null||v.setPath(e),i&&i(v)}),h=a?f[0]:f;h.mapping=a?La:Xh;const p=3001,m=3e3;return"colorSpace"in h?h.colorSpace=r??a?"srgb":"srgb-linear":h.encoding=r??a?p:m,h}const UK=n=>n.current&&n.current.isScene,kK=n=>UK(n)?n.current:n;function sC(n,e,t,r,i=0){const s=kK(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=r),n&&(s.background=r),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function oC({scene:n,background:e=!1,blur:t,map:r}){const i=Zi(s=>s.scene);return ee.useLayoutEffect(()=>{if(r)return sC(e,n,i,r,t)},[i,n,r,e,t]),null}function hF({background:n=!1,scene:e,blur:t,...r}){const i=dF(r),s=Zi(o=>o.scene);return ee.useLayoutEffect(()=>sC(n,e,s,i,t),[i,n,e,s,t]),null}function zK({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:f,path:h,preset:p=void 0,extensions:m}){const v=Zi(S=>S.gl),x=Zi(S=>S.scene),E=ee.useRef(null),[A]=ee.useState(()=>new Wg),y=ee.useMemo(()=>{const S=new xT(r);return S.texture.type=Yi,S},[r]);ee.useLayoutEffect(()=>(i===1&&E.current.update(v,A),sC(o,l,x,y.texture,a)),[n,A,y.texture,l,x,o,i,v]);let M=1;return Lf(()=>{(i===1/0||M<i)&&(E.current.update(v,A),M++)}),ee.createElement(ee.Fragment,null,LX(ee.createElement(ee.Fragment,null,n,ee.createElement("cubeCamera",{ref:E,args:[e,t,y]}),f||p?ee.createElement(hF,{background:!0,files:f,preset:p,path:h,extensions:m}):s?ee.createElement(oC,{background:!0,map:s,extensions:m}):null),A))}function HK(n){var e,t,r,i;const s=dF(n),o=n.map||s;ee.useMemo(()=>LO({GroundProjectedEnvImpl:eK}),[]);const a=ee.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,f=(t=n.ground)==null?void 0:t.radius,h=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return ee.createElement(ee.Fragment,null,ee.createElement(oC,Et({},n,{map:o})),ee.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:f}))}function GK(n){return n.ground?ee.createElement(HK,n):n.map?ee.createElement(oC,n):n.children?ee.createElement(zK,n):ee.createElement(hF,n)}function Qg(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const VK=Object.freeze(Object.defineProperty({__proto__:null,default:Qg},Symbol.toStringTag,{value:"Module"}));function pF(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var WK=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jK=pF(function(n){return WK.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function XK(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function JK(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var KK=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(JK(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=XK(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Li="-ms-",$_="-moz-",In="-webkit-",mF="comm",aC="rule",lC="decl",YK="@import",gF="@keyframes",qK="@layer",QK=Math.abs,$1=String.fromCharCode,ZK=Object.assign;function $K(n,e){return vi(n,0)^45?(((e<<2^vi(n,0))<<2^vi(n,1))<<2^vi(n,2))<<2^vi(n,3):0}function vF(n){return n.trim()}function eY(n,e){return(n=e.exec(n))?n[0]:n}function Bn(n,e,t){return n.replace(e,t)}function QE(n,e){return n.indexOf(e)}function vi(n,e){return n.charCodeAt(e)|0}function Zg(n,e,t){return n.slice(e,t)}function _a(n){return n.length}function uC(n){return n.length}function Yy(n,e){return e.push(n),n}function tY(n,e){return n.map(e).join("")}var ex=1,np=1,yF=0,Ms=0,kr=0,mp="";function tx(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:ex,column:np,length:o,return:""}}function Jm(n,e){return ZK(tx("",null,null,"",null,null,0),n,{length:-n.length},e)}function nY(){return kr}function rY(){return kr=Ms>0?vi(mp,--Ms):0,np--,kr===10&&(np=1,ex--),kr}function Gs(){return kr=Ms<yF?vi(mp,Ms++):0,np++,kr===10&&(np=1,ex++),kr}function Pa(){return vi(mp,Ms)}function y_(){return Ms}function S0(n,e){return Zg(mp,n,e)}function $g(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _F(n){return ex=np=1,yF=_a(mp=n),Ms=0,[]}function xF(n){return mp="",n}function __(n){return vF(S0(Ms-1,ZE(n===91?n+2:n===40?n+1:n)))}function iY(n){for(;(kr=Pa())&&kr<33;)Gs();return $g(n)>2||$g(kr)>3?"":" "}function sY(n,e){for(;--e&&Gs()&&!(kr<48||kr>102||kr>57&&kr<65||kr>70&&kr<97););return S0(n,y_()+(e<6&&Pa()==32&&Gs()==32))}function ZE(n){for(;Gs();)switch(kr){case n:return Ms;case 34:case 39:n!==34&&n!==39&&ZE(kr);break;case 40:n===41&&ZE(n);break;case 92:Gs();break}return Ms}function oY(n,e){for(;Gs()&&n+kr!==47+10;)if(n+kr===42+42&&Pa()===47)break;return"/*"+S0(e,Ms-1)+"*"+$1(n===47?n:Gs())}function aY(n){for(;!$g(Pa());)Gs();return S0(n,Ms)}function lY(n){return xF(x_("",null,null,null,[""],n=_F(n),0,[0],n))}function x_(n,e,t,r,i,s,o,a,l){for(var f=0,h=0,p=o,m=0,v=0,x=0,E=1,A=1,y=1,M=0,S="",C=i,I=s,B=r,O=S;A;)switch(x=M,M=Gs()){case 40:if(x!=108&&vi(O,p-1)==58){QE(O+=Bn(__(M),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:O+=__(M);break;case 9:case 10:case 13:case 32:O+=iY(x);break;case 92:O+=sY(y_()-1,7);continue;case 47:switch(Pa()){case 42:case 47:Yy(uY(oY(Gs(),y_()),e,t),l);break;default:O+="/"}break;case 123*E:a[f++]=_a(O)*y;case 125*E:case 59:case 0:switch(M){case 0:case 125:A=0;case 59+h:y==-1&&(O=Bn(O,/\f/g,"")),v>0&&_a(O)-p&&Yy(v>32?TI(O+";",r,t,p-1):TI(Bn(O," ","")+";",r,t,p-2),l);break;case 59:O+=";";default:if(Yy(B=wI(O,e,t,f,h,i,a,S,C=[],I=[],p),s),M===123)if(h===0)x_(O,e,B,B,C,s,p,a,I);else switch(m===99&&vi(O,3)===110?100:m){case 100:case 108:case 109:case 115:x_(n,B,B,r&&Yy(wI(n,B,B,0,0,i,a,S,i,C=[],p),I),i,I,p,a,r?C:I);break;default:x_(O,B,B,B,[""],I,0,a,I)}}f=h=v=0,E=y=1,S=O="",p=o;break;case 58:p=1+_a(O),v=x;default:if(E<1){if(M==123)--E;else if(M==125&&E++==0&&rY()==125)continue}switch(O+=$1(M),M*E){case 38:y=h>0?1:(O+="\f",-1);break;case 44:a[f++]=(_a(O)-1)*y,y=1;break;case 64:Pa()===45&&(O+=__(Gs())),m=Pa(),h=p=_a(S=O+=aY(y_())),M++;break;case 45:x===45&&_a(O)==2&&(E=0)}}return s}function wI(n,e,t,r,i,s,o,a,l,f,h){for(var p=i-1,m=i===0?s:[""],v=uC(m),x=0,E=0,A=0;x<r;++x)for(var y=0,M=Zg(n,p+1,p=QK(E=o[x])),S=n;y<v;++y)(S=vF(E>0?m[y]+" "+M:Bn(M,/&\f/g,m[y])))&&(l[A++]=S);return tx(n,e,t,i===0?aC:a,l,f,h)}function uY(n,e,t){return tx(n,e,t,mF,$1(nY()),Zg(n,2,-2),0)}function TI(n,e,t,r){return tx(n,e,t,lC,Zg(n,0,r),Zg(n,r+1,-1),r)}function Nh(n,e){for(var t="",r=uC(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function cY(n,e,t,r){switch(n.type){case qK:if(n.children.length)break;case YK:case lC:return n.return=n.return||n.value;case mF:return"";case gF:return n.return=n.value+"{"+Nh(n.children,r)+"}";case aC:n.value=n.props.join(",")}return _a(t=Nh(n.children,r))?n.return=n.value+"{"+t+"}":""}function fY(n){var e=uC(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function dY(n){return function(e){e.root||(e=e.return)&&n(e)}}var hY=function(e,t,r){for(var i=0,s=0;i=s,s=Pa(),i===38&&s===12&&(t[r]=1),!$g(s);)Gs();return S0(e,Ms)},pY=function(e,t){var r=-1,i=44;do switch($g(i)){case 0:i===38&&Pa()===12&&(t[r]=1),e[r]+=hY(Ms-1,t,r);break;case 2:e[r]+=__(i);break;case 4:if(i===44){e[++r]=Pa()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=$1(i)}while(i=Gs());return e},mY=function(e,t){return xF(pY(_F(e),t))},CI=new WeakMap,gY=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!CI.get(r))&&!i){CI.set(e,!0);for(var s=[],o=mY(t,s),a=r.props,l=0,f=0;l<o.length;l++)for(var h=0;h<a.length;h++,f++)e.props[f]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},vY=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function SF(n,e){switch($K(n,e)){case 5103:return In+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return In+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return In+n+$_+n+Li+n+n;case 6828:case 4268:return In+n+Li+n+n;case 6165:return In+n+Li+"flex-"+n+n;case 5187:return In+n+Bn(n,/(\w+).+(:[^]+)/,In+"box-$1$2"+Li+"flex-$1$2")+n;case 5443:return In+n+Li+"flex-item-"+Bn(n,/flex-|-self/,"")+n;case 4675:return In+n+Li+"flex-line-pack"+Bn(n,/align-content|flex-|-self/,"")+n;case 5548:return In+n+Li+Bn(n,"shrink","negative")+n;case 5292:return In+n+Li+Bn(n,"basis","preferred-size")+n;case 6060:return In+"box-"+Bn(n,"-grow","")+In+n+Li+Bn(n,"grow","positive")+n;case 4554:return In+Bn(n,/([^-])(transform)/g,"$1"+In+"$2")+n;case 6187:return Bn(Bn(Bn(n,/(zoom-|grab)/,In+"$1"),/(image-set)/,In+"$1"),n,"")+n;case 5495:case 3959:return Bn(n,/(image-set\([^]*)/,In+"$1$`$1");case 4968:return Bn(Bn(n,/(.+:)(flex-)?(.*)/,In+"box-pack:$3"+Li+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+In+n+n;case 4095:case 3583:case 4068:case 2532:return Bn(n,/(.+)-inline(.+)/,In+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_a(n)-1-e>6)switch(vi(n,e+1)){case 109:if(vi(n,e+4)!==45)break;case 102:return Bn(n,/(.+:)(.+)-([^]+)/,"$1"+In+"$2-$3$1"+$_+(vi(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~QE(n,"stretch")?SF(Bn(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(vi(n,e+1)!==115)break;case 6444:switch(vi(n,_a(n)-3-(~QE(n,"!important")&&10))){case 107:return Bn(n,":",":"+In)+n;case 101:return Bn(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+In+(vi(n,14)===45?"inline-":"")+"box$3$1"+In+"$2$3$1"+Li+"$2box$3")+n}break;case 5936:switch(vi(n,e+11)){case 114:return In+n+Li+Bn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return In+n+Li+Bn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return In+n+Li+Bn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return In+n+Li+n+n}return n}var yY=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case lC:e.return=SF(e.value,e.length);break;case gF:return Nh([Jm(e,{value:Bn(e.value,"@","@"+In)})],i);case aC:if(e.length)return tY(e.props,function(s){switch(eY(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Nh([Jm(e,{props:[Bn(s,/:(read-\w+)/,":"+$_+"$1")]})],i);case"::placeholder":return Nh([Jm(e,{props:[Bn(s,/:(plac\w+)/,":"+In+"input-$1")]}),Jm(e,{props:[Bn(s,/:(plac\w+)/,":"+$_+"$1")]}),Jm(e,{props:[Bn(s,/:(plac\w+)/,Li+"input-$1")]})],i)}return""})}},_Y=[yY],AF=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(E){var A=E.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var i=e.stylisPlugins||_Y,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(E){for(var A=E.getAttribute("data-emotion").split(" "),y=1;y<A.length;y++)s[A[y]]=!0;a.push(E)});var l,f=[gY,vY];{var h,p=[cY,dY(function(E){h.insert(E)})],m=fY(f.concat(i,p)),v=function(A){return Nh(lY(A),m)};l=function(A,y,M,S){h=M,v(A?A+"{"+y.styles+"}":y.styles),S&&(x.inserted[y.name]=!0)}}var x={key:t,sheet:new KK({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return x.sheet.hydrate(a),x},MF={exports:{}},On={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=typeof Symbol=="function"&&Symbol.for,cC=ui?Symbol.for("react.element"):60103,fC=ui?Symbol.for("react.portal"):60106,nx=ui?Symbol.for("react.fragment"):60107,rx=ui?Symbol.for("react.strict_mode"):60108,ix=ui?Symbol.for("react.profiler"):60114,sx=ui?Symbol.for("react.provider"):60109,ox=ui?Symbol.for("react.context"):60110,dC=ui?Symbol.for("react.async_mode"):60111,ax=ui?Symbol.for("react.concurrent_mode"):60111,lx=ui?Symbol.for("react.forward_ref"):60112,ux=ui?Symbol.for("react.suspense"):60113,xY=ui?Symbol.for("react.suspense_list"):60120,cx=ui?Symbol.for("react.memo"):60115,fx=ui?Symbol.for("react.lazy"):60116,SY=ui?Symbol.for("react.block"):60121,AY=ui?Symbol.for("react.fundamental"):60117,MY=ui?Symbol.for("react.responder"):60118,EY=ui?Symbol.for("react.scope"):60119;function Js(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case cC:switch(n=n.type,n){case dC:case ax:case nx:case ix:case rx:case ux:return n;default:switch(n=n&&n.$$typeof,n){case ox:case lx:case fx:case cx:case sx:return n;default:return e}}case fC:return e}}}function EF(n){return Js(n)===ax}On.AsyncMode=dC;On.ConcurrentMode=ax;On.ContextConsumer=ox;On.ContextProvider=sx;On.Element=cC;On.ForwardRef=lx;On.Fragment=nx;On.Lazy=fx;On.Memo=cx;On.Portal=fC;On.Profiler=ix;On.StrictMode=rx;On.Suspense=ux;On.isAsyncMode=function(n){return EF(n)||Js(n)===dC};On.isConcurrentMode=EF;On.isContextConsumer=function(n){return Js(n)===ox};On.isContextProvider=function(n){return Js(n)===sx};On.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===cC};On.isForwardRef=function(n){return Js(n)===lx};On.isFragment=function(n){return Js(n)===nx};On.isLazy=function(n){return Js(n)===fx};On.isMemo=function(n){return Js(n)===cx};On.isPortal=function(n){return Js(n)===fC};On.isProfiler=function(n){return Js(n)===ix};On.isStrictMode=function(n){return Js(n)===rx};On.isSuspense=function(n){return Js(n)===ux};On.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===nx||n===ax||n===ix||n===rx||n===ux||n===xY||typeof n=="object"&&n!==null&&(n.$$typeof===fx||n.$$typeof===cx||n.$$typeof===sx||n.$$typeof===ox||n.$$typeof===lx||n.$$typeof===AY||n.$$typeof===MY||n.$$typeof===EY||n.$$typeof===SY)};On.typeOf=Js;MF.exports=On;var wY=MF.exports,wF=wY,TY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CY={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TF={};TF[wF.ForwardRef]=TY;TF[wF.Memo]=CY;var bY=!0;function RY(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):r+=i+" "}),r}var CF=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||bY===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},bF=function(e,t,r){CF(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function PY(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var IY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},BY=/[A-Z]|^ms/g,LY=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RF=function(e){return e.charCodeAt(1)===45},bI=function(e){return e!=null&&typeof e!="boolean"},nM=pF(function(n){return RF(n)?n:n.replace(BY,"-$&").toLowerCase()}),RI=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(LY,function(r,i,s){return xa={name:i,styles:s,next:xa},i})}return IY[e]!==1&&!RF(e)&&typeof t=="number"&&t!==0?t+"px":t};function e0(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return xa={name:t.name,styles:t.styles,next:xa},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)xa={name:r.name,styles:r.styles,next:xa},r=r.next;var i=t.styles+";";return i}return DY(n,e,t)}case"function":{if(n!==void 0){var s=xa,o=t(n);return xa=s,e0(n,e,o)}break}}if(e==null)return t;var a=e[t];return a!==void 0?a:t}function DY(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=e0(n,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":bI(o)&&(r+=nM(s)+":"+RI(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)bI(o[a])&&(r+=nM(s)+":"+RI(s,o[a])+";");else{var l=e0(n,e,o);switch(s){case"animation":case"animationName":{r+=nM(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var PI=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xa,hC=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";xa=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=e0(r,t,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=e0(r,t,e[a]),i&&(s+=o[a]);PI.lastIndex=0;for(var l="",f;(f=PI.exec(s))!==null;)l+="-"+f[1];var h=PY(s)+l;return{name:h,styles:s,next:xa}},OY=function(e){return e()},PF=lM["useInsertionEffect"]?lM["useInsertionEffect"]:!1,FY=PF||OY,II=PF||ee.useLayoutEffect,IF=ee.createContext(typeof HTMLElement<"u"?AF({key:"css"}):null),NY=IF.Provider,BF=function(e){return ee.forwardRef(function(t,r){var i=ee.useContext(IF);return e(t,i,r)})},dx=ee.createContext({}),rM={exports:{}},BI;function LF(){return BI||(BI=1,function(n){function e(){return n.exports=e=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n.exports.__esModule=!0,n.exports.default=n.exports,e.apply(this,arguments)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(rM)),rM.exports}LF();var UY=BF(function(n,e){var t=n.styles,r=hC([t],void 0,ee.useContext(dx)),i=ee.useRef();return II(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),II(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&bF(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function DF(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return hC(e)}var kY=function(){var e=DF.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},zY=jK,HY=function(e){return e!=="theme"},LI=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?zY:HY},DI=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},GY=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return CF(t,r,i),FY(function(){return bF(t,r,i)}),null},VY=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;t!==void 0&&(s=t.label,o=t.target);var a=DI(e,t,r),l=a||LI(i),f=!l("as");return function(){var h=arguments,p=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&p.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)p.push.apply(p,h);else{p.push(h[0][0]);for(var m=h.length,v=1;v<m;v++)p.push(h[v],h[0][v])}var x=BF(function(E,A,y){var M=f&&E.as||i,S="",C=[],I=E;if(E.theme==null){I={};for(var B in E)I[B]=E[B];I.theme=ee.useContext(dx)}typeof E.className=="string"?S=RY(A.registered,C,E.className):E.className!=null&&(S=E.className+" ");var O=hC(p.concat(C),A.registered,I);S+=A.key+"-"+O.name,o!==void 0&&(S+=" "+o);var z=f&&a===void 0?LI(M):l,L={};for(var N in E)f&&N==="as"||z(N)&&(L[N]=E[N]);return L.className=S,L.ref=y,ee.createElement(ee.Fragment,null,ee.createElement(GY,{cache:A,serialized:O,isStringTag:typeof M=="string"}),ee.createElement(M,L))});return x.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=i,x.__emotion_styles=p,x.__emotion_forwardProp=a,Object.defineProperty(x,"toString",{value:function(){return"."+o}}),x.withComponent=function(E,A){return n(E,Et({},t,A,{shouldForwardProp:DI(x,A,!0)})).apply(void 0,p)},x}},WY=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],$E=VY.bind();WY.forEach(function(n){$E[n]=$E(n)});let ew;typeof document=="object"&&(ew=AF({key:"css",prepend:!0}));function jY(n){const{injectFirst:e,children:t}=n;return e&&ew?We.jsx(NY,{value:ew,children:t}):t}function XY(n){return n==null||Object.keys(n).length===0}function JY(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?i=>e(XY(i)?t:i):e;return We.jsx(UY,{styles:r})}/**
 * @mui/styled-engine v5.15.14
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function OF(n,e){return $E(n,e)}const KY=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},YY=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:JY,StyledEngineProvider:jY,ThemeContext:dx,css:DF,default:OF,internal_processStyles:KY,keyframes:kY},Symbol.toStringTag,{value:"Module"}));function Es(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Au(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function FF(n){if(!Au(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=FF(n[t])}),e}function Ia(n,e,t={clone:!0}){const r=t.clone?Et({},n):n;return Au(n)&&Au(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Au(e[i])&&i in n&&Au(n[i])?r[i]=Ia(n[i],e[i],t):t.clone?r[i]=Au(e[i])?FF(e[i]):e[i]:r[i]=e[i])}),r}const qY=Object.freeze(Object.defineProperty({__proto__:null,default:Ia,isPlainObject:Au},Symbol.toStringTag,{value:"Module"})),QY=["values","unit","step"],ZY=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>Et({},t,{[r.key]:r.val}),{})};function NF(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5}=n,i=Es(n,QY),s=ZY(e),o=Object.keys(s);function a(m){return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t})`}function l(m){return`@media (max-width:${(typeof e[m]=="number"?e[m]:m)-r/100}${t})`}function f(m,v){const x=o.indexOf(v);return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t}) and (max-width:${(x!==-1&&typeof e[o[x]]=="number"?e[o[x]]:v)-r/100}${t})`}function h(m){return o.indexOf(m)+1<o.length?f(m,o[o.indexOf(m)+1]):a(m)}function p(m){const v=o.indexOf(m);return v===0?a(o[1]):v===o.length-1?l(o[v]):f(m,o[o.indexOf(m)+1]).replace("@media","@media not all and")}return Et({keys:o,values:s,up:a,down:l,between:f,only:h,not:p,unit:t},i)}const $Y={borderRadius:4},eq=$Y;function yg(n,e){return e?Ia(n,e,{clone:!1}):n}const pC={xs:0,sm:600,md:900,lg:1200,xl:1536},OI={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${pC[n]}px)`};function Rl(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||OI;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||OI;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||pC).indexOf(a)!==-1){const l=s.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function tq(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function nq(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function A0(n){if(typeof n!="string")throw new Error(Qg(7));return n.charAt(0).toUpperCase()+n.slice(1)}const rq=Object.freeze(Object.defineProperty({__proto__:null,default:A0},Symbol.toStringTag,{value:"Module"}));function hx(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function e1(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=hx(n,t)||r,e&&(i=e(i,r,n)),i}function Rr(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,f=hx(l,r)||{};return Rl(o,a,p=>{let m=e1(f,i,p);return p===m&&typeof p=="string"&&(m=e1(f,i,`${e}${p==="default"?"":A0(p)}`,p)),t===!1?m:{[t]:m}})};return s.propTypes={},s.filterProps=[e],s}function iq(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const sq={m:"margin",p:"padding"},oq={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},FI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},aq=iq(n=>{if(n.length>2)if(FI[n])n=FI[n];else return[n];const[e,t]=n.split(""),r=sq[e],i=oq[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),mC=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],gC=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...mC,...gC];function M0(n,e,t,r){var i;const s=(i=hx(n,e,!1))!=null?i:t;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function UF(n){return M0(n,"spacing",8)}function E0(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),r=n(t);return e>=0?r:typeof r=="number"?-r:`-${r}`}function lq(n,e){return t=>n.reduce((r,i)=>(r[i]=E0(e,t),r),{})}function uq(n,e,t,r){if(e.indexOf(t)===-1)return null;const i=aq(t),s=lq(i,r),o=n[t];return Rl(n,o,s)}function kF(n,e){const t=UF(n.theme);return Object.keys(n).map(r=>uq(n,e,r,t)).reduce(yg,{})}function _r(n){return kF(n,mC)}_r.propTypes={};_r.filterProps=mC;function xr(n){return kF(n,gC)}xr.propTypes={};xr.filterProps=gC;function cq(n=8){if(n.mui)return n;const e=UF({spacing:n}),t=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function px(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?yg(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function ho(n){return typeof n!="number"?n:`${n}px solid`}function So(n,e){return Rr({prop:n,themeKey:"borders",transform:e})}const fq=So("border",ho),dq=So("borderTop",ho),hq=So("borderRight",ho),pq=So("borderBottom",ho),mq=So("borderLeft",ho),gq=So("borderColor"),vq=So("borderTopColor"),yq=So("borderRightColor"),_q=So("borderBottomColor"),xq=So("borderLeftColor"),Sq=So("outline",ho),Aq=So("outlineColor"),mx=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=M0(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:E0(e,r)});return Rl(n,n.borderRadius,t)}return null};mx.propTypes={};mx.filterProps=["borderRadius"];px(fq,dq,hq,pq,mq,gq,vq,yq,_q,xq,mx,Sq,Aq);const gx=n=>{if(n.gap!==void 0&&n.gap!==null){const e=M0(n.theme,"spacing",8),t=r=>({gap:E0(e,r)});return Rl(n,n.gap,t)}return null};gx.propTypes={};gx.filterProps=["gap"];const vx=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=M0(n.theme,"spacing",8),t=r=>({columnGap:E0(e,r)});return Rl(n,n.columnGap,t)}return null};vx.propTypes={};vx.filterProps=["columnGap"];const yx=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=M0(n.theme,"spacing",8),t=r=>({rowGap:E0(e,r)});return Rl(n,n.rowGap,t)}return null};yx.propTypes={};yx.filterProps=["rowGap"];const Mq=Rr({prop:"gridColumn"}),Eq=Rr({prop:"gridRow"}),wq=Rr({prop:"gridAutoFlow"}),Tq=Rr({prop:"gridAutoColumns"}),Cq=Rr({prop:"gridAutoRows"}),bq=Rr({prop:"gridTemplateColumns"}),Rq=Rr({prop:"gridTemplateRows"}),Pq=Rr({prop:"gridTemplateAreas"}),Iq=Rr({prop:"gridArea"});px(gx,vx,yx,Mq,Eq,wq,Tq,Cq,bq,Rq,Pq,Iq);function Uh(n,e){return e==="grey"?e:n}const Bq=Rr({prop:"color",themeKey:"palette",transform:Uh}),Lq=Rr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Uh}),Dq=Rr({prop:"backgroundColor",themeKey:"palette",transform:Uh});px(Bq,Lq,Dq);function Ns(n){return n<=1&&n!==0?`${n*100}%`:n}const Oq=Rr({prop:"width",transform:Ns}),vC=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var r,i;const s=((r=n.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[t])||pC[t];return s?((i=n.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${n.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Ns(t)}};return Rl(n,n.maxWidth,e)}return null};vC.filterProps=["maxWidth"];const Fq=Rr({prop:"minWidth",transform:Ns}),Nq=Rr({prop:"height",transform:Ns}),Uq=Rr({prop:"maxHeight",transform:Ns}),kq=Rr({prop:"minHeight",transform:Ns});Rr({prop:"size",cssProperty:"width",transform:Ns});Rr({prop:"size",cssProperty:"height",transform:Ns});const zq=Rr({prop:"boxSizing"});px(Oq,vC,Fq,Nq,Uq,kq,zq);const Hq={border:{themeKey:"borders",transform:ho},borderTop:{themeKey:"borders",transform:ho},borderRight:{themeKey:"borders",transform:ho},borderBottom:{themeKey:"borders",transform:ho},borderLeft:{themeKey:"borders",transform:ho},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ho},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:mx},color:{themeKey:"palette",transform:Uh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Uh},backgroundColor:{themeKey:"palette",transform:Uh},p:{style:xr},pt:{style:xr},pr:{style:xr},pb:{style:xr},pl:{style:xr},px:{style:xr},py:{style:xr},padding:{style:xr},paddingTop:{style:xr},paddingRight:{style:xr},paddingBottom:{style:xr},paddingLeft:{style:xr},paddingX:{style:xr},paddingY:{style:xr},paddingInline:{style:xr},paddingInlineStart:{style:xr},paddingInlineEnd:{style:xr},paddingBlock:{style:xr},paddingBlockStart:{style:xr},paddingBlockEnd:{style:xr},m:{style:_r},mt:{style:_r},mr:{style:_r},mb:{style:_r},ml:{style:_r},mx:{style:_r},my:{style:_r},margin:{style:_r},marginTop:{style:_r},marginRight:{style:_r},marginBottom:{style:_r},marginLeft:{style:_r},marginX:{style:_r},marginY:{style:_r},marginInline:{style:_r},marginInlineStart:{style:_r},marginInlineEnd:{style:_r},marginBlock:{style:_r},marginBlockStart:{style:_r},marginBlockEnd:{style:_r},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gx},rowGap:{style:yx},columnGap:{style:vx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ns},maxWidth:{style:vC},minWidth:{transform:Ns},height:{transform:Ns},maxHeight:{transform:Ns},minHeight:{transform:Ns},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},w0=Hq;function Gq(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function Vq(n,e){return typeof n=="function"?n(e):n}function zF(){function n(t,r,i,s){const o={[t]:r,theme:i},a=s[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:f,transform:h,style:p}=a;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[t]:r};const m=hx(i,f)||{};return p?p(o):Rl(o,r,x=>{let E=e1(m,h,x);return x===E&&typeof x=="string"&&(E=e1(m,h,`${t}${x==="default"?"":A0(x)}`,x)),l===!1?E:{[l]:E}})}function e(t){var r;const{sx:i,theme:s={}}=t||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:w0;function a(l){let f=l;if(typeof l=="function")f=l(s);else if(typeof l!="object")return l;if(!f)return null;const h=tq(s.breakpoints),p=Object.keys(h);let m=h;return Object.keys(f).forEach(v=>{const x=Vq(f[v],s);if(x!=null)if(typeof x=="object")if(o[v])m=yg(m,n(v,x,s,o));else{const E=Rl({theme:s},x,A=>({[v]:A}));Gq(E,x)?m[v]=e({sx:x,theme:s}):m=yg(m,E)}else m=yg(m,n(v,x,s,o))}),nq(p,m)}return Array.isArray(i)?i.map(a):a(i)}return e}const HF=zF();HF.filterProps=["sx"];const _x=HF;function GF(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const Wq=["breakpoints","palette","spacing","shape"];function yC(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={}}=n,o=Es(n,Wq),a=NF(t),l=cq(i);let f=Ia({breakpoints:a,direction:"ltr",components:{},palette:Et({mode:"light"},r),spacing:l,shape:Et({},eq,s)},o);return f.applyStyles=GF,f=e.reduce((h,p)=>Ia(h,p),f),f.unstable_sxConfig=Et({},w0,o==null?void 0:o.unstable_sxConfig),f.unstable_sx=function(p){return _x({sx:p,theme:this})},f}const jq=Object.freeze(Object.defineProperty({__proto__:null,default:yC,private_createBreakpoints:NF,unstable_applyStyles:GF},Symbol.toStringTag,{value:"Module"}));function Xq(n){return Object.keys(n).length===0}function VF(n=null){const e=ee.useContext(dx);return!e||Xq(e)?n:e}const Jq=yC();function _C(n=Jq){return VF(n)}const Kq=["sx"],Yq=n=>{var e,t;const r={systemProps:{},otherProps:{}},i=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:w0;return Object.keys(n).forEach(s=>{i[s]?r.systemProps[s]=n[s]:r.otherProps[s]=n[s]}),r};function xC(n){const{sx:e}=n,t=Es(n,Kq),{systemProps:r,otherProps:i}=Yq(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Au(a)?Et({},r,a):r}:s=Et({},r,e),Et({},i,{sx:s})}const qq=Object.freeze(Object.defineProperty({__proto__:null,default:_x,extendSxProp:xC,unstable_createStyleFunctionSx:zF,unstable_defaultSxConfig:w0},Symbol.toStringTag,{value:"Module"})),NI=n=>n,Qq=()=>{let n=NI;return{configure(e){n=e},generate(e){return n(e)},reset(){n=NI}}},Zq=Qq(),WF=Zq;function jF(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=jF(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function $q(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=jF(n))&&(r&&(r+=" "),r+=e);return r}const eQ=["className","component"];function tQ(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,s=OF("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(_x);return ee.forwardRef(function(l,f){const h=_C(t),p=xC(l),{className:m,component:v="div"}=p,x=Es(p,eQ);return We.jsx(s,Et({as:v,ref:f,className:$q(m,i?i(r):r),theme:e&&h[e]||h},x))})}const nQ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xx(n,e,t="Mui"){const r=nQ[e];return r?`${t}-${r}`:`${WF.generate(n)}-${e}`}function Sx(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=xx(n,i,t)}),r}var XF={exports:{}},Fn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC=Symbol.for("react.element"),AC=Symbol.for("react.portal"),Ax=Symbol.for("react.fragment"),Mx=Symbol.for("react.strict_mode"),Ex=Symbol.for("react.profiler"),wx=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),rQ=Symbol.for("react.server_context"),Cx=Symbol.for("react.forward_ref"),bx=Symbol.for("react.suspense"),Rx=Symbol.for("react.suspense_list"),Px=Symbol.for("react.memo"),Ix=Symbol.for("react.lazy"),iQ=Symbol.for("react.offscreen"),JF;JF=Symbol.for("react.module.reference");function Ao(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case SC:switch(n=n.type,n){case Ax:case Ex:case Mx:case bx:case Rx:return n;default:switch(n=n&&n.$$typeof,n){case rQ:case Tx:case Cx:case Ix:case Px:case wx:return n;default:return e}}case AC:return e}}}Fn.ContextConsumer=Tx;Fn.ContextProvider=wx;Fn.Element=SC;Fn.ForwardRef=Cx;Fn.Fragment=Ax;Fn.Lazy=Ix;Fn.Memo=Px;Fn.Portal=AC;Fn.Profiler=Ex;Fn.StrictMode=Mx;Fn.Suspense=bx;Fn.SuspenseList=Rx;Fn.isAsyncMode=function(){return!1};Fn.isConcurrentMode=function(){return!1};Fn.isContextConsumer=function(n){return Ao(n)===Tx};Fn.isContextProvider=function(n){return Ao(n)===wx};Fn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===SC};Fn.isForwardRef=function(n){return Ao(n)===Cx};Fn.isFragment=function(n){return Ao(n)===Ax};Fn.isLazy=function(n){return Ao(n)===Ix};Fn.isMemo=function(n){return Ao(n)===Px};Fn.isPortal=function(n){return Ao(n)===AC};Fn.isProfiler=function(n){return Ao(n)===Ex};Fn.isStrictMode=function(n){return Ao(n)===Mx};Fn.isSuspense=function(n){return Ao(n)===bx};Fn.isSuspenseList=function(n){return Ao(n)===Rx};Fn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Ax||n===Ex||n===Mx||n===bx||n===Rx||n===iQ||typeof n=="object"&&n!==null&&(n.$$typeof===Ix||n.$$typeof===Px||n.$$typeof===wx||n.$$typeof===Tx||n.$$typeof===Cx||n.$$typeof===JF||n.getModuleId!==void 0)};Fn.typeOf=Ao;XF.exports=Fn;var UI=XF.exports;const sQ=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function KF(n){const e=`${n}`.match(sQ);return e&&e[1]||""}function YF(n,e=""){return n.displayName||n.name||KF(n)||e}function kI(n,e,t){const r=YF(e);return n.displayName||(r!==""?`${t}(${r})`:t)}function oQ(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return YF(n,"Component");if(typeof n=="object")switch(n.$$typeof){case UI.ForwardRef:return kI(n,n.render,"ForwardRef");case UI.Memo:return kI(n,n.type,"memo");default:return}}}const aQ=Object.freeze(Object.defineProperty({__proto__:null,default:oQ,getFunctionName:KF},Symbol.toStringTag,{value:"Module"}));function qF(n,e){const t=Et({},e);return Object.keys(n).forEach(r=>{if(r.toString().match(/^(components|slots)$/))t[r]=Et({},n[r],t[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=n[r]||{},s=e[r];t[r]={},!s||!Object.keys(s)?t[r]=i:!i||!Object.keys(i)?t[r]=s:(t[r]=Et({},s),Object.keys(i).forEach(o=>{t[r][o]=qF(i[o],s[o])}))}else t[r]===void 0&&(t[r]=n[r])}),t}function QF(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:qF(e.components[t].defaultProps,r)}function lQ({props:n,name:e,defaultTheme:t,themeId:r}){let i=_C(t);return r&&(i=i[r]||i),QF({theme:i,name:e,props:n})}const uQ=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,t1=uQ;function cQ(n,e,t,r,i){const[s,o]=ee.useState(()=>i&&t?t(n).matches:r?r(n).matches:e);return t1(()=>{let a=!0;if(!t)return;const l=t(n),f=()=>{a&&o(l.matches)};return f(),l.addListener(f),()=>{a=!1,l.removeListener(f)}},[n,t]),s}const ZF=lM["useSyncExternalStore"];function fQ(n,e,t,r,i){const s=ee.useCallback(()=>e,[e]),o=ee.useMemo(()=>{if(i&&t)return()=>t(n).matches;if(r!==null){const{matches:h}=r(n);return()=>h}return s},[s,n,r,i,t]),[a,l]=ee.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const h=t(n);return[()=>h.matches,p=>(h.addListener(p),()=>{h.removeListener(p)})]},[s,t,n]);return ZF(l,a,o)}function dQ(n,e={}){const t=VF(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=QF({name:"MuiUseMediaQuery",props:e,theme:t});let l=typeof n=="function"?n(t):n;return l=l.replace(/^@media( ?)/m,""),(ZF!==void 0?fQ:cQ)(l,i,s,o,a)}function hQ(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const pQ=Object.freeze(Object.defineProperty({__proto__:null,default:hQ},Symbol.toStringTag,{value:"Module"}));function zI(...n){return n.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function ku(n){return n&&n.ownerDocument||document}function MC(n){return ku(n).defaultView||window}function tw(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function HI(n){const e=ee.useRef(n);return t1(()=>{e.current=n}),ee.useRef((...t)=>(0,e.current)(...t)).current}function T0(...n){return ee.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{tw(t,e)})},n)}function mQ(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function EC(n,e,t=void 0){const r={};return Object.keys(n).forEach(i=>{r[i]=n[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),t&&t[o]&&s.push(t[o])}return s},[]).join(" ")}),r}const Bx="$$material";function gQ(n,e){return Et({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var Pr={},$F={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})($F);var eN=$F.exports;const vQ=Xu(VK),yQ=Xu(pQ);var tN=eN;Object.defineProperty(Pr,"__esModule",{value:!0});Pr.alpha=sN;Pr.blend=IQ;Pr.colorChannel=void 0;var _Q=Pr.darken=TC;Pr.decomposeColor=_o;Pr.emphasize=PQ;var xQ=Pr.getContrastRatio=TQ;Pr.getLuminance=n1;Pr.hexToRgb=nN;Pr.hslToRgb=iN;var SQ=Pr.lighten=CC;Pr.private_safeAlpha=CQ;Pr.private_safeColorChannel=void 0;Pr.private_safeDarken=bQ;Pr.private_safeEmphasize=oN;Pr.private_safeLighten=RQ;Pr.recomposeColor=gp;Pr.rgbToHex=wQ;var GI=tN(vQ),AQ=tN(yQ);function wC(n,e=0,t=1){return(0,AQ.default)(n,e,t)}function nN(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function MQ(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function _o(n){if(n.type)return n;if(n.charAt(0)==="#")return _o(nN(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,GI.default)(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,GI.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const rN=n=>{const e=_o(n);return e.values.slice(0,3).map((t,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${t}%`:t).join(" ")};Pr.colorChannel=rN;const EQ=(n,e)=>{try{return rN(n)}catch{return n}};Pr.private_safeColorChannel=EQ;function gp(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function wQ(n){if(n.indexOf("#")===0)return n;const{values:e}=_o(n);return`#${e.map((t,r)=>MQ(r===3?Math.round(255*t):t)).join("")}`}function iN(n){n=_o(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(f,h=(f+t/30)%12)=>i-s*Math.max(Math.min(h-3,9-h,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),gp({type:a,values:l})}function n1(n){n=_o(n);let e=n.type==="hsl"||n.type==="hsla"?_o(iN(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function TQ(n,e){const t=n1(n),r=n1(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function sN(n,e){return n=_o(n),e=wC(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,gp(n)}function CQ(n,e,t){try{return sN(n,e)}catch{return n}}function TC(n,e){if(n=_o(n),e=wC(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return gp(n)}function bQ(n,e,t){try{return TC(n,e)}catch{return n}}function CC(n,e){if(n=_o(n),e=wC(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return gp(n)}function RQ(n,e,t){try{return CC(n,e)}catch{return n}}function PQ(n,e=.15){return n1(n)>.5?TC(n,e):CC(n,e)}function oN(n,e,t){try{return oN(n,e)}catch{return n}}function IQ(n,e,t,r=1){const i=(l,f)=>Math.round((l**(1/r)*(1-t)+f**(1/r)*t)**r),s=_o(n),o=_o(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return gp({type:"rgb",values:a})}const BQ={black:"#000",white:"#fff"},t0=BQ,LQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},DQ=LQ,OQ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Qd=OQ,FQ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Zd=FQ,NQ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Km=NQ,UQ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},$d=UQ,kQ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},eh=kQ,zQ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},th=zQ,HQ=["mode","contrastThreshold","tonalOffset"],VI={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:t0.white,default:t0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},iM={text:{primary:t0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:t0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function WI(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=SQ(n.main,i):e==="dark"&&(n.dark=_Q(n.main,s)))}function GQ(n="light"){return n==="dark"?{main:$d[200],light:$d[50],dark:$d[400]}:{main:$d[700],light:$d[400],dark:$d[800]}}function VQ(n="light"){return n==="dark"?{main:Qd[200],light:Qd[50],dark:Qd[400]}:{main:Qd[500],light:Qd[300],dark:Qd[700]}}function WQ(n="light"){return n==="dark"?{main:Zd[500],light:Zd[300],dark:Zd[700]}:{main:Zd[700],light:Zd[400],dark:Zd[800]}}function jQ(n="light"){return n==="dark"?{main:eh[400],light:eh[300],dark:eh[700]}:{main:eh[700],light:eh[500],dark:eh[900]}}function XQ(n="light"){return n==="dark"?{main:th[400],light:th[300],dark:th[700]}:{main:th[800],light:th[500],dark:th[900]}}function JQ(n="light"){return n==="dark"?{main:Km[400],light:Km[300],dark:Km[700]}:{main:"#ed6c02",light:Km[500],dark:Km[900]}}function KQ(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2}=n,i=Es(n,HQ),s=n.primary||GQ(e),o=n.secondary||VQ(e),a=n.error||WQ(e),l=n.info||jQ(e),f=n.success||XQ(e),h=n.warning||JQ(e);function p(E){return xQ(E,iM.text.primary)>=t?iM.text.primary:VI.text.primary}const m=({color:E,name:A,mainShade:y=500,lightShade:M=300,darkShade:S=700})=>{if(E=Et({},E),!E.main&&E[y]&&(E.main=E[y]),!E.hasOwnProperty("main"))throw new Error(Qg(11,A?` (${A})`:"",y));if(typeof E.main!="string")throw new Error(Qg(12,A?` (${A})`:"",JSON.stringify(E.main)));return WI(E,"light",M,r),WI(E,"dark",S,r),E.contrastText||(E.contrastText=p(E.main)),E},v={dark:iM,light:VI};return Ia(Et({common:Et({},t0),mode:e,primary:m({color:s,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:a,name:"error"}),warning:m({color:h,name:"warning"}),info:m({color:l,name:"info"}),success:m({color:f,name:"success"}),grey:DQ,contrastThreshold:t,getContrastText:p,augmentColor:m,tonalOffset:r},v[e]),i)}const YQ=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function qQ(n){return Math.round(n*1e5)/1e5}const jI={textTransform:"uppercase"},XI='"Roboto", "Helvetica", "Arial", sans-serif';function QQ(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:r=XI,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:f=16,allVariants:h,pxToRem:p}=t,m=Es(t,YQ),v=i/14,x=p||(y=>`${y/f*v}rem`),E=(y,M,S,C,I)=>Et({fontFamily:r,fontWeight:y,fontSize:x(M),lineHeight:S},r===XI?{letterSpacing:`${qQ(C/M)}em`}:{},I,h),A={h1:E(s,96,1.167,-1.5),h2:E(s,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(a,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(a,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(a,14,1.75,.4,jI),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,jI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ia(Et({htmlFontSize:f,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},A),m,{clone:!1})}const ZQ=.2,$Q=.14,eZ=.12;function ir(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${ZQ})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${$Q})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${eZ})`].join(",")}const tZ=["none",ir(0,2,1,-1,0,1,1,0,0,1,3,0),ir(0,3,1,-2,0,2,2,0,0,1,5,0),ir(0,3,3,-2,0,3,4,0,0,1,8,0),ir(0,2,4,-1,0,4,5,0,0,1,10,0),ir(0,3,5,-1,0,5,8,0,0,1,14,0),ir(0,3,5,-1,0,6,10,0,0,1,18,0),ir(0,4,5,-2,0,7,10,1,0,2,16,1),ir(0,5,5,-3,0,8,10,1,0,3,14,2),ir(0,5,6,-3,0,9,12,1,0,3,16,2),ir(0,6,6,-3,0,10,14,1,0,4,18,3),ir(0,6,7,-4,0,11,15,1,0,4,20,3),ir(0,7,8,-4,0,12,17,2,0,5,22,4),ir(0,7,8,-4,0,13,19,2,0,5,24,4),ir(0,7,9,-4,0,14,21,2,0,5,26,4),ir(0,8,9,-5,0,15,22,2,0,6,28,5),ir(0,8,10,-5,0,16,24,2,0,6,30,5),ir(0,8,11,-5,0,17,26,2,0,6,32,5),ir(0,9,11,-5,0,18,28,2,0,7,34,6),ir(0,9,12,-6,0,19,29,2,0,7,36,6),ir(0,10,13,-6,0,20,31,3,0,8,38,7),ir(0,10,13,-6,0,21,33,3,0,8,40,7),ir(0,10,14,-6,0,22,35,3,0,8,42,7),ir(0,11,14,-7,0,23,36,3,0,9,44,8),ir(0,11,15,-7,0,24,38,3,0,9,46,8)],nZ=tZ,rZ=["duration","easing","delay"],iZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sZ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function JI(n){return`${Math.round(n)}ms`}function oZ(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function aZ(n){const e=Et({},iZ,n.easing),t=Et({},sZ,n.duration);return Et({getAutoHeightDuration:oZ,create:(i=["all"],s={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0}=s;return Es(s,rZ),(Array.isArray(i)?i:[i]).map(f=>`${f} ${typeof o=="string"?o:JI(o)} ${a} ${typeof l=="string"?l:JI(l)}`).join(",")}},n,{easing:e,duration:t})}const lZ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},uZ=lZ,cZ=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function aN(n={},...e){const{mixins:t={},palette:r={},transitions:i={},typography:s={}}=n,o=Es(n,cZ);if(n.vars)throw new Error(Qg(18));const a=KQ(r),l=yC(n);let f=Ia(l,{mixins:gQ(l.breakpoints,t),palette:a,shadows:nZ.slice(),typography:QQ(a,s),transitions:aZ(i),zIndex:Et({},uZ)});return f=Ia(f,o),f=e.reduce((h,p)=>Ia(h,p),f),f.unstable_sxConfig=Et({},w0,o==null?void 0:o.unstable_sxConfig),f.unstable_sx=function(p){return _x({sx:p,theme:this})},f}const fZ=aN(),bC=fZ;function dZ(){const n=_C(bC);return n[Bx]||n}function RC({props:n,name:e}){return lQ({props:n,name:e,defaultTheme:bC,themeId:Bx})}var C0={},sM={exports:{}},KI;function hZ(){return KI||(KI=1,function(n){function e(t,r){if(t==null)return{};var i={},s=Object.keys(t),o,a;for(a=0;a<s.length;a++)o=s[a],!(r.indexOf(o)>=0)&&(i[o]=t[o]);return i}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(sM)),sM.exports}const pZ=Xu(YY),mZ=Xu(qY),gZ=Xu(rq),vZ=Xu(aQ),yZ=Xu(jq),_Z=Xu(qq);var vp=eN;Object.defineProperty(C0,"__esModule",{value:!0});var xZ=C0.default=LZ;C0.shouldForwardProp=S_;C0.systemDefaultTheme=void 0;var uo=vp(LF()),nw=vp(hZ()),YI=CZ(pZ),SZ=mZ;vp(gZ);vp(vZ);var AZ=vp(yZ),MZ=vp(_Z);const EZ=["ownerState"],wZ=["variants"],TZ=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function lN(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(lN=function(r){return r?t:e})(n)}function CZ(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=lN(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}function bZ(n){return Object.keys(n).length===0}function RZ(n){return typeof n=="string"&&n.charCodeAt(0)>96}function S_(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const PZ=C0.systemDefaultTheme=(0,AZ.default)(),IZ=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function qy({defaultTheme:n,theme:e,themeId:t}){return bZ(e)?n:e[t]||e}function BZ(n){return n?(e,t)=>t[n]:null}function A_(n,e){let{ownerState:t}=e,r=(0,nw.default)(e,EZ);const i=typeof n=="function"?n((0,uo.default)({ownerState:t},r)):n;if(Array.isArray(i))return i.flatMap(s=>A_(s,(0,uo.default)({ownerState:t},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,nw.default)(i,wZ);return s.forEach(l=>{let f=!0;typeof l.props=="function"?f=l.props((0,uo.default)({ownerState:t},r,t)):Object.keys(l.props).forEach(h=>{(t==null?void 0:t[h])!==l.props[h]&&r[h]!==l.props[h]&&(f=!1)}),f&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,uo.default)({ownerState:t},r,t)):l.style))}),a}return i}function LZ(n={}){const{themeId:e,defaultTheme:t=PZ,rootShouldForwardProp:r=S_,slotShouldForwardProp:i=S_}=n,s=o=>(0,MZ.default)((0,uo.default)({},o,{theme:qy((0,uo.default)({},o,{defaultTheme:t,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,YI.internal_processStyles)(o,I=>I.filter(B=>!(B!=null&&B.__mui_systemSx)));const{name:l,slot:f,skipVariantsResolver:h,skipSx:p,overridesResolver:m=BZ(IZ(f))}=a,v=(0,nw.default)(a,TZ),x=h!==void 0?h:f&&f!=="Root"&&f!=="root"||!1,E=p||!1;let A,y=S_;f==="Root"||f==="root"?y=r:f?y=i:RZ(o)&&(y=void 0);const M=(0,YI.default)(o,(0,uo.default)({shouldForwardProp:y,label:A},v)),S=I=>typeof I=="function"&&I.__emotion_real!==I||(0,SZ.isPlainObject)(I)?B=>A_(I,(0,uo.default)({},B,{theme:qy({theme:B.theme,defaultTheme:t,themeId:e})})):I,C=(I,...B)=>{let O=S(I);const z=B?B.map(S):[];l&&m&&z.push(W=>{const ae=qy((0,uo.default)({},W,{defaultTheme:t,themeId:e}));if(!ae.components||!ae.components[l]||!ae.components[l].styleOverrides)return null;const te=ae.components[l].styleOverrides,ie={};return Object.entries(te).forEach(([le,ce])=>{ie[le]=A_(ce,(0,uo.default)({},W,{theme:ae}))}),m(W,ie)}),l&&!x&&z.push(W=>{var ae;const te=qy((0,uo.default)({},W,{defaultTheme:t,themeId:e})),ie=te==null||(ae=te.components)==null||(ae=ae[l])==null?void 0:ae.variants;return A_({variants:ie},(0,uo.default)({},W,{theme:te}))}),E||z.push(s);const L=z.length-B.length;if(Array.isArray(I)&&L>0){const W=new Array(L).fill("");O=[...I,...W],O.raw=[...I.raw,...W]}const N=M(O,...z);return o.muiName&&(N.muiName=o.muiName),N};return M.withConfig&&(C.withConfig=M.withConfig),C}}function DZ(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const OZ=n=>DZ(n)&&n!=="classes",FZ=OZ,NZ=xZ({themeId:Bx,defaultTheme:bC,rootShouldForwardProp:FZ}),Lx=NZ,UZ=Sx("MuiBox",["root"]),kZ=UZ,zZ=aN(),HZ=tQ({themeId:Bx,defaultTheme:zZ,defaultClassName:kZ.root,generateClassName:WF.generate}),GZ=HZ;function uN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=uN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function r1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=uN(n))&&(r&&(r+=" "),r+=e);return r}function VZ(n){return xx("MuiTypography",n)}Sx("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const WZ=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],jZ=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:s,classes:o}=n,a={root:["root",s,n.align!=="inherit"&&`align${A0(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return EC(a,VZ,o)},XZ=Lx("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${A0(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>Et({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),qI={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},JZ={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},KZ=n=>JZ[n]||n,YZ=ee.forwardRef(function(e,t){const r=RC({props:e,name:"MuiTypography"}),i=KZ(r.color),s=xC(Et({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:f=!1,noWrap:h=!1,paragraph:p=!1,variant:m="body1",variantMapping:v=qI}=s,x=Es(s,WZ),E=Et({},s,{align:o,color:i,className:a,component:l,gutterBottom:f,noWrap:h,paragraph:p,variant:m,variantMapping:v}),A=l||(p?"p":v[m]||qI[m])||"span",y=jZ(E);return We.jsx(XZ,Et({as:A,ref:t,ownerState:E,className:r1(y.root,a)},x))}),QI=YZ;function qZ(n){return typeof n=="string"}function QZ(n,e,t){return n===void 0||qZ(n)?e:Et({},e,{ownerState:Et({},e.ownerState,t)})}function cN(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function ZZ(n,e,t){return typeof n=="function"?n(e,t):n}function fN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=fN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ZI(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=fN(n))&&(r&&(r+=" "),r+=e);return r}function $I(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function $Z(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:i,className:s}=n;if(!e){const v=ZI(t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),x=Et({},t==null?void 0:t.style,i==null?void 0:i.style,r==null?void 0:r.style),E=Et({},t,i,r);return v.length>0&&(E.className=v),Object.keys(x).length>0&&(E.style=x),{props:E,internalRef:void 0}}const o=cN(Et({},i,r)),a=$I(r),l=$I(i),f=e(o),h=ZI(f==null?void 0:f.className,t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=Et({},f==null?void 0:f.style,t==null?void 0:t.style,i==null?void 0:i.style,r==null?void 0:r.style),m=Et({},f,t,l,a);return h.length>0&&(m.className=h),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:f.ref}}const e$=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function eB(n){var e;const{elementType:t,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=n,o=Es(n,e$),a=s?{}:ZZ(r,i),{props:l,internalRef:f}=$Z(Et({},o,{externalSlotProps:a})),h=T0(f,a==null?void 0:a.ref,(e=n.additionalProps)==null?void 0:e.ref);return QZ(t,Et({},l,{ref:h}),i)}function t$(n){const e=ku(n);return e.body===n?MC(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function _g(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function tB(n){return parseInt(MC(n).getComputedStyle(n).paddingRight,10)||0}function n$(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function nB(n,e,t,r,i){const s=[e,t,...r];[].forEach.call(n.children,o=>{const a=s.indexOf(o)===-1,l=!n$(o);a&&l&&_g(o,i)})}function oM(n,e){let t=-1;return n.some((r,i)=>e(r)?(t=i,!0):!1),t}function r$(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(t$(r)){const o=mQ(ku(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${tB(r)+o}px`;const a=ku(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${tB(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=ku(r).body;else{const o=r.parentElement,a=MC(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function i$(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class s${constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&_g(e.modalRef,!1);const i=i$(t);nB(t,e.mount,e.modalRef,i,!0);const s=oM(this.containers,o=>o.container===t);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),r)}mount(e,t){const r=oM(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=r$(i,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=oM(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&_g(e.modalRef,t),nB(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&_g(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function o$(n){return typeof n=="function"?n():n}function a$(n){return n?n.props.hasOwnProperty("in"):!1}const l$=new s$;function u$(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,manager:i=l$,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:f,open:h,rootRef:p}=n,m=ee.useRef({}),v=ee.useRef(null),x=ee.useRef(null),E=T0(x,p),[A,y]=ee.useState(!h),M=a$(l);let S=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(S=!1);const C=()=>ku(v.current),I=()=>(m.current.modalRef=x.current,m.current.mount=v.current,m.current),B=()=>{i.mount(I(),{disableScrollLock:r}),x.current&&(x.current.scrollTop=0)},O=HI(()=>{const ce=o$(e)||C().body;i.add(I(),ce),x.current&&B()}),z=ee.useCallback(()=>i.isTopModal(I()),[i]),L=HI(ce=>{v.current=ce,ce&&(h&&z()?B():x.current&&_g(x.current,S))}),N=ee.useCallback(()=>{i.remove(I(),S)},[S,i]);ee.useEffect(()=>()=>{N()},[N]),ee.useEffect(()=>{h?O():(!M||!s)&&N()},[h,N,M,s,O]);const W=ce=>he=>{var K;(K=ce.onKeyDown)==null||K.call(ce,he),!(he.key!=="Escape"||he.which===229||!z())&&(t||(he.stopPropagation(),f&&f(he,"escapeKeyDown")))},ae=ce=>he=>{var K;(K=ce.onClick)==null||K.call(ce,he),he.target===he.currentTarget&&f&&f(he,"backdropClick")};return{getRootProps:(ce={})=>{const he=cN(n);delete he.onTransitionEnter,delete he.onTransitionExited;const K=Et({},he,ce);return Et({role:"presentation"},K,{onKeyDown:W(K),ref:E})},getBackdropProps:(ce={})=>{const he=ce;return Et({"aria-hidden":!0},he,{onClick:ae(he),open:h})},getTransitionProps:()=>{const ce=()=>{y(!1),o&&o()},he=()=>{y(!0),a&&a(),s&&N()};return{onEnter:zI(ce,l==null?void 0:l.props.onEnter),onExited:zI(he,l==null?void 0:l.props.onExited)}},rootRef:E,portalRef:L,isTopModal:z,exited:A,hasTransition:M}}const c$=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function f$(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function d$(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function h$(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||d$(n))}function p$(n){const e=[],t=[];return Array.from(n.querySelectorAll(c$)).forEach((r,i)=>{const s=f$(r);s===-1||!h$(r)||(s===0?e.push(r):t.push({documentOrder:i,tabIndex:s,node:r}))}),t.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function m$(){return!0}function g$(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=p$,isEnabled:o=m$,open:a}=n,l=ee.useRef(!1),f=ee.useRef(null),h=ee.useRef(null),p=ee.useRef(null),m=ee.useRef(null),v=ee.useRef(!1),x=ee.useRef(null),E=T0(e.ref,x),A=ee.useRef(null);ee.useEffect(()=>{!a||!x.current||(v.current=!t)},[t,a]),ee.useEffect(()=>{if(!a||!x.current)return;const S=ku(x.current);return x.current.contains(S.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),v.current&&x.current.focus()),()=>{i||(p.current&&p.current.focus&&(l.current=!0,p.current.focus()),p.current=null)}},[a]),ee.useEffect(()=>{if(!a||!x.current)return;const S=ku(x.current),C=O=>{A.current=O,!(r||!o()||O.key!=="Tab")&&S.activeElement===x.current&&O.shiftKey&&(l.current=!0,h.current&&h.current.focus())},I=()=>{const O=x.current;if(O===null)return;if(!S.hasFocus()||!o()||l.current){l.current=!1;return}if(O.contains(S.activeElement)||r&&S.activeElement!==f.current&&S.activeElement!==h.current)return;if(S.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!v.current)return;let z=[];if((S.activeElement===f.current||S.activeElement===h.current)&&(z=s(x.current)),z.length>0){var L,N;const W=!!((L=A.current)!=null&&L.shiftKey&&((N=A.current)==null?void 0:N.key)==="Tab"),ae=z[0],te=z[z.length-1];typeof ae!="string"&&typeof te!="string"&&(W?te.focus():ae.focus())}else O.focus()};S.addEventListener("focusin",I),S.addEventListener("keydown",C,!0);const B=setInterval(()=>{S.activeElement&&S.activeElement.tagName==="BODY"&&I()},50);return()=>{clearInterval(B),S.removeEventListener("focusin",I),S.removeEventListener("keydown",C,!0)}},[t,r,i,o,a,s]);const y=S=>{p.current===null&&(p.current=S.relatedTarget),v.current=!0,m.current=S.target;const C=e.props.onFocus;C&&C(S)},M=S=>{p.current===null&&(p.current=S.relatedTarget),v.current=!0};return We.jsxs(ee.Fragment,{children:[We.jsx("div",{tabIndex:a?0:-1,onFocus:M,ref:f,"data-testid":"sentinelStart"}),ee.cloneElement(e,{ref:E,onFocus:y}),We.jsx("div",{tabIndex:a?0:-1,onFocus:M,ref:h,"data-testid":"sentinelEnd"})]})}function v$(n){return typeof n=="function"?n():n}const y$=ee.forwardRef(function(e,t){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=ee.useState(null),l=T0(ee.isValidElement(r)?r.ref:null,t);if(t1(()=>{s||a(v$(i)||document.body)},[i,s]),t1(()=>{if(o&&!s)return tw(t,o),()=>{tw(t,null)}},[t,o,s]),s){if(ee.isValidElement(r)){const f={ref:l};return ee.cloneElement(r,f)}return We.jsx(ee.Fragment,{children:r})}return We.jsx(ee.Fragment,{children:o&&eT.createPortal(r,o)})});function rw(n,e){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rw(n,e)}function _$(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,rw(n,e)}const rB={disabled:!1},dN=Mu.createContext(null);var x$=function(e){return e.scrollTop},tg="unmounted",Zc="exited",$c="entering",oh="entered",iw="exiting",Bl=function(n){_$(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Zc,s.appearStatus=$c):l=oh:r.unmountOnExit||r.mountOnEnter?l=tg:l=Zc,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===tg?{status:Zc}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==$c&&o!==oh&&(s=$c):(o===$c||o===oh)&&(s=iw)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===$c){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ty.findDOMNode(this);o&&x$(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zc&&this.setState({status:tg})},t.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[ty.findDOMNode(this),a],f=l[0],h=l[1],p=this.getTimeouts(),m=a?p.appear:p.enter;if(!i&&!o||rB.disabled){this.safeSetState({status:oh},function(){s.props.onEntered(f)});return}this.props.onEnter(f,h),this.safeSetState({status:$c},function(){s.props.onEntering(f,h),s.onTransitionEnd(m,function(){s.safeSetState({status:oh},function(){s.props.onEntered(f,h)})})})},t.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:ty.findDOMNode(this);if(!s||rB.disabled){this.safeSetState({status:Zc},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:iw},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Zc},function(){i.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:ty.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],f=l[0],h=l[1];this.props.addEndListener(f,h)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===tg)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Es(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Mu.createElement(dN.Provider,{value:null},typeof o=="function"?o(i,a):Mu.cloneElement(Mu.Children.only(o),a))},e}(Mu.Component);Bl.contextType=dN;Bl.propTypes={};function nh(){}Bl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:nh,onEntering:nh,onEntered:nh,onExit:nh,onExiting:nh,onExited:nh};Bl.UNMOUNTED=tg;Bl.EXITED=Zc;Bl.ENTERING=$c;Bl.ENTERED=oh;Bl.EXITING=iw;const S$=Bl,A$=n=>n.scrollTop;function iB(n,e){var t,r;const{timeout:i,easing:s,style:o={}}=n;return{duration:(t=o.transitionDuration)!=null?t:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}const M$=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],E$={entering:{opacity:1},entered:{opacity:1}},w$=ee.forwardRef(function(e,t){const r=dZ(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:f,onEnter:h,onEntered:p,onEntering:m,onExit:v,onExited:x,onExiting:E,style:A,timeout:y=i,TransitionComponent:M=S$}=e,S=Es(e,M$),C=ee.useRef(null),I=T0(C,a.ref,t),B=ie=>le=>{if(ie){const ce=C.current;le===void 0?ie(ce):ie(ce,le)}},O=B(m),z=B((ie,le)=>{A$(ie);const ce=iB({style:A,timeout:y,easing:l},{mode:"enter"});ie.style.webkitTransition=r.transitions.create("opacity",ce),ie.style.transition=r.transitions.create("opacity",ce),h&&h(ie,le)}),L=B(p),N=B(E),W=B(ie=>{const le=iB({style:A,timeout:y,easing:l},{mode:"exit"});ie.style.webkitTransition=r.transitions.create("opacity",le),ie.style.transition=r.transitions.create("opacity",le),v&&v(ie)}),ae=B(x),te=ie=>{s&&s(C.current,ie)};return We.jsx(M,Et({appear:o,in:f,nodeRef:C,onEnter:z,onEntered:L,onEntering:O,onExit:W,onExited:ae,onExiting:N,addEndListener:te,timeout:y},S,{children:(ie,le)=>ee.cloneElement(a,Et({style:Et({opacity:0,visibility:ie==="exited"&&!f?"hidden":void 0},E$[ie],A,a.props.style),ref:I},le))}))}),T$=w$;function C$(n){return xx("MuiBackdrop",n)}Sx("MuiBackdrop",["root","invisible"]);const b$=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],R$=n=>{const{classes:e,invisible:t}=n;return EC({root:["root",t&&"invisible"]},C$,e)},P$=Lx("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>Et({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),I$=ee.forwardRef(function(e,t){var r,i,s;const o=RC({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:f="div",components:h={},componentsProps:p={},invisible:m=!1,open:v,slotProps:x={},slots:E={},TransitionComponent:A=T$,transitionDuration:y}=o,M=Es(o,b$),S=Et({},o,{component:f,invisible:m}),C=R$(S),I=(r=x.root)!=null?r:p.root;return We.jsx(A,Et({in:v,timeout:y},M,{children:We.jsx(P$,Et({"aria-hidden":!0},I,{as:(i=(s=E.root)!=null?s:h.Root)!=null?i:f,className:r1(C.root,l,I==null?void 0:I.className),ownerState:Et({},S,I==null?void 0:I.ownerState),classes:C,ref:t,children:a}))}))}),B$=I$;function L$(n){return xx("MuiModal",n)}Sx("MuiModal",["root","hidden","backdrop"]);const D$=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],O$=n=>{const{open:e,exited:t,classes:r}=n;return EC({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},L$,r)},F$=Lx("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>Et({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),N$=Lx(B$,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),U$=ee.forwardRef(function(e,t){var r,i,s,o,a,l;const f=RC({name:"MuiModal",props:e}),{BackdropComponent:h=N$,BackdropProps:p,className:m,closeAfterTransition:v=!1,children:x,container:E,component:A,components:y={},componentsProps:M={},disableAutoFocus:S=!1,disableEnforceFocus:C=!1,disableEscapeKeyDown:I=!1,disablePortal:B=!1,disableRestoreFocus:O=!1,disableScrollLock:z=!1,hideBackdrop:L=!1,keepMounted:N=!1,onBackdropClick:W,open:ae,slotProps:te,slots:ie}=f,le=Es(f,D$),ce=Et({},f,{closeAfterTransition:v,disableAutoFocus:S,disableEnforceFocus:C,disableEscapeKeyDown:I,disablePortal:B,disableRestoreFocus:O,disableScrollLock:z,hideBackdrop:L,keepMounted:N}),{getRootProps:he,getBackdropProps:K,getTransitionProps:fe,portalRef:re,isTopModal:se,exited:oe,hasTransition:Le}=u$(Et({},ce,{rootRef:t})),Oe=Et({},ce,{exited:oe}),De=O$(Oe),Ue={};if(x.props.tabIndex===void 0&&(Ue.tabIndex="-1"),Le){const{onEnter:Ne,onExited:Be}=fe();Ue.onEnter=Ne,Ue.onExited=Be}const Xe=(r=(i=ie==null?void 0:ie.root)!=null?i:y.Root)!=null?r:F$,rt=(s=(o=ie==null?void 0:ie.backdrop)!=null?o:y.Backdrop)!=null?s:h,Gt=(a=te==null?void 0:te.root)!=null?a:M.root,Dt=(l=te==null?void 0:te.backdrop)!=null?l:M.backdrop,Ge=eB({elementType:Xe,externalSlotProps:Gt,externalForwardedProps:le,getSlotProps:he,additionalProps:{ref:t,as:A},ownerState:Oe,className:r1(m,Gt==null?void 0:Gt.className,De==null?void 0:De.root,!Oe.open&&Oe.exited&&(De==null?void 0:De.hidden))}),$=eB({elementType:rt,externalSlotProps:Dt,additionalProps:p,getSlotProps:Ne=>K(Et({},Ne,{onClick:Be=>{W&&W(Be),Ne!=null&&Ne.onClick&&Ne.onClick(Be)}})),className:r1(Dt==null?void 0:Dt.className,p==null?void 0:p.className,De==null?void 0:De.backdrop),ownerState:Oe});return!N&&!ae&&(!Le||oe)?null:We.jsx(y$,{ref:re,container:E,disablePortal:B,children:We.jsxs(Xe,Et({},Ge,{children:[!L&&h?We.jsx(rt,Et({},$)):null,We.jsx(g$,{disableEnforceFocus:C,disableAutoFocus:S,disableRestoreFocus:O,isEnabled:se,open:ae,children:ee.cloneElement(x,Ue)})]}))})}),k$=U$;const z$={position:"relative",top:"50%",left:"220px",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",borderRadius:2,boxShadow:24,p:4},H$={position:"fixed",top:"50%",right:"-10px",transform:"translate(0, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",borderRadius:2,boxShadow:24,p:4},G$={position:"fixed",top:"80%",transform:"translate(0, -50%)",width:325,bgcolor:"background.paper",border:"2px solid #000",borderRadius:2,boxShadow:24,p:4},V$=({isOpen:n,onClose:e,message:t,id:r})=>{const i=dQ("(max-width:600px)");return We.jsx("div",{children:We.jsx(k$,{open:n,onClose:e,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:We.jsxs(GZ,{sx:i?G$:r==1||r==3||r==5?z$:H$,children:[We.jsx(QI,{id:"modal-modal-title",variant:"h5",component:"h2",children:t}),We.jsx(QI,{id:"modal-modal-description",sx:{mt:2},children:t})]})})})};function rh({children:n,position:e,visibleRange:t,message:r,id:i}){const{gl:s}=Zi(),o=tF(),[a,l]=ee.useState(0),[f,h]=ee.useState(!1),p=()=>{h(!f)};return Lf(()=>{const m=o.scroll.current>t[0]&&o.scroll.current<t[1];l(f?0:m?1:0)}),We.jsxs(QO,{portal:{current:s.domElement.parentNode},position:e,children:[We.jsx(V$,{isOpen:f,onClose:p,message:r,id:i}),We.jsxs("div",{className:"fade button-container",style:{position:"relative",display:a?"block":"none"},children:[We.jsx("button",{id:"round-button",onClick:p,children:We.jsx("span",{className:"arrow",children:""})}),We.jsx("span",{className:"button-text",children:n})]})]})}function hl(n){const e=ee.useRef(),{position:t,scale:r,modelUrl:i}=n,s=Z1(i);return We.jsxs("primitive",{ref:e,position:t||[0,0,0],scale:r||[1,1,1],object:s.scene,children:[We.jsx(rh,{position:[5.35,.02,-4.8],id:1,visibleRange:[.09,.14],message:"hakuna matata 1",children:"Texto explicativo 1"}),We.jsx(rh,{position:[4.3,.02,-4.6],id:2,visibleRange:[.16,.25],message:"hakuna matata 2",children:"Texto explicativo 2"}),We.jsx(rh,{position:[4.4,.02,-5.2],id:3,visibleRange:[.27,.35],message:"hakuna matata 3",children:"Texto explicativo 3"}),We.jsx(rh,{position:[3,.02,-5.7],id:4,visibleRange:[.36,.48],message:"hakuna matata 4",children:"Texto explicativo 4"}),We.jsx(rh,{position:[1.8,.02,-3.4],id:5,visibleRange:[.52,.67],message:"hakuna matata 5",children:"Texto explicativo 5"}),We.jsx(rh,{position:[-2,.02,-4.5],id:6,visibleRange:[.79,.88],message:"hakuna matata 6",children:"Texto explicativo 6"})]})}var i1={exports:{}},Ur={};(function(n){var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(F,j,ue)=>j in F?e(F,j,{enumerable:!0,configurable:!0,writable:!0,value:ue}):F[j]=ue,l=(F,j)=>{for(var ue in j||(j={}))s.call(j,ue)&&a(F,ue,j[ue]);if(i)for(var ue of i(j))o.call(j,ue)&&a(F,ue,j[ue]);return F},f=(F,j)=>t(F,r(j)),h=F=>e(F,"__esModule",{value:!0}),p=(F,j)=>{h(F);for(var ue in j)e(F,ue,{get:j[ue],enumerable:!0})};p(n,{Atom:()=>Xl,PointerProxy:()=>Ja,Ticker:()=>ua,getPointerParts:()=>Lr,isPointer:()=>Cs,isPrism:()=>wo,iterateAndCountTicks:()=>la,iterateOver:()=>Mi,pointer:()=>as,pointerToPrism:()=>Xa,prism:()=>oa,val:()=>Kl});var m=Array.isArray,v=m,x=typeof ya=="object"&&ya&&ya.Object===Object&&ya,E=x,A=typeof self=="object"&&self&&self.Object===Object&&self,y=E||A||Function("return this")(),M=y,S=M.Symbol,C=S,I=Object.prototype,B=I.hasOwnProperty,O=I.toString,z=C?C.toStringTag:void 0;function L(F){var j=B.call(F,z),ue=F[z];try{F[z]=void 0;var we=!0}catch{}var Nt=O.call(F);return we&&(j?F[z]=ue:delete F[z]),Nt}var N=L,W=Object.prototype,ae=W.toString;function te(F){return ae.call(F)}var ie=te,le="[object Null]",ce="[object Undefined]",he=C?C.toStringTag:void 0;function K(F){return F==null?F===void 0?ce:le:he&&he in Object(F)?N(F):ie(F)}var fe=K;function re(F){return F!=null&&typeof F=="object"}var se=re,oe="[object Symbol]";function Le(F){return typeof F=="symbol"||se(F)&&fe(F)==oe}var Oe=Le,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ue=/^\w*$/;function Xe(F,j){if(v(F))return!1;var ue=typeof F;return ue=="number"||ue=="symbol"||ue=="boolean"||F==null||Oe(F)?!0:Ue.test(F)||!De.test(F)||j!=null&&F in Object(j)}var rt=Xe;function Gt(F){var j=typeof F;return F!=null&&(j=="object"||j=="function")}var Dt=Gt,Ge="[object AsyncFunction]",$="[object Function]",Ne="[object GeneratorFunction]",Be="[object Proxy]";function Ve(F){if(!Dt(F))return!1;var j=fe(F);return j==$||j==Ne||j==Ge||j==Be}var He=Ve,vt=M["__core-js_shared__"],st=vt,ft=function(){var F=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}();function Ct(F){return!!ft&&ft in F}var jt=Ct,un=Function.prototype,Z=un.toString;function G(F){if(F!=null){try{return Z.call(F)}catch{}try{return F+""}catch{}}return""}var _e=G,je=/[\\^$.*+?()[\]{}|]/g,ke=/^\[object .+?Constructor\]$/,Ke=Function.prototype,xt=Object.prototype,Qe=Ke.toString,Ee=xt.hasOwnProperty,bt=RegExp("^"+Qe.call(Ee).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ct(F){if(!Dt(F)||jt(F))return!1;var j=He(F)?bt:ke;return j.test(_e(F))}var pt=ct;function yt(F,j){return F==null?void 0:F[j]}var mt=yt;function It(F,j){var ue=mt(F,j);return pt(ue)?ue:void 0}var Ut=It,de=Ut(Object,"create"),Ae=de;function Me(){this.__data__=Ae?Ae(null):{},this.size=0}var Ze=Me;function it(F){var j=this.has(F)&&delete this.__data__[F];return this.size-=j?1:0,j}var $t=it,wn="__lodash_hash_undefined__",Nn=Object.prototype,ci=Nn.hasOwnProperty;function sn(F){var j=this.__data__;if(Ae){var ue=j[F];return ue===wn?void 0:ue}return ci.call(j,F)?j[F]:void 0}var Gr=sn,or=Object.prototype,Zo=or.hasOwnProperty;function $o(F){var j=this.__data__;return Ae?j[F]!==void 0:Zo.call(j,F)}var ws=$o,ts="__lodash_hash_undefined__";function ns(F,j){var ue=this.__data__;return this.size+=this.has(F)?0:1,ue[F]=Ae&&j===void 0?ts:j,this}var Ir=ns;function zt(F){var j=-1,ue=F==null?0:F.length;for(this.clear();++j<ue;){var we=F[j];this.set(we[0],we[1])}}zt.prototype.clear=Ze,zt.prototype.delete=$t,zt.prototype.get=Gr,zt.prototype.has=ws,zt.prototype.set=Ir;var Mo=zt;function Fa(){this.__data__=[],this.size=0}var U=Fa;function R(F,j){return F===j||F!==F&&j!==j}var H=R;function Y(F,j){for(var ue=F.length;ue--;)if(H(F[ue][0],j))return ue;return-1}var X=Y,Q=Array.prototype,ye=Q.splice;function Se(F){var j=this.__data__,ue=X(j,F);if(ue<0)return!1;var we=j.length-1;return ue==we?j.pop():ye.call(j,ue,1),--this.size,!0}var Ie=Se;function Pe(F){var j=this.__data__,ue=X(j,F);return ue<0?void 0:j[ue][1]}var Fe=Pe;function Ce(F){return X(this.__data__,F)>-1}var dt=Ce;function et(F,j){var ue=this.__data__,we=X(ue,F);return we<0?(++this.size,ue.push([F,j])):ue[we][1]=j,this}var nt=et;function St(F){var j=-1,ue=F==null?0:F.length;for(this.clear();++j<ue;){var we=F[j];this.set(we[0],we[1])}}St.prototype.clear=U,St.prototype.delete=Ie,St.prototype.get=Fe,St.prototype.has=dt,St.prototype.set=nt;var Lt=St,Rt=Ut(M,"Map"),lt=Rt;function Ft(){this.size=0,this.__data__={hash:new Mo,map:new(lt||Lt),string:new Mo}}var gt=Ft;function Vt(F){var j=typeof F;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?F!=="__proto__":F===null}var vn=Vt;function kt(F,j){var ue=F.__data__;return vn(j)?ue[typeof j=="string"?"string":"hash"]:ue.map}var dn=kt;function cn(F){var j=dn(this,F).delete(F);return this.size-=j?1:0,j}var Tn=cn;function Un(F){return dn(this,F).get(F)}var Wt=Un;function Gn(F){return dn(this,F).has(F)}var mn=Gn;function an(F,j){var ue=dn(this,F),we=ue.size;return ue.set(F,j),this.size+=ue.size==we?0:1,this}var kn=an;function Zr(F){var j=-1,ue=F==null?0:F.length;for(this.clear();++j<ue;){var we=F[j];this.set(we[0],we[1])}}Zr.prototype.clear=gt,Zr.prototype.delete=Tn,Zr.prototype.get=Wt,Zr.prototype.has=mn,Zr.prototype.set=kn;var Br=Zr,rs="Expected a function";function ea(F,j){if(typeof F!="function"||j!=null&&typeof j!="function")throw new TypeError(rs);var ue=function(){var we=arguments,Nt=j?j.apply(this,we):we[0],hn=ue.cache;if(hn.has(Nt))return hn.get(Nt);var en=F.apply(this,we);return ue.cache=hn.set(Nt,en)||hn,en};return ue.cache=new(ea.Cache||Br),ue}ea.Cache=Br;var Ll=ea,is=500;function Eo(F){var j=Ll(F,function(we){return ue.size===is&&ue.clear(),we}),ue=j.cache;return j}var yp=Eo,Na=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ec=/\\(\\)?/g,tc=yp(function(F){var j=[];return F.charCodeAt(0)===46&&j.push(""),F.replace(Na,function(ue,we,Nt,hn){j.push(Nt?hn.replace(ec,"$1"):we||ue)}),j}),Ua=tc;function _p(F,j){for(var ue=-1,we=F==null?0:F.length,Nt=Array(we);++ue<we;)Nt[ue]=j(F[ue],ue,F);return Nt}var nc=_p,ln=1/0,rc=C?C.prototype:void 0,Dl=rc?rc.toString:void 0;function ic(F){if(typeof F=="string")return F;if(v(F))return nc(F,ic)+"";if(Oe(F))return Dl?Dl.call(F):"";var j=F+"";return j=="0"&&1/F==-ln?"-0":j}var xp=ic;function Sp(F){return F==null?"":xp(F)}var pr=Sp;function sc(F,j){return v(F)?F:rt(F,j)?[F]:Ua(pr(F))}var Ap=sc,Ks=1/0;function Ol(F){if(typeof F=="string"||Oe(F))return F;var j=F+"";return j=="0"&&1/F==-Ks?"-0":j}var Fl=Ol;function Si(F,j){j=Ap(j,F);for(var ue=0,we=j.length;F!=null&&ue<we;)F=F[Fl(j[ue++])];return ue&&ue==we?F:void 0}var Mp=Si;function Ep(F,j,ue){var we=F==null?void 0:Mp(F,j);return we===void 0?ue:we}var ss=Ep;function Ts(F,j){return function(ue){return F(j(ue))}}var Nl=Ts,oc=Nl(Object.getPrototypeOf,Object),Df=oc,wp="[object Object]",os=Function.prototype,Tp=Object.prototype,ka=os.toString,Of=Tp.hasOwnProperty,Ai=ka.call(Object);function za(F){if(!se(F)||fe(F)!=wp)return!1;var j=Df(F);if(j===null)return!0;var ue=Of.call(j,"constructor")&&j.constructor;return typeof ue=="function"&&ue instanceof ue&&ka.call(ue)==Ai}var Ha=za;function ta(F){var j=F==null?0:F.length;return j?F[j-1]:void 0}var Ul=ta,Ga=new WeakMap,na=new WeakMap,kl=Symbol("pointerMeta"),ac={get(F,j){if(j===kl)return Ga.get(F);let ue=na.get(F);ue||(ue=new Map,na.set(F,ue));const we=ue.get(j);if(we!==void 0)return we;const Nt=Ga.get(F),hn=fi({root:Nt.root,path:[...Nt.path,j]});return ue.set(j,hn),hn}},$r=F=>F[kl],Lr=F=>{const{root:j,path:ue}=$r(F);return{root:j,path:ue}};function fi(F){var j;const ue={root:F.root,path:(j=F.path)!=null?j:[]},we={};return Ga.set(we,ue),new Proxy(we,ac)}var as=fi,Cs=F=>F&&!!$r(F);function lc(F,j,ue){return j.length===0?ue(F):ei(F,j,ue)}var ei=(F,j,ue)=>{if(j.length===0)return ue(F);if(Array.isArray(F)){let[we,...Nt]=j;we=parseInt(String(we),10),isNaN(we)&&(we=0);const hn=F[we],en=ei(hn,Nt,ue);if(hn===en)return F;const hi=[...F];return hi.splice(we,1,en),hi}else if(typeof F=="object"&&F!==null){const[we,...Nt]=j,hn=F[we],en=ei(hn,Nt,ue);return hn===en?F:f(l({},F),{[we]:en})}else{const[we,...Nt]=j;return{[we]:ei(void 0,Nt,ue)}}},zn=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const F=this._head;if(F)return this._head=F.next,F.data}push(F){const j={next:this._head,data:F};this._head=j}};function wo(F){return!!(F&&F.isPrism&&F.isPrism===!0)}function zl(){const F=()=>{},j=new zn,ue=F;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{j.push(ue)},stopIgnoringDependencies:()=>{j.peek()!==ue||j.pop()},reportResolutionStart:Zs=>{const $s=j.peek();$s&&$s(Zs),j.push(ue)},reportResolutionEnd:Zs=>{j.pop()},pushCollector:Zs=>{j.push(Zs)},popCollector:Zs=>{if(j.peek()!==Zs)throw new Error("Popped collector is not on top of the stack");j.pop()}}}function Hl(){const F="__dataverse_discoveryMechanism_sharedStack",j=typeof window<"u"?window:typeof ya<"u"?ya:{};if(j){const ue=j[F];if(ue&&typeof ue=="object"&&ue.type==="Dataverse_discoveryMechanism")return ue;{const we=zl();return j[F]=we,we}}else return zl()}var{startIgnoringDependencies:Ys,stopIgnoringDependencies:ra,reportResolutionEnd:uc,reportResolutionStart:Gl,pushCollector:Vl,popCollector:Ff}=Hl(),cc=()=>{},fc=class{constructor(F,j){this._fn=F,this._prismInstance=j,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Va(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=ue=>{this._possiblyStaleDeps.add(ue),this._markAsStale()};for(const ue of this._dependencies)ue._addDependent(this._reactToDependencyGoingStale);Ys(),this.getValue(),ra()}get hasDependents(){return this._dependents.size>0}removeDependent(F){this._dependents.delete(F)}addDependent(F){this._dependents.add(F)}destroy(){for(const F of this._dependencies)F._removeDependent(this._reactToDependencyGoingStale);Wa(this._scope)}getValue(){if(!this._isFresh){const F=this._recalculate();this._lastValue=F,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let F;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let we=!1;Ys();for(const Nt of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Nt)!==Nt.getValue()){we=!0;break}if(ra(),this._possiblyStaleDeps.clear(),!we)return this._lastValue}const j=new Set;this._cacheOfDendencyValues.clear();const ue=we=>{j.add(we),this._addDependency(we)};Vl(ue),bn.push(this._scope);try{F=this._fn()}catch(we){console.error(we)}finally{bn.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}Ff(ue);for(const we of this._dependencies)j.has(we)||this._removeDependency(we);this._dependencies=j,Ys();for(const we of j)this._cacheOfDendencyValues.set(we,we.getValue());return ra(),F}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const F of this._dependents)F(this._prismInstance)}}_addDependency(F){this._dependencies.has(F)||(this._dependencies.add(F),F._addDependent(this._reactToDependencyGoingStale))}_removeDependency(F){this._dependencies.has(F)&&(this._dependencies.delete(F),F._removeDependent(this._reactToDependencyGoingStale))}},qs={},ia=class{constructor(F){this._fn=F,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(F,j,ue=!1){const we=()=>{F.onThisOrNextTick(hn)};let Nt=qs;const hn=()=>{const hi=this.getValue();hi!==Nt&&(Nt=hi,j(hi))};return this._addDependent(we),ue&&(Nt=this.getValue(),j(Nt)),()=>{this._removeDependent(we),F.offThisOrNextTick(hn),F.offNextTick(hn)}}onStale(F){const j=()=>{this._removeDependent(ue)},ue=()=>F();return this._addDependent(ue),j}keepHot(){return this.onStale(()=>{})}_addDependent(F){this._state.hot||this._goHot(),this._state.handle.addDependent(F)}_goHot(){const F=new fc(this._fn,this);this._state={hot:!0,handle:F}}_removeDependent(F){const j=this._state;if(!j.hot)return;const ue=j.handle;ue.removeDependent(F),ue.hasDependents||(this._state={hot:!1,handle:void 0},ue.destroy())}getValue(){Gl(this);const F=this._state;let j;return F.hot?j=F.handle.getValue():j=sa(this._fn),uc(this),j}},Va=class{constructor(F){this._hotHandle=F,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(F,j){let ue=this._refs.get(F);if(ue!==void 0)return ue;{const we={current:j};return this._refs.set(F,we),we}}effect(F,j,ue){let we=this.effects.get(F);we===void 0&&(we={cleanup:cc,deps:void 0},this.effects.set(F,we)),ls(we.deps,ue)&&(we.cleanup(),Ys(),we.cleanup=Vr(j,cc).value,ra(),we.deps=ue)}memo(F,j,ue){let we=this.memos.get(F);return we===void 0&&(we={cachedValue:null,deps:void 0},this.memos.set(F,we)),ls(we.deps,ue)&&(Ys(),we.cachedValue=Vr(j,void 0).value,ra(),we.deps=ue),we.cachedValue}state(F,j){const{value:ue,setValue:we}=this.memo("state/"+F,()=>{const Nt={current:j};return{value:Nt,setValue:en=>{Nt.current=en,this._hotHandle.forceStale()}}},[]);return[ue.current,we]}sub(F){return this.subs[F]||(this.subs[F]=new Va(this._hotHandle)),this.subs[F]}cleanupEffects(){for(const F of this.effects.values())Vr(F.cleanup,void 0);this.effects.clear()}source(F,j){const ue="$$source/blah";return this.effect(ue,()=>F(()=>{this._hotHandle.forceStale()}),[F]),j()}};function Wa(F){for(const j of Object.values(F.subs))Wa(j);F.cleanupEffects()}function Vr(F,j){try{return{value:F(),ok:!0}}catch(ue){return setTimeout(function(){throw ue}),{value:j,ok:!1}}}var bn=new zn;function To(F,j){const ue=bn.peek();if(!ue)throw new Error("prism.ref() is called outside of a prism() call.");return ue.ref(F,j)}function zi(F,j,ue){const we=bn.peek();if(!we)throw new Error("prism.effect() is called outside of a prism() call.");return we.effect(F,j,ue)}function ls(F,j){if(F===void 0||j===void 0)return!0;const ue=F.length;if(ue!==j.length)return!0;for(let we=0;we<ue;we++)if(F[we]!==j[we])return!0;return!1}function Qs(F,j,ue){const we=bn.peek();if(!we)throw new Error("prism.memo() is called outside of a prism() call.");return we.memo(F,j,ue)}function ti(F,j){const ue=bn.peek();if(!ue)throw new Error("prism.state() is called outside of a prism() call.");return ue.state(F,j)}function dc(){if(!bn.peek())throw new Error("The parent function is called outside of a prism() call.")}function hc(F,j){const ue=bn.peek();if(!ue)throw new Error("prism.scope() is called outside of a prism() call.");const we=ue.sub(F);bn.push(we);const Nt=Vr(j,void 0).value;return bn.pop(),Nt}function di(F,j,ue){return Qs(F,()=>qn(j),ue).getValue()}function ni(){return!!bn.peek()}function Hn(F,j){const ue=bn.peek();if(!ue)throw new Error("prism.source() is called outside of a prism() call.");return ue.source(F,j)}var qn=F=>new ia(F),Wr=class{effect(F,j,ue){console.warn("prism.effect() does not run in cold prisms")}memo(F,j,ue){return j()}state(F,j){return[j,()=>{}]}ref(F,j){return{current:j}}sub(F){return new Wr}source(F,j){return j()}};function sa(F){const j=new Wr;bn.push(j);let ue;try{ue=F()}catch(we){console.error(we)}finally{bn.pop()!==j&&console.warn("The Prism hook stack has slipped. This is a bug.")}return ue}qn.ref=To,qn.effect=zi,qn.memo=Qs,qn.ensurePrism=dc,qn.state=ti,qn.scope=hc,qn.sub=di,qn.inPrism=ni,qn.source=Hn;var oa=qn,Wl;(function(F){F[F.Dict=0]="Dict",F[F.Array=1]="Array",F[F.Other=2]="Other"})(Wl||(Wl={}));var An=F=>Array.isArray(F)?1:Ha(F)?0:2,jl=(F,j,ue=An(F))=>ue===0&&typeof j=="string"||ue===1&&ja(j)?F[j]:void 0,ja=F=>{const j=typeof F=="number"?F:parseInt(F,10);return!isNaN(j)&&j>=0&&j<1/0&&(j|0)===j},Co=class{constructor(F,j){this._parent=F,this._path=j,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(F){this.identityChangeListeners.add(F)}removeIdentityChangeListener(F){this.identityChangeListeners.delete(F),this._checkForGC()}removeChild(F){this.children.delete(F),this._checkForGC()}getChild(F){return this.children.get(F)}getOrCreateChild(F){let j=this.children.get(F);return j||(j=j=new Co(this,this._path.concat([F])),this.children.set(F,j)),j}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(Ul(this._path))}},Xl=class{constructor(F){this.$$isPointerToPrismProvider=!0,this.pointer=as({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(j,ue)=>{const{path:we}=Lr(j),Nt=this._getOrCreateScopeForPath(we);return Nt.identityChangeListeners.add(ue),()=>{Nt.identityChangeListeners.delete(ue)}},this._currentState=F,this._rootScope=new Co(void 0,[])}set(F){const j=this._currentState;this._currentState=F,this._checkUpdates(this._rootScope,j,F)}get(){return this._currentState}getByPointer(F){const j=Cs(F)?F:F(this.pointer),ue=Lr(j).path;return this._getIn(ue)}_getIn(F){return F.length===0?this.get():ss(this.get(),F)}reduce(F){this.set(F(this.get()))}reduceByPointer(F,j){const ue=Cs(F)?F:F(this.pointer),we=Lr(ue).path,Nt=lc(this.get(),we,j);this.set(Nt)}setByPointer(F,j){this.reduceByPointer(F,()=>j)}_checkUpdates(F,j,ue){if(j===ue)return;for(const hn of F.identityChangeListeners)hn(ue);if(F.children.size===0)return;const we=An(j),Nt=An(ue);if(!(we===2&&we===Nt))for(const[hn,en]of F.children){const hi=jl(j,hn,we),Yl=jl(ue,hn,Nt);this._checkUpdates(en,hi,Yl)}}_getOrCreateScopeForPath(F){let j=this._rootScope;for(const ue of F)j=j.getOrCreateChild(ue);return j}pointerToPrism(F){const{path:j}=Lr(F),ue=Nt=>this._onPointerValueChange(F,Nt),we=()=>this._getIn(j);return oa(()=>oa.source(ue,we))}},aa=new WeakMap;function Jl(F){return typeof F=="object"&&F!==null&&F.$$isPointerToPrismProvider===!0}var Xa=F=>{const j=$r(F);let ue=aa.get(j);if(!ue){const we=j.root;if(!Jl(we))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");ue=we.pointerToPrism(F),aa.set(j,ue)}return ue},Kl=F=>Cs(F)?Xa(F).getValue():wo(F)?F.getValue():F;function*la(F){let j;if(Cs(F))j=Xa(F);else if(wo(F))j=F;else throw new Error("Only pointers and prisms are supported");let ue=0;const we=j.onStale(()=>{ue++});try{for(;;){const Nt=ue;ue=0,yield{value:j.getValue(),ticks:Nt}}}finally{we()}}var Nf=60*3,ua=class{constructor(F){this._conf=F,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(F){this._scheduledForThisOrNextTick.add(F),this._dormant&&this._goActive()}onNextTick(F){this._scheduledForNextTick.add(F),this._dormant&&this._goActive()}offThisOrNextTick(F){this._scheduledForThisOrNextTick.delete(F)}offNextTick(F){this._scheduledForNextTick.delete(F)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var F,j;this._dormant&&(this._dormant=!1,(j=(F=this._conf)==null?void 0:F.onActive)==null||j.call(F))}_goDormant(){var F,j;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(j=(F=this._conf)==null?void 0:F.onDormant)==null||j.call(F))}tick(F=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=Nf)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=F;for(const j of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(j);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(F){const j=this.time;if(F>10&&console.warn("_tick() recursing for 10 times"),F>100)throw new Error("Maximum recursion limit for _tick()");const ue=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const we of ue)we(j);if(this._scheduledForThisOrNextTick.size>0)return this._tick(F+1)}};function*Mi(F){let j;if(Cs(F))j=Xa(F);else if(wo(F))j=F;else throw new Error("Only pointers and prisms are supported");const ue=new ua,we=j.onChange(ue,Nt=>{});try{for(;;)ue.tick(),yield j.getValue()}finally{we()}}var Ja=class{constructor(F){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Xl(F),this.pointer=as({root:this,path:[]})}setPointer(F){this._currentPointerBox.set(F)}pointerToPrism(F){const{path:j}=$r(F);return oa(()=>{const ue=this._currentPointerBox.prism.getValue(),we=j.reduce((Nt,hn)=>Nt[hn],ue);return Kl(we)})}}})(Ur);i1.exports;(function(n,e){var t=Object.create,r=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,f=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(d,g,T)=>g in d?r(d,g,{enumerable:!0,configurable:!0,writable:!0,value:T}):d[g]=T,v=(d,g)=>{for(var T in g||(g={}))h.call(g,T)&&m(d,T,g[T]);if(l)for(var T of l(g))p.call(g,T)&&m(d,T,g[T]);return d},x=(d,g)=>i(d,o(g)),E=(d,g)=>function(){return g||(0,d[a(d)[0]])((g={exports:{}}).exports,g),g.exports},A=(d,g)=>{for(var T in g)r(d,T,{get:g[T],enumerable:!0})},y=(d,g,T,P)=>{if(g&&typeof g=="object"||typeof g=="function")for(let k of a(g))!h.call(d,k)&&k!==T&&r(d,k,{get:()=>g[k],enumerable:!(P=s(g,k))||P.enumerable});return d},M=(d,g,T)=>(T=d!=null?t(f(d)):{},y(g||!d||!d.__esModule?r(T,"default",{value:d,enumerable:!0}):T,d)),S=d=>y(r({},"__esModule",{value:!0}),d),C=(d,g,T)=>(m(d,typeof g!="symbol"?g+"":g,T),T),I=E({"../node_modules/timing-function/lib/UnitBezier.js"(d,g){g.exports=function(){function T(P,k,V,ne){this.set(P,k,V,ne)}return T.prototype.set=function(P,k,V,ne){this._cx=3*P,this._bx=3*(V-P)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*k,this._by=3*(ne-k)-this._cy,this._ay=1-this._cy-this._by},T.epsilon=1e-6,T.prototype._sampleCurveX=function(P){return((this._ax*P+this._bx)*P+this._cx)*P},T.prototype._sampleCurveY=function(P){return((this._ay*P+this._by)*P+this._cy)*P},T.prototype._sampleCurveDerivativeX=function(P){return(3*this._ax*P+2*this._bx)*P+this._cx},T.prototype._solveCurveX=function(P,k){var V,ne,ge,ve,be,Je;for(ge=void 0,ve=void 0,be=void 0,Je=void 0,V=void 0,ne=void 0,be=P,ne=0;ne<8;){if(Je=this._sampleCurveX(be)-P,Math.abs(Je)<k)return be;if(V=this._sampleCurveDerivativeX(be),Math.abs(V)<k)break;be=be-Je/V,ne++}if(ge=0,ve=1,be=P,be<ge)return ge;if(be>ve)return ve;for(;ge<ve;){if(Je=this._sampleCurveX(be),Math.abs(Je-P)<k)return be;P>Je?ge=be:ve=be,be=(ve-ge)*.5+ge}return be},T.prototype.solve=function(P,k){return this._sampleCurveY(this._solveCurveX(P,k))},T.prototype.solveSimple=function(P){return this._sampleCurveY(this._solveCurveX(P,1e-6))},T}()}}),B=E({"../node_modules/levenshtein-edit-distance/index.js"(d,g){var T,P;T=[],P=[];function k(V,ne,ge){var ve,be,Je,Ye,ut,Bt,Mt,qt;if(V===ne)return 0;if(ve=V.length,be=ne.length,ve===0)return be;if(be===0)return ve;for(ge&&(V=V.toLowerCase(),ne=ne.toLowerCase()),Mt=0;Mt<ve;)P[Mt]=V.charCodeAt(Mt),T[Mt]=++Mt;for(qt=0;qt<be;)for(Je=ne.charCodeAt(qt),Ye=ut=qt++,Mt=-1;++Mt<ve;)Bt=Je===P[Mt]?ut:ut+1,ut=T[Mt],T[Mt]=Ye=ut>Ye?Bt>Ye?Ye+1:Bt:Bt>ut?ut+1:Bt;return Ye}g.exports=k}}),O=E({"../node_modules/propose/propose.js"(d,g){var T=B();function P(){var k,V,ne,ge,ve,be=0,Je=arguments[0],Ye=arguments[1],ut=Ye.length,Bt=arguments[2];Bt&&(ge=Bt.threshold,ve=Bt.ignoreCase),ge===void 0&&(ge=0);for(var Mt=0;Mt<ut;++Mt)ve?V=T(Je,Ye[Mt],!0):V=T(Je,Ye[Mt]),V>Je.length?k=1-V/Ye[Mt].length:k=1-V/Je.length,k>be&&(be=k,ne=Ye[Mt]);return be>=ge?ne:null}g.exports=P}}),z=E({"../node_modules/fast-deep-equal/index.js"(d,g){g.exports=function T(P,k){if(P===k)return!0;if(P&&k&&typeof P=="object"&&typeof k=="object"){if(P.constructor!==k.constructor)return!1;var V,ne,ge;if(Array.isArray(P)){if(V=P.length,V!=k.length)return!1;for(ne=V;ne--!==0;)if(!T(P[ne],k[ne]))return!1;return!0}if(P.constructor===RegExp)return P.source===k.source&&P.flags===k.flags;if(P.valueOf!==Object.prototype.valueOf)return P.valueOf()===k.valueOf();if(P.toString!==Object.prototype.toString)return P.toString()===k.toString();if(ge=Object.keys(P),V=ge.length,V!==Object.keys(k).length)return!1;for(ne=V;ne--!==0;)if(!Object.prototype.hasOwnProperty.call(k,ge[ne]))return!1;for(ne=V;ne--!==0;){var ve=ge[ne];if(!T(P[ve],k[ve]))return!1}return!0}return P!==P&&k!==k}}}),L={};A(L,{createRafDriver:()=>cS,getProject:()=>kb,notify:()=>Sd,onChange:()=>LS,types:()=>fS,val:()=>zb}),n.exports=S(L);var N={};A(N,{createRafDriver:()=>cS,getProject:()=>kb,notify:()=>Sd,onChange:()=>LS,types:()=>fS,val:()=>zb});var W=Ur,ae=class{constructor(){C(this,"atom",new W.Atom({projects:{}}))}add(d,g){this.atom.setByPointer(T=>T.projects[d],g)}get(d){return this.atom.get().projects[d]}has(d){return!!this.get(d)}},te=new ae,ie=te,le=new WeakMap;function ce(d){return le.get(d)}function he(d,g){le.set(d,g)}var K=[],fe=Array.isArray,re=fe,se=typeof ya=="object"&&ya&&ya.Object===Object&&ya,oe=se,Le=typeof self=="object"&&self&&self.Object===Object&&self,Oe=oe||Le||Function("return this")(),De=Oe,Ue=De.Symbol,Xe=Ue,rt=Object.prototype,Gt=rt.hasOwnProperty,Dt=rt.toString,Ge=Xe?Xe.toStringTag:void 0;function $(d){var g=Gt.call(d,Ge),T=d[Ge];try{d[Ge]=void 0;var P=!0}catch{}var k=Dt.call(d);return P&&(g?d[Ge]=T:delete d[Ge]),k}var Ne=$,Be=Object.prototype,Ve=Be.toString;function He(d){return Ve.call(d)}var vt=He,st="[object Null]",ft="[object Undefined]",Ct=Xe?Xe.toStringTag:void 0;function jt(d){return d==null?d===void 0?ft:st:Ct&&Ct in Object(d)?Ne(d):vt(d)}var un=jt;function Z(d){return d!=null&&typeof d=="object"}var G=Z,_e="[object Symbol]";function je(d){return typeof d=="symbol"||G(d)&&un(d)==_e}var ke=je,Ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xt=/^\w*$/;function Qe(d,g){if(re(d))return!1;var T=typeof d;return T=="number"||T=="symbol"||T=="boolean"||d==null||ke(d)?!0:xt.test(d)||!Ke.test(d)||g!=null&&d in Object(g)}var Ee=Qe;function bt(d){var g=typeof d;return d!=null&&(g=="object"||g=="function")}var ct=bt,pt="[object AsyncFunction]",yt="[object Function]",mt="[object GeneratorFunction]",It="[object Proxy]";function Ut(d){if(!ct(d))return!1;var g=un(d);return g==yt||g==mt||g==pt||g==It}var de=Ut,Ae=De["__core-js_shared__"],Me=Ae,Ze=function(){var d=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function it(d){return!!Ze&&Ze in d}var $t=it,wn=Function.prototype,Nn=wn.toString;function ci(d){if(d!=null){try{return Nn.call(d)}catch{}try{return d+""}catch{}}return""}var sn=ci,Gr=/[\\^$.*+?()[\]{}|]/g,or=/^\[object .+?Constructor\]$/,Zo=Function.prototype,$o=Object.prototype,ws=Zo.toString,ts=$o.hasOwnProperty,ns=RegExp("^"+ws.call(ts).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ir(d){if(!ct(d)||$t(d))return!1;var g=de(d)?ns:or;return g.test(sn(d))}var zt=Ir;function Mo(d,g){return d==null?void 0:d[g]}var Fa=Mo;function U(d,g){var T=Fa(d,g);return zt(T)?T:void 0}var R=U,H=R(Object,"create"),Y=H;function X(){this.__data__=Y?Y(null):{},this.size=0}var Q=X;function ye(d){var g=this.has(d)&&delete this.__data__[d];return this.size-=g?1:0,g}var Se=ye,Ie="__lodash_hash_undefined__",Pe=Object.prototype,Fe=Pe.hasOwnProperty;function Ce(d){var g=this.__data__;if(Y){var T=g[d];return T===Ie?void 0:T}return Fe.call(g,d)?g[d]:void 0}var dt=Ce,et=Object.prototype,nt=et.hasOwnProperty;function St(d){var g=this.__data__;return Y?g[d]!==void 0:nt.call(g,d)}var Lt=St,Rt="__lodash_hash_undefined__";function lt(d,g){var T=this.__data__;return this.size+=this.has(d)?0:1,T[d]=Y&&g===void 0?Rt:g,this}var Ft=lt;function gt(d){var g=-1,T=d==null?0:d.length;for(this.clear();++g<T;){var P=d[g];this.set(P[0],P[1])}}gt.prototype.clear=Q,gt.prototype.delete=Se,gt.prototype.get=dt,gt.prototype.has=Lt,gt.prototype.set=Ft;var Vt=gt;function vn(){this.__data__=[],this.size=0}var kt=vn;function dn(d,g){return d===g||d!==d&&g!==g}var cn=dn;function Tn(d,g){for(var T=d.length;T--;)if(cn(d[T][0],g))return T;return-1}var Un=Tn,Wt=Array.prototype,Gn=Wt.splice;function mn(d){var g=this.__data__,T=Un(g,d);if(T<0)return!1;var P=g.length-1;return T==P?g.pop():Gn.call(g,T,1),--this.size,!0}var an=mn;function kn(d){var g=this.__data__,T=Un(g,d);return T<0?void 0:g[T][1]}var Zr=kn;function Br(d){return Un(this.__data__,d)>-1}var rs=Br;function ea(d,g){var T=this.__data__,P=Un(T,d);return P<0?(++this.size,T.push([d,g])):T[P][1]=g,this}var Ll=ea;function is(d){var g=-1,T=d==null?0:d.length;for(this.clear();++g<T;){var P=d[g];this.set(P[0],P[1])}}is.prototype.clear=kt,is.prototype.delete=an,is.prototype.get=Zr,is.prototype.has=rs,is.prototype.set=Ll;var Eo=is,yp=R(De,"Map"),Na=yp;function ec(){this.size=0,this.__data__={hash:new Vt,map:new(Na||Eo),string:new Vt}}var tc=ec;function Ua(d){var g=typeof d;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?d!=="__proto__":d===null}var _p=Ua;function nc(d,g){var T=d.__data__;return _p(g)?T[typeof g=="string"?"string":"hash"]:T.map}var ln=nc;function rc(d){var g=ln(this,d).delete(d);return this.size-=g?1:0,g}var Dl=rc;function ic(d){return ln(this,d).get(d)}var xp=ic;function Sp(d){return ln(this,d).has(d)}var pr=Sp;function sc(d,g){var T=ln(this,d),P=T.size;return T.set(d,g),this.size+=T.size==P?0:1,this}var Ap=sc;function Ks(d){var g=-1,T=d==null?0:d.length;for(this.clear();++g<T;){var P=d[g];this.set(P[0],P[1])}}Ks.prototype.clear=tc,Ks.prototype.delete=Dl,Ks.prototype.get=xp,Ks.prototype.has=pr,Ks.prototype.set=Ap;var Ol=Ks,Fl="Expected a function";function Si(d,g){if(typeof d!="function"||g!=null&&typeof g!="function")throw new TypeError(Fl);var T=function(){var P=arguments,k=g?g.apply(this,P):P[0],V=T.cache;if(V.has(k))return V.get(k);var ne=d.apply(this,P);return T.cache=V.set(k,ne)||V,ne};return T.cache=new(Si.Cache||Ol),T}Si.Cache=Ol;var Mp=Si,Ep=500;function ss(d){var g=Mp(d,function(P){return T.size===Ep&&T.clear(),P}),T=g.cache;return g}var Ts=ss,Nl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oc=/\\(\\)?/g,Df=Ts(function(d){var g=[];return d.charCodeAt(0)===46&&g.push(""),d.replace(Nl,function(T,P,k,V){g.push(k?V.replace(oc,"$1"):P||T)}),g}),wp=Df;function os(d,g){for(var T=-1,P=d==null?0:d.length,k=Array(P);++T<P;)k[T]=g(d[T],T,d);return k}var Tp=os,ka=1/0,Of=Xe?Xe.prototype:void 0,Ai=Of?Of.toString:void 0;function za(d){if(typeof d=="string")return d;if(re(d))return Tp(d,za)+"";if(ke(d))return Ai?Ai.call(d):"";var g=d+"";return g=="0"&&1/d==-ka?"-0":g}var Ha=za;function ta(d){return d==null?"":Ha(d)}var Ul=ta;function Ga(d,g){return re(d)?d:Ee(d,g)?[d]:wp(Ul(d))}var na=Ga,kl=1/0;function ac(d){if(typeof d=="string"||ke(d))return d;var g=d+"";return g=="0"&&1/d==-kl?"-0":g}var $r=ac;function Lr(d,g){g=na(g,d);for(var T=0,P=g.length;d!=null&&T<P;)d=d[$r(g[T++])];return T&&T==P?d:void 0}var fi=Lr;function as(d,g,T){var P=d==null?void 0:fi(d,g);return P===void 0?T:P}var Cs=as;function lc(d,g){return g.length===0?d:Cs(d,g)}var ei=class{constructor(){C(this,"_values",{})}get(d,g){if(this.has(d))return this._values[d];{const T=g();return this._values[d]=T,T}}has(d){return this._values.hasOwnProperty(d)}},zn=Ur,wo=function(){try{var d=R(Object,"defineProperty");return d({},"",{}),d}catch{}}(),zl=wo;function Hl(d,g,T){g=="__proto__"&&zl?zl(d,g,{configurable:!0,enumerable:!0,value:T,writable:!0}):d[g]=T}var Ys=Hl,ra=Object.prototype,uc=ra.hasOwnProperty;function Gl(d,g,T){var P=d[g];(!(uc.call(d,g)&&cn(P,T))||T===void 0&&!(g in d))&&Ys(d,g,T)}var Vl=Gl,Ff=9007199254740991,cc=/^(?:0|[1-9]\d*)$/;function fc(d,g){var T=typeof d;return g=g??Ff,!!g&&(T=="number"||T!="symbol"&&cc.test(d))&&d>-1&&d%1==0&&d<g}var qs=fc;function ia(d,g,T,P){if(!ct(d))return d;g=na(g,d);for(var k=-1,V=g.length,ne=V-1,ge=d;ge!=null&&++k<V;){var ve=$r(g[k]),be=T;if(ve==="__proto__"||ve==="constructor"||ve==="prototype")return d;if(k!=ne){var Je=ge[ve];be=P?P(Je,ve,ge):void 0,be===void 0&&(be=ct(Je)?Je:qs(g[k+1])?[]:{})}Vl(ge,ve,be),ge=ge[ve]}return d}var Va=ia;function Wa(d,g,T){return d==null?d:Va(d,g,T)}var Vr=Wa,bn=new WeakMap;function To(d){return zi(d)}function zi(d){if(bn.has(d))return bn.get(d);const g=d.type==="compound"?Qs(d):d.type==="enum"?ls(d):d.default;return bn.set(d,g),g}function ls(d){const g={$case:d.defaultCase};for(const[T,P]of Object.entries(d.cases))g[T]=zi(P);return g}function Qs(d){const g={};for(const[T,P]of Object.entries(d.props))g[T]=zi(P);return g}var ti=Ur,dc=M(I());function hc(d,g,T){return(0,ti.prism)(()=>{const P=(0,ti.val)(g);return ti.prism.memo("driver",()=>P?P.type==="BasicKeyframedTrack"?di(d,P,T):(d.logger.error("Track type not yet supported."),(0,ti.prism)(()=>{})):(0,ti.prism)(()=>{}),[P]).getValue()})}function di(d,g,T){return(0,ti.prism)(()=>{let P=ti.prism.ref("state",{started:!1}),k=P.current;const V=T.getValue();return(!k.started||V<k.validFrom||k.validTo<=V)&&(P.current=k=Hn(d,T,g)),k.der.getValue()})}var ni=(0,ti.prism)(()=>{});function Hn(d,g,T){const P=g.getValue();if(T.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:ni};let k=0;for(;;){const V=T.keyframes[k];if(!V)return qn.error;const ne=k===T.keyframes.length-1;if(P<V.position)return k===0?qn.beforeFirstKeyframe(V):qn.error;if(V.position===P)return ne?qn.lastKeyframe(V):qn.between(V,T.keyframes[k+1],g);if(k===T.keyframes.length-1)return qn.lastKeyframe(V);{const ge=k+1;if(T.keyframes[ge].position<=P){k=ge;continue}else return qn.between(V,T.keyframes[k+1],g)}}}var qn={beforeFirstKeyframe(d){return{started:!0,validFrom:-1/0,validTo:d.position,der:(0,ti.prism)(()=>({left:d.value,progression:0}))}},lastKeyframe(d){return{started:!0,validFrom:d.position,validTo:1/0,der:(0,ti.prism)(()=>({left:d.value,progression:0}))}},between(d,g,T){if(!d.connectedRight)return{started:!0,validFrom:d.position,validTo:g.position,der:(0,ti.prism)(()=>({left:d.value,progression:0}))};const P=V=>(V-d.position)/(g.position-d.position);if(!d.type||d.type==="bezier"){const V=new dc.default(d.handles[2],d.handles[3],g.handles[0],g.handles[1]),ne=(0,ti.prism)(()=>{const ge=P(T.getValue()),ve=V.solveSimple(ge);return{left:d.value,right:g.value,progression:ve}});return{started:!0,validFrom:d.position,validTo:g.position,der:ne}}const k=(0,ti.prism)(()=>{const V=P(T.getValue()),ne=Math.floor(V);return{left:d.value,right:g.value,progression:ne}});return{started:!0,validFrom:d.position,validTo:g.position,der:k}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:ni}};function Wr(d,g,T){const k=T.get(d);if(k&&k.override===g)return k.merged;const V=v({},d);for(const ne of Object.keys(g)){const ge=g[ne],ve=d[ne];V[ne]=typeof ge=="object"&&typeof ve=="object"?Wr(ve,ge,T):ge===void 0?ve:ge}return T.set(d,{override:g,merged:V}),V}function sa(d,g){let T=d;for(const P of g)T=T[P];return T}var oa=Ur,Wl=(d,g)=>{const T=oa.prism.memo(d,()=>new oa.Atom(g),[]);return T.set(g),T},An=Ur,jl=Ur,ja=/\s/;function Co(d){for(var g=d.length;g--&&ja.test(d.charAt(g)););return g}var Xl=Co,aa=/^\s+/;function Jl(d){return d&&d.slice(0,Xl(d)+1).replace(aa,"")}var Xa=Jl,Kl=0/0,la=/^[-+]0x[0-9a-f]+$/i,Nf=/^0b[01]+$/i,ua=/^0o[0-7]+$/i,Mi=parseInt;function Ja(d){if(typeof d=="number")return d;if(ke(d))return Kl;if(ct(d)){var g=typeof d.valueOf=="function"?d.valueOf():d;d=ct(g)?g+"":g}if(typeof d!="string")return d===0?d:+d;d=Xa(d);var T=Nf.test(d);return T||ua.test(d)?Mi(d.slice(2),T?2:8):la.test(d)?Kl:+d}var F=Ja,j=1/0,ue=17976931348623157e292;function we(d){if(!d)return d===0?d:0;if(d=F(d),d===j||d===-j){var g=d<0?-1:1;return g*ue}return d===d?d:0}var Nt=we;function hn(d){var g=Nt(d),T=g%1;return g===g?T?g-T:g:0}var en=hn;function hi(d){return d}var Yl=hi,Zs=R(De,"WeakMap"),$s=Zs,Hi=Object.create,ql=function(){function d(){}return function(g){if(!ct(g))return{};if(Hi)return Hi(g);d.prototype=g;var T=new d;return d.prototype=void 0,T}}(),nr=ql;function ri(d,g){var T=-1,P=d.length;for(g||(g=Array(P));++T<P;)g[T]=d[T];return g}var Dr=ri;function Uf(d,g){for(var T=-1,P=d==null?0:d.length;++T<P&&g(d[T],T,d)!==!1;);return d}var pc=Uf;function mc(d,g,T,P){var k=!T;T||(T={});for(var V=-1,ne=g.length;++V<ne;){var ge=g[V],ve=P?P(T[ge],d[ge],ge,T,d):void 0;ve===void 0&&(ve=d[ge]),k?Ys(T,ge,ve):Vl(T,ge,ve)}return T}var kf=mc,ii=9007199254740991;function Cp(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=ii}var gc=Cp;function bp(d){return d!=null&&gc(d.length)&&!de(d)}var eo=bp,to=Object.prototype;function Ka(d){var g=d&&d.constructor,T=typeof g=="function"&&g.prototype||to;return d===T}var Ql=Ka;function zf(d,g){for(var T=-1,P=Array(d);++T<d;)P[T]=g(T);return P}var b0=zf,R0="[object Arguments]";function P0(d){return G(d)&&un(d)==R0}var Rp=P0,Pp=Object.prototype,I0=Pp.hasOwnProperty,Ip=Pp.propertyIsEnumerable,vc=Rp(function(){return arguments}())?Rp:function(d){return G(d)&&I0.call(d,"callee")&&!Ip.call(d,"callee")},Bp=vc;function Hf(){return!1}var Gf=Hf,Vf=e&&!e.nodeType&&e,Zl=Vf&&!0&&n&&!n.nodeType&&n,B0=Zl&&Zl.exports===Vf,Lp=B0?De.Buffer:void 0,L0=Lp?Lp.isBuffer:void 0,D0=L0||Gf,$l=D0,O0="[object Arguments]",F0="[object Array]",Dx="[object Boolean]",N0="[object Date]",Ox="[object Error]",Fx="[object Function]",U0="[object Map]",k0="[object Number]",z0="[object Object]",H0="[object RegExp]",Wf="[object Set]",Nx="[object String]",Ux="[object WeakMap]",kx="[object ArrayBuffer]",Dp="[object DataView]",Op="[object Float32Array]",zx="[object Float64Array]",G0="[object Int8Array]",V0="[object Int16Array]",W0="[object Int32Array]",j0="[object Uint8Array]",X0="[object Uint8ClampedArray]",no="[object Uint16Array]",J0="[object Uint32Array]",Rn={};Rn[Op]=Rn[zx]=Rn[G0]=Rn[V0]=Rn[W0]=Rn[j0]=Rn[X0]=Rn[no]=Rn[J0]=!0,Rn[O0]=Rn[F0]=Rn[kx]=Rn[Dx]=Rn[Dp]=Rn[N0]=Rn[Ox]=Rn[Fx]=Rn[U0]=Rn[k0]=Rn[z0]=Rn[H0]=Rn[Wf]=Rn[Nx]=Rn[Ux]=!1;function yc(d){return G(d)&&gc(d.length)&&!!Rn[un(d)]}var jf=yc;function Xf(d){return function(g){return d(g)}}var Jf=Xf,eu=e&&!e.nodeType&&e,mr=eu&&!0&&n&&!n.nodeType&&n,Hx=mr&&mr.exports===eu,Fp=Hx&&oe.process,Gi=function(){try{var d=mr&&mr.require&&mr.require("util").types;return d||Fp&&Fp.binding&&Fp.binding("util")}catch{}}(),gr=Gi,Np=gr&&gr.isTypedArray,K0=Np?Jf(Np):jf,Up=K0,Y0=Object.prototype,q0=Y0.hasOwnProperty;function kp(d,g){var T=re(d),P=!T&&Bp(d),k=!T&&!P&&$l(d),V=!T&&!P&&!k&&Up(d),ne=T||P||k||V,ge=ne?b0(d.length,String):[],ve=ge.length;for(var be in d)(g||q0.call(d,be))&&!(ne&&(be=="length"||k&&(be=="offset"||be=="parent")||V&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||qs(be,ve)))&&ge.push(be);return ge}var zp=kp;function Hp(d,g){return function(T){return d(g(T))}}var Gp=Hp,Q0=Gp(Object.keys,Object),Kf=Q0,Yf=Object.prototype,Z0=Yf.hasOwnProperty;function Vp(d){if(!Ql(d))return Kf(d);var g=[];for(var T in Object(d))Z0.call(d,T)&&T!="constructor"&&g.push(T);return g}var $0=Vp;function ev(d){return eo(d)?zp(d):$0(d)}var ca=ev;function tv(d){var g=[];if(d!=null)for(var T in Object(d))g.push(T);return g}var Wp=tv,nv=Object.prototype,bo=nv.hasOwnProperty;function Gx(d){if(!ct(d))return Wp(d);var g=Ql(d),T=[];for(var P in d)P=="constructor"&&(g||!bo.call(d,P))||T.push(P);return T}var Vx=Gx;function qf(d){return eo(d)?zp(d,!0):Vx(d)}var Ro=qf;function Wx(d,g){for(var T=-1,P=g.length,k=d.length;++T<P;)d[k+T]=g[T];return d}var at=Wx,Qf=Gp(Object.getPrototypeOf,Object),_c=Qf,rv="[object Object]",jx=Function.prototype,Ya=Object.prototype,tu=jx.toString,jp=Ya.hasOwnProperty,iv=tu.call(Object);function sv(d){if(!G(d)||un(d)!=rv)return!1;var g=_c(d);if(g===null)return!0;var T=jp.call(g,"constructor")&&g.constructor;return typeof T=="function"&&T instanceof T&&tu.call(T)==iv}var ov=sv;function av(d,g,T){var P=-1,k=d.length;g<0&&(g=-g>k?0:k+g),T=T>k?k:T,T<0&&(T+=k),k=g>T?0:T-g>>>0,g>>>=0;for(var V=Array(k);++P<k;)V[P]=d[P+g];return V}var Xp=av;function lv(d,g,T){var P=d.length;return T=T===void 0?P:T,!g&&T>=P?d:Xp(d,g,T)}var Jp=lv,Kp="\\ud800-\\udfff",uv="\\u0300-\\u036f",Yp="\\ufe20-\\ufe2f",Zf="\\u20d0-\\u20ff",Xx=uv+Yp+Zf,Jx="\\ufe0e\\ufe0f",cv="\\u200d",fv=RegExp("["+cv+Kp+Xx+Jx+"]");function dv(d){return fv.test(d)}var $f=dv;function ed(d){return d.split("")}var td=ed,xc="\\ud800-\\udfff",nd="\\u0300-\\u036f",rd="\\ufe20-\\ufe2f",Sc="\\u20d0-\\u20ff",qp=nd+rd+Sc,Qp="\\ufe0e\\ufe0f",Zp="["+xc+"]",id="["+qp+"]",Ac="\\ud83c[\\udffb-\\udfff]",Kx="(?:"+id+"|"+Ac+")",Mc="[^"+xc+"]",sd="(?:\\ud83c[\\udde6-\\uddff]){2}",rr="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="\\u200d",ar=Kx+"?",lr="["+Qp+"]?",jr="(?:"+tn+"(?:"+[Mc,sd,rr].join("|")+")"+lr+ar+")*",Vi=lr+ar+jr,nu="(?:"+[Mc+id+"?",id,sd,rr,Zp].join("|")+")",Er=RegExp(Ac+"(?="+Ac+")|"+nu+Vi,"g");function Ec(d){return d.match(Er)||[]}var ru=Ec;function od(d){return $f(d)?ru(d):td(d)}var $p=od;function wc(d,g,T){return d===d&&(T!==void 0&&(d=d<=T?d:T),g!==void 0&&(d=d>=g?d:g)),d}var Ei=wc;function em(d,g,T){return T===void 0&&(T=g,g=void 0),T!==void 0&&(T=F(T),T=T===T?T:0),g!==void 0&&(g=F(g),g=g===g?g:0),Ei(F(d),g,T)}var ad=em;function iu(){this.__data__=new Eo,this.size=0}var ld=iu;function tm(d){var g=this.__data__,T=g.delete(d);return this.size=g.size,T}var fa=tm;function ud(d){return this.__data__.get(d)}var da=ud;function cd(d){return this.__data__.has(d)}var Tc=cd,nm=200;function fd(d,g){var T=this.__data__;if(T instanceof Eo){var P=T.__data__;if(!Na||P.length<nm-1)return P.push([d,g]),this.size=++T.size,this;T=this.__data__=new Ol(P)}return T.set(d,g),this.size=T.size,this}var dd=fd;function vr(d){var g=this.__data__=new Eo(d);this.size=g.size}vr.prototype.clear=ld,vr.prototype.delete=fa,vr.prototype.get=da,vr.prototype.has=Tc,vr.prototype.set=dd;var us=vr;function cs(d,g){return d&&kf(g,ca(g),d)}var hd=cs;function wi(d,g){return d&&kf(g,Ro(g),d)}var hv=wi,pd=e&&!e.nodeType&&e,md=pd&&!0&&n&&!n.nodeType&&n,Yx=md&&md.exports===pd,Po=Yx?De.Buffer:void 0,rm=Po?Po.allocUnsafe:void 0;function pv(d,g){if(g)return d.slice();var T=d.length,P=rm?rm(T):new d.constructor(T);return d.copy(P),P}var im=pv;function qa(d,g){for(var T=-1,P=d==null?0:d.length,k=0,V=[];++T<P;){var ne=d[T];g(ne,T,d)&&(V[k++]=ne)}return V}var mv=qa;function gv(){return[]}var gd=gv,vd=Object.prototype,qx=vd.propertyIsEnumerable,vv=Object.getOwnPropertySymbols,yv=vv?function(d){return d==null?[]:(d=Object(d),mv(vv(d),function(g){return qx.call(d,g)}))}:gd,yd=yv;function Qa(d,g){return kf(d,yd(d),g)}var Qx=Qa,Za=Object.getOwnPropertySymbols,_v=Za?function(d){for(var g=[];d;)at(g,yd(d)),d=_c(d);return g}:gd,pi=_v;function Zx(d,g){return kf(d,pi(d),g)}var xv=Zx;function $x(d,g,T){var P=g(d);return re(d)?P:at(P,T(d))}var Sv=$x;function Av(d){return Sv(d,ca,yd)}var _d=Av;function eS(d){return Sv(d,Ro,pi)}var fs=eS,sm=R(De,"DataView"),om=sm,ha=R(De,"Promise"),su=ha,$a=R(De,"Set"),ou=$a,xd="[object Map]",am="[object Object]",Mv="[object Promise]",lm="[object Set]",um="[object WeakMap]",cm="[object DataView]",Ev=sn(om),fm=sn(Na),tS=sn(su),nS=sn(ou),u=sn($s),c=un;(om&&c(new om(new ArrayBuffer(1)))!=cm||Na&&c(new Na)!=xd||su&&c(su.resolve())!=Mv||ou&&c(new ou)!=lm||$s&&c(new $s)!=um)&&(c=function(d){var g=un(d),T=g==am?d.constructor:void 0,P=T?sn(T):"";if(P)switch(P){case Ev:return cm;case fm:return xd;case tS:return Mv;case nS:return lm;case u:return um}return g});var _=c,w=Object.prototype,b=w.hasOwnProperty;function D(d){var g=d.length,T=new d.constructor(g);return g&&typeof d[0]=="string"&&b.call(d,"index")&&(T.index=d.index,T.input=d.input),T}var q=D,pe=De.Uint8Array,Re=pe;function $e(d){var g=new d.constructor(d.byteLength);return new Re(g).set(new Re(d)),g}var _t=$e;function Xt(d,g){var T=g?_t(d.buffer):d.buffer;return new d.constructor(T,d.byteOffset,d.byteLength)}var Ot=Xt,Ln=/\w*$/;function Pt(d){var g=new d.constructor(d.source,Ln.exec(d));return g.lastIndex=d.lastIndex,g}var si=Pt,Wi=Xe?Xe.prototype:void 0,xe=Wi?Wi.valueOf:void 0;function me(d){return xe?Object(xe.call(d)):{}}var Te=me;function ht(d,g){var T=g?_t(d.buffer):d.buffer;return new d.constructor(T,d.byteOffset,d.length)}var Tt=ht,Yt="[object Boolean]",Jt="[object Date]",yn="[object Map]",Or="[object Number]",_n="[object RegExp]",pa="[object Set]",rS="[object String]",_N="[object Symbol]",xN="[object ArrayBuffer]",SN="[object DataView]",AN="[object Float32Array]",MN="[object Float64Array]",EN="[object Int8Array]",wN="[object Int16Array]",TN="[object Int32Array]",CN="[object Uint8Array]",bN="[object Uint8ClampedArray]",RN="[object Uint16Array]",PN="[object Uint32Array]";function IN(d,g,T){var P=d.constructor;switch(g){case xN:return _t(d);case Yt:case Jt:return new P(+d);case SN:return Ot(d,T);case AN:case MN:case EN:case wN:case TN:case CN:case bN:case RN:case PN:return Tt(d,T);case yn:return new P;case Or:case rS:return new P(d);case _n:return si(d);case pa:return new P;case _N:return Te(d)}}var BN=IN;function LN(d){return typeof d.constructor=="function"&&!Ql(d)?nr(_c(d)):{}}var DN=LN,ON="[object Map]";function FN(d){return G(d)&&_(d)==ON}var NN=FN,DC=gr&&gr.isMap,UN=DC?Jf(DC):NN,kN=UN,zN="[object Set]";function HN(d){return G(d)&&_(d)==zN}var GN=HN,OC=gr&&gr.isSet,VN=OC?Jf(OC):GN,WN=VN,jN=1,XN=2,JN=4,FC="[object Arguments]",KN="[object Array]",YN="[object Boolean]",qN="[object Date]",QN="[object Error]",NC="[object Function]",ZN="[object GeneratorFunction]",$N="[object Map]",eU="[object Number]",UC="[object Object]",tU="[object RegExp]",nU="[object Set]",rU="[object String]",iU="[object Symbol]",sU="[object WeakMap]",oU="[object ArrayBuffer]",aU="[object DataView]",lU="[object Float32Array]",uU="[object Float64Array]",cU="[object Int8Array]",fU="[object Int16Array]",dU="[object Int32Array]",hU="[object Uint8Array]",pU="[object Uint8ClampedArray]",mU="[object Uint16Array]",gU="[object Uint32Array]",jn={};jn[FC]=jn[KN]=jn[oU]=jn[aU]=jn[YN]=jn[qN]=jn[lU]=jn[uU]=jn[cU]=jn[fU]=jn[dU]=jn[$N]=jn[eU]=jn[UC]=jn[tU]=jn[nU]=jn[rU]=jn[iU]=jn[hU]=jn[pU]=jn[mU]=jn[gU]=!0,jn[QN]=jn[NC]=jn[sU]=!1;function wv(d,g,T,P,k,V){var ne,ge=g&jN,ve=g&XN,be=g&JN;if(T&&(ne=k?T(d,P,k,V):T(d)),ne!==void 0)return ne;if(!ct(d))return d;var Je=re(d);if(Je){if(ne=q(d),!ge)return Dr(d,ne)}else{var Ye=_(d),ut=Ye==NC||Ye==ZN;if($l(d))return im(d,ge);if(Ye==UC||Ye==FC||ut&&!k){if(ne=ve||ut?{}:DN(d),!ge)return ve?xv(d,hv(ne,d)):Qx(d,hd(ne,d))}else{if(!jn[Ye])return k?d:{};ne=BN(d,Ye,ge)}}V||(V=new us);var Bt=V.get(d);if(Bt)return Bt;V.set(d,ne),WN(d)?d.forEach(function(fn){ne.add(wv(fn,g,T,fn,d,V))}):kN(d)&&d.forEach(function(fn,Kt){ne.set(Kt,wv(fn,g,T,Kt,d,V))});var Mt=be?ve?fs:_d:ve?Ro:ca,qt=Je?void 0:Mt(d);return pc(qt||d,function(fn,Kt){qt&&(Kt=fn,fn=d[Kt]),Vl(ne,Kt,wv(fn,g,T,Kt,d,V))}),ne}var vU=wv,yU=1,_U=4;function xU(d){return vU(d,yU|_U)}var SU=xU,AU="__lodash_hash_undefined__";function MU(d){return this.__data__.set(d,AU),this}var EU=MU;function wU(d){return this.__data__.has(d)}var TU=wU;function Tv(d){var g=-1,T=d==null?0:d.length;for(this.__data__=new Ol;++g<T;)this.add(d[g])}Tv.prototype.add=Tv.prototype.push=EU,Tv.prototype.has=TU;var CU=Tv;function bU(d,g){for(var T=-1,P=d==null?0:d.length;++T<P;)if(g(d[T],T,d))return!0;return!1}var RU=bU;function PU(d,g){return d.has(g)}var IU=PU,BU=1,LU=2;function DU(d,g,T,P,k,V){var ne=T&BU,ge=d.length,ve=g.length;if(ge!=ve&&!(ne&&ve>ge))return!1;var be=V.get(d),Je=V.get(g);if(be&&Je)return be==g&&Je==d;var Ye=-1,ut=!0,Bt=T&LU?new CU:void 0;for(V.set(d,g),V.set(g,d);++Ye<ge;){var Mt=d[Ye],qt=g[Ye];if(P)var fn=ne?P(qt,Mt,Ye,g,d,V):P(Mt,qt,Ye,d,g,V);if(fn!==void 0){if(fn)continue;ut=!1;break}if(Bt){if(!RU(g,function(Kt,Pn){if(!IU(Bt,Pn)&&(Mt===Kt||k(Mt,Kt,T,P,V)))return Bt.push(Pn)})){ut=!1;break}}else if(!(Mt===qt||k(Mt,qt,T,P,V))){ut=!1;break}}return V.delete(d),V.delete(g),ut}var kC=DU;function OU(d){var g=-1,T=Array(d.size);return d.forEach(function(P,k){T[++g]=[k,P]}),T}var FU=OU;function NU(d){var g=-1,T=Array(d.size);return d.forEach(function(P){T[++g]=P}),T}var UU=NU,kU=1,zU=2,HU="[object Boolean]",GU="[object Date]",VU="[object Error]",WU="[object Map]",jU="[object Number]",XU="[object RegExp]",JU="[object Set]",KU="[object String]",YU="[object Symbol]",qU="[object ArrayBuffer]",QU="[object DataView]",zC=Xe?Xe.prototype:void 0,iS=zC?zC.valueOf:void 0;function ZU(d,g,T,P,k,V,ne){switch(T){case QU:if(d.byteLength!=g.byteLength||d.byteOffset!=g.byteOffset)return!1;d=d.buffer,g=g.buffer;case qU:return!(d.byteLength!=g.byteLength||!V(new Re(d),new Re(g)));case HU:case GU:case jU:return cn(+d,+g);case VU:return d.name==g.name&&d.message==g.message;case XU:case KU:return d==g+"";case WU:var ge=FU;case JU:var ve=P&kU;if(ge||(ge=UU),d.size!=g.size&&!ve)return!1;var be=ne.get(d);if(be)return be==g;P|=zU,ne.set(d,g);var Je=kC(ge(d),ge(g),P,k,V,ne);return ne.delete(d),Je;case YU:if(iS)return iS.call(d)==iS.call(g)}return!1}var $U=ZU,ek=1,tk=Object.prototype,nk=tk.hasOwnProperty;function rk(d,g,T,P,k,V){var ne=T&ek,ge=_d(d),ve=ge.length,be=_d(g),Je=be.length;if(ve!=Je&&!ne)return!1;for(var Ye=ve;Ye--;){var ut=ge[Ye];if(!(ne?ut in g:nk.call(g,ut)))return!1}var Bt=V.get(d),Mt=V.get(g);if(Bt&&Mt)return Bt==g&&Mt==d;var qt=!0;V.set(d,g),V.set(g,d);for(var fn=ne;++Ye<ve;){ut=ge[Ye];var Kt=d[ut],Pn=g[ut];if(P)var Ti=ne?P(Pn,Kt,ut,g,d,V):P(Kt,Pn,ut,d,g,V);if(!(Ti===void 0?Kt===Pn||k(Kt,Pn,T,P,V):Ti)){qt=!1;break}fn||(fn=ut=="constructor")}if(qt&&!fn){var hs=d.constructor,Ci=g.constructor;hs!=Ci&&"constructor"in d&&"constructor"in g&&!(typeof hs=="function"&&hs instanceof hs&&typeof Ci=="function"&&Ci instanceof Ci)&&(qt=!1)}return V.delete(d),V.delete(g),qt}var ik=rk,sk=1,HC="[object Arguments]",GC="[object Array]",Cv="[object Object]",ok=Object.prototype,VC=ok.hasOwnProperty;function ak(d,g,T,P,k,V){var ne=re(d),ge=re(g),ve=ne?GC:_(d),be=ge?GC:_(g);ve=ve==HC?Cv:ve,be=be==HC?Cv:be;var Je=ve==Cv,Ye=be==Cv,ut=ve==be;if(ut&&$l(d)){if(!$l(g))return!1;ne=!0,Je=!1}if(ut&&!Je)return V||(V=new us),ne||Up(d)?kC(d,g,T,P,k,V):$U(d,g,ve,T,P,k,V);if(!(T&sk)){var Bt=Je&&VC.call(d,"__wrapped__"),Mt=Ye&&VC.call(g,"__wrapped__");if(Bt||Mt){var qt=Bt?d.value():d,fn=Mt?g.value():g;return V||(V=new us),k(qt,fn,T,P,V)}}return ut?(V||(V=new us),ik(d,g,T,P,k,V)):!1}var lk=ak;function WC(d,g,T,P,k){return d===g?!0:d==null||g==null||!G(d)&&!G(g)?d!==d&&g!==g:lk(d,g,T,P,WC,k)}var jC=WC,uk=1,ck=2;function fk(d,g,T,P){var k=T.length,V=k,ne=!P;if(d==null)return!V;for(d=Object(d);k--;){var ge=T[k];if(ne&&ge[2]?ge[1]!==d[ge[0]]:!(ge[0]in d))return!1}for(;++k<V;){ge=T[k];var ve=ge[0],be=d[ve],Je=ge[1];if(ne&&ge[2]){if(be===void 0&&!(ve in d))return!1}else{var Ye=new us;if(P)var ut=P(be,Je,ve,d,g,Ye);if(!(ut===void 0?jC(Je,be,uk|ck,P,Ye):ut))return!1}}return!0}var dk=fk;function hk(d){return d===d&&!ct(d)}var XC=hk;function pk(d){for(var g=ca(d),T=g.length;T--;){var P=g[T],k=d[P];g[T]=[P,k,XC(k)]}return g}var mk=pk;function gk(d,g){return function(T){return T==null?!1:T[d]===g&&(g!==void 0||d in Object(T))}}var JC=gk;function vk(d){var g=mk(d);return g.length==1&&g[0][2]?JC(g[0][0],g[0][1]):function(T){return T===d||dk(T,d,g)}}var yk=vk;function _k(d,g){return d!=null&&g in Object(d)}var xk=_k;function Sk(d,g,T){g=na(g,d);for(var P=-1,k=g.length,V=!1;++P<k;){var ne=$r(g[P]);if(!(V=d!=null&&T(d,ne)))break;d=d[ne]}return V||++P!=k?V:(k=d==null?0:d.length,!!k&&gc(k)&&qs(ne,k)&&(re(d)||Bp(d)))}var Ak=Sk;function Mk(d,g){return d!=null&&Ak(d,g,xk)}var Ek=Mk,wk=1,Tk=2;function Ck(d,g){return Ee(d)&&XC(g)?JC($r(d),g):function(T){var P=Cs(T,d);return P===void 0&&P===g?Ek(T,d):jC(g,P,wk|Tk)}}var bk=Ck;function Rk(d){return function(g){return g==null?void 0:g[d]}}var KC=Rk;function Pk(d){return function(g){return fi(g,d)}}var Ik=Pk;function Bk(d){return Ee(d)?KC($r(d)):Ik(d)}var Lk=Bk;function Dk(d){return typeof d=="function"?d:d==null?Yl:typeof d=="object"?re(d)?bk(d[0],d[1]):yk(d):Lk(d)}var Ok=Dk;function Fk(d){return function(g,T,P){for(var k=-1,V=Object(g),ne=P(g),ge=ne.length;ge--;){var ve=ne[d?ge:++k];if(T(V[ve],ve,V)===!1)break}return g}}var Nk=Fk,Uk=Nk(),kk=Uk;function zk(d,g){return d&&kk(d,g,ca)}var Hk=zk,Gk=function(){return De.Date.now()},sS=Gk,Vk="Expected a function",Wk=Math.max,jk=Math.min;function Xk(d,g,T){var P,k,V,ne,ge,ve,be=0,Je=!1,Ye=!1,ut=!0;if(typeof d!="function")throw new TypeError(Vk);g=F(g)||0,ct(T)&&(Je=!!T.leading,Ye="maxWait"in T,V=Ye?Wk(F(T.maxWait)||0,g):V,ut="trailing"in T?!!T.trailing:ut);function Bt(Vn){var bi=P,Is=k;return P=k=void 0,be=Vn,ne=d.apply(Is,bi),ne}function Mt(Vn){return be=Vn,ge=setTimeout(Kt,g),Je?Bt(Vn):ne}function qt(Vn){var bi=Vn-ve,Is=Vn-be,ma=g-bi;return Ye?jk(ma,V-Is):ma}function fn(Vn){var bi=Vn-ve,Is=Vn-be;return ve===void 0||bi>=g||bi<0||Ye&&Is>=V}function Kt(){var Vn=sS();if(fn(Vn))return Pn(Vn);ge=setTimeout(Kt,qt(Vn))}function Pn(Vn){return ge=void 0,ut&&P?Bt(Vn):(P=k=void 0,ne)}function Ti(){ge!==void 0&&clearTimeout(ge),be=0,P=ve=k=ge=void 0}function hs(){return ge===void 0?ne:Pn(sS())}function Ci(){var Vn=sS(),bi=fn(Vn);if(P=arguments,k=this,ve=Vn,bi){if(ge===void 0)return Mt(ve);if(Ye)return clearTimeout(ge),ge=setTimeout(Kt,g),Bt(ve)}return ge===void 0&&(ge=setTimeout(Kt,g)),ne}return Ci.cancel=Ti,Ci.flush=hs,Ci}var Jk=Xk;function Kk(d){var g=d==null?0:d.length;return g?d[g-1]:void 0}var Yk=Kk;function qk(d,g){return g.length<2?d:fi(d,Xp(g,0,-1))}var Qk=qk;function Zk(d){return typeof d=="number"&&d==en(d)}var $k=Zk;function e4(d,g){var T={};return g=Ok(g),Hk(d,function(P,k,V){Ys(T,k,g(P,k,V))}),T}var t4=e4;function n4(d,g){return g=na(g,d),d=Qk(d,g),d==null||delete d[$r(Yk(g))]}var r4=n4,i4=9007199254740991,s4=Math.floor;function o4(d,g){var T="";if(!d||g<1||g>i4)return T;do g%2&&(T+=d),g=s4(g/2),g&&(d+=d);while(g);return T}var YC=o4,a4=KC("length"),l4=a4,qC="\\ud800-\\udfff",u4="\\u0300-\\u036f",c4="\\ufe20-\\ufe2f",f4="\\u20d0-\\u20ff",d4=u4+c4+f4,h4="\\ufe0e\\ufe0f",p4="["+qC+"]",oS="["+d4+"]",aS="\\ud83c[\\udffb-\\udfff]",m4="(?:"+oS+"|"+aS+")",QC="[^"+qC+"]",ZC="(?:\\ud83c[\\udde6-\\uddff]){2}",$C="[\\ud800-\\udbff][\\udc00-\\udfff]",g4="\\u200d",eb=m4+"?",tb="["+h4+"]?",v4="(?:"+g4+"(?:"+[QC,ZC,$C].join("|")+")"+tb+eb+")*",y4=tb+eb+v4,_4="(?:"+[QC+oS+"?",oS,ZC,$C,p4].join("|")+")",nb=RegExp(aS+"(?="+aS+")|"+_4+y4,"g");function x4(d){for(var g=nb.lastIndex=0;nb.test(d);)++g;return g}var S4=x4;function A4(d){return $f(d)?S4(d):l4(d)}var rb=A4,M4=Math.ceil;function E4(d,g){g=g===void 0?" ":Ha(g);var T=g.length;if(T<2)return T?YC(g,d):g;var P=YC(g,M4(d/rb(g)));return $f(g)?Jp($p(P),0,d).join(""):P.slice(0,d)}var w4=E4;function T4(d,g,T){d=Ul(d),g=en(g);var P=g?rb(d):0;return g&&P<g?w4(g-P,T)+d:d}var dm=T4;function C4(d,g){return d==null?!0:r4(d,g)}var ib=C4,b4=5*1e3,R4=class{constructor(d){C(this,"_cache",new ei),C(this,"_keepHotUntapDebounce"),he(this,d)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return ce(this).propsP}get sheet(){return ce(this).sheet.publicApi}get project(){return ce(this).sheet.project.publicApi}get address(){return v({},ce(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const d=ce(this);return(0,jl.prism)(()=>(0,jl.val)(d.getValues().getValue()))})}onValuesChange(d,g){return LS(this._valuesPrism(),d,g)}get value(){const d=this._valuesPrism();{if(!d.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const g=d.keepHot();this._keepHotUntapDebounce=Jk(()=>{g(),this._keepHotUntapDebounce=void 0},b4)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return d.getValue()}set initialValue(d){ce(this).setInitialValue(d)}};function P4(d){const g=new WeakMap;return T=>(g.has(T)||g.set(T,d(T)),g.get(T))}function bv(d){return d.type==="compound"||d.type==="enum"}function lS(d,g){if(!d)return;const[T,...P]=g;if(T===void 0)return d;if(!bv(d))return;const k=d.type==="enum"?d.cases[T]:d.props[T];return lS(k,P)}function I4(d){return!bv(d)}var B4=class{constructor(d,g,T){this.sheet=d,this.template=g,this.nativeObject=T,C(this,"$$isPointerToPrismProvider",!0),C(this,"address"),C(this,"publicApi"),C(this,"_initialValue",new An.Atom({})),C(this,"_cache",new ei),C(this,"_logger"),C(this,"_internalUtilCtx"),this._logger=d._logger.named("SheetObject",g.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=x(v({},g.address),{sheetInstanceId:d.address.sheetInstanceId}),this.publicApi=new R4(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,An.prism)(()=>{const d=(0,An.val)(this.template.getDefaultValues()),g=(0,An.val)(this._initialValue.pointer),T=An.prism.memo("withInitialCache",()=>new WeakMap,[]),P=Wr(d,g,T),k=(0,An.val)(this.template.getStaticValues()),V=An.prism.memo("withStatics",()=>new WeakMap,[]);let ge=Wr(P,k,V),ve;{const Je=An.prism.memo("seq",()=>this.getSequencedValues(),[]),Ye=An.prism.memo("withSeqsCache",()=>new WeakMap,[]);ve=(0,An.val)((0,An.val)(Je)),ge=Wr(ge,ve,Ye)}return Wl("finalAtom",ge).pointer}))}getValueByPointer(d){const g=(0,An.val)(this.getValues()),{path:T}=(0,An.getPointerParts)(d);return(0,An.val)(sa(g,T))}pointerToPrism(d){const{path:g}=(0,An.getPointerParts)(d);return(0,An.prism)(()=>{const T=(0,An.val)(this.getValues());return(0,An.val)(sa(T,g))})}getSequencedValues(){return(0,An.prism)(()=>{const d=An.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),g=(0,An.val)(d),T=new An.Atom({}),P=(0,An.val)(this.template.configPointer);return An.prism.effect("processTracks",()=>{const k=[];for(const{trackId:V,pathToProp:ne}of g){const ge=this._trackIdToPrism(V),ve=lS(P,ne),be=ve.deserializeAndSanitize,Je=ve.interpolate,Ye=()=>{const Bt=ge.getValue();if(!Bt)return T.setByPointer(Pn=>sa(Pn,ne),void 0);const Mt=be(Bt.left),qt=Mt===void 0?ve.default:Mt;if(Bt.right===void 0)return T.setByPointer(Pn=>sa(Pn,ne),qt);const fn=be(Bt.right),Kt=fn===void 0?ve.default:fn;return T.setByPointer(Pn=>sa(Pn,ne),Je(qt,Kt,Bt.progression))},ut=ge.onStale(Ye);Ye(),k.push(ut)}return()=>{for(const V of k)V()}},[P,...g]),T.pointer})}_trackIdToPrism(d){const g=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[d],T=this.sheet.getSequence().positionPrism;return hc(this._internalUtilCtx,g,T)}get propsP(){return this._cache.get("propsP",()=>(0,An.pointer)({root:this,path:[]}))}validateValue(d,g){}setInitialValue(d){this.validateValue(this.propsP,d),this._initialValue.set(d)}};function Xn(d){return function(T,P){return d(T,P())}}var bs={_hmm:Rs(524),_todo:Rs(522),_error:Rs(521),errorDev:Rs(529),errorPublic:Rs(545),_kapow:Rs(268),_warn:Rs(265),warnDev:Rs(273),warnPublic:Rs(289),_debug:Rs(137),debugDev:Rs(145),_trace:Rs(73),traceDev:Rs(81)};function Rs(d){return Object.freeze({audience:Cc(d,8)?"internal":Cc(d,16)?"dev":"public",category:Cc(d,4)?"troubleshooting":Cc(d,2)?"todo":"general",level:Cc(d,512)?512:Cc(d,256)?256:Cc(d,128)?128:64})}function Cc(d,g){return(d&g)===g}function Jn(d,g){return((g&32)===32?!0:(g&16)===16?d.dev:(g&8)===8?d.internal:!1)&&d.min<=g}var el={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(d,g,T){return this.create({names:[...d.names,{name:g,key:T}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(d){if(d.length<5)return d;const g=d.replace(this.collapseOnRE,"");return this.cssMemo.has(g)||this.cssMemo.set(g,this.css(d)),g},css(d){var g,T,P,k;const V=this.cssMemo.get(d);if(V)return V;let ne="color:".concat((T=(g=this.color)==null?void 0:g.call(this,d))!=null?T:"hsl(".concat((d.charCodeAt(0)+d.charCodeAt(d.length-1))%360,", 100%, 60%)"));return(P=this.bold)!=null&&P.test(d)&&(ne+=";font-weight:600"),(k=this.italic)!=null&&k.test(d)&&(ne+=";font-style:italic"),this.cssMemo.set(d,ne),ne}}};function sb(d=console,g={}){const T=x(v({},el),{includes:v({},el.includes)}),P={styled:O4.bind(T,d),noStyle:N4.bind(T,d)},k=D4.bind(T);function V(){return T.loggingConsoleStyle&&T.loggerConsoleStyle?P.styled:P.noStyle}return T.create=V(),{configureLogger(ne){var ge;ne==="console"?(T.loggerConsoleStyle=el.loggerConsoleStyle,T.create=V()):ne.type==="console"?(T.loggerConsoleStyle=(ge=ne.style)!=null?ge:el.loggerConsoleStyle,T.create=V()):ne.type==="keyed"?(T.creatExt=ve=>ne.keyed(ve.names),T.create=k):ne.type==="named"&&(T.creatExt=L4.bind(null,ne.named),T.create=k)},configureLogging(ne){var ge,ve,be,Je,Ye;T.includes.dev=(ge=ne.dev)!=null?ge:el.includes.dev,T.includes.internal=(ve=ne.internal)!=null?ve:el.includes.internal,T.includes.min=(be=ne.min)!=null?be:el.includes.min,T.include=(Je=ne.include)!=null?Je:el.include,T.loggingConsoleStyle=(Ye=ne.consoleStyle)!=null?Ye:el.loggingConsoleStyle,T.create=V()},getLogger(){return T.create({names:[]})}}}function L4(d,g){const T=[];for(let{name:P,key:k}of g.names)T.push(k==null?P:"".concat(P," (").concat(k,")"));return d(T)}function D4(d){const g=v(v({},this.includes),this.include(d)),T=this.filtered,P=this.named.bind(this,d),k=this.creatExt(d),V=Jn(g,524),ne=Jn(g,522),ge=Jn(g,521),ve=Jn(g,529),be=Jn(g,545),Je=Jn(g,265),Ye=Jn(g,268),ut=Jn(g,273),Bt=Jn(g,289),Mt=Jn(g,137),qt=Jn(g,145),fn=Jn(g,73),Kt=Jn(g,81),Pn=V?k.error.bind(k,bs._hmm):T.bind(d,524),Ti=ne?k.error.bind(k,bs._todo):T.bind(d,522),hs=ge?k.error.bind(k,bs._error):T.bind(d,521),Ci=ve?k.error.bind(k,bs.errorDev):T.bind(d,529),Vn=be?k.error.bind(k,bs.errorPublic):T.bind(d,545),bi=Ye?k.warn.bind(k,bs._kapow):T.bind(d,268),Is=Je?k.warn.bind(k,bs._warn):T.bind(d,265),ma=ut?k.warn.bind(k,bs.warnDev):T.bind(d,273),Lc=Bt?k.warn.bind(k,bs.warnPublic):T.bind(d,273),Dc=Mt?k.debug.bind(k,bs._debug):T.bind(d,137),Oc=qt?k.debug.bind(k,bs.debugDev):T.bind(d,145),Fc=fn?k.trace.bind(k,bs._trace):T.bind(d,73),Nc=Kt?k.trace.bind(k,bs.traceDev):T.bind(d,81),Fr={_hmm:Pn,_todo:Ti,_error:hs,errorDev:Ci,errorPublic:Vn,_kapow:bi,_warn:Is,warnDev:ma,warnPublic:Lc,_debug:Dc,debugDev:Oc,_trace:Fc,traceDev:Nc,lazy:{_hmm:V?Xn(Pn):Pn,_todo:ne?Xn(Ti):Ti,_error:ge?Xn(hs):hs,errorDev:ve?Xn(Ci):Ci,errorPublic:be?Xn(Vn):Vn,_kapow:Ye?Xn(bi):bi,_warn:Je?Xn(Is):Is,warnDev:ut?Xn(ma):ma,warnPublic:Bt?Xn(Lc):Lc,_debug:Mt?Xn(Dc):Dc,debugDev:qt?Xn(Oc):Oc,_trace:fn?Xn(Fc):Fc,traceDev:Kt?Xn(Nc):Nc},named:P,utilFor:{internal(){return{debug:Fr._debug,error:Fr._error,warn:Fr._warn,trace:Fr._trace,named(Bs,Kn){return Fr.named(Bs,Kn).utilFor.internal()}}},dev(){return{debug:Fr.debugDev,error:Fr.errorDev,warn:Fr.warnDev,trace:Fr.traceDev,named(Bs,Kn){return Fr.named(Bs,Kn).utilFor.dev()}}},public(){return{error:Fr.errorPublic,warn:Fr.warnPublic,debug(Bs,Kn){Fr._warn('(public "debug" filtered out) '.concat(Bs),Kn)},trace(Bs,Kn){Fr._warn('(public "trace" filtered out) '.concat(Bs),Kn)},named(Bs,Kn){return Fr.named(Bs,Kn).utilFor.public()}}}}};return Fr}function O4(d,g){const T=v(v({},this.includes),this.include(g)),P=[];let k="";for(let ve=0;ve<g.names.length;ve++){const{name:be,key:Je}=g.names[ve];if(k+=" %c".concat(be),P.push(this.style.css(be)),Je!=null){const Ye="%c#".concat(Je);k+=Ye,P.push(this.style.css(Ye))}}const V=this.filtered,ne=this.named.bind(this,g),ge=[k,...P];return ob(V,g,T,d,ge,F4(ge),ne)}function F4(d){const g=d.slice(0);for(let T=1;T<g.length;T++)g[T]+=";background-color:#e0005a;padding:2px;color:white";return g}function N4(d,g){const T=v(v({},this.includes),this.include(g));let P="";for(let ge=0;ge<g.names.length;ge++){const{name:ve,key:be}=g.names[ge];P+=" ".concat(ve),be!=null&&(P+="#".concat(be))}const k=this.filtered,V=this.named.bind(this,g),ne=[P];return ob(k,g,T,d,ne,ne,V)}function ob(d,g,T,P,k,V,ne){const ge=Jn(T,524),ve=Jn(T,522),be=Jn(T,521),Je=Jn(T,529),Ye=Jn(T,545),ut=Jn(T,265),Bt=Jn(T,268),Mt=Jn(T,273),qt=Jn(T,289),fn=Jn(T,137),Kt=Jn(T,145),Pn=Jn(T,73),Ti=Jn(T,81),hs=ge?P.error.bind(P,...k):d.bind(g,524),Ci=ve?P.error.bind(P,...k):d.bind(g,522),Vn=be?P.error.bind(P,...k):d.bind(g,521),bi=Je?P.error.bind(P,...k):d.bind(g,529),Is=Ye?P.error.bind(P,...k):d.bind(g,545),ma=Bt?P.warn.bind(P,...V):d.bind(g,268),Lc=ut?P.warn.bind(P,...k):d.bind(g,265),Dc=Mt?P.warn.bind(P,...k):d.bind(g,273),Oc=qt?P.warn.bind(P,...k):d.bind(g,273),Fc=fn?P.info.bind(P,...k):d.bind(g,137),Nc=Kt?P.info.bind(P,...k):d.bind(g,145),Fr=Pn?P.debug.bind(P,...k):d.bind(g,73),Bs=Ti?P.debug.bind(P,...k):d.bind(g,81),Kn={_hmm:hs,_todo:Ci,_error:Vn,errorDev:bi,errorPublic:Is,_kapow:ma,_warn:Lc,warnDev:Dc,warnPublic:Oc,_debug:Fc,debugDev:Nc,_trace:Fr,traceDev:Bs,lazy:{_hmm:ge?Xn(hs):hs,_todo:ve?Xn(Ci):Ci,_error:be?Xn(Vn):Vn,errorDev:Je?Xn(bi):bi,errorPublic:Ye?Xn(Is):Is,_kapow:Bt?Xn(ma):ma,_warn:ut?Xn(Lc):Lc,warnDev:Mt?Xn(Dc):Dc,warnPublic:qt?Xn(Oc):Oc,_debug:fn?Xn(Fc):Fc,debugDev:Kt?Xn(Nc):Nc,_trace:Pn?Xn(Fr):Fr,traceDev:Ti?Xn(Bs):Bs},named:ne,utilFor:{internal(){return{debug:Kn._debug,error:Kn._error,warn:Kn._warn,trace:Kn._trace,named(rl,il){return Kn.named(rl,il).utilFor.internal()}}},dev(){return{debug:Kn.debugDev,error:Kn.errorDev,warn:Kn.warnDev,trace:Kn.traceDev,named(rl,il){return Kn.named(rl,il).utilFor.dev()}}},public(){return{error:Kn.errorPublic,warn:Kn.warnPublic,debug(rl,il){Kn._warn('(public "debug" filtered out) '.concat(rl),il)},trace(rl,il){Kn._warn('(public "trace" filtered out) '.concat(rl),il)},named(rl,il){return Kn.named(rl,il).utilFor.public()}}}}};return Kn}var ab=sb(console,{_debug:function(){},_error:function(){}});ab.configureLogging({dev:!0,min:64});var Rv=ab.getLogger().named("Theatre.js (default logger)").utilFor.dev(),lb=new WeakMap;function U4(d){const g=lb.get(d);if(g)return g;const T=new Map;return lb.set(d,T),ub([],d,T),T}function ub(d,g,T){for(const[P,k]of Object.entries(g.props))if(!bv(k)){const V=[...d,P];T.set(JSON.stringify(V),T.size),cb(V,k,T)}for(const[P,k]of Object.entries(g.props))if(bv(k)){const V=[...d,P];T.set(JSON.stringify(V),T.size),cb(V,k,T)}}function cb(d,g,T){if(g.type==="compound")ub(d,g,T);else{if(g.type==="enum")throw new Error("Enums aren't supported yet");T.set(JSON.stringify(d),T.size)}}function fb(d){return typeof d=="object"&&d!==null&&Object.keys(d).length===0}var k4=class{constructor(d,g,T,P,k){this.sheetTemplate=d,C(this,"address"),C(this,"type","Theatre_SheetObjectTemplate"),C(this,"_config"),C(this,"_temp_actions_atom"),C(this,"_cache",new ei),C(this,"project"),C(this,"pointerToSheetState"),C(this,"pointerToStaticOverrides"),this.address=x(v({},d.address),{objectKey:g}),this._config=new zn.Atom(P),this._temp_actions_atom=new zn.Atom(k),this.project=d.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(d,g,T){return this._config.set(T),new B4(d,this,g)}reconfigure(d){this._config.set(d)}_temp_setActions(d){this._temp_actions_atom.set(d)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,zn.prism)(()=>{const d=(0,zn.val)(this.configPointer);return To(d)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,zn.prism)(()=>{var d;const g=(d=(0,zn.val)(this.pointerToStaticOverrides))!=null?d:{};return(0,zn.val)(this.configPointer).deserializeAndSanitize(g)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,zn.prism)(()=>{const d=this.project.pointers.historic.sheetsById[this.address.sheetId],g=(0,zn.val)(d.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!g)return K;const T=[];if(!g)return K;const P=(0,zn.val)(this.configPointer),k=Object.entries(g);for(const[ne,ge]of k){const ve=z4(ne);if(!ve)continue;const be=lS(P,ve);be&&I4(be)&&T.push({pathToProp:ve,trackId:ge})}const V=U4(P);return T.sort((ne,ge)=>{const ve=ne.pathToProp,be=ge.pathToProp,Je=V.get(JSON.stringify(ve)),Ye=V.get(JSON.stringify(be));return Je>Ye?1:-1}),T.length===0?K:T}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,zn.prism)(()=>{const d=(0,zn.val)(this.getArrayOfValidSequenceTracks());let g={};for(const{pathToProp:T,trackId:P}of d)Vr(g,T,P);return g}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,zn.prism)(()=>{const d=(0,zn.val)(this.getStaticValues()),g=(0,zn.val)(this.getArrayOfValidSequenceTracks()),T=SU(d);for(const{pathToProp:P}of g){ib(T,P);let k=P.slice(0,-1);for(;k.length>0;){const V=lc(T,k);if(!fb(V))break;ib(T,k),k=k.slice(0,-1)}}if(!fb(T))return T}))}getDefaultsAtPointer(d){const{path:g}=(0,zn.getPointerParts)(d),T=this.getDefaultValues().getValue();return lc(T,g)}};function z4(d){try{return JSON.parse(d)}catch{Rv.warn("property ".concat(JSON.stringify(d)," cannot be parsed. Skipping."));return}}var db=Ur,H4=P4(d=>JSON.stringify(d));M(O());var G4=class extends Error{},hm=class extends G4{},hb=Ur,V4=Ur,W4=Ur,mi=Ur;function au(){let d,g;const T=new Promise((k,V)=>{d=ne=>{k(ne),P.status="resolved"},g=ne=>{V(ne),P.status="rejected"}}),P={resolve:d,reject:g,promise:T,status:"pending"};return P}var j4=()=>{},Pv=j4,X4=Ur,J4=class{constructor(){C(this,"_stopPlayCallback",Pv),C(this,"_state",new X4.Atom({position:0,playing:!1})),C(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=Pv}gotoPosition(d){this._updatePositionInState(d)}_updatePositionInState(d){this._state.setByPointer(g=>g.position,d)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(d){this._state.setByPointer(g=>g.playing,d)}play(d,g,T,P,k){this.playing&&this.pause(),this.playing=!0;const V=g[1]-g[0];{const ut=this.getCurrentPosition();ut<g[0]||ut>g[1]?P==="normal"||P==="alternate"?this._updatePositionInState(g[0]):(P==="reverse"||P==="alternateReverse")&&this._updatePositionInState(g[1]):P==="normal"||P==="alternate"?ut===g[1]&&this._updatePositionInState(g[0]):ut===g[0]&&this._updatePositionInState(g[1])}const ne=au(),ge=k.time,ve=V*d;let be=this.getCurrentPosition()-g[0];(P==="reverse"||P==="alternateReverse")&&(be=g[1]-this.getCurrentPosition());const Je=ut=>{const Mt=Math.max(ut-ge,0)/1e3,qt=Math.min(Mt*T+be,ve);if(qt!==ve){const fn=Math.floor(qt/V);let Kt=qt/V%1*V;if(P!=="normal")if(P==="reverse")Kt=V-Kt;else{const Pn=fn%2===0;P==="alternate"?Pn||(Kt=V-Kt):Pn&&(Kt=V-Kt)}this._updatePositionInState(Kt+g[0]),Ye()}else{if(P==="normal")this._updatePositionInState(g[1]);else if(P==="reverse")this._updatePositionInState(g[0]);else{const fn=(d-1)%2===0;P==="alternate"?fn?this._updatePositionInState(g[1]):this._updatePositionInState(g[0]):fn?this._updatePositionInState(g[0]):this._updatePositionInState(g[1])}this.playing=!1,ne.resolve(!0)}};this._stopPlayCallback=()=>{k.offThisOrNextTick(Je),k.offNextTick(Je),this.playing&&ne.resolve(!1)};const Ye=()=>k.onNextTick(Je);return k.onThisOrNextTick(Je),ne.promise}playDynamicRange(d,g){this.playing&&this.pause(),this.playing=!0;const T=au(),P=d.keepHot();T.promise.then(P,P);let k=g.time;const V=ge=>{const ve=Math.max(ge-k,0);k=ge;const be=ve/1e3,Je=this.getCurrentPosition(),Ye=d.getValue();if(Je<Ye[0]||Je>Ye[1])this.gotoPosition(Ye[0]);else{let ut=Je+be;ut>Ye[1]&&(ut=Ye[0]+(ut-Ye[1])),this.gotoPosition(ut)}ne()};this._stopPlayCallback=()=>{g.offThisOrNextTick(V),g.offNextTick(V),T.resolve(!1)};const ne=()=>g.onNextTick(V);return g.onThisOrNextTick(V),T.promise}},K4=Ur,Y4="__TheatreJS_StudioBundle",uS="__TheatreJS_CoreBundle",q4="__TheatreJS_Notifications",Iv=d=>(...g)=>{var T;switch(d){case"success":{Rv.debug(g.slice(0,2).join(`
`));break}case"info":{Rv.debug(g.slice(0,2).join(`
`));break}case"warning":{Rv.warn(g.slice(0,2).join(`
`));break}}return typeof window<"u"?(T=window[q4])==null?void 0:T.notify[d](...g):void 0},Sd={warning:Iv("warning"),success:Iv("success"),info:Iv("info"),error:Iv("error")};typeof window<"u"&&(window.addEventListener("error",d=>{Sd.error("An error occurred","<pre>".concat(d.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",d=>{Sd.error("An error occurred","<pre>".concat(d.reason,`</pre>

See **console** for details.`))}));var Q4=class{constructor(d,g,T){this._decodedBuffer=d,this._audioContext=g,this._nodeDestination=T,C(this,"_mainGain"),C(this,"_state",new K4.Atom({position:0,playing:!1})),C(this,"statePointer"),C(this,"_stopPlayCallback",Pv),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(d,g){const T=au();this._playing&&this.pause(),this._playing=!0;let P;const k=()=>{P==null||P(),P=this._loopInRange(d.getValue(),g).stop},V=d.onStale(k);return k(),this._stopPlayCallback=()=>{P==null||P(),V(),T.resolve(!1)},T.promise}_loopInRange(d,g){let P=this.getCurrentPosition();const k=d[1]-d[0];P<d[0]||P>d[1]?this._updatePositionInState(d[0]):P===d[1]&&this._updatePositionInState(d[0]),P=this.getCurrentPosition();const V=this._audioContext.createBufferSource();V.buffer=this._decodedBuffer,V.connect(this._mainGain),V.playbackRate.value=1,V.loop=!0,V.loopStart=d[0],V.loopEnd=d[1];const ne=g.time;let ge=P-d[0];V.start(0,P);const ve=Ye=>{let qt=(Math.max(Ye-ne,0)/1e3*1+ge)/k%1*k;this._updatePositionInState(qt+d[0]),be()},be=()=>g.onNextTick(ve);return g.onThisOrNextTick(ve),{stop:()=>{V.stop(),V.disconnect(),g.offThisOrNextTick(ve),g.offNextTick(ve)}}}get _playing(){return this._state.get().playing}set _playing(d){this._state.setByPointer(g=>g.playing,d)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=Pv}gotoPosition(d){this._updatePositionInState(d)}_updatePositionInState(d){this._state.reduce(g=>x(v({},g),{position:d}))}getCurrentPosition(){return this._state.get().position}play(d,g,T,P,k){this._playing&&this.pause(),this._playing=!0;let V=this.getCurrentPosition();const ne=g[1]-g[0];if(P!=="normal")throw new hm('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(P,"' given."));V<g[0]||V>g[1]?this._updatePositionInState(g[0]):V===g[1]&&this._updatePositionInState(g[0]),V=this.getCurrentPosition();const ge=au(),ve=this._audioContext.createBufferSource();ve.buffer=this._decodedBuffer,ve.connect(this._mainGain),ve.playbackRate.value=T,d>1e3&&(Sd.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(d,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),d=1e3),d>1&&(ve.loop=!0,ve.loopStart=g[0],ve.loopEnd=g[1]);const be=k.time;let Je=V-g[0];const Ye=ne*d;ve.start(0,V,Ye-Je);const ut=qt=>{const Kt=Math.max(qt-be,0)/1e3,Pn=Math.min(Kt*T+Je,Ye);if(Pn!==Ye){let Ti=Pn/ne%1*ne;this._updatePositionInState(Ti+g[0]),Mt()}else this._updatePositionInState(g[1]),this._playing=!1,Bt(),ge.resolve(!0)},Bt=()=>{ve.stop(),ve.disconnect()};this._stopPlayCallback=()=>{Bt(),k.offThisOrNextTick(ut),k.offNextTick(ut),this._playing&&ge.resolve(!1)};const Mt=()=>k.onNextTick(ut);return k.onThisOrNextTick(ut),ge.promise}},Z4=Ur,pb=0;function cS(d){var g;const T=ne=>{P.tick(ne)},P=new Z4.Ticker({onActive(){var ne;(ne=d==null?void 0:d.start)==null||ne.call(d)},onDormant(){var ne;(ne=d==null?void 0:d.stop)==null||ne.call(d)}}),k={tick:T,id:pb++,name:(g=d==null?void 0:d.name)!=null?g:"CustomRafDriver-".concat(pb),type:"Theatre_RafDriver_PublicAPI"},V={type:"Theatre_RafDriver_PrivateAPI",publicApi:k,ticker:P,start:d==null?void 0:d.start,stop:d==null?void 0:d.stop};return he(k,V),k}function $4(){let d=null;const P=cS({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const k=V=>{P.tick(V),d=window.requestAnimationFrame(k)};d=window.requestAnimationFrame(k)}else P.tick(0),setTimeout(()=>P.tick(1),0)},stop:()=>{typeof window<"u"&&d!==null&&window.cancelAnimationFrame(d)}});return P}var Bv;function mb(){return Bv||ez($4()),Bv}function gb(){return mb().ticker}function ez(d){if(Bv)throw new Error("`setCoreRafDriver()` is already called.");Bv=ce(d)}var tz=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(d){he(this,d)}play(d){const g=ce(this);if(g._project.isReady()){const T=d!=null&&d.rafDriver?ce(d.rafDriver).ticker:gb();return g.play(d??{},T)}else{const T=au();return T.resolve(!0),T.promise}}pause(){ce(this).pause()}get position(){return ce(this).position}set position(d){ce(this).position=d}__experimental_getKeyframes(d){return ce(this).getKeyframesOfSimpleProp(d)}async attachAudio(d){const{audioContext:g,destinationNode:T,decodedBuffer:P,gainNode:k}=await nz(d),V=new Q4(P,g,k);return ce(this).replacePlaybackController(V),{audioContext:g,destinationNode:T,decodedBuffer:P,gainNode:k}}get pointer(){return ce(this).pointer}};async function nz(d){function g(){if(d.audioContext)return Promise.resolve(d.audioContext);const be=new AudioContext;return be.state==="running"||typeof window>"u"?Promise.resolve(be):new Promise(Je=>{const Ye=()=>{be.resume().catch(Mt=>{console.error(Mt)})},ut=["mousedown","keydown","touchstart"],Bt={capture:!0,passive:!1};ut.forEach(Mt=>{window.addEventListener(Mt,Ye,Bt)}),be.addEventListener("statechange",()=>{be.state==="running"&&(ut.forEach(Mt=>{window.removeEventListener(Mt,Ye,Bt)}),Je(be))})})}async function T(){if(d.source instanceof AudioBuffer)return d.source;const be=au();if(typeof d.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let Je;try{Je=await fetch(d.source)}catch(Mt){throw console.error(Mt),new Error("Could not fetch '".concat(d.source,"'. Network error logged above."))}let Ye;try{Ye=await Je.arrayBuffer()}catch(Mt){throw console.error(Mt),new Error("Could not read '".concat(d.source,"' as an arrayBuffer."))}(await P).decodeAudioData(Ye,be.resolve,be.reject);let Bt;try{Bt=await be.promise}catch(Mt){throw console.error(Mt),new Error("Could not decode ".concat(d.source," as an audio file."))}return Bt}const P=g(),k=T(),[V,ne]=await Promise.all([P,k]),ge=d.destinationNode||V.destination,ve=V.createGain();return ve.connect(ge),{audioContext:V,decodedBuffer:ne,gainNode:ve,destinationNode:ge}}var rz=iz("Theatre_SheetObject");function iz(d){return g=>typeof g=="object"&&!!g&&g.type===d}var sz=class{constructor(d,g,T,P,k){this._project=d,this._sheet=g,this._lengthD=T,this._subUnitsPerUnitD=P,C(this,"address"),C(this,"publicApi"),C(this,"_playbackControllerBox"),C(this,"_prismOfStatePointer"),C(this,"_positionD"),C(this,"_positionFormatterD"),C(this,"_playableRangeD"),C(this,"pointer",(0,W4.pointer)({root:this,path:[]})),C(this,"$$isPointerToPrismProvider",!0),C(this,"_logger"),C(this,"closestGridPosition",V=>{const ge=1/this.subUnitsPerUnit;return parseFloat((Math.round(V/ge)*ge).toFixed(3))}),this._logger=d._logger.named("Sheet",g.address.sheetId).named("Instance",g.address.sheetInstanceId),this.address=x(v({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new tz(this),this._playbackControllerBox=new V4.Atom(k??new J4),this._prismOfStatePointer=(0,mi.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,mi.prism)(()=>{const V=this._prismOfStatePointer.getValue();return(0,mi.val)(V.position)}),this._positionFormatterD=(0,mi.prism)(()=>{const V=(0,mi.val)(this._subUnitsPerUnitD);return new oz(V)})}pointerToPrism(d){const{path:g}=(0,hb.getPointerParts)(d);if(g.length===0)return(0,mi.prism)(()=>({length:(0,mi.val)(this.pointer.length),playing:(0,mi.val)(this.pointer.playing),position:(0,mi.val)(this.pointer.position)}));if(g.length>1)return(0,mi.prism)(()=>{});const[T]=g;return T==="length"?this._lengthD:T==="position"?this._positionD:T==="playing"?(0,mi.prism)(()=>(0,mi.val)(this._prismOfStatePointer.getValue().playing)):(0,mi.prism)(()=>{})}getKeyframesOfSimpleProp(d){const{path:g,root:T}=(0,hb.getPointerParts)(d);if(!rz(T))throw new hm("Argument prop must be a pointer to a SheetObject property");const P=(0,mi.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[T.address.objectKey]);if(!P)return[];const{trackData:k,trackIdByPropPath:V}=P,ne=H4(g),ge=V[ne];if(!ge)return[];const ve=k[ge];return ve?ve.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(d){let g=d;this.pause(),g>this.length&&(g=this.length);const T=this.length;this._playbackControllerBox.get().gotoPosition(g>T?T:g)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,mi.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,mi.prism)(()=>[0,(0,mi.val)(this._lengthD)])}playDynamicRange(d,g){return this._playbackControllerBox.get().playDynamicRange(d,g)}async play(d,g){const T=this.length,P=d&&d.range?d.range:[0,T],k=d&&typeof d.iterationCount=="number"?d.iterationCount:1,V=d&&typeof d.rate<"u"?d.rate:1,ne=d&&d.direction?d.direction:"normal";return await this._play(k,[P[0],P[1]],V,ne,g)}_play(d,g,T,P,k){return this._playbackControllerBox.get().play(d,g,T,P,k)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(d){this.pause();const g=this._playbackControllerBox.get();this._playbackControllerBox.set(d);const T=g.getCurrentPosition();g.destroy(),d.gotoPosition(T)}},oz=class{constructor(d){this._fps=d}formatSubUnitForGrid(d){const g=d%1,T=1/this._fps;return Math.round(g/T)+"f"}formatFullUnitForGrid(d){let g=d,T="";if(g>=Ad){const k=Math.floor(g/Ad);T+=k+"h",g=g%Ad}if(g>=Rc){const k=Math.floor(g/Rc);T+=k+"m",g=g%Rc}if(g>=bc){const k=Math.floor(g/bc);T+=k+"s",g=g%bc}const P=1/this._fps;if(g>=P){const k=Math.floor(g/P);T+=k+"f",g=g%P}return T.length===0?"0s":T}formatForPlayhead(d){let g=d,T="";if(g>=Ad){const k=Math.floor(g/Ad);T+=dm(k.toString(),2,"0")+"h",g=g%Ad}if(g>=Rc){const k=Math.floor(g/Rc);T+=dm(k.toString(),2,"0")+"m",g=g%Rc}else T.length>0&&(T+="00m");if(g>=bc){const k=Math.floor(g/bc);T+=dm(k.toString(),2,"0")+"s",g=g%bc}else T+="00s";const P=1/this._fps;if(g>=P){const k=Math.round(g/P);T+=dm(k.toString(),2,"0")+"f",g=g%P}else g/P>.98?(T+=dm(1 .toString(),2,"0")+"f",g=g%P):T+="00f";return T.length===0?"00s00f":T}formatBasic(d){return d.toFixed(2)+"s"}},bc=1,Rc=bc*60,Ad=Rc*60,fS={};A(fS,{boolean:()=>Mb,compound:()=>hS,file:()=>pz,image:()=>gz,number:()=>Ab,rgba:()=>Sz,string:()=>Eb,stringLiteral:()=>Tz});function vb(d,g){return d.length<=g?d:d.substr(0,g-3)+"..."}var az=d=>typeof d=="string"?'string("'.concat(vb(d,10),'")'):typeof d=="number"?"number(".concat(vb(String(d),10),")"):d===null?"null":d===void 0?"undefined":typeof d=="boolean"?String(d):Array.isArray(d)?"array":typeof d=="object"?"object":"unknown",yb=az;function lz(d,{removeAlphaIfOpaque:g=!1}={}){const T=(d.a*255|256).toString(16).slice(1),P=(d.r*255|256).toString(16).slice(1)+(d.g*255|256).toString(16).slice(1)+(d.b*255|256).toString(16).slice(1)+(g&&T==="ff"?"":T);return"#".concat(P)}function dS(d){return x(v({},d),{toString(){return lz(this,{removeAlphaIfOpaque:!0})}})}function uz(d){return Object.fromEntries(Object.entries(d).map(([g,T])=>[g,ad(T,0,1)]))}function cz(d){function g(T){return T>=.0031308?1.055*T**(1/2.4)-.055:12.92*T}return uz({r:g(d.r),g:g(d.g),b:g(d.b),a:d.a})}function _b(d){function g(T){return T>=.04045?((T+.055)/(1+.055))**2.4:T/12.92}return{r:g(d.r),g:g(d.g),b:g(d.b),a:d.a}}function xb(d){let g=.4122214708*d.r+.5363325363*d.g+.0514459929*d.b,T=.2119034982*d.r+.6806995451*d.g+.1073969566*d.b,P=.0883024619*d.r+.2817188376*d.g+.6299787005*d.b,k=Math.cbrt(g),V=Math.cbrt(T),ne=Math.cbrt(P);return{L:.2104542553*k+.793617785*V-.0040720468*ne,a:1.9779984951*k-2.428592205*V+.4505937099*ne,b:.0259040371*k+.7827717662*V-.808675766*ne,alpha:d.a}}function fz(d){let g=d.L+.3963377774*d.a+.2158037573*d.b,T=d.L-.1055613458*d.a-.0638541728*d.b,P=d.L-.0894841775*d.a-1.291485548*d.b,k=g*g*g,V=T*T*T,ne=P*P*P;return{r:4.0767416621*k-3.3077115913*V+.2309699292*ne,g:-1.2684380046*k+2.6097574011*V-.3413193965*ne,b:-.0041960863*k-.7034186147*V+1.707614701*ne,a:d.alpha}}var tl=Symbol("TheatrePropType_Basic");function Sb(d){return typeof d=="object"&&!!d&&d[tl]==="TheatrePropType"}function dz(d){if(typeof d=="number")return Ab(d);if(typeof d=="boolean")return Mb(d);if(typeof d=="string")return Eb(d);if(typeof d=="object"&&d){if(Sb(d))return d;if(ov(d))return hS(d);throw new hm("This value is not a valid prop type: ".concat(yb(d)))}else throw new hm("This value is not a valid prop type: ".concat(yb(d)))}function hz(d){const g={};for(const T of Object.keys(d)){const P=d[T];Sb(P)?g[T]=P:g[T]=dz(P)}return g}var hS=(d,g={})=>{const T=hz(d),P=new WeakMap;return{type:"compound",props:T,valueType:null,[tl]:"TheatrePropType",label:g.label,default:t4(T,V=>V.default),deserializeAndSanitize:V=>{if(typeof V!="object"||!V)return;if(P.has(V))return P.get(V);const ne={};let ge=!1;for(const[ve,be]of Object.entries(T))if(Object.prototype.hasOwnProperty.call(V,ve)){const Je=be.deserializeAndSanitize(V[ve]);Je!=null&&(ge=!0,ne[ve]=Je)}if(P.set(V,ne),ge)return ne}}},pz=(d,g={})=>{const T=(P,k,V)=>{var ne;return{type:"file",id:((ne=g.interpolate)!=null?ne:pm)(P.id,k.id,V)}};return{type:"file",default:{type:"file",id:d},valueType:null,[tl]:"TheatrePropType",label:g.label,interpolate:T,deserializeAndSanitize:mz}},mz=d=>{if(!d)return;let g=!0;if(typeof d.id!="string"&&![null,void 0].includes(d.id)&&(g=!1),d.type!=="file"&&(g=!1),!!g)return d},gz=(d,g={})=>{const T=(P,k,V)=>{var ne;return{type:"image",id:((ne=g.interpolate)!=null?ne:pm)(P.id,k.id,V)}};return{type:"image",default:{type:"image",id:d},valueType:null,[tl]:"TheatrePropType",label:g.label,interpolate:T,deserializeAndSanitize:vz}},vz=d=>{if(!d)return;let g=!0;if(typeof d.id!="string"&&![null,void 0].includes(d.id)&&(g=!1),d.type!=="image"&&(g=!1),!!g)return d},Ab=(d,g={})=>{var T;return x(v({type:"number",valueType:0,default:d,[tl]:"TheatrePropType"},g||{}),{label:g.label,nudgeFn:(T=g.nudgeFn)!=null?T:Cz,nudgeMultiplier:typeof g.nudgeMultiplier=="number"?g.nudgeMultiplier:void 0,interpolate:xz,deserializeAndSanitize:yz(g.range)})},yz=d=>d?g=>{if(typeof g=="number"&&isFinite(g))return ad(g,d[0],d[1])}:_z,_z=d=>typeof d=="number"&&isFinite(d)?d:void 0,xz=(d,g,T)=>d+T*(g-d),Sz=(d={r:0,g:0,b:0,a:1},g={})=>{const T={};for(const P of["r","g","b","a"])T[P]=Math.min(Math.max(d[P],0),1);return{type:"rgba",valueType:null,default:dS(T),[tl]:"TheatrePropType",label:g.label,interpolate:Mz,deserializeAndSanitize:Az}},Az=d=>{if(!d)return;let g=!0;for(const P of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(d,P)||typeof d[P]!="number")&&(g=!1);if(!g)return;const T={};for(const P of["r","g","b","a"])T[P]=Math.min(Math.max(d[P],0),1);return dS(T)},Mz=(d,g,T)=>{const P=xb(_b(d)),k=xb(_b(g)),V={L:(1-T)*P.L+T*k.L,a:(1-T)*P.a+T*k.a,b:(1-T)*P.b+T*k.b,alpha:(1-T)*P.alpha+T*k.alpha},ne=cz(fz(V));return dS(ne)},Mb=(d,g={})=>{var T;return{type:"boolean",default:d,valueType:null,[tl]:"TheatrePropType",label:g.label,interpolate:(T=g.interpolate)!=null?T:pm,deserializeAndSanitize:Ez}},Ez=d=>typeof d=="boolean"?d:void 0;function pm(d){return d}var Eb=(d,g={})=>{var T;return{type:"string",default:d,valueType:null,[tl]:"TheatrePropType",label:g.label,interpolate:(T=g.interpolate)!=null?T:pm,deserializeAndSanitize:wz}};function wz(d){return typeof d=="string"?d:void 0}function Tz(d,g,T={}){var P,k;return{type:"stringLiteral",default:d,valuesAndLabels:v({},g),[tl]:"TheatrePropType",valueType:null,as:(P=T.as)!=null?P:"menu",label:T.label,interpolate:(k=T.interpolate)!=null?k:pm,deserializeAndSanitize(V){if(typeof V=="string"&&Object.prototype.hasOwnProperty.call(g,V))return V}}}var Cz=({config:d,deltaX:g,deltaFraction:T,magnitude:P})=>{var k;const{range:V}=d;return!d.nudgeMultiplier&&V&&!V.includes(1/0)&&!V.includes(-1/0)?T*(V[1]-V[0])*P:g*P*((k=d.nudgeMultiplier)!=null?k:1)},bz=d=>d.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function pS(d,g){return bz(d)}M(z());var Rz=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(d){he(this,d)}object(d,g,T){const P=ce(this),k=pS(d),V=P.getObject(k),ne=null,ge=T==null?void 0:T.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(V)return ge&&V.template._temp_setActions(ge),V.publicApi;{const ve=hS(g);return P.createObject(k,ne,ve,ge).publicApi}}get sequence(){return ce(this).getSequence().publicApi}get project(){return ce(this).project.publicApi}get address(){return v({},ce(this).address)}detachObject(d){const g=ce(this),T=pS(d);if(!g.getObject(T)){Sd.warning(`Couldn't delete object "`.concat(T,'"'),'There is no object with key "'.concat(T,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(T,'")` with the correct key.')),console.warn('Object key "'.concat(T,'" does not exist.'));return}g.deleteObject(T)}},mm=Ur,Pz=class{constructor(d,g){this.template=d,this.instanceId=g,C(this,"_objects",new mm.Atom({})),C(this,"_sequence"),C(this,"address"),C(this,"publicApi"),C(this,"project"),C(this,"objectsP",this._objects.pointer),C(this,"type","Theatre_Sheet"),C(this,"_logger"),this._logger=d.project._logger.named("Sheet",g),this._logger._trace("creating sheet"),this.project=d.project,this.address=x(v({},d.address),{sheetInstanceId:this.instanceId}),this.publicApi=new Rz(this)}createObject(d,g,T,P={}){const V=this.template.getObjectTemplate(d,g,T,P).createInstance(this,g,T);return this._objects.setByPointer(ne=>ne[d],V),V}getObject(d){return this._objects.get()[d]}deleteObject(d){this._objects.reduce(g=>{const T=v({},g);return delete T[d],T})}getSequence(){if(!this._sequence){const d=(0,mm.prism)(()=>{const T=(0,mm.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return Iz(T)}),g=(0,mm.prism)(()=>{const T=(0,mm.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return Bz(T)});this._sequence=new sz(this.template.project,this,d,g)}return this._sequence}},Iz=d=>typeof d=="number"&&isFinite(d)&&d>0?d:10,Bz=d=>typeof d=="number"&&$k(d)&&d>=1&&d<=1e3?d:30,Lz=class{constructor(d,g){this.project=d,C(this,"type","Theatre_SheetTemplate"),C(this,"address"),C(this,"_instances",new db.Atom({})),C(this,"instancesP",this._instances.pointer),C(this,"_objectTemplates",new db.Atom({})),C(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=x(v({},d.address),{sheetId:g})}getInstance(d){let g=this._instances.get()[d];return g||(g=new Pz(this,d),this._instances.setByPointer(T=>T[d],g)),g}getObjectTemplate(d,g,T,P){let k=this._objectTemplates.get()[d];return k||(k=new k4(this,d,g,T,P),this._objectTemplates.setByPointer(V=>V[d],k)),k}},mS=Ur,wb=Ur,Dz=d=>new Promise(g=>setTimeout(g,d)),Oz=Dz;function ro(d){for(var g=arguments.length,T=Array(g>1?g-1:0),P=1;P<g;P++)T[P-1]=arguments[P];throw Error("[Immer] minified error nr: "+d+(T.length?" "+T.map(function(k){return"'"+k+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Pc(d){return!!d&&!!d[ds]}function Ic(d){return!!d&&(function(g){if(!g||typeof g!="object")return!1;var T=Object.getPrototypeOf(g);if(T===null)return!0;var P=Object.hasOwnProperty.call(T,"constructor")&&T.constructor;return P===Object||typeof P=="function"&&Function.toString.call(P)===Wz}(d)||Array.isArray(d)||!!d[Ob]||!!d.constructor[Ob]||vS(d)||yS(d))}function Fz(d){return Pc(d)||ro(23,d),d[ds].t}function gm(d,g,T){T===void 0&&(T=!1),Md(d)===0?(T?Object.keys:PS)(d).forEach(function(P){T&&typeof P=="symbol"||g(P,d[P],d)}):d.forEach(function(P,k){return g(k,P,d)})}function Md(d){var g=d[ds];return g?g.i>3?g.i-4:g.i:Array.isArray(d)?1:vS(d)?2:yS(d)?3:0}function gS(d,g){return Md(d)===2?d.has(g):Object.prototype.hasOwnProperty.call(d,g)}function Nz(d,g){return Md(d)===2?d.get(g):d[g]}function Tb(d,g,T){var P=Md(d);P===2?d.set(g,T):P===3?(d.delete(g),d.add(T)):d[g]=T}function Uz(d,g){return d===g?d!==0||1/d==1/g:d!=d&&g!=g}function vS(d){return Gz&&d instanceof Map}function yS(d){return Vz&&d instanceof Set}function Bc(d){return d.o||d.t}function _S(d){if(Array.isArray(d))return Array.prototype.slice.call(d);var g=jz(d);delete g[ds];for(var T=PS(g),P=0;P<T.length;P++){var k=T[P],V=g[k];V.writable===!1&&(V.writable=!0,V.configurable=!0),(V.get||V.set)&&(g[k]={configurable:!0,writable:!0,enumerable:V.enumerable,value:d[k]})}return Object.create(Object.getPrototypeOf(d),g)}function xS(d,g){return g===void 0&&(g=!1),SS(d)||Pc(d)||!Ic(d)||(Md(d)>1&&(d.set=d.add=d.clear=d.delete=kz),Object.freeze(d),g&&gm(d,function(T,P){return xS(P,!0)},!0)),d}function kz(){ro(2)}function SS(d){return d==null||typeof d!="object"||Object.isFrozen(d)}function nl(d){var g=Xz[d];return g||ro(18,d),g}function Cb(){return vm}function AS(d,g){g&&(nl("Patches"),d.u=[],d.s=[],d.v=g)}function Lv(d){MS(d),d.p.forEach(zz),d.p=null}function MS(d){d===vm&&(vm=d.l)}function bb(d){return vm={p:[],l:vm,h:d,m:!0,_:0}}function zz(d){var g=d[ds];g.i===0||g.i===1?g.j():g.O=!0}function ES(d,g){g._=g.p.length;var T=g.p[0],P=d!==void 0&&d!==T;return g.h.g||nl("ES5").S(g,d,P),P?(T[ds].P&&(Lv(g),ro(4)),Ic(d)&&(d=Dv(g,d),g.l||Ov(g,d)),g.u&&nl("Patches").M(T[ds],d,g.u,g.s)):d=Dv(g,T,[]),Lv(g),g.u&&g.v(g.u,g.s),d!==Db?d:void 0}function Dv(d,g,T){if(SS(g))return g;var P=g[ds];if(!P)return gm(g,function(V,ne){return Rb(d,P,g,V,ne,T)},!0),g;if(P.A!==d)return g;if(!P.P)return Ov(d,P.t,!0),P.t;if(!P.I){P.I=!0,P.A._--;var k=P.i===4||P.i===5?P.o=_S(P.k):P.o;gm(P.i===3?new Set(k):k,function(V,ne){return Rb(d,P,k,V,ne,T)}),Ov(d,k,!1),T&&d.u&&nl("Patches").R(P,T,d.u,d.s)}return P.o}function Rb(d,g,T,P,k,V){if(Pc(k)){var ne=Dv(d,k,V&&g&&g.i!==3&&!gS(g.D,P)?V.concat(P):void 0);if(Tb(T,P,ne),!Pc(ne))return;d.m=!1}if(Ic(k)&&!SS(k)){if(!d.h.F&&d._<1)return;Dv(d,k),g&&g.A.l||Ov(d,k)}}function Ov(d,g,T){T===void 0&&(T=!1),d.h.F&&d.m&&xS(g,T)}function wS(d,g){var T=d[ds];return(T?Bc(T):d)[g]}function Pb(d,g){if(g in d)for(var T=Object.getPrototypeOf(d);T;){var P=Object.getOwnPropertyDescriptor(T,g);if(P)return P;T=Object.getPrototypeOf(T)}}function TS(d){d.P||(d.P=!0,d.l&&TS(d.l))}function CS(d){d.o||(d.o=_S(d.t))}function bS(d,g,T){var P=vS(g)?nl("MapSet").N(g,T):yS(g)?nl("MapSet").T(g,T):d.g?function(k,V){var ne=Array.isArray(k),ge={i:ne?1:0,A:V?V.A:Cb(),P:!1,I:!1,D:{},l:V,t:k,k:null,o:null,j:null,C:!1},ve=ge,be=Fv;ne&&(ve=[ge],be=Nv);var Je=Proxy.revocable(ve,be),Ye=Je.revoke,ut=Je.proxy;return ge.k=ut,ge.j=Ye,ut}(g,T):nl("ES5").J(g,T);return(T?T.A:Cb()).p.push(P),P}function Hz(d){return Pc(d)||ro(22,d),function g(T){if(!Ic(T))return T;var P,k=T[ds],V=Md(T);if(k){if(!k.P&&(k.i<4||!nl("ES5").K(k)))return k.t;k.I=!0,P=Ib(T,V),k.I=!1}else P=Ib(T,V);return gm(P,function(ne,ge){k&&Nz(k.t,ne)===ge||Tb(P,ne,g(ge))}),V===3?new Set(P):P}(d)}function Ib(d,g){switch(g){case 2:return new Map(d);case 3:return Array.from(d)}return _S(d)}var Bb,vm,RS=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Gz=typeof Map<"u",Vz=typeof Set<"u",Lb=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Db=RS?Symbol.for("immer-nothing"):((Bb={})["immer-nothing"]=!0,Bb),Ob=RS?Symbol.for("immer-draftable"):"__$immer_draftable",ds=RS?Symbol.for("immer-state"):"__$immer_state",Wz=""+Object.prototype.constructor,PS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:Object.getOwnPropertyNames,jz=Object.getOwnPropertyDescriptors||function(d){var g={};return PS(d).forEach(function(T){g[T]=Object.getOwnPropertyDescriptor(d,T)}),g},Xz={},Fv={get:function(d,g){if(g===ds)return d;var T=Bc(d);if(!gS(T,g))return function(k,V,ne){var ge,ve=Pb(V,ne);return ve?"value"in ve?ve.value:(ge=ve.get)===null||ge===void 0?void 0:ge.call(k.k):void 0}(d,T,g);var P=T[g];return d.I||!Ic(P)?P:P===wS(d.t,g)?(CS(d),d.o[g]=bS(d.A.h,P,d)):P},has:function(d,g){return g in Bc(d)},ownKeys:function(d){return Reflect.ownKeys(Bc(d))},set:function(d,g,T){var P=Pb(Bc(d),g);if(P!=null&&P.set)return P.set.call(d.k,T),!0;if(!d.P){var k=wS(Bc(d),g),V=k==null?void 0:k[ds];if(V&&V.t===T)return d.o[g]=T,d.D[g]=!1,!0;if(Uz(T,k)&&(T!==void 0||gS(d.t,g)))return!0;CS(d),TS(d)}return d.o[g]===T&&typeof T!="number"&&(T!==void 0||g in d.o)||(d.o[g]=T,d.D[g]=!0,!0)},deleteProperty:function(d,g){return wS(d.t,g)!==void 0||g in d.t?(d.D[g]=!1,CS(d),TS(d)):delete d.D[g],d.o&&delete d.o[g],!0},getOwnPropertyDescriptor:function(d,g){var T=Bc(d),P=Reflect.getOwnPropertyDescriptor(T,g);return P&&{writable:!0,configurable:d.i!==1||g!=="length",enumerable:P.enumerable,value:T[g]}},defineProperty:function(){ro(11)},getPrototypeOf:function(d){return Object.getPrototypeOf(d.t)},setPrototypeOf:function(){ro(12)}},Nv={};gm(Fv,function(d,g){Nv[d]=function(){return arguments[0]=arguments[0][0],g.apply(this,arguments)}}),Nv.deleteProperty=function(d,g){return Fv.deleteProperty.call(this,d[0],g)},Nv.set=function(d,g,T){return Fv.set.call(this,d[0],g,T,d[0])};var Jz=function(){function d(T){var P=this;this.g=Lb,this.F=!0,this.produce=function(k,V,ne){if(typeof k=="function"&&typeof V!="function"){var ge=V;V=k;var ve=P;return function(Bt){var Mt=this;Bt===void 0&&(Bt=ge);for(var qt=arguments.length,fn=Array(qt>1?qt-1:0),Kt=1;Kt<qt;Kt++)fn[Kt-1]=arguments[Kt];return ve.produce(Bt,function(Pn){var Ti;return(Ti=V).call.apply(Ti,[Mt,Pn].concat(fn))})}}var be;if(typeof V!="function"&&ro(6),ne!==void 0&&typeof ne!="function"&&ro(7),Ic(k)){var Je=bb(P),Ye=bS(P,k,void 0),ut=!0;try{be=V(Ye),ut=!1}finally{ut?Lv(Je):MS(Je)}return typeof Promise<"u"&&be instanceof Promise?be.then(function(Bt){return AS(Je,ne),ES(Bt,Je)},function(Bt){throw Lv(Je),Bt}):(AS(Je,ne),ES(be,Je))}if(!k||typeof k!="object")return(be=V(k))===Db?void 0:(be===void 0&&(be=k),P.F&&xS(be,!0),be);ro(21,k)},this.produceWithPatches=function(k,V){return typeof k=="function"?function(ve){for(var be=arguments.length,Je=Array(be>1?be-1:0),Ye=1;Ye<be;Ye++)Je[Ye-1]=arguments[Ye];return P.produceWithPatches(ve,function(ut){return k.apply(void 0,[ut].concat(Je))})}:[P.produce(k,V,function(ve,be){ne=ve,ge=be}),ne,ge];var ne,ge},typeof(T==null?void 0:T.useProxies)=="boolean"&&this.setUseProxies(T.useProxies),typeof(T==null?void 0:T.autoFreeze)=="boolean"&&this.setAutoFreeze(T.autoFreeze)}var g=d.prototype;return g.createDraft=function(T){Ic(T)||ro(8),Pc(T)&&(T=Hz(T));var P=bb(this),k=bS(this,T,void 0);return k[ds].C=!0,MS(P),k},g.finishDraft=function(T,P){var k=T&&T[ds],V=k.A;return AS(V,P),ES(void 0,V)},g.setAutoFreeze=function(T){this.F=T},g.setUseProxies=function(T){T&&!Lb&&ro(20),this.g=T},g.applyPatches=function(T,P){var k;for(k=P.length-1;k>=0;k--){var V=P[k];if(V.path.length===0&&V.op==="replace"){T=V.value;break}}var ne=nl("Patches").$;return Pc(T)?ne(T,P):this.produce(T,function(ge){return ne(ge,P.slice(k+1))})},d}(),Ps=new Jz;Ps.produce,Ps.produceWithPatches.bind(Ps),Ps.setAutoFreeze.bind(Ps),Ps.setUseProxies.bind(Ps),Ps.applyPatches.bind(Ps),Ps.createDraft.bind(Ps),Ps.finishDraft.bind(Ps);var Kz={currentProjectStateDefinitionVersion:"0.4.0"},IS=Kz;async function Yz(d,g,T){await Oz(0),d.transaction(({drafts:P})=>{var k;const V=g.address.projectId;P.ephemeral.coreByProject[V]={lastExportedObject:null,loadingState:{type:"loading"}},P.ahistoric.coreByProject[V]={ahistoricStuff:""};function ne(){P.ephemeral.coreByProject[V].loadingState={type:"loaded"},P.historic.coreByProject[V]={sheetsById:{},definitionVersion:IS.currentProjectStateDefinitionVersion,revisionHistory:[]}}function ge(Ye){P.ephemeral.coreByProject[V].loadingState={type:"loaded"},P.historic.coreByProject[V]=Ye}function ve(){P.ephemeral.coreByProject[V].loadingState={type:"loaded"}}function be(Ye){P.ephemeral.coreByProject[V].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ye}}const Je=(k=Fz(P.historic))==null?void 0:k.coreByProject[g.address.projectId];Je?T&&Je.revisionHistory.indexOf(T.revisionHistory[0])==-1?be(T):ve():T?ge(T):ne()})}function Fb(){}function Nb(d){var g,T;const P=(g=d==null?void 0:d.logging)!=null&&g.internal?(T=d.logging.min)!=null?T:256:1/0,k=P<=128,V=P<=512,ne=sb(void 0,{_debug:k?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Fb,_error:V?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Fb});if(d){const{logger:ge,logging:ve}=d;ge&&ne.configureLogger(ge),ve?ne.configureLogging(ve):ne.configureLogging({dev:!1})}return ne.getLogger().named("Theatre")}var qz=class{constructor(d,g={},T){this.config=g,this.publicApi=T,C(this,"pointers"),C(this,"_pointerProxies"),C(this,"address"),C(this,"_studioReadyDeferred"),C(this,"_assetStorageReadyDeferred"),C(this,"_readyPromise"),C(this,"_sheetTemplates",new wb.Atom({})),C(this,"sheetTemplatesP",this._sheetTemplates.pointer),C(this,"_studio"),C(this,"assetStorage"),C(this,"type","Theatre_Project"),C(this,"_logger");var P;this._logger=Nb({logging:{dev:!0}}).named("Project",d),this._logger.traceDev("creating project"),this.address={projectId:d};const k=new wb.Atom({ahistoric:{ahistoricStuff:""},historic:(P=g.state)!=null?P:{sheetsById:{},definitionVersion:IS.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=au(),this.assetStorage={getAssetUrl:V=>{var ne;return"".concat((ne=g.assets)==null?void 0:ne.baseUrl,"/").concat(V)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new mS.PointerProxy(k.pointer.historic),ahistoric:new mS.PointerProxy(k.pointer.ahistoric),ephemeral:new mS.PointerProxy(k.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},ie.add(d,this),this._studioReadyDeferred=au(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),g.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(d,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(d,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(d,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(d){if(this._studio){if(this._studio!==d)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=d,d.initialized.then(async()=>{var g;await Yz(d,this,this.config.state),this._pointerProxies.historic.setPointer(d.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(d.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(d.atomP.ephemeral.coreByProject[this.address.projectId]),await d.createAssetStorage(this,(g=this.config.assets)==null?void 0:g.baseUrl).then(T=>{this.assetStorage=T,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(g=>{throw console.error(g),g})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(d,g="default"){let T=this._sheetTemplates.get()[d];return T||(T=new Lz(this,d),this._sheetTemplates.reduce(P=>x(v({},P),{[d]:T}))),T.getInstance(g)}},Qz=class{get type(){return"Theatre_Project_PublicAPI"}constructor(d,g={}){he(this,new qz(d,g,this))}get ready(){return ce(this).ready}get isReady(){return ce(this).isReady()}get address(){return v({},ce(this).address)}getAssetUrl(d){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return d.id?ce(this).assetStorage.getAssetUrl(d.id):void 0}sheet(d,g="default"){const T=pS(d);return ce(this).getOrCreateSheet(T,g).publicApi}};M(z());var Ub=Ur,BS=Ur;function kb(d,g={}){const T=ie.get(d);if(T)return T.publicApi;const k=Nb().named("Project",d);return g.state?($z(d,g.state),k._debug("deep validated config.state on disk")):k._debug("no config.state"),new Qz(d,g)}var Zz=(d,g)=>{if(Array.isArray(g)||g==null||g.definitionVersion!==IS.currentProjectStateDefinitionVersion)throw new hm("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(d),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},$z=(d,g)=>{Zz(d,g)};function LS(d,g,T){const P=T?ce(T).ticker:gb();if((0,Ub.isPointer)(d))return(0,BS.pointerToPrism)(d).onChange(P,g,!0);if((0,BS.isPrism)(d))return d.onChange(P,g,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function zb(d){if((0,Ub.isPointer)(d))return(0,BS.pointerToPrism)(d).getValue();throw new Error("Called val(p) where p is not a pointer.")}var e5=class{constructor(){C(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(d,g){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=d;const T={projectsP:ie.atom.pointer.projects,privateAPI:ce,coreExports:N,getCoreRafDriver:mb};g(T)}};t5();function t5(){if(typeof window>"u")return;const d=window[uS];if(typeof d<"u")throw typeof d=="object"&&d&&typeof d.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(uS," seems to be already set by a module other than @theatre/core."));const g=new e5;window[uS]=g;const T=window[Y4];T&&T!==null&&T.type==="Theatre_StudioBundle"&&T.registerCoreBundle(g)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(i1,i1.exports);var Sl=i1.exports,W$=Object.create,PC=Object.defineProperty,j$=Object.defineProperties,X$=Object.getOwnPropertyDescriptor,J$=Object.getOwnPropertyDescriptors,hN=Object.getOwnPropertyNames,s1=Object.getOwnPropertySymbols,K$=Object.getPrototypeOf,IC=Object.prototype.hasOwnProperty,pN=Object.prototype.propertyIsEnumerable,sB=(n,e,t)=>e in n?PC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fr=(n,e)=>{for(var t in e||(e={}))IC.call(e,t)&&sB(n,t,e[t]);if(s1)for(var t of s1(e))pN.call(e,t)&&sB(n,t,e[t]);return n},Oi=(n,e)=>j$(n,J$(e)),BC=(n,e)=>{var t={};for(var r in n)IC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&s1)for(var r of s1(n))e.indexOf(r)<0&&pN.call(n,r)&&(t[r]=n[r]);return t},Y$=(n,e)=>function(){return e||(0,n[hN(n)[0]])((e={exports:{}}).exports,e),e.exports},q$=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hN(e))!IC.call(n,i)&&i!==t&&PC(n,i,{get:()=>e[i],enumerable:!(r=X$(e,i))||r.enumerable});return n},Q$=(n,e,t)=>(t=n!=null?W$(K$(n)):{},q$(e||!n||!n.__esModule?PC(t,"default",{value:n,enumerable:!0}):t,n)),Z$=Y$({"../../node_modules/zustand/vanilla.js"(n){Object.defineProperty(n,"__esModule",{value:!0});function e(t){var r,i=new Set,s=function(m,v){var x=typeof m=="function"?m(r):m;if(x!==r){var E=r;r=v?x:Object.assign({},r,x),i.forEach(function(A){return A(r,E)})}},o=function(){return r},a=function(m,v,x){v===void 0&&(v=o),x===void 0&&(x=Object.is);var E=v(r);function A(){var y=v(r);if(!x(E,y)){var M=E;m(E=y,M)}}return i.add(A),function(){return i.delete(A)}},l=function(m,v,x){return v||x?a(m,v,x):(i.add(m),function(){return i.delete(m)})},f=function(){return i.clear()},h={setState:s,getState:o,subscribe:l,destroy:f};return r=t(s,o,h),h}n.default=e}}),$$=Q$(Z$()),oB=new WeakSet,eee=(n,e)=>({sheet:null,editorObject:null,scene:null,gl:null,helpersRoot:new Ma,editables:{},canvasName:"default",sceneSnapshot:null,editablesSnapshot:null,initialEditorCamera:{},init:(t,r)=>{n({scene:t,gl:r}),e().createSnapshot()},addEditable:(t,r)=>{n(i=>({editables:Oi(fr({},i.editables),{[t]:r})}))},removeEditable:t=>{n(r=>{const i=fr({},r.editables);return delete i[t],{editables:i}})},createSnapshot:()=>{n(t=>{var r,i;return{sceneSnapshot:(i=(r=t.scene)==null?void 0:r.clone())!=null?i:null,editablesSnapshot:t.editables}})},setSnapshotProxyObject:(t,r)=>{n(i=>({editablesSnapshot:Oi(fr({},i.editablesSnapshot),{[r]:Oi(fr({},i.editablesSnapshot[r]),{proxyObject:t})})}))}}),rp=(0,$$.default)(eee),tee=({gl:n,scene:e})=>{const t=rp.getState().init;t(e,n)};function LC(n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function nee(){return Zi(({invalidate:n})=>n)}var mN=ee.createContext(void 0),ree=()=>{const n=ee.useContext(mN);if(!n)throw new Error("No sheet found. You need to add a <SheetProvider> higher up in the tree. https://docs.theatrejs.com/r3f.html#sheetprovider");return n},gN=()=>ree().sheet,iee=({sheet:n,children:e})=>{const{scene:t,gl:r}=Zi(i=>({scene:i.scene,gl:i.gl}));return ee.useEffect(()=>{if(!n||n.type!=="Theatre_Sheet_PublicAPI")throw new Error("sheet in <Wrapper sheet={sheet}> has an invalid value")},[n]),ee.useLayoutEffect(()=>{tee({gl:r,scene:t})},[t,r]),Mu.createElement(mN.Provider,{value:{sheet:n}},e)},see=iee;function vN(n){return typeof n=="number"&&isFinite(n)}function oee(n){return["x","y","z"].every(e=>vN(n[e]))}var sw=n=>n?{x:n[0],y:n[1],z:n[2]}:{x:0,y:0,z:0},aM=(n,e=sw(),{nudgeMultiplier:t=.01}={})=>({parse:r=>{const i=r[n],s=i?Array.isArray(i)?sw(i):vN(i)?{x:i,y:i,z:i}:oee(i)?{x:i.x,y:i.y,z:i.z}:(Sl.notify.warning(`Invalid value for vector prop "${n}"`,`Couldn't make sense of \`${n}={${JSON.stringify(i)}}\`, falling back to \`${n}={${JSON.stringify([e.x,e.y,e.z])}}\`.

To fix this, make sure the prop is set to either a number, an array of numbers, or a three.js Vector3 object.`),e):e;return["x","y","z"].forEach(o=>{r[`${n}-${o}`]&&(s[o]=r[`${n}-${o}`])}),s},apply:(r,i)=>{i[n].set(r.x,r.y,r.z)},type:{[n]:{x:Sl.types.number(e.x,{nudgeMultiplier:t}),y:Sl.types.number(e.y,{nudgeMultiplier:t}),z:Sl.types.number(e.z,{nudgeMultiplier:t})}}}),ms=(n,e=0,{nudgeMultiplier:t=.01}={})=>({parse:r=>{var i;return(i=r[n])!=null?i:e},apply:(r,i)=>{i[n]=r},type:{[n]:Sl.types.number(e,{nudgeMultiplier:t})}}),ah=(n,e=new tt(0,0,0))=>({parse:t=>{var r;return Oi(fr({},(r=t[n])!=null?r:e),{a:1})},apply:(t,r)=>{r[n].setRGB(t.r,t.g,t.b)},type:{[n]:Sl.types.rgba(Oi(fr({},e),{a:1}))}}),xg=(n,e)=>Oi(fr({},n),{props:fr(fr({},n.props),e)}),ml={props:{position:aM("position"),rotation:aM("rotation"),scale:aM("scale",sw([1,1,1]))},useTransformControls:!0,icon:"cube",createHelper:n=>new Q_(n,lh)},aB=Oi(fr({},xg(ml,{intensity:ms("intensity",1),distance:ms("distance"),decay:ms("decay"),color:ah("color",new tt("white"))})),{dimensionless:!0}),lB=Oi(fr({},xg(ml,{near:ms("near",.1,{nudgeMultiplier:.1}),far:ms("far",2e3,{nudgeMultiplier:.1})})),{updateObject:n=>{n.updateProjectionMatrix()},icon:"camera",dimensionless:!0,createHelper:n=>new TO(n)}),lh="#40AAA4",aee={group:Oi(fr({},ml),{icon:"collection",createHelper:n=>new Q_(n,lh)}),mesh:Oi(fr({},ml),{icon:"cube",createHelper:n=>new Q_(n,lh)}),spotLight:Oi(fr({},xg(aB,{angle:ms("angle",0,{nudgeMultiplier:.001}),penumbra:ms("penumbra",0,{nudgeMultiplier:.001})})),{icon:"spotLight",createHelper:n=>new AO(n,lh)}),directionalLight:Oi(fr({},xg(ml,{intensity:ms("intensity",1),color:ah("color",new tt("white"))})),{icon:"sun",dimensionless:!0,createHelper:n=>new wO(n,1,lh)}),pointLight:Oi(fr({},aB),{icon:"lightBulb",createHelper:n=>new EO(n,1,lh)}),ambientLight:{props:{intensity:ms("intensity",1),color:ah("color",new tt("white"))},useTransformControls:!1,icon:"lightBulb"},hemisphereLight:{props:{intensity:ms("intensity",1),color:ah("color",new tt("white")),groundColor:ah("groundColor",new tt("white"))},useTransformControls:!1,icon:"lightBulb"},perspectiveCamera:xg(lB,{fov:ms("fov",50,{nudgeMultiplier:.1}),zoom:ms("zoom",1)}),orthographicCamera:lB,points:ml,line:ml,lineLoop:ml,lineSegments:ml,fog:{props:{color:ah("color"),near:ms("near",1,{nudgeMultiplier:.1}),far:ms("far",1e3,{nudgeMultiplier:.1})},useTransformControls:!1,icon:"cloud"}},lee=aee;rp.getState().createSnapshot;var uee=n=>`${n.sheetId}:${n.sheetInstanceId}:${n.objectKey}`,cee=ee.createContext(void 0),fee=()=>{var n;return(n=ee.useContext(cee))==null?void 0:n.rafDriver},dee=n=>{const e=(r,i)=>{if(r!=="primitive"&&!i)throw new Error("You must provide the type of the component you're creating an editable for. For example: editable(MyComponent, 'mesh').");return ee.forwardRef((s,o)=>{var a=s,{theatreKey:l,visible:f,editableType:h,additionalProps:p,objRef:m}=a,v=BC(a,["theatreKey","visible","editableType","additionalProps","objRef"]);if(typeof l!="string")throw new Error(`No valid theatreKey was provided to the editable component. theatreKey must be a string. Received: ${l}`);if(r==="primitive"&&!h)throw new Error(`When using the primitive component, you must provide the editableType prop. Received: ${h}`);const x=i??h,E=ee.useRef(),A=gN(),y=fee(),[M,S]=ee.useState(void 0),C=ee.useMemo(()=>uee(Oi(fr({},A.address),{objectKey:l})),[A,l]),I=nee();return ee.useEffect(()=>{if(r==="perspectiveCamera"||r==="orthographicCamera"){const B=r.charAt(0).toUpperCase()+r.slice(1);Sl.notify.warning(`Possibly incorrect use of <e.${r} />`,`You seem to have declared the camera "${l}" simply as \`<e.${r} ... />\`. This alone won't make r3f use it for rendering.

The easiest way to create a custom animatable \`${B}\` is to import it from \`@react-three/drei\`, and make it editable.
\`\`\`
import {${B}} from '@react-three/drei'

const EditableCamera =
  editable(${B}, '${r}')
\`\`\`
Then you can use it in your JSX like any other editable component. Note the makeDefault prop exposed by drei, which makes r3f use it for rendering.
\`\`\`
<EditableCamera
  theatreKey="${l}"
  makeDefault
>
\`\`\`
`)}},[r,l]),ee.useLayoutEffect(()=>{if(A)if(M){A.object(l,Object.assign(fr({},p),...Object.values(n[x].props).map(B=>B.type)),{reconfigure:!0});return}else{const B=A.object(l,Object.assign(fr({},p),...Object.values(n[x].props).map(O=>O.type)));oB.add(B),S(B),m&&(typeof m=="function"?m(B):m.current=B),rp.getState().addEditable(C,{type:x,sheetObject:B,visibleOnlyInEditor:f==="editor",objectConfig:n[x]})}},[A,C,p]),ee.useLayoutEffect(()=>{M&&(M.initialValue=Object.fromEntries(Object.entries(n[x].props).map(([B,O])=>[B,O.parse(v)])))},[M,...Object.keys(n[x].props).map(B=>v[B])]),ee.useLayoutEffect(()=>{if(!M)return;const B=E.current,O=L=>{var N,W;Object.entries(n[x].props).forEach(([ae,te])=>te.apply(L[ae],B)),(W=(N=n[x]).updateObject)==null||W.call(N,B),I()};O(M.value);const z=M.onValuesChange(O,y);return()=>{z(),M.sheet.detachObject(l),oB.delete(M),rp.getState().removeEditable(C)}},[M,y]),Mu.createElement(r,Oi(fr({ref:LC([E,o])},v),{visible:f!=="editor"&&f,userData:{__editable:!0,__storeKey:C}}))})},t=Oi(fr({},Object.fromEntries(Object.keys(n).map(r=>[r,e(r,r)]))),{primitive:e("primitive",null)});return Object.assign(e,t)},hee=dee(lee),yN=hee,pee=yN(ee.forwardRef((n,e)=>{var t=n,{makeDefault:r,lookAt:i}=t,s=BC(t,["makeDefault","lookAt"]);const o=Zi(({set:h})=>h),a=Zi(({camera:h})=>h),l=Zi(({size:h})=>h),f=ee.useRef(null);return ee.useLayoutEffect(()=>{s.manual||(f.current.aspect=l.width/l.height)},[l,s]),ee.useLayoutEffect(()=>{f.current.updateProjectionMatrix()}),ee.useLayoutEffect(()=>{if(r){const h=a;return o(()=>({camera:f.current})),()=>o(()=>({camera:h}))}},[f,r,o]),Lf(()=>{var h;if(i&&f.current){f.current.lookAt(Array.isArray(i)?new J(...i):i.current?i.current.position:i);const p=rp.getState().editablesSnapshot;p&&((h=p[f.current.userData.__storeKey].proxyObject)==null||h.rotation.copy(f.current.rotation))}}),ee.createElement("perspectiveCamera",fr({ref:LC([f,e])},s))}),"perspectiveCamera");yN(ee.forwardRef((n,e)=>{var t=n,{makeDefault:r,lookAt:i}=t,s=BC(t,["makeDefault","lookAt"]);const o=Zi(({set:h})=>h),a=Zi(({camera:h})=>h),l=Zi(({size:h})=>h),f=ee.useRef(null);return ee.useLayoutEffect(()=>{s.manual||f.current.updateProjectionMatrix()},[l,s]),ee.useLayoutEffect(()=>{f.current.updateProjectionMatrix()}),ee.useLayoutEffect(()=>{if(r){const h=a;return o(()=>({camera:f.current})),()=>o(()=>({camera:h}))}},[f,r,o]),Lf(()=>{var h;if(i&&f.current){f.current.lookAt(Array.isArray(i)?new J(...i):i.current?i.current.position:i);const p=rp.getState().editablesSnapshot;p&&((h=p[f.current.userData.__storeKey].proxyObject)==null||h.rotation.copy(f.current.rotation))}}),ee.createElement("orthographicCamera",fr({left:l.width/-2,right:l.width/2,top:l.height/2,bottom:l.height/-2,ref:LC([f,e])},s))}),"orthographicCamera");function mee(){const n=gN(),e=tF();Lf(()=>{const r=Sl.val(n.sequence.pointer.length);n.sequence.position=e.offset*r});const t="white";return We.jsxs(We.Fragment,{children:[We.jsx(GK,{preset:"night"}),We.jsx("color",{attach:"background",args:[t]}),We.jsx("ambientLight",{intensity:.5}),We.jsx("directionalLight",{position:[0,3,-2],intensity:2.5}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"base_final.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"BRT.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"escolas.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"linhas_textos.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"obj1.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"obj2.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"obj3.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"VLT.glb"})}),We.jsx(ee.Suspense,{fallback:null,children:We.jsx(hl,{modelUrl:"parque_olimpico.glb"})}),We.jsx(pee,{theatreKey:"Camera",makeDefault:!0,position:[0,0,0],fov:20,near:.1,far:70})]})}const gee={Scene:{staticOverrides:{byObject:{Camera:{position:{x:-1.573250851346216,y:1.0885073380736379,z:.530001159065498}}}},sequence:{subUnitsPerUnit:30,length:3.88,type:"PositionalSequence",tracksByObject:{Camera:{trackData:{u5_1SRkyFn:{type:"BasicKeyframedTrack",__debugName:'Camera:["rotation","z"]',keyframes:[{id:"csmEvrYHxe",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.8344133479485478},{id:"MJFxKvh2Tk",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.9831941935375281},{id:"gV22zuLUp8",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.32495303802044107},{id:"5zpJgm-UZf",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.2187448016252658},{id:"kmAk4qoRvZ",position:1.8,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.3396362785479441},{id:"mCrBksRMbk",position:2.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.30607332261463704},{id:"kyxbtwwStZ",position:3.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.3544377667385358},{id:"uDb_mDtN9H",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.1472664053328182},{id:"EUldGONSS6",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.1472664053328182}]},bB_cOPPYqL:{type:"BasicKeyframedTrack",__debugName:'Camera:["rotation","y"]',keyframes:[{id:"V6WPk6wlMm",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.6039014949075227},{id:"6mNqZUGIe4",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.144894415269756},{id:"fop61bF7z0",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.5270299878412432},{id:"OJWW4g6iW_",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.4906321373483962},{id:"NivD0EuYff",position:1.8,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.565663578799783},{id:"l6EtVn9-pZ",position:2.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.6903960946745197},{id:"3nV4AaD1-z",position:3.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.6698961262708578},{id:"HsAeze7dzW",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.4422228891058102},{id:"bD7ZMEsV4H",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.4422228891058103}]},tzzU7BxATF:{type:"BasicKeyframedTrack",__debugName:'Camera:["rotation","x"]',keyframes:[{id:"UmMO4AFBnt",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.9437855913477994},{id:"9J1T7Eu6R0",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.8854136538701036},{id:"2LmbIMyQas",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.6018696505680565},{id:"9BWX36Dgvt",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.5330273470118282},{id:"KKy6cwCNkL",position:1.8,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.709348205371391},{id:"5ELUYJiu_i",position:2.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.8181347248551192},{id:"ZVYeE_IDq-",position:3.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.8950102194541331},{id:"fEwGqbESYY",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.8243071976141659},{id:"jKN4Mt4ocN",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.8145801941302265}]},Vmpt9vf3yw:{type:"BasicKeyframedTrack",__debugName:'Camera:["position","z"]',keyframes:[{id:"sTZV71Tw8T",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-3.2230066026366733},{id:"L-XMGwrSut",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-4.8633626957580365},{id:"ddpRHio0ny",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-3.8625468169297204},{id:"Uzvo3ZwZgW",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-4.00123512970934},{id:"7RUlBzcpxi",position:1.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-4.886528362527465},{id:"C8wL6lH3ya",position:2.133,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-2.3814650184558226},{id:"qBinqEaMT0",position:2.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-2.055605728634946},{id:"zHG-A8A1KA",position:3.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-3.47388111357054},{id:"PzOdwIu2za",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.8327644733100117},{id:"twuSuqdNun",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.5466228003749212}]},XA7I2c_mMk:{type:"BasicKeyframedTrack",__debugName:'Camera:["position","y"]',keyframes:[{id:"LSoDFWdIwi",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.3602248718573322},{id:"dv9iYwcb9e",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.3767731662191397},{id:"Em222b5wjv",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.4401509163834244},{id:"d7YnkLEdNV",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.7400308220721565},{id:"EbCyo8gN36",position:1.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.7170137667342181},{id:"c7q39bfYvg",position:2.133,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.1987822319503287},{id:"L9fSXe2AaN",position:2.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.1939920937445814},{id:"50ZjUozlSj",position:3.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.0023015760286023},{id:"fVKe3Fx0Wx",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:2.8359411374739913},{id:"aCdVoAEd9E",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:2.1911315514000336}]},OXrC30ZgQa:{type:"BasicKeyframedTrack",__debugName:'Camera:["position","x"]',keyframes:[{id:"hPI0qDbasq",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:5.972393850542841},{id:"hUhLISxvPd",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:6.27209300985212},{id:"Up57mk5RHj",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:5.2919629618989905},{id:"QqKs-kEgsm",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:5.1515854491681345},{id:"JLr-YmM8LY",position:1.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:3.7343874515693534},{id:"Mm3c4_FT7w",position:2.133,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:3.0819773618096797},{id:"9Xv8HIhZK5",position:2.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.983077158131176},{id:"rhlKrQaWZh",position:3.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.7981180825040554},{id:"ytiOH33EtO",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-2.1583084863033317},{id:"AZfVsfnY6q",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.7659853630605222}]},kTgDGPHttB:{type:"BasicKeyframedTrack",__debugName:'Camera:["scale","x"]',keyframes:[{id:"9jCB-xavJV",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1},{id:"v81WwfaxwK",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1},{id:"FrbH4tK9VP",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1}]},r8RKijgjYE:{type:"BasicKeyframedTrack",__debugName:'Camera:["scale","y"]',keyframes:[{id:"G28LQFEbX5",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1},{id:"ajsfKrS9qr",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1},{id:"Euy6HkenST",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.04}]},n13tSGmqe6:{type:"BasicKeyframedTrack",__debugName:'Camera:["scale","z"]',keyframes:[{id:"wStsneiQxT",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1},{id:"3tmNWQqBVY",position:.833,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.8267379728648938},{id:"ERKdOsz_Jh",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.1800000000000002}]},"FzvgwHhGx-":{type:"BasicKeyframedTrack",__debugName:'Camera:["near"]',keyframes:[{id:"RfmhQcfLlg",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.1},{id:"ikEpV11VFS",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.1}]},b4UQk1rlOS:{type:"BasicKeyframedTrack",__debugName:'Camera:["far"]',keyframes:[{id:"3ibW56d-hD",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:70},{id:"fKQxt7I2zW",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:70}]},tXK0rMES7T:{type:"BasicKeyframedTrack",__debugName:'Camera:["fov"]',keyframes:[{id:"IPNoJxR2bV",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:40},{id:"qPqDJUdIqn",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:40},{id:"dogx-p1ISV",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:50}]},oO6klsjqAG:{type:"BasicKeyframedTrack",__debugName:'Camera:["zoom"]',keyframes:[{id:"TbWlo5XDFY",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1},{id:"IzuRPKYnvd",position:.367,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.2700000000000002},{id:"lM51OaaE2h",position:1.3,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.2700000000000002},{id:"fIKkjFs3F7",position:3.7,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.0001188749493095},{id:"iMFRF8O7gx",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1}]}},trackIdByPropPath:{'["rotation","z"]':"u5_1SRkyFn",'["rotation","y"]':"bB_cOPPYqL",'["rotation","x"]':"tzzU7BxATF",'["position","z"]':"Vmpt9vf3yw",'["position","y"]':"XA7I2c_mMk",'["position","x"]':"OXrC30ZgQa",'["scale","x"]':"kTgDGPHttB",'["scale","y"]':"r8RKijgjYE",'["scale","z"]':"n13tSGmqe6",'["near"]':"FzvgwHhGx-",'["far"]':"b4UQk1rlOS",'["fov"]':"tXK0rMES7T",'["zoom"]':"oO6klsjqAG"}}}}}},vee="0.4.0",yee=["JkOCqM0cE81gSJg6","sYWvE-2ybgbhCxzV","Y3k9r13Zv7sOEFU4","-OwWqn8pB96hnqzD","_2UTgsTMYTDwwSje"],_ee={sheetsById:gee,definitionVersion:vee,revisionHistory:yee};function xee(){const{progress:n}=lJ();return console.log(Math.ceil(n)),We.jsx(QO,{center:!0,children:We.jsxs("div",{className:"loading",children:[Math.ceil(n)," % carregado"]})})}function See(){const[n,e]=ee.useState(!0),[t,r]=ee.useState(!1),[i,s]=ee.useState(1),o=()=>{e(!1),s(-1)};return ee.useEffect(()=>{const a=setTimeout(()=>{r(!0)},2e3);return()=>clearTimeout(a)},[]),We.jsxs("div",{style:{background:"white",position:"fixed",zIndex:i,top:"0",right:"0",bottom:"0",left:"0",transition:"opacity 1s ease-in-out",opacity:n?1:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[We.jsx("img",{src:"logo.png",alt:"Logo",style:{width:"200px",position:"fixed",top:20,left:"50%",transform:"translateX(-50%)"}}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsxs("div",{style:{textAlign:"center",lineHeight:"1rem"},children:[We.jsx("h1",{style:{fontSize:"5rem"},children:"Legado Olmpico"}),We.jsx("h2",{children:"Texto introdutrio"})]}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),!t&&We.jsx("div",{className:"loader"}),t&&We.jsx("button",{onClick:o,style:{backgroundColor:"white",color:"black",padding:"15px 50px",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:"4px 2px",cursor:"pointer",borderRadius:"12px",border:"2px solid black"},children:"Tour 3D"}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("br",{}),We.jsx("h5",{children:"Produzido pelo Escritrio de Dados da Prefeitura da Cidade do Rio de Janeiro"})]})}function Aee(){const n=Sl.getProject("Fly Through",{state:_ee}).sheet("Scene");return We.jsxs(We.Fragment,{children:[We.jsx(See,{}),We.jsx(ZX,{gl:{preserveDrawingBuffer:!0},children:We.jsx(UJ,{pages:12,damping:.5,children:We.jsx(see,{sheet:n,children:We.jsx(ee.Suspense,{fallback:We.jsx(xee,{}),children:We.jsx(mee,{})})})})})]})}uM.createRoot(document.getElementById("root")).render(We.jsx(Aee,{}));
